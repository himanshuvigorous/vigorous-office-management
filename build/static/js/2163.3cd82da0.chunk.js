"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2163],{2163:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(89379),a=n(73216),i=n(83003),l=n(65043),r=n(30064),d=n.n(r),s=n(24858),c=n(78729),p=n(15187),u=n(60184),m=n(39160),h=n(23156),x=n(47196),v=n(31174),w=n(78227),j=n(735),b=n(65512),y=n(96651),f=n(4938),N=n(55971),g=n(86178),D=n.n(g),C=n(33007),A=n(31744),I=n(42837),k=n(58215),L=n(70579);const S=function(){const{canCreate:e,canRead:t,canUpdate:n,canDelete:r}=(0,f.A)(),{setValue:g,control:S}=(0,s.mN)(),{userCompanyId:T,userBranchId:O,userType:P}=(0,j.A)(),{visitorList:_,totalVisitorCount:Y,visitorGeneralList:V,loading:B}=(0,i.d4)(e=>e.visitor),{departmentListData:F}=(0,i.d4)(e=>e.department),{branchList:M}=(0,i.d4)(e=>e.branch),E=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))),{employeList:q}=(0,i.d4)(e=>e.employe),H=(0,a.Zp)(),z=(0,i.wA)(),[R,U]=(0,l.useState)(""),J=(0,s.FH)({control:S,name:"PDCompanyId",defaultValue:T}),G=(0,s.FH)({control:S,name:"PDBranchId",defaultValue:O}),W=(0,s.FH)({control:S,name:"PdDepartmentId",defaultValue:""}),Z=(0,s.FH)({control:S,name:"employee",defaultValue:""}),K=(0,s.FH)({control:S,name:"category",defaultValue:""});(0,l.useEffect)(()=>{"admin"===P&&z((0,c.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[Q,X]=(0,l.useState)(1);(0,l.useEffect)(()=>{$()},[Q,G,Z,W,K,R]);const $=()=>{const e={page:Q,limit:10,reqPayload:{companyId:J,branchId:G,directorId:"",category:"general",employeId:Z,departmentId:"",text:R,sort:!0,status:"",isPagination:!0}};z((0,k.Jc)(e))},ee=e=>{let t=(0,o.A)((0,o.A)({},e),{},{_id:null===e||void 0===e?void 0:e._id,checkOutTime:D()()});d().fire({title:"Warning",text:"Are you sure you want to checkout!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&z((0,k.o2)(t)).then(e=>{!e.error&&$()})})};return(0,L.jsxs)(m.A,{onChange:e=>{U(e)},children:[(0,L.jsx)("div",{className:"",children:(0,L.jsxs)("div",{class:"xl:flex justify-between items-center py-1 xl:space-y-0 space-y-2 overflow-y-auto",children:[(0,L.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 xl:grid-cols-4 lg:grid-cols-4 md:grid-cols-3 sm:gap-3 gap-1",children:[("admin"===(null===E||void 0===E?void 0:E.userType)||"company"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType))&&(0,L.jsx)("div",{className:"",children:(0,L.jsx)(s.xI,{control:S,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:t}=e;return(0,L.jsxs)(b.A,(0,o.A)((0,o.A)({},t),{},{defaultValue:"",onFocus:()=>{z((0,A.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?J:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId}))},className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(b.A.Option,{value:"",children:"Select Branch"}),null===M||void 0===M?void 0:M.map(e=>(0,L.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),(0,L.jsx)("div",{className:"",children:(0,L.jsx)(s.xI,{control:S,name:"PdDepartmentId",rules:{required:"Department is required"},render:e=>{let{field:t}=e;return(0,L.jsxs)(b.A,(0,o.A)((0,o.A)({},t),{},{defaultValue:"",onFocus:()=>{z((0,C.UU)({text:"",sort:!0,status:!0,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?J:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:G,isPagination:!1}))},className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(b.A.Option,{value:"",children:"Select Department"}),null===F||void 0===F?void 0:F.map(e=>(0,L.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,L.jsx)("div",{className:"",children:(0,L.jsx)(s.xI,{name:"employee",control:S,render:e=>{let{field:t}=e;return(0,L.jsxs)(b.A,(0,o.A)((0,o.A)({},t),{},{className:" ".concat(p.Lp," "),popupClassName:"!z-[1580]",placeholder:"Select Employee",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),optionLabelProp:"children",onFocus:()=>(()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,designationId:"",departmentId:"",companyId:J,branchId:G};z((0,I.qV)(e))})(),children:[(0,L.jsx)(b.A.Option,{value:"",children:"Select Employee"}),null===q||void 0===q?void 0:q.map(e=>(0,L.jsx)(b.A.Option,{value:e._id,children:e.fullName},e._id))]}))}})})]}),(0,L.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,L.jsx)("button",{onClick:()=>{g("employee",""),g("PDBranchId",""),g("PdDepartmentId",""),g("category",""),g("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Reset"})}),e&&(0,L.jsx)(y.A,{placement:"topLeft",title:"Add Visitor",children:(0,L.jsxs)("button",{onClick:()=>{H("/admin/general-client-visitor/create")},className:"bg-header p-2 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,L.jsx)(u.OiG,{}),(0,L.jsx)("span",{className:"text-[12px] text-nowrap tracking-wide",children:"Add Visitor"})]})})]})]})}),(0,L.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:t&&(0,L.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,L.jsx)("thead",{className:"",children:(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[8%]",children:"S.no."}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Visitor Name"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Category type"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Mobile Number"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Contact Person"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Reason"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Start Time"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"End Time"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Check In Time"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Check Out Time"}),(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(r||n)&&(0,L.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[8%]",children:"Action"})]})}),B?(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,L.jsx)(N.A,{})})}):(0,L.jsx)("tbody",{children:V&&(null===V||void 0===V?void 0:V.length)>0?null===V||void 0===V?void 0:V.map((e,t)=>{var o,a,i,l,s,c;return(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(Q-1)}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"-"}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e?void 0:e.category)&&void 0!==a?a:"-"}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(null===e||void 0===e||null===(i=e.mobile)||void 0===i?void 0:i.code)+" "+(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.number)||"-"}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,L.jsx)("div",{className:"  flex items-center justify-center",children:null===e||void 0===e||null===(s=e.employeData)||void 0===s?void 0:s.map((e,t)=>(0,L.jsx)(y.A,{placement:"topLeft",title:null===e||void 0===e?void 0:e.fullName,children:(0,L.jsx)("img",{alt:"",src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e.profileImage),className:"w-10 h-10 ".concat(t>0?" -ml-2":"0"," rounded-full bg-gray-500 flex items-center justify-center")},t)}),[])})}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(c=null===e||void 0===e?void 0:e.reason)&&void 0!==c?c:"-"}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==e&&void 0!==e&&e.timeDurationStart?D()(null===e||void 0===e?void 0:e.timeDurationStart).format("DD-MM-YYYY hh:mm a"):"-"}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==e&&void 0!==e&&e.timeDurationEnd?D()(null===e||void 0===e?void 0:e.timeDurationEnd).format("DD-MM-YYYY hh:mm a"):(0,L.jsx)(y.A,{placement:"topLeft",title:"Checkout",children:(0,L.jsx)("button",{onClick:()=>{ee(e)},className:"px-2 py-1.5 text-xs rounded-md bg-header text-white border border-muted",type:"button",children:"CheckOut"})})}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==e&&void 0!==e&&e.checkInTime?D()(null===e||void 0===e?void 0:e.checkInTime).format("DD-MM-YYYY hh:mm a"):"-"}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==e&&void 0!==e&&e.checkOutTime?D()(null===e||void 0===e?void 0:e.checkOutTime).format("DD-MM-YYYY hh:mm a"):(0,L.jsx)(y.A,{placement:"topLeft",title:"Checkout",children:(0,L.jsx)("button",{onClick:()=>{ee(e)},className:"px-2 py-1.5 text-xs rounded-md bg-header text-white border border-muted",type:"button",children:"CheckOut"})})}),(0,L.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(r||n)&&(0,L.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,L.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[n&&(0,L.jsx)(y.A,{placement:"topLeft",title:"Edit",children:(0,L.jsx)("button",{onClick:()=>{H("/admin/general-client-visitor/edit/".concat((0,v.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(h.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),r&&(0,L.jsx)(y.A,{placement:"topLeft",title:"Delete",children:(0,L.jsx)("button",{onClick:()=>(e=>{let t={_id:e};d().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&z((0,k.sn)(t)).then(e=>{!e.error&&$()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(x.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:4,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===_||void 0===_?void 0:_.length)>0&&(0,L.jsx)(w.A,{totalCount:Y,pageSize:10,currentPage:Q,onChange:e=>{X(e)}})]})}}}]);
//# sourceMappingURL=2163.3cd82da0.chunk.js.map