"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1559],{21559:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(89379),o=n(24858),l=n(83003),i=n(15187),r=n(65043),s=n(31744),d=n(39160),c=n(97326),u=n(53913),p=n(65512),m=(n(86178),n(60446)),h=n.n(m),v=n(78227),x=n(12106),f=(n(42837),n(94084),n(69223)),y=n(55971),b=(n(50822),n(6720)),g=n(37762),w=n(64857),N=(n(11906),n(33007),n(89427),n(70337),n(40088),n(12208),n(60184)),j=(n(27744),n(17995),n(76932),n(487)),D=n(35475),S=n(70579);const{RangePicker:T}=j.A;const I=function(){var e,t,n,m;const{control:T,formState:{errors:I},setValue:C,watch:Y}=(0,o.mN)(),{RangePicker:k}=j.A,A=e=>{},[G,F]=(0,r.useState)(10),P=(0,l.wA)(),{clientInvoiceReportList:z,clientInvoiceReportFunc_loading:R,clientInvoiceReportCount:M}=(0,l.d4)(e=>e.reports),{departmentListData:E,loading:L}=(0,l.d4)(e=>e.department),[V,H]=(0,r.useState)(!1),[O,_]=(0,r.useState)({}),[B,U]=(0,r.useState)({}),{taskTypeList:W}=(0,l.d4)(e=>e.taskType),{clientGroupList:q}=(0,l.d4)(e=>e.clientGroup),{clientList:J}=(0,l.d4)(e=>e.client),{employeList:K}=(0,l.d4)(e=>e.employe),[X,Q]=(0,r.useState)(""),Z=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),{industryListData:$,indusSearchloading:ee}=(0,l.d4)(e=>e.industry),{orgTypeList:te,orgSearchloading:ne}=(0,l.d4)(e=>e.orgType),[ae,oe]=(0,r.useState)(1),[le,ie]=(0,r.useState)(""),{branchList:re}=(0,l.d4)(e=>e.branch),se=(0,o.FH)({control:T,name:"PDCompanyId",defaultValue:""}),de=(0,o.FH)({control:T,name:"PDBranchId",defaultValue:""}),ce=(0,o.FH)({control:T,name:"status",defaultValue:""}),ue=(0,o.FH)({control:T,name:"PDOrganizationType",defaultValue:""}),pe=(0,o.FH)({control:T,name:"PDindustrytype",defaultValue:""}),me=(0,o.FH)({control:T,name:"department",defaultValue:""}),he=(0,o.FH)({control:T,name:"groupName",defaultValue:""}),ve=(0,o.FH)({control:T,name:"time",defaultValue:[]}),[xe,fe]=(0,D.ok)(),ye=xe.get("month")?{january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12}[null===(be=xe.get("month"))||void 0===be?void 0:be.toLowerCase()]||null:null;var be;const ge=xe.get("year")?+xe.get("year"):null,we=xe.get("fromDashboard")?xe.get("fromDashboard"):null,Ne=function(e,t){return e&&t?{firstDate:h()("".concat(t,"-").concat(e,"-01")).startOf("month").format("YYYY-MM-DD"),lastDate:h()("".concat(t,"-").concat(e,"-01")).endOf("month").format("YYYY-MM-DD")}:{firstDate:null,lastDate:null}}(ye,ge);(0,r.useEffect)(()=>{const e=setTimeout(()=>{ie(X)},500);return()=>{clearTimeout(e)}},[X]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})(),(0,r.useEffect)(()=>{"dashboard"==we?C("time",[h()(null===Ne||void 0===Ne?void 0:Ne.firstDate),h()(null===Ne||void 0===Ne?void 0:Ne.lastDate)]):je(le)},[ae,le,G]),(0,r.useEffect)(()=>{"dashboard"==we&&ve[0]&&ve[1]&&je(le)},[ae,le,G,ve]);const je=()=>{P((0,x.Xd)(function(){return{currentPage:ae,pageSize:G,reqPayload:{text:le,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===Z||void 0===Z?void 0:Z.userType)?se:"company"===(null===Z||void 0===Z?void 0:Z.userType)?null===Z||void 0===Z?void 0:Z._id:null===Z||void 0===Z?void 0:Z.companyId,directorId:"",branchId:"company"===(null===Z||void 0===Z?void 0:Z.userType)||"admin"===(null===Z||void 0===Z?void 0:Z.userType)||"companyDirector"===(null===Z||void 0===Z?void 0:Z.userType)?de:"companyBranch"===(null===Z||void 0===Z?void 0:Z.userType)?null===Z||void 0===Z?void 0:Z._id:null===Z||void 0===Z?void 0:Z.branchId,status:"true"==ce||"false"!=ce&&"",organizationId:ue,organizationIds:[],departmentId:me,departmentIds:[],industryId:pe,industryIds:[],groupId:he,groupIds:[],startDate:ve.length>0?h()(ve[0]).format("YYYY-MM-DD"):"",endDate:ve.length>0?h()(ve[1]).format("YYYY-MM-DD"):""}}}(!0)))},[De,Se]=(0,r.useState)(!1);(0,r.useEffect)(()=>{"company"!==(null===Z||void 0===Z?void 0:Z.userType)&&"companyDirector"!==(null===Z||void 0===Z?void 0:Z.userType)||P((0,s.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===Z||void 0===Z?void 0:Z.userType)?se:"company"===(null===Z||void 0===Z?void 0:Z.userType)?null===Z||void 0===Z?void 0:Z._id:null===Z||void 0===Z?void 0:Z.companyId})),C("startDate",h()().subtract(1,"month")),C("endDate",h()())},[]);const Te=async()=>{je()},Ie=[{key:"1",label:(0,S.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,S.jsxs)("div",{className:"bg-[#ececec] space-y-1 sm:flex justify-between items-center",children:[(0,S.jsx)("div",{className:"",children:(0,S.jsx)(o.xI,{name:"time",control:T,render:e=>{let{field:t}=e;return(0,S.jsx)(k,(0,a.A)((0,a.A)({},t),{},{value:t.value,onChange:e=>t.onChange(e),format:"YYYY-MM-DD",onOk:A,getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"}))}})}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{C("PDCompanyId",""),C("PDBranchId",""),C("status",""),C("PDOrganizationType",""),C("PDindustrytype",""),C("department",""),C("groupName",""),C("time",""),Te()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,S.jsx)("button",{onClick:()=>{Te()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,S.jsx)(d.A,{onChange:e=>{Q(e)},children:(0,S.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)(c.A,{className:"custom-collapse",items:Ie,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,S.jsx)(b.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,S.jsx)("div",{className:"space-y-1.5 flex justify-between items-center",children:(0,S.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,S.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,S.jsx)(p.A,{id:"pageSize",value:G,onChange:e=>{F(Number(e)),oe(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,S.jsx)(p.A.Option,{value:e,children:e},e))})]})})]}),(0,S.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Group Name"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Name"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Invoice"})]})}),R?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,S.jsx)(y.A,{})})}):(0,S.jsx)("tbody",{children:z&&(null===z||void 0===z?void 0:z.length)>0?null===z||void 0===z?void 0:z.map((e,t)=>{var n;return(0,S.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(ae-1)*G}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.groupName)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.fullName)||"-"}),(0,S.jsx)("td",{className:"tableData ",children:(0,S.jsxs)("div",{className:"flex justify-center items-center gap-1",children:[(0,S.jsx)("span",{children:null===e||void 0===e||null===(n=e.advanceData)||void 0===n?void 0:n.length}),(0,S.jsx)("span",{className:"flex justify-center items-center cursor-pointer",children:(0,S.jsx)(N.Ny1,{onClick:()=>(e=>{H(!0),_(e)})(e),className:" hover:text-[#337ab7] text-[#3c8dbc]",size:14})})]})||"-"})]})}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,S.jsxs)(u.A,{className:"antmodalclassName !w-[60%] !h-[50%]",title:"Invoice List / ".concat(null===O||void 0===O?void 0:O.fullName," "),open:V,onCancel:()=>H(!1),footer:null,children:[(0,S.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,S.jsxs)("div",{children:[null!==(e=null===O||void 0===O?void 0:O.email)&&void 0!==e?e:"-"," /"," ",(null===O||void 0===O||null===(t=O.mobile)||void 0===t?void 0:t.code)+(null===O||void 0===O||null===(n=O.mobile)||void 0===n?void 0:n.number)]})}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{(async()=>{var e;const t=new g.uE({orientation:"landscape",unit:"pt"});if(t.setFontSize(16),!O&&(null===O||void 0===O||!O.invoiceData))return;const n=null===O||void 0===O||null===(e=O.invoiceData)||void 0===e?void 0:e.map((e,t)=>[t+1,h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"),(null===e||void 0===e?void 0:e.invoiceNumber)||"-",(null===e||void 0===e?void 0:e.CGST)||"-",(null===e||void 0===e?void 0:e.IGST)||"-",(null===e||void 0===e?void 0:e.SGST)||"-",(null===e||void 0===e?void 0:e.grandTotal)||"-"]);(0,w.Ay)(t,{startY:40,head:[["S.No.","Date of Entry","Invoice Number","CGST","IGST","SGST","Amount"]],body:n,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),t.save("clientInvoiceReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,S.jsx)("button",{onClick:()=>{(async()=>{var e;const t=new f.Workbook,n=t.addWorksheet("clientInvoiceReport");if(n.columns=[{header:"S.No.",key:"sno"},{header:"Date of Entry",key:"createdAt"},{header:"Invoice Number",key:"invoiceNumber"},{header:"CGST",key:"CGST"},{header:"IGST",key:"IGST"},{header:"SGST",key:"SGST"},{header:"Amount",key:"grandTotal"}],n.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),!O&&(null===O||void 0===O||!O.invoiceData))return;const a=null===O||void 0===O||null===(e=O.invoiceData)||void 0===e?void 0:e.map((e,t)=>({sno:t+1,createdAt:h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"),invoiceNumber:(null===e||void 0===e?void 0:e.invoiceNumber)||"-",CGST:(null===e||void 0===e?void 0:e.CGST)||"-",IGST:(null===e||void 0===e?void 0:e.IGST)||"-",SGST:(null===e||void 0===e?void 0:e.SGST)||"-",grandTotal:(null===e||void 0===e?void 0:e.grandTotal)||"-"}));null===a||void 0===a||a.forEach(e=>{n.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),n.autoFilter={from:"A1",to:"I1"},t.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="clientInvoiceReport.xlsx",n.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]}),(0,S.jsx)("div",{className:"w-full overflow-auto",children:(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Date of Entry"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"invoiceNumber"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"CGST"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"IGST"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"SGST"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Amount"})]})}),(0,S.jsx)("tbody",{children:null!==O&&void 0!==O&&O.invoiceData&&(null===O||void 0===O?void 0:O.invoiceData.length)>0?null===O||void 0===O||null===(m=O.invoiceData)||void 0===m?void 0:m.map((e,t)=>(0,S.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(ae-1)*G}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.invoiceNumber)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,i.w2)(null===e||void 0===e?void 0:e.CGST)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,i.w2)(null===e||void 0===e?void 0:e.IGST)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,i.w2)(null===e||void 0===e?void 0:e.SGST)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,i.w2)(null===e||void 0===e?void 0:e.grandTotal)||"-"})]})):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})]})]}),(0,S.jsx)(v.A,{totalCount:M,pageSize:G,currentPage:ae,onChange:e=>{oe(e)}})]})})}}}]);
//# sourceMappingURL=1559.835bb63d.chunk.js.map