"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9383],{21299:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(53913),l=a(96651),n=a(65043),d=a(60184),c=a(45394),i=a(3825),o=a(60446),r=a.n(o),x=a(29542),m=a(23156),h=a(70579);const p=e=>{var t,a,o,p,u,v;let{viewOpen:j,setViewOpen:N,projectpurchaseExpenceDetails:g}=e;const[b,f]=(0,n.useState)({isOpen:!1,data:{},projectpurchaseExpence:{}}),y=e=>e.toLowerCase().endsWith(".pdf"),w=e=>[".jpg",".jpeg",".png",".gif",".webp",".bmp",".tiff"].some(t=>e.toLowerCase().endsWith(t));return(0,h.jsxs)("div",{children:[(0,h.jsx)(s.A,{className:"antmodalclassName",title:"Attached Docs\tFor ".concat(null===b||void 0===b||null===(t=b.data)||void 0===t||null===(a=t.vendorData)||void 0===a?void 0:a.fullName),width:1e3,footer:!1,open:b.isOpen,onOk:()=>f({open:!1,data:{}}),onCancel:()=>f({open:!1,data:{}}),children:(0,h.jsxs)("table",{className:"w-full max-w-full rounded-xl",children:[(0,h.jsx)("thead",{}),(0,h.jsx)("tbody",{children:(0,h.jsx)("tr",{children:(0,h.jsx)("td",{className:"tableData",children:(0,h.jsx)("div",{className:"flex flex-col space-y-4",children:null!==b&&void 0!==b&&null!==(o=b.data)&&void 0!==o&&o.attachment&&Array.isArray(null===b||void 0===b||null===(p=b.data)||void 0===p?void 0:p.attachment)?b.data.attachment.map((e,t)=>{const a="".concat("https://vigapi.vigorousit.com","/public/").concat(e);return w(e)?(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("p",{className:"font-[500] text-[12px] text-black",children:["(",t+1,")"]}),(0,h.jsx)(x.A,{src:a,alt:"Uploaded ".concat(t+1)})]},t):y(e)?(0,h.jsx)(l.A,{placement:"topLeft",title:"PDF Attachment ".concat(t+1),children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("p",{className:"font-[500] text-[12px] text-black",children:["(",t+1,")"]}),(0,h.jsx)("button",{onClick:()=>window.open(a,"_blank"),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted hover:border-gray-800",type:"button",children:(0,h.jsx)(d.kl1,{className:"text-red-600 hover:text-red-700",size:26})})]})},t):null}):null!==b&&void 0!==b&&null!==(u=b.data)&&void 0!==u&&u.attachment?(()=>{const e=b.data.attachment,t="".concat("https://vigapi.vigorousit.com","/public/").concat(e);return w(e)?(0,h.jsx)(x.A,{src:t,alt:"Uploaded Image"}):y(e)?(0,h.jsx)(l.A,{placement:"topLeft",title:"PDF Attachment",children:(0,h.jsx)("button",{onClick:()=>window.open(t,"_blank"),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted hover:border-gray-800",type:"button",children:(0,h.jsx)(d.kl1,{className:"text-red-600 hover:text-red-700",size:26})})}):null})():(0,h.jsx)("span",{className:"text-gray-600 text-sm text-center",children:"No File Attached"})})})})})]})}),(0,h.jsx)(s.A,{className:"antmodalclassName",visible:j,onCancel:()=>N(!1),footer:null,title:!1,width:1200,height:600,children:(0,h.jsx)("div",{className:"w-full overflow-auto",children:(0,h.jsxs)("table",{className:"w-full  rounded-lg shadow-md overflow-hidden bg-white",children:[(0,h.jsx)("thead",{children:(0,h.jsx)("tr",{children:(0,h.jsx)("th",{className:"text-header ",children:(0,h.jsx)("div",{className:"mt-2 ml-2",children:"Purchase Expanse Details"})})})}),(0,h.jsxs)("tbody",{className:"text-sm text-gray-700",children:[(0,h.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,h.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(i.cC2,{className:"size-4 text-header text-lg"}),(0,h.jsx)("span",{className:"text-[16px] font-medium",children:"purchaseDate"})]}),(0,h.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:r()(null===g||void 0===g?void 0:g.date).format("DD-MM-YYYY")||"N/A"})]}),(0,h.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(c.sLb,{className:"size-4 text-header text-lg"}),(0,h.jsx)("span",{className:"text-[16px] font-medium",children:"vendor Name"})]}),(0,h.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===g||void 0===g?void 0:g.vendorName)||"N/A"})]})]}),(0,h.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,h.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(m._tP,{className:"size-4 text-header text-lg"}),(0,h.jsx)("span",{className:"text-[16px] font-medium",children:"Total Amount"})]}),(0,h.jsxs)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:[(null===g||void 0===g?void 0:g.totalAmount)||"N/A"," Rs"]})]}),(0,h.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(c.sLb,{className:"size-4 text-header text-lg"}),(0,h.jsx)("span",{className:"text-[16px] font-medium",children:"Expence Head"})]}),(0,h.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===g||void 0===g?void 0:g.expenseHeadName)||"N/A"})]})]}),(0,h.jsx)("tr",{className:" hover:bg-indigo-50",children:(0,h.jsx)("td",{className:"p-3  text-gray-600",children:(0,h.jsx)("div",{className:"flex flex-col justify-start items-start gap-2",children:(0,h.jsxs)("span",{onClick:()=>{var e;return(null===g||void 0===g||null===(e=g.attachment)||void 0===e?void 0:e.length)>0&&f({isOpen:!0,data:g,purchaseExpence:{}})},className:"flex items-center ".concat((null===g||void 0===g||null===(v=g.attachment)||void 0===v?void 0:v.length)>0?"text-rose-700 hover:text-rose-700":"text-gray-400 cursor-not-allowed"),children:[(0,h.jsx)(d.kQE,{className:"mr-2",size:16}),"View Document"]})})})})]})]})})})]})}},99383:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s=a(65043),l=a(39160),n=a(73216),d=a(35475),c=a(83003),i=(a(31174),a(23156)),o=a(78227),r=a(15187),x=a(31744),m=a(78729),h=a(86178),p=a.n(h),u=a(65512),v=a(96651),j=a(4938),N=a(55971),g=a(60184),b=a(71923),f=a(21299),y=a(89427),w=a(70579);const A=function(){const{canCreate:e,canRead:t,canUpdate:a,canDelete:h}=(0,j.A)(),[A,D]=(0,s.useState)(!1),k=(0,n.Zp)(),C=(0,c.wA)(),{projectpurchaseExpenceListData:S,projectpurchaseExpenceDetails:O,totalprojectpurchaseExpenceListCount:E,loading:L}=(0,c.d4)(e=>e.projectpurchaseExpence),P=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),{branchList:T,branchListloading:_}=(0,c.d4)(e=>e.branch),[H,I]=(0,d.ok)(),z=parseInt(H.get("page"))||1,Y=H.get("branchId")||"",V=H.get("status")||"",[F,R]=(0,s.useState)(z),[U,M]=(0,s.useState)(10),[B,W]=(0,s.useState)(V),[q,G]=(0,s.useState)(""),[J,Q]=(0,s.useState)(Y);(0,s.useEffect)(()=>{const e=new URLSearchParams;F>1&&e.set("page",F),J&&e.set("branchId",J),B&&e.set("status",B),I(e)},[F,U,J,B,q]),(0,s.useEffect)(()=>{Z()},[F,U,J,B,q]);const Z=()=>{const e={currentPage:F,pageSize:U,reqData:{directorId:"",companyId:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?J:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,text:q,sort:!0,status:B,isPagination:!0}};C((0,b.a$)(e))};return(0,s.useEffect)(()=>{"company"!==(null===P||void 0===P?void 0:P.userType)&&"companyDirector"!==(null===P||void 0===P?void 0:P.userType)||C((0,x.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId}))},[]),(0,s.useEffect)(()=>{"admin"===(null===P||void 0===P?void 0:P.userType)&&C((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,w.jsx)(l.A,{onChange:e=>{G(e)},children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"",children:(0,w.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,w.jsxs)("div",{className:"grid grid-cols-1 md:gap-2 gap-1 md:grid-cols-3 items-center",children:[("admin"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&(0,w.jsx)("div",{className:"",children:(0,w.jsxs)(u.A,{value:J,onChange:e=>{Q(e),R(1)},defaultValue:"",disabled:L,className:"".concat(r.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,w.jsx)(u.A.Option,{value:"",children:"Select Branch"}),_?(0,w.jsx)(u.A.Option,{disabled:!0,children:(0,w.jsx)(y.A,{})}):null===T||void 0===T?void 0:T.map(e=>(0,w.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,w.jsx)("div",{className:"",children:(0,w.jsxs)(u.A,{value:B,onChange:e=>{W(e),R(1)},disabled:L,className:"".concat(r.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,w.jsx)(u.A.Option,{value:"",children:"Select Status"}),(0,w.jsx)(u.A.Option,{value:"Draft",children:"Draft"}),(0,w.jsx)(u.A.Option,{value:"Pending",children:"Pending"}),(0,w.jsx)(u.A.Option,{value:"Paid",children:"Paid"})]})})]}),(0,w.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,w.jsx)("button",{onClick:()=>{R(1),Q(""),W(""),G("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,w.jsx)("span",{className:"text-[12px]",children:"Reset"})}),e&&(0,w.jsx)(v.A,{placement:"topLeft",title:"Add Purchase Expense",children:(0,w.jsxs)("button",{onClick:()=>{k("/admin/project-purchase-and-expence/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,w.jsx)(i.OiG,{}),(0,w.jsx)("span",{className:"text-[12px]",children:"Add Purchase Expense"})]})})]})]})}),(0,w.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:t&&(0,w.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,w.jsx)("thead",{className:"",children:(0,w.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,w.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,w.jsx)("th",{className:"tableHead w-[10%]",children:"Date Of Entry"}),(0,w.jsx)("th",{className:"tableHead",children:"Bill Date"}),(0,w.jsx)("th",{className:"tableHead",children:"Vendor Name"}),(0,w.jsx)("th",{className:"tableHead",children:"Expense Head"}),(0,w.jsx)("th",{className:"tableHead",children:"Accountant"}),(0,w.jsx)("th",{className:"tableHead",children:"Amount"}),(h||a)&&(0,w.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),L?(0,w.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,w.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,w.jsx)(N.A,{})})}):(0,w.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.length)>0?null===S||void 0===S?void 0:S.map((e,t)=>{var s;return(0,w.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,w.jsx)("td",{className:"tableData",children:t+1+(F-1)*U}),(0,w.jsx)("td",{className:"tableData",children:null!==e&&void 0!==e&&e.createdAt?(0,r.Tk)(null===e||void 0===e?void 0:e.createdAt):"-"}),(0,w.jsx)("td",{className:"tableData",children:null===(s=p()(null===e||void 0===e?void 0:e.date))||void 0===s?void 0:s.format("DD-MM-YYYY")}),(0,w.jsx)("td",{className:"tableData",children:(0,w.jsx)(v.A,{placement:"topLeft",title:"Vendor Name - ".concat(null===e||void 0===e?void 0:e.vendorName),children:null!==e&&void 0!==e&&e.vendorName?"    ".concat(null===e||void 0===e?void 0:e.vendorName):"".concat((null===e||void 0===e?void 0:e.vendorOtherName)||"-"," ")})}),(0,w.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.expenseHeadName}),(0,w.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.userName}),(0,w.jsx)("td",{className:"tableData",children:(0,r.w2)(null!==e&&void 0!==e&&e.totalAmount?null===e||void 0===e?void 0:e.totalAmount:"-")}),(h||a)&&(0,w.jsx)("td",{className:"tableData",children:(0,w.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:(0,w.jsx)(v.A,{placement:"topLeft",title:"View Details",children:(0,w.jsx)("button",{onClick:()=>{(e=>{C((0,b.El)({_id:null===e||void 0===e?void 0:e._id})),D(!0)})(e)},className:"px-2 py-2 text-xs rounded-md bg-transparent text-header border border-muted",type:"button",children:(0,w.jsx)(g.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]"})})})})})]})}):(0,w.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,w.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===S||void 0===S?void 0:S.length)>0&&(0,w.jsx)(o.A,{totalCount:E,pageSize:U,currentPage:F,onChange:e=>R(e)}),(0,w.jsx)(f.A,{setViewOpen:D,viewOpen:A,projectpurchaseExpenceDetails:O})]})})}}}]);
//# sourceMappingURL=9383.275e4354.chunk.js.map