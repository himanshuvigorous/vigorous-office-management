"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8773],{28773:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var s=t(65043),l=t(39160),n=t(73216),d=t(35475),i=t(83003),c=t(23156),o=t(78227),r=t(15187),p=t(31744),x=t(78729),u=t(53913),m=t(96651),h=(t(31174),t(31462)),v=t(86178),b=t.n(v),j=(t(30064),t(69132)),y=t(70579);const f=function(e){var a,t;let{isModalOpen:l,onClose:n,getadvancerequest:d,advanceListData:c}=e;const[o,p]=(0,s.useState)([]);return(0,i.wA)(),(0,s.useEffect)(()=>{const e=null===c||void 0===c?void 0:c.find(e=>{var a;return(null===e||void 0===e?void 0:e._id)===(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a._id)});p(null===e||void 0===e?void 0:e.alltransections)},[c]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(u.A,{className:"antmodalclassName",width:1e3,footer:!1,title:"".concat(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.groupName," (").concat(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.groupUserName,") Transactions"),open:!0,onOk:()=>{n()},onCancel:()=>{n()},children:(0,y.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,y.jsx)("thead",{className:"",children:(0,y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,y.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,y.jsx)("th",{className:"p-2 whitespace-nowrap",children:"payment Type"}),(0,y.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Amount"}),(0,y.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Date"}),(0,y.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),(0,y.jsx)("tbody",{children:o&&(null===o||void 0===o?void 0:o.length)>0?null===o||void 0===o?void 0:o.map((e,a)=>(0,y.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,y.jsx)("td",{className:"whitespace-nowrap p-2",children:a+1}),(0,y.jsx)("td",{className:"whitespace-nowrap p-2",children:"deduction"===(null===e||void 0===e?void 0:e.paymentType)?(0,y.jsx)("span",{className:"bg-red-200 border-red-500".concat(" border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null===e||void 0===e?void 0:e.paymentType}):(0,y.jsx)("span",{className:"bg-[#E0FFBE] border-green-500".concat(" border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null===e||void 0===e?void 0:e.paymentType})}),(0,y.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,r.w2)((null===e||void 0===e?void 0:e.amount)||"-")}),(0,y.jsx)("td",{className:"whitespace-nowrap p-2",children:b()(null===e||void 0===e?void 0:e.date).format("DD/MM/YYYY")}),(0,y.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,y.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:(0,y.jsx)(m.A,{placement:"topLeft",title:"View",children:(0,y.jsx)("button",{onClick:()=>{if(null!==e&&void 0!==e&&e.receiptPDFPath){const a="".concat("https://vigapi.vigorousit.com","/public").concat(null===e||void 0===e?void 0:e.receiptPDFPath),t=document.createElement("a");t.href=a,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,y.jsx)(h.msf,{className:" text-rose-700",size:16})})})})})]})):(0,y.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,y.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})})};var N=t(4938),g=t(65512),w=t(30326),D=t(55971),A=t(89427),C=t(83002),k=t(32620),S=t(60397),T=t(60446),L=t.n(T);const O=function(){const e=(0,n.Zp)(),a=(0,i.wA)(),{advanceListData:t,totaladvanceListCount:u,loading:h}=(0,i.d4)(e=>e.advance),[v,T]=(0,s.useState)({isOpen:!1,data:null,type:null}),O=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),{branchList:_,branchListloading:Y}=(0,i.d4)(e=>e.branch),[I,P]=(0,d.ok)(),M=parseInt(I.get("page"))||1,z=I.get("branchId")||"",[E,F]=(0,s.useState)(M),[H,B]=(0,s.useState)(10),[U,R]=(0,s.useState)(""),[q,G]=(0,s.useState)(z);(0,s.useEffect)(()=>{const e=new URLSearchParams;E>1&&e.set("page",E),q&&e.set("branchId",q),P(e)},[E,H,q,U]),(0,s.useEffect)(()=>{V()},[E,H,q,U]);const V=()=>{const e={currentPage:E,pageSize:H,reqData:{directorId:"",companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:"company"===(null===O||void 0===O?void 0:O.userType)||"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)?q:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,text:U,type:"",sort:!0,status:"",isPagination:!0}};a((0,j.pv)(e))};(0,s.useEffect)(()=>{"company"!==(null===O||void 0===O?void 0:O.userType)&&"companyDirector"!==(null===O||void 0===O?void 0:O.userType)||a((0,p.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId}))},[]),(0,s.useEffect)(()=>{"admin"===(null===O||void 0===O?void 0:O.userType)&&a((0,x.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:W,canRead:J,canUpdate:X,canDelete:Z}=(0,N.A)();return(0,y.jsx)(l.A,{onChange:e=>{R(e)},children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"",children:(0,y.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,y.jsx)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:("admin"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&(0,y.jsx)("div",{className:"",children:(0,y.jsxs)(g.A,{value:q,onChange:e=>{G(e),F(1)},defaultValue:"",disabled:h,className:"".concat(r.Lp," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(g.A.Option,{value:"",children:"Select Branch"}),Y?(0,y.jsx)(g.A.Option,{disabled:!0,children:(0,y.jsx)(A.A,{})}):null===_||void 0===_?void 0:_.map(e=>(0,y.jsx)(g.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})})}),(0,y.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,y.jsx)("button",{onClick:()=>{F(1),G(""),R("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,y.jsx)("span",{className:"text-[12px]",children:"Reset"})}),W&&(0,y.jsx)(m.A,{placement:"topLeft",title:"Add Advance",children:(0,y.jsxs)("button",{onClick:()=>{e("/admin/advance/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,y.jsx)(c.OiG,{}),(0,y.jsx)("span",{className:"text-[12px]",children:"Add Advance"})]})})]})]})}),(0,y.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:J&&(0,y.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,y.jsx)("thead",{className:"",children:(0,y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,y.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,y.jsx)("th",{className:"tableHead",children:"Group Name"}),(0,y.jsx)("th",{className:"tableHead",children:"Group User Name"}),(0,y.jsx)("th",{className:"tableHead",children:"Amount"}),(0,y.jsx)("th",{className:"tableHead",children:"Date"}),(0,y.jsx)("th",{className:"tableHead",children:"Transactions"}),(0,y.jsx)("th",{className:"tableHead",children:"Action"})]})}),h?(0,y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,y.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,y.jsx)(D.A,{})})}):(0,y.jsx)("tbody",{children:t&&(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map((e,a)=>(0,y.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,y.jsx)("td",{className:"tableData",children:a+1+(E-1)*H}),(0,y.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.groupName)||"-"}),(0,y.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.groupUserName)||"-"}),(0,y.jsx)("td",{className:"tableData",children:(0,r.w2)((null===e||void 0===e?void 0:e.availableBalance)||"-")}),(0,y.jsx)("td",{className:"tableData",children:b()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY hh:mm a")||"-"}),J&&(0,y.jsx)("td",{className:"tableData",children:(0,y.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:J&&(0,y.jsx)("button",{onClick:()=>{T({isOpen:!0,data:e,type:"up"})},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,y.jsx)("span",{className:" hover:text-cyan-600 text-header",children:"View List"})})})}),(0,y.jsx)("td",{className:"tableData",children:(0,y.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:(0,y.jsx)(m.A,{placement:"topLeft",title:"More Actions",children:(0,y.jsx)(w.A,{menu:{items:[{key:"created-at",label:(0,y.jsxs)("span",{onClick:()=>(0,r.v2)(L()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"Data not available"),className:"flex items-center text-teal-800 hover:text-teal-700",children:[(0,y.jsx)(k.Wv9,{className:"mr-2",size:16}),"Created At"]})},{key:"created-by",label:(0,y.jsxs)("span",{onClick:()=>(0,r.v2)((null===e||void 0===e?void 0:e.createdBy)||"Data not available"),className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,y.jsx)(S.cCX,{className:"mr-2",size:16}),"Created By"]})}]},trigger:["click"],children:(0,y.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,y.jsx)(C.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})})]})):(0,y.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,y.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===v||void 0===v?void 0:v.isOpen)&&(0,y.jsx)(f,{isModalOpen:v,getadvancerequest:V,advanceListData:t,onClose:()=>T({isOpen:!1,_id:null,type:null})}),(null===t||void 0===t?void 0:t.length)>0&&(0,y.jsx)(o.A,{totalCount:u,pageSize:H,currentPage:E,onChange:e=>F(e)})]})})}}}]);
//# sourceMappingURL=8773.10935249.chunk.js.map