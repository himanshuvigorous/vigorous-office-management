"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[902],{54555:(e,t,l)=>{l.d(t,{A:()=>v});var a=l(89379),n=l(65043),i=l(92823),o=l.n(i),s=(l(25884),l(60184)),d=l(83003),r=l(88967),c=l(86178),u=l.n(c),m=l(15187),p=l(53913),h=l(70579);const v=e=>{let{isOpen:t,onClose:l,onSubmit:i,proposalData:c,setProposalId:v}=e;const[x,g]=(0,n.useState)({to:"",cc:[],subject:"Regarding Proposal",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),[f,y]=(0,n.useState)(!1),[b,j]=(0,n.useState)(""),N=(0,d.wA)();(0,n.useEffect)(()=>{if(g({to:"",cc:[],subject:"Regarding Proposal",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),c){var e,t,l,n;g(e=>(0,a.A)((0,a.A)({},e),{},{to:null===c||void 0===c?void 0:c.email}));const i='<div class="space-y-4 '.concat("text-gray-600",'">\n         <div style="width: 80%; margin: 0 auto; padding: 20px; background-color: #ffffff; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">\n        <h1 style="font-size: 24px; color: #0073e6;">Welcome to ',null===(e=c.companyData)||void 0===e?void 0:e.fullName,'!</h1>\n        <p style="font-size: 16px; line-height: 1.5;">We are excited to have you join our team and begin this new chapter together.</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">As part of your onboarding process, we would like to ensure that you have access to all the necessary tools and resources. Below are the details to get started:</p>\n\n        <h3 style="font-size: 18px; color: #0073e6;">Your First Day Information:</h3>\n        <ul style="font-size: 16px; line-height: 1.5;">\n            <li><span style="font-weight: bold;">Date:</span> ').concat(u()(null===c||void 0===c?void 0:c.dateOfJoining).format("YYYY-MM-DD"),'</li>\n            <li><span style="font-weight: bold;">Reporting Time:</span> ').concat(u()(null===c||void 0===c?void 0:c.dateOfJoining).format("HH:MM"),'</li>\n            <li><span style="font-weight: bold;">Location:</span> [Office Address / Virtual Meeting Link]</li>\n            <li><span style="font-weight: bold;">Reporting To:</span> [Name and Designation of Reporting Manager/HR Contact]</li>\n        </ul>\n\n        <h3 style="font-size: 18px; color: #0073e6;">Login Credentials:</h3>\n        <p style="font-size: 16px; line-height: 1.5;">To facilitate a smooth onboarding process, we have set up your account in our HRMS (Human Resource Management System). Please use the credentials below to log in:</p>\n        <ul style="font-size: 16px; line-height: 1.5;">\n            <li><span style="font-weight: bold;">HRMS Portal Link:</span> [Insert HRMS URL]</li>\n            <li><span style="font-weight: bold;">Username:</span> [Candidate\'s Email ID or Assigned Username]</li>\n            <li><span style="font-weight: bold;">Temporary Password:</span> [Insert Temporary Password]</li>\n        </ul>\n        <p style="font-size: 16px; line-height: 1.5;"><span style="font-weight: bold;">Note:</span> For security purposes, please log in at your earliest convenience and update your password upon first login.</p>\n\n        <h3 style="font-size: 18px; color: #0073e6;">Next Steps:</h3>\n        <ul style="font-size: 16px; line-height: 1.5;">\n            <li><span style="font-weight: bold;">Complete Your Profile:</span> Update your details (e.g., contact information, bank details, and personal information) in the HRMS portal.</li>\n            <li><span style="font-weight: bold;">Access Onboarding Materials:</span> You will find important documents, policies, and onboarding checklists available in the system.</li>\n            <li><span style="font-weight: bold;">Attend Orientation:</span> [Provide timing/details if applicable].</li>\n        </ul>\n\n        <p style="font-size: 16px; line-height: 1.5;">If you face any issues accessing the portal or require assistance, please do not hesitate to reach out to me.</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">We are thrilled to have you on board and are confident you will have a wonderful journey with [Company Name]. Wishing you a fantastic start!</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">Once again, welcome aboard!</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">Best Regards,</p>\n        <p style="font-size: 16px; line-height: 1.5;">').concat(null===(t=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))))||void 0===t?void 0:t.fullName,'</p>\n        <p style="font-size: 16px; line-height: 1.5;">[Your Designation]</p>\n        <p style="font-size: 16px; line-height: 1.5;">').concat(null===(l=c.companyData)||void 0===l?void 0:l.fullName,'</p>\n        <p style="font-size: 16px; line-height: 1.5;">[Contact Number]</p>\n        <p style="font-size: 16px; line-height: 1.5;">').concat(null===(n=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))))||void 0===n?void 0:n.email,'</p>\n        <p style="font-size: 16px; line-height: 1.5;">[Company Website]</p>');j(i)}},[c]);const w=e=>{const{name:t,value:l}=e.target;g(e=>(0,a.A)((0,a.A)({},e),{},{[t]:l}))},C=()=>{g({to:"",cc:[],subject:"",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),y(!1),j(""),v([]),l()};return t?(0,h.jsxs)(p.A,{open:!0,onCancel:C,footer:null,closable:!0,width:800,bodyStyle:{maxHeight:"70vh"},centered:!0,zIndex:1501,children:[(0,h.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,h.jsx)("h2",{className:"text-sm font-semibold text-gray-800",children:f?"Email Preview":"Proposal Email Template"})}),(0,h.jsxs)("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault(),i({content:b,to:null===x||void 0===x?void 0:x.to,cc:"string"===typeof(null===x||void 0===x?void 0:x.cc)?x.cc.split(",").map(e=>e.trim()):[],subject:null===x||void 0===x?void 0:x.subject,attachments:null===x||void 0===x?void 0:x.attachments})},className:"space-y-4 ",children:[(0,h.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 h-[50vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"font-semibold text-sm",children:["To:",(0,h.jsx)("input",{name:"to",value:x.to,onChange:w,placeholder:"Recipient Email",className:"border p-2 w-full"})]}),(0,h.jsxs)("div",{className:"font-semibold text-sm",children:["CC:",(0,h.jsx)("input",{name:"cc",value:x.cc,onChange:w,placeholder:"CC Emails",className:"border p-2 w-full"})]}),(0,h.jsxs)("div",{className:"font-semibold text-sm",children:["Subject:",(0,h.jsx)("input",{name:"subject",value:x.subject,onChange:w,placeholder:"Email Subject",className:"border p-2 w-full"})]})]}),(0,h.jsx)("div",{className:"mt-4",children:(0,h.jsx)(o(),{value:b,onChange:e=>{j(e)},placeholder:"Write the email body here",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike"],[{align:[]}],["link","image","video"],["blockquote","code-block"],["clean"]]},formats:["header","font","list","bold","italic","underline","link","align","clean"]})}),(0,h.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,h.jsx)("div",{className:"font-medium mb-2",children:"Attachments:"}),f?(0,h.jsx)("div",{className:"space-y-2"}):(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("input",{type:"file",onChange:e=>{const t={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};N((0,r.Sg)(t)).then(e=>{var t;null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.data&&g(t=>{var l;return(0,a.A)((0,a.A)({},t),{},{attachments:[...t.attachments,null===(l=e.payload)||void 0===l?void 0:l.data]})})})},className:"hidden",id:"file-upload"}),(0,h.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,h.jsx)(s.chT,{className:"mr-2"})," Add Attachments"]}),(0,h.jsx)("div",{className:"space-y-2",children:x.attachments.map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,h.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,h.jsx)(s.chT,{className:"text-gray-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,h.jsx)("button",{type:"button",onClick:()=>(e=>{g(t=>{const l=t.attachments.filter((t,l)=>l!==e);return(0,a.A)((0,a.A)({},t),{},{attachments:l})})})(t),className:"text-red-500 hover:text-red-700",children:(0,h.jsx)(s.QCr,{})})]},t))})]})]})]}),(0,h.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,h.jsx)("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Generate Email"})]})]})]}):null}},65337:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(91686),n=l(70579);const i=function(){return(0,n.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,n.jsx)(a.A,{size:"large"})})}},90902:(e,t,l)=>{l.r(t),l.d(t,{default:()=>H});var a=l(89379),n=l(73216),i=l(39160),o=l(83003),s=l(65043),d=l(30064),r=l.n(d),c=l(31174),u=l(23156),m=l(47196),p=l(24858),h=l(15187),v=l(12745),x=l(78227),g=l(31744),f=l(78729),y=(l(65337),l(6720)),b=l(54555),j=l(49804),N=l(30326),w=l(53913),C=l(65512),A=l(91686),F=l(96651),D=l(4938),k=l(88967),S=l(60184),z=l(40164),P=l(86178),T=l.n(P),E=l(55971),R=l(83002),I=l(89427),M=l(69223),O=l(37762),_=l(64857),B=l(67504),L=l(70579);const H=function(){const{register:e,setValue:t,control:l,formState:{errors:d}}=(0,p.mN)(),{canCreate:P,canRead:H,canUpdate:Y,canDelete:q}=(0,D.A)(),[U,V]=(0,s.useState)(""),W=(0,n.Zp)(),J=(0,o.wA)(),{companyList:G}=(0,o.d4)(e=>e.company),{branchList:Q,branchListloading:Z}=(0,o.d4)(e=>e.branch),{proposalList:K,totalProposalCount:X,loading:$}=(0,o.d4)(e=>e.proposal),ee=JSON.parse(localStorage.getItem("user_info_".concat(h.AU))),[te,le]=(0,s.useState)(1),[ae,ne]=(0,s.useState)(!1),ie=(0,s.useRef)(),oe=(0,p.FH)({control:l,name:"PDCompanyId",defaultValue:""}),se=(0,p.FH)({control:l,name:"PDBranchId",defaultValue:""}),de=(0,p.FH)({control:l,name:"status",defaultValue:""}),[re,ce]=(0,s.useState)(1),ue=[se,oe,de,U].join("-"),[me,pe]=(0,s.useState)(!1);(0,s.useEffect)(()=>{me?1===re?he():ce(1):pe(e=>!0)},[ue]),(0,s.useEffect)(()=>{he()},[re]);const he=()=>{const e={page:re,limit:10,reqPayload:{companyId:"admin"===(null===ee||void 0===ee?void 0:ee.userType)?oe:"company"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.companyId,branchId:"company"===(null===ee||void 0===ee?void 0:ee.userType)||"admin"===(null===ee||void 0===ee?void 0:ee.userType)||"companyDirector"===(null===ee||void 0===ee?void 0:ee.userType)?se:"companyBranch"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.branchId,directorId:"",text:U,sort:!0,status:de,isPagination:!0}};J((0,v.Zk)(e))};(0,s.useEffect)(()=>{(oe||"company"===(null===ee||void 0===ee?void 0:ee.userType)||"companyDirector"===(null===ee||void 0===ee?void 0:ee.userType))&&J((0,g.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===ee||void 0===ee?void 0:ee.userType)?oe:"company"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.companyId}))},[oe]),(0,s.useEffect)(()=>{"admin"===(null===ee||void 0===ee?void 0:ee.userType)&&J((0,f.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[ve,xe]=(0,s.useState)({isOpen:!1,data:null,status:""}),ge=()=>{xe({isOpen:!1,data:null,status:""})},[fe,ye]=(0,s.useState)(""),[be,je]=(0,s.useState)(""),[Ne,we]=(0,s.useState)([]),[Ce,Ae]=(0,s.useState)(!1),[Fe,De]=(0,s.useState)(""),[ke,Se]=(0,s.useState)(""),ze=e=>{const t=[];return"Approved"!==(null===e||void 0===e?void 0:e.status)&&"Cancelled"!==(null===e||void 0===e?void 0:e.status)&&(Y&&t.push({key:"approve",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>((e,t)=>{xe({isOpen:!0,data:e,status:t})})(e,"Approved"),children:[(0,L.jsx)(j.qGT,{size:16,className:"text-[#3c8dbc]"}),(0,L.jsx)("span",{children:"Approve"})]})}),Y&&t.push({key:"edit",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>W("/admin/proposal/edit/".concat((0,c.w)(null===e||void 0===e?void 0:e._id))),children:[(0,L.jsx)(u.Jcp,{size:16,className:"text-[#3c8dbc]"}),(0,L.jsx)("span",{children:"Edit Proposal"})]})}),q&&t.push({key:"delete",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>(e=>{let t={_id:e};r().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&J((0,v.MN)(t)).then(e=>{re>1&&1==(null===K||void 0===K?void 0:K.length)?ce(Number(re-1)):he()})})})(null===e||void 0===e?void 0:e._id),children:[(0,L.jsx)(m.tqC,{size:16,className:"text-red-600"}),(0,L.jsx)("span",{children:"Delete"})]})}),P&&t.push({key:"email",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{le(e),ne(!0)},children:[(0,L.jsx)(y.mm2,{size:16,className:"text-green-600"}),(0,L.jsx)("span",{children:"Send Email"})]})}),"Pending"===(null===e||void 0===e?void 0:e.status)&&Y&&t.push({key:"cancel",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{r().fire({text:"Do you want to Reject this proposal?",input:"textarea",inputPlaceholder:"Enter remarks...",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",preConfirm:e=>(e||r().showValidationMessage("Please enter a remark."),e)}).then(t=>{t.isConfirmed&&J((0,v.KW)({_id:null===e||void 0===e?void 0:e._id,status:"Cancelled",remark:t.value})).then(e=>{null!==e&&void 0!==e&&e.error?r().fire({title:"Error!",text:"Failed to Reject proposal. Please try again.",icon:"error"}):(r().fire({title:"Success!",text:"Proposal has been Rejected.",icon:"success"}),he())}).catch(()=>{r().fire({title:"Error!",text:"Unexpected error. Try again later.",icon:"error"})})})},children:[(0,L.jsx)(y.qSu,{size:16,className:"text-rose-600"}),(0,L.jsx)("span",{children:"Cancel Proposal"})]})})),"Approved"===(null===e||void 0===e?void 0:e.status)&&(t.push({key:"approved",label:(0,L.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 cursor-not-allowed",children:[(0,L.jsx)(j.qGT,{size:16}),(0,L.jsx)("span",{children:"Approved"})]})}),t.push({key:"view",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{var t;r().fire({title:"Approval Details",html:"\n              <div>\n                <p><strong>Client Name:</strong> ".concat(null===e||void 0===e?void 0:e.name,"</p>\n                <p><strong>Remarks:</strong> ").concat(null===e||void 0===e?void 0:e.remark,"</p>\n                <p><strong>Final Amount:</strong> ").concat(null===e||void 0===e?void 0:e.finalizedAmount,"</p>\n                <div>\n                  <strong>Attachments:</strong>\n                  <ul>\n                    ").concat((null===e||void 0===e||null===(t=e.attachments)||void 0===t?void 0:t.length)>0?e.attachments.map(e=>'<li><a href="'.concat("https://vigapi.vigorousit.com","/public/").concat(e,'" target="_blank">').concat(e,"</a></li>")).join(""):"No Attachment Found","\n                  </ul>\n                </div>\n              </div>\n            "),confirmButtonText:"Close",confirmButtonColor:"#3085d6"})},children:[(0,L.jsx)(S.Ny1,{size:16,className:"text-[#3c8dbc]"}),(0,L.jsx)("span",{children:"View Approval"})]})}),t.push(...["delete","email"].map(e=>({key:e,label:(0,L.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 cursor-not-allowed",children:["delete"===e?(0,L.jsx)(m.tqC,{size:16}):(0,L.jsx)(y.mm2,{size:16}),(0,L.jsx)("span",{children:"delete"===e?"Delete":"Send Email"})]})}))),t.push({key:"client",label:(0,L.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{var t;return W("/admin/client/edit/".concat((0,c.w)(null===e||void 0===e||null===(t=e.clientData)||void 0===t?void 0:t._id)))},children:[(0,L.jsx)(j.Z31,{size:16,className:"text-cyan-600"}),(0,L.jsx)("span",{children:"View Client"})]})})),"Cancelled"===(null===e||void 0===e?void 0:e.status)&&(["approve","edit","delete","email"].forEach(e=>{t.push({key:e,label:(0,L.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 cursor-not-allowed",children:[{approve:(0,L.jsx)(j.qGT,{size:16}),edit:(0,L.jsx)(u.Jcp,{size:16}),delete:(0,L.jsx)(m.tqC,{size:16}),email:(0,L.jsx)(y.mm2,{size:16})}[e],(0,L.jsx)("span",{children:{approve:"Approved",edit:"Edit Proposal",delete:"Delete",email:"Send Email"}[e]})]})})}),t.push({key:"client",label:(0,L.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,L.jsx)(j.Z31,{size:16}),(0,L.jsx)("span",{children:"View Client"})]})})),t};return(0,L.jsxs)(i.A,{onChange:e=>{V(e)},children:[(0,L.jsxs)("section",{children:[(0,L.jsxs)("div",{className:"xl:flex justify-between items-center xl:space-y-0 space-y-2 py-1",children:[(0,L.jsxs)("div",{className:"grid md:flex sm:grid-cols-3 grid-cols-1 flex-wrap md:gap-3 gap-1.5",children:["admin"===(null===ee||void 0===ee?void 0:ee.userType)&&(0,L.jsxs)("div",{className:"",children:[(0,L.jsx)(p.xI,{control:l,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,L.jsxs)(C.A,(0,a.A)((0,a.A)({},t),{},{defaultValue:"",className:"".concat(h.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(C.A.Option,{value:"",children:"Select Company"}),null===G||void 0===G?void 0:G.map(e=>(0,L.jsx)(C.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),d.PDCompanyId&&(0,L.jsx)("p",{className:"text-red-500 text-sm",children:d.PDCompanyId.message})]}),("admin"===(null===ee||void 0===ee?void 0:ee.userType)||"company"===(null===ee||void 0===ee?void 0:ee.userType)||"companyDirector"===(null===ee||void 0===ee?void 0:ee.userType))&&(0,L.jsxs)("div",{className:"",children:[(0,L.jsx)(p.xI,{control:l,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:t}=e;return(0,L.jsxs)(C.A,(0,a.A)((0,a.A)({},t),{},{defaultValue:"",disabled:$,className:"".concat(h.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(C.A.Option,{value:"",children:"Select Branch"}),Z?(0,L.jsx)(C.A.Option,{disabled:!0,children:(0,L.jsx)(I.A,{})}):null===Q||void 0===Q?void 0:Q.map(e=>(0,L.jsx)(C.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),d.PDBranchId&&(0,L.jsx)("p",{className:"text-red-500 text-sm",children:d.PDBranchId.message})]}),(0,L.jsx)("div",{className:"",children:(0,L.jsx)(p.xI,{control:l,name:"status",rules:{required:"Status is required"},render:e=>{let{field:t}=e;return(0,L.jsxs)(C.A,(0,a.A)((0,a.A)({},t),{},{defaultValue:"",disabled:$,className:"".concat(h.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(C.A.Option,{value:"",children:"Select Status"}),(0,L.jsx)(C.A.Option,{value:"Pending",children:"Pending"}),(0,L.jsx)(C.A.Option,{value:"Approved",children:"Approved"}),(0,L.jsx)(C.A.Option,{value:"Cancelled",children:"Cancel"})]}))}})})]}),(0,L.jsxs)("div",{className:"flex justify-end items-end gap-2",children:[(0,L.jsx)("button",{onClick:()=>{t("PDBranchId",""),t("PDCompanyId",""),t("status","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Reset"})}),K&&K.length>0&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(F.A,{placement:"topLeft",title:"Export to Excel",children:(0,L.jsxs)("button",{onClick:async()=>{try{var e,t,l;if(!K||0===K.length)return void r().fire({icon:"warning",title:"No Data",text:"There is no data to export."});const a=new M.Workbook;a.creator="Proposal Management System",a.lastModifiedBy="Proposal Management System",a.created=new Date,a.modified=new Date;const n=a.addWorksheet("Proposals Report",{views:[{state:"frozen",ySplit:1}],properties:{tabColor:{argb:"FF4472C4"}}});n.columns=[{header:"S.No.",key:"sno",width:8},{header:"Name",key:"name",width:25},{header:"Email",key:"email",width:30},{header:"Mobile Number",key:"mobile",width:18},{header:"Proposal Amount",key:"fee",width:18},{header:"Remarks",key:"description",width:30},{header:"Finalize Remark",key:"remark",width:30},{header:"Finalize Amount",key:"finalizedAmount",width:18},{header:"Updated By",key:"updatedBy",width:25},{header:"Updated At",key:"updatedAt",width:20},{header:"Status",key:"status",width:15}];const i=n.getRow(1);i.height=25,i.eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},e.font={bold:!0,color:{argb:"FFFFFFFF"},size:11,name:"Calibri"},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0},e.border={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}});const o=await(null===B.t||void 0===B.t?void 0:B.t.proposalSearch({companyId:"admin"===(null===ee||void 0===ee?void 0:ee.userType)?oe:"company"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.companyId,branchId:"company"===(null===ee||void 0===ee?void 0:ee.userType)||"admin"===(null===ee||void 0===ee?void 0:ee.userType)||"companyDirector"===(null===ee||void 0===ee?void 0:ee.userType)?se:"companyBranch"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.branchId,directorId:"",text:U,sort:!0,status:de,isPagination:!1}));if(!o&&(null===o||void 0===o||null===(e=o.data)||void 0===e||!e.docs))return;(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(l=t.docs)||void 0===l?void 0:l.map((e,t)=>({sno:t+1+10*(re-1),name:(null===e||void 0===e?void 0:e.name)||"-",email:(null===e||void 0===e?void 0:e.email)||"-",mobile:null!==e&&void 0!==e&&e.mobile?"".concat(e.mobile.code||"").concat(e.mobile.number||"").trim():"-",fee:(null===e||void 0===e?void 0:e.fee)||"-",description:(null===e||void 0===e?void 0:e.description)||"-",remark:(null===e||void 0===e?void 0:e.remark)||"-",finalizedAmount:(null===e||void 0===e?void 0:e.finalizedAmount)||"-",updatedBy:(null===e||void 0===e?void 0:e.updatedBy)||"-",updatedAt:null!==e&&void 0!==e&&e.updatedAt?T()(e.updatedAt).format("DD-MM-YYYY hh:mm a"):"-",status:(null===e||void 0===e?void 0:e.status)||"-"}))).forEach(e=>{var t;const l=n.addRow(e);l.eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:l.number%2===0?"FFF2F2F2":"FFFFFFFF"}},e.alignment={vertical:"middle",horizontal:"left",wrapText:!0},e.border={top:{style:"thin",color:{argb:"FFD9D9D9"}},left:{style:"thin",color:{argb:"FFD9D9D9"}},bottom:{style:"thin",color:{argb:"FFD9D9D9"}},right:{style:"thin",color:{argb:"FFD9D9D9"}}},e.font={size:10,name:"Calibri"}});const a=l.getCell("status"),i={Pending:{bg:"FFFFF4CE",text:"FF8C6D00"},Approved:{bg:"FFE6F6E6",text:"FF107C10"},Cancelled:{bg:"FFFDE7E9",text:"FFA4262C"}},o=null===(t=a.value)||void 0===t?void 0:t.toString();o&&i[o]&&(a.fill={type:"pattern",pattern:"solid",fgColor:{argb:i[o].bg}},a.font.color={argb:i[o].text})}),n.autoFilter={from:"A1",to:"".concat(String.fromCharCode(64+n.columns.length),"1")},n.columns.forEach(e=>{let t=e.header.length;e.eachCell({includeEmpty:!0},e=>{const l=e.value?e.value.toString().length:0;l>t&&(t=l)}),e.width=Math.min(Math.max(t+2,10),50)});const s=n.insertRow(1,["PROPOSALS EXPORT"]);n.mergeCells("A1:".concat(String.fromCharCode(64+n.columns.length),"1")),s.height=30,s.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},s.getCell(1).font={bold:!0,color:{argb:"FFFFFFFF"},size:16,name:"Calibri"},s.getCell(1).alignment={vertical:"middle",horizontal:"center"};const d=n.addRow([]);n.mergeCells("A".concat(d.number,":").concat(String.fromCharCode(64+n.columns.length)).concat(d.number));d.getCell(1).value="Exported by ".concat((null===ee||void 0===ee?void 0:ee.fullName)||"System"," on ").concat(T()().format("DD-MM-YYYY HH:mm")),d.getCell(1).font={italic:!0,size:9,color:{argb:"FF808080"}},d.getCell(1).alignment={horizontal:"right"};const c=await a.xlsx.writeBuffer(),u=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),m=document.createElement("a");m.href=URL.createObjectURL(u),m.download="Proposals_Export_".concat(T()().format("YYYY-MM-DD_HH-mm"),".xlsx"),document.body.appendChild(m),m.click(),document.body.removeChild(m),r().fire({icon:"success",title:"Export Successful",text:"Proposals data has been exported to Excel."})}catch(a){console.log("Error generating Excel:",a),r().fire({icon:"error",title:"Export Failed",text:"Failed to generate Excel report. Please try again or contact support."})}},className:"bg-green-600 px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,L.jsx)(u.Ru,{}),(0,L.jsx)("span",{className:"text-[12px]",children:"Excel"})]})}),(0,L.jsx)(F.A,{placement:"topLeft",title:"Export to PDF",children:(0,L.jsxs)("button",{onClick:async()=>{var e,t,l;const a=new O.Ay({orientation:"landscape",unit:"pt"});a.setFontSize(16);const n=await(null===B.t||void 0===B.t?void 0:B.t.proposalSearch({companyId:"admin"===(null===ee||void 0===ee?void 0:ee.userType)?oe:"company"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.companyId,branchId:"company"===(null===ee||void 0===ee?void 0:ee.userType)||"admin"===(null===ee||void 0===ee?void 0:ee.userType)||"companyDirector"===(null===ee||void 0===ee?void 0:ee.userType)?se:"companyBranch"===(null===ee||void 0===ee?void 0:ee.userType)?null===ee||void 0===ee?void 0:ee._id:null===ee||void 0===ee?void 0:ee.branchId,directorId:"",text:U,sort:!0,status:de,isPagination:!1}));if(!n&&(null===n||void 0===n||null===(e=n.data)||void 0===e||!e.docs))return;const i=null===n||void 0===n||null===(t=n.data)||void 0===t||null===(l=t.docs)||void 0===l?void 0:l.map((e,t)=>{var l,a;return[t+1+10*(re-1),(null===e||void 0===e?void 0:e.name)||"-",(null===e||void 0===e?void 0:e.email)||"-",(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)+(null===e||void 0===e||null===(a=e.mobile)||void 0===a?void 0:a.number),(null===e||void 0===e?void 0:e.fee)||"-",(null===e||void 0===e?void 0:e.description)||"-",(null===e||void 0===e?void 0:e.remark)||"-",(null===e||void 0===e?void 0:e.finalizedAmount)||"-",(null===e||void 0===e?void 0:e.status)||"-"]});(0,_.Ay)(a,{startY:70,head:[["S.No.","Name","Email","Mobile","Proposal Amount","Remarks","Finalize Remark","Finalize Amount","Status"]],body:i,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("AllclientProposal.pdf")},className:"bg-red-600 px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,L.jsx)(u.kl1,{}),(0,L.jsx)("span",{className:"text-[12px]",children:"PDF"})]})})]}),P&&(0,L.jsx)(F.A,{placement:"topLeft",title:"Add Proposal",children:(0,L.jsxs)("button",{onClick:()=>{W("/admin/proposal/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,L.jsx)(u.OiG,{}),(0,L.jsx)("span",{className:"text-[12px]",children:"Add Proposal"})]})})]})]}),(0,L.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:H&&(0,L.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",ref:ie,children:[(0,L.jsx)("thead",{className:"",children:(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500] h-[40px]",children:[(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,L.jsx)("th",{className:"tableHead w-[15%]",children:"Name"}),(0,L.jsx)("th",{className:"tableHead",children:"Email"}),(0,L.jsx)("th",{className:"tableHead",children:"Mobile Number"}),(0,L.jsx)("th",{className:"tableHead",children:"Proposal Amount"}),(0,L.jsx)("th",{className:"tableHead",children:"Remarks"}),(0,L.jsx)("th",{className:"tableHead",children:"Finalize Remark"}),(0,L.jsx)("th",{className:"tableHead",children:"Finalize Amount"}),(0,L.jsx)("th",{className:"tableHead",children:"Updated By"}),(0,L.jsx)("th",{className:"tableHead",children:"Updated At"}),(0,L.jsx)("th",{className:"tableHead",children:"Status"}),(P||q||Y)&&(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),$?(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,L.jsx)(E.A,{})})}):(0,L.jsx)("tbody",{children:K&&(null===K||void 0===K?void 0:K.length)>0?null===K||void 0===K?void 0:K.map((e,t)=>{var l,a,n,i,o,s,d,r,c,u;return(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151]"),children:[(0,L.jsx)("td",{className:"tableData ",children:t+1+10*(re-1)}),(0,L.jsx)("td",{className:"tableData ",children:null!==(l=null===e||void 0===e?void 0:e.name)&&void 0!==l?l:"-"}),(0,L.jsx)("td",{className:"tableData ",children:null!==(a=null===e||void 0===e?void 0:e.email)&&void 0!==a?a:"-"}),(0,L.jsx)("td",{className:"tableData ",children:(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.code)+(null===e||void 0===e||null===(i=e.mobile)||void 0===i?void 0:i.number)}),(0,L.jsx)("td",{className:"tableData ",children:null!==(o=null===e||void 0===e?void 0:e.fee)&&void 0!==o?o:"-"}),(0,L.jsx)("td",{className:"tableData ",children:null!==(s=null===e||void 0===e?void 0:e.description)&&void 0!==s?s:"-"}),(0,L.jsx)("td",{className:"tableData ",children:null!==(d=null===e||void 0===e?void 0:e.remark)&&void 0!==d?d:"-"}),(0,L.jsx)("td",{className:"tableData ",children:null!==(r=null===e||void 0===e?void 0:e.finalizedAmount)&&void 0!==r?r:"-"}),(0,L.jsx)("td",{className:"tableData ",children:null!==(c=null===e||void 0===e?void 0:e.updatedBy)&&void 0!==c?c:"-"}),(0,L.jsx)("td",{className:"tableData ",children:null!==(u=T()(null===e||void 0===e?void 0:e.updatedAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==u?u:"-"}),(0,L.jsx)("td",{className:"tableData ",children:(0,L.jsx)("span",{className:"".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"bg-[#E0FFBE] border-green-500":"Pending"===(null===e||void 0===e?void 0:e.status)?"bg-gray-500 border-gray-500 text-white":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null===e||void 0===e?void 0:e.status})}),(P||q||Y)&&(0,L.jsx)("td",{className:"tableData",children:(0,L.jsx)(N.A,{trigger:["click"],menu:{items:ze(e)},placement:"bottomLeft",children:(0,L.jsx)(F.A,{placement:"topLeft",title:"More Actions",children:(0,L.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(R.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})]})}):(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===K||void 0===K?void 0:K.length)>0&&(0,L.jsx)(x.A,{totalCount:X,pageSize:10,currentPage:re,onChange:e=>{ce(e)}})]}),(null===ve||void 0===ve?void 0:ve.isOpen)&&(0,L.jsxs)(w.A,{className:"antmodalclassName",open:null===ve||void 0===ve?void 0:ve.isOpen,footer:null,onCancel:()=>ge(),children:[(0,L.jsxs)("div",{children:[(0,L.jsxs)("label",{className:"".concat(h.Q0),children:["Remark ",(0,L.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,L.jsx)("textarea",{id:"remark",value:fe,onChange:e=>{ye(e.target.value),e.target.value?De(""):De("Remark is required.")},className:"mt-1 block w-full px-2 py-[12px] min-h-[150px] shadow-sm rounded-xl text-sm bg-gray-50 outline-1 outline-black !border !border-gray-900",placeholder:"Enter your remark here",required:!0}),Fe&&(0,L.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Fe})," "]}),(0,L.jsxs)("div",{className:"mt-4",children:[(0,L.jsxs)("label",{className:"".concat(h.Q0),children:["Finalize Amount: ",(0,L.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,L.jsx)("input",{type:"number",id:"finalizeAmount",value:be,onChange:e=>{je(e.target.value),e.target.value?Se(""):Se("Finalize Amount is required.")},className:"mt-1 block w-full px-2 py-[12px] shadow-sm rounded-xl text-sm bg-gray-50 outline-1 outline-black !border !border-gray-900",placeholder:"Enter amount",required:!0}),ke&&(0,L.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ke})," "]}),(0,L.jsxs)("div",{className:"pt-4 mt-6",children:[(0,L.jsx)("div",{className:"font-medium mb-2",children:"Attachments:"}),Ce?(0,L.jsx)("div",{className:"space-y-2"}):(0,L.jsxs)("div",{className:"space-y-4",children:[(0,L.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t){e.target.value=null;const l={filePath:t,isVideo:!1,isMultiple:!1};J((0,k.Sg)(l)).then(e=>{var t;null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.data&&we(t=>{var l;return[...t,null===(l=e.payload)||void 0===l?void 0:l.data]})})}},className:"hidden",id:"file-upload"}),(0,L.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,L.jsx)(S.chT,{className:"mr-2"})," Add Attachments"]}),(0,L.jsx)("div",{className:"space-y-2",children:null===Ne||void 0===Ne?void 0:Ne.map((e,t)=>(0,L.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,L.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,L.jsx)(S.chT,{className:"text-gray-500"}),(0,L.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,L.jsx)("button",{type:"button",onClick:()=>(e=>{we(t=>t.filter((t,l)=>l!==e))})(t),className:"text-red-500 hover:text-red-700",children:(0,L.jsx)(S.QCr,{})})]},t))})]})]}),(0,L.jsx)("div",{className:"flex justify-end",children:(0,L.jsx)("button",{onClick:()=>{var e;let t=!0;if(fe||(De("Remark is required."),t=!1),be||(Se("Finalize Amount is required."),t=!1),!t)return;const l={_id:null===ve||void 0===ve||null===(e=ve.data)||void 0===e?void 0:e._id,status:null===ve||void 0===ve?void 0:ve.status,remark:fe,finalizedAmount:be,attachments:Ne};J((0,v.KW)(l)).then(e=>{null!==e&&void 0!==e&&e.error||(he(),ge())})},className:"bg-header text-white p-2 px-4 rounded mt-4",children:$?(0,L.jsx)(A.A,{indicator:(0,L.jsx)(z.A,{spin:!0}),size:"small",style:{color:"white"}}):"Submit"})})]}),(0,L.jsx)(b.A,{isOpen:ae,onClose:()=>ne(!1),onSubmit:e=>{J((0,v.TI)(e)).then(e=>{e.error||(ne(!1),le([]),r().fire({icon:"success",title:"Proposal Email",html:"\n                <p>Proposal Email has been send successfully!</p>\n              ",confirmButtonColor:"#3085d6"}))})},proposalData:te,setProposalId:le})]})}}}]);
//# sourceMappingURL=902.6035adfc.chunk.js.map