"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1906],{1906:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var a=s(89379),l=s(65043),n=s(83003),i=s(735),d=s(366),r=s(55971),o=s(53913),c=s(65512),p=s(96651),x=s(78227),h=s(4938),m=s(39160),u=s(86178),v=s.n(u),j=(s(17995),s(24858)),g=s(15187),N=s(60184),b=s(3825),f=s(45394),y=s(78729),w=s(31744),A=s(89427),C=s(70579);const D=()=>{const{control:e,formState:{errors:t},setValue:s}=(0,j.mN)(),u=(0,n.wA)(),[D,S]=(0,l.useState)(!1),{SupportList:I,loading:O,totalSupportCount:L}=(0,n.d4)(e=>e.supportModal),{companyList:R,companyListLoading:P}=(0,n.d4)(e=>e.company),{branchList:k,branchListloading:B}=(0,n.d4)(e=>e.branch),[T,_]=(0,l.useState)(!1),[z,Y]=(0,l.useState)([]),[E,V]=(0,l.useState)(1),F=(0,j.FH)({control:e,name:"PDCompanyId",defaultValue:""}),M=(0,j.FH)({control:e,name:"PDBranchId",defaultValue:""}),q=(0,j.FH)({control:e,name:"status",defaultValue:""}),{canCreate:H,canRead:U,canUpdate:J,canDelete:Q}=(0,h.A)(),G=JSON.parse(localStorage.getItem("user_info_".concat(g.AU))),{userCompanyId:K,userDirectorId:W,userBranchId:X,userEmployeId:Z,userDepartmentId:$,userDesignationId:ee,userType:te}=(0,i.A)();(0,l.useEffect)(()=>{se()},[F,M,q]);const se=()=>{const e={companyId:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:"employee"===(null===G||void 0===G?void 0:G.userType)?K:F,directorId:W,branchId:"companyBranch"==te?null===G||void 0===G?void 0:G._id:"employee"===(null===G||void 0===G?void 0:G.userType)?X:M,page:E,limit:10,text:"",sort:"",status:q,isPagination:!0};u((0,d.M_)(e))},[ae,le]=(0,l.useState)(),ne=e=>{S(e=>!e),le(e)};return(0,l.useEffect)(()=>{(F||"company"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType))&&u((0,w.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===G||void 0===G?void 0:G.userType)?F:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId}))},[F]),(0,l.useEffect)(()=>{"admin"===(null===G||void 0===G?void 0:G.userType)&&u((0,y.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,C.jsxs)(m.A,{children:[(0,C.jsxs)("div",{className:"grid sm:grid xl:grid-cols-6 lg:grid-cols-3 grid-cols-1 gap-2 sm:justify-between items-center py-1 px-2 text-[14px] rounded-md",children:["admin"===(null===G||void 0===G?void 0:G.userType)&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(j.xI,{name:"PDCompanyId",control:e,rules:{required:"Company is required"},render:e=>{let{field:s}=e;return(0,C.jsxs)(c.A,(0,a.A)((0,a.A)({},s),{},{className:" ".concat(g.Lp," ").concat(t.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(c.A.Option,{value:"",children:"Select Company"}),P?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(A.A,{})}):null===R||void 0===R?void 0:R.map(e=>(0,C.jsxs)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDCompanyId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:t.PDCompanyId.message})]}),("admin"===(null===G||void 0===G?void 0:G.userType)||"company"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(j.xI,{name:"PDBranchId",control:e,rules:{required:"Branch is required"},render:e=>{let{field:s}=e;return(0,C.jsxs)(c.A,(0,a.A)((0,a.A)({},s),{},{className:" ".concat(g.Lp," ").concat(t.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(c.A.Option,{value:"",children:"Select Branch"}),B?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(A.A,{})}):null===k||void 0===k?void 0:k.map(e=>(0,C.jsxs)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,C.jsx)(j.xI,{name:"status",control:e,rules:{},render:e=>{let{field:s}=e;return(0,C.jsxs)(c.A,(0,a.A)((0,a.A)({},s),{},{className:" w-32 ".concat(g.Lp," ").concat(t.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(c.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(c.A.Option,{value:"Rejected",children:" Rejected "}),(0,C.jsx)(c.A.Option,{value:"Resolved",children:" Resolved "}),(0,C.jsx)(c.A.Option,{value:"Open",children:" Open "})]}))}}),(0,C.jsx)("button",{onClick:()=>{s("PDBranchId",""),s("PDCompanyId",""),s("status","")},className:"bg-header w-56  py-[6px] my-0.5 rounded-md flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),(0,C.jsxs)("div",{className:"w-full overflow-x-auto bg-white",children:[(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl  ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500]  h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[5%]",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"S.No."})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Title"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Description"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Attachements"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"created By"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"created At "})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Action"})]})}),O?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(r.A,{})})}):(0,C.jsx)("tbody",{children:I&&(null===I||void 0===I?void 0:I.length)>0?null===I||void 0===I?void 0:I.map((e,t)=>{var s,a,l;return(0,C.jsxs)("tr",{className:"\n                             \n                            ",children:[(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-[12px]",children:t+1+10*(E-1)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-[12px]",children:null===e||void 0===e?void 0:e.title}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-[12px]",children:null===e||void 0===e?void 0:e.description}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-[12px]",children:(0,C.jsx)(p.A,{placement:"topLeft",title:"".concat((null===e||void 0===e||null===(s=e.attachment)||void 0===s?void 0:s.length)>0?"View Attachments":"No Attachment"),children:(0,C.jsx)("button",{onClick:()=>{_(!0),Y(null===e||void 0===e?void 0:e.attachment)},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",disabled:!(null!==e&&void 0!==e&&null!==(a=e.attachment)&&void 0!==a&&a.length)>0,children:(0,C.jsx)(N.kQE,{className:!(null!==e&&void 0!==e&&null!==(l=e.attachment)&&void 0!==l&&l.length)>0?"text-gray-500":" text-rose-700",size:16})})})}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-[12px]",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-[12px]",children:v()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY")}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsx)(p.A,{placement:"topLeft",title:"Status - ".concat("Open"===(null===e||void 0===e?void 0:e.status)?"Open":"Resolved"===(null===e||void 0===e?void 0:e.status)?"Resolved":"Rejected"),children:(0,C.jsx)("span",{className:"".concat("Open"===(null===e||void 0===e?void 0:e.status)?"bg-yellow-200 border-yellow-500":"Resolved"===(null===e||void 0===e?void 0:e.status)?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:"Open"===(null===e||void 0===e?void 0:e.status)?"Open":"Resolved"===(null===e||void 0===e?void 0:e.status)?"Resolved":"Rejected"===(null===e||void 0===e?void 0:e.status)?"Rejected":"-"})})}),(0,C.jsxs)("td",{className:"whitespace-nowrap flex gap-2 border-none p-2",children:[(0,C.jsx)(p.A,{placement:"topLeft",children:(0,C.jsxs)("select",{className:"border-[1px] px-2 py-1.5 rounded-lg text-[12px]",value:null===e||void 0===e?void 0:e.status,disabled:"Rejected"==(null===e||void 0===e?void 0:e.status)||"Resolved"==(null===e||void 0===e?void 0:e.status),onChange:t=>{((e,t)=>{const s={_id:null===t||void 0===t?void 0:t._id,status:e.target.value};u((0,d.V1)(s)).then(e=>{se()})})(t,e)},children:[(0,C.jsx)("option",{value:"Open",children:"Open"}),(0,C.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,C.jsx)("option",{value:"Rejected",children:"Rejected"})]})}),(0,C.jsx)(p.A,{placement:"topLeft",title:"View Support Details",children:(0,C.jsx)("button",{onClick:()=>{ne(e)},className:"px-2 py-2 text-xs rounded-md bg-transparent text-header border border-muted",type:"button",children:(0,C.jsx)(N.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]"})})})]})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),D&&(0,C.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-[1560]",onClick:()=>{ne()},children:(0,C.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1  w-full sm:w-1/2",onClick:e=>e.stopPropagation(),children:(0,C.jsx)("div",{className:"w-full overflow-auto ",onClick:e=>e.preventDefault(),children:(0,C.jsxs)("table",{className:"w-full  rounded-lg shadow-md overflow-hidden bg-white",children:[(0,C.jsx)("thead",{children:(0,C.jsx)("tr",{children:(0,C.jsx)("th",{className:"text-header ",children:(0,C.jsx)("div",{className:"mt-2 ml-2",children:"Support Details"})})})}),(0,C.jsxs)("tbody",{className:"text-sm text-gray-700",children:[(0,C.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,C.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(f.sLb,{className:"size-4 text-header text-lg"}),(0,C.jsx)("span",{className:"text-[16px] font-medium",children:"Title"})]}),(0,C.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===ae||void 0===ae?void 0:ae.title)||"N/A"})]}),(0,C.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(b.cC2,{className:"size-4 text-header text-lg"}),(0,C.jsx)("span",{className:"text-[16px] font-medium",children:"Description"})]}),(0,C.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:ae.description||"N/A"})]})]}),(0,C.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,C.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(f.sLb,{className:"size-4 text-header text-lg"}),(0,C.jsx)("span",{className:"text-[16px] font-medium",children:"Created AT"})]}),(0,C.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:v()(null===ae||void 0===ae?void 0:ae.createdAt).format("DD-MM-YYYY")||"N/A"})]}),(0,C.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(b.cC2,{className:"size-4 text-header text-lg"}),(0,C.jsx)("span",{className:"text-[16px] font-medium",children:"Created By"})]}),(0,C.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:ae.createdBy||"N/A"})]})]}),(0,C.jsx)("tr",{className:" hover:bg-indigo-50",children:(0,C.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(f.sLb,{className:"size-4 text-header text-lg"}),(0,C.jsx)("span",{className:"text-[16px] font-medium",children:"status"})]}),(0,C.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:ae.status||"N/A"})]})})]})]})})})}),(null===I||void 0===I?void 0:I.length)>0&&(0,C.jsx)(x.A,{totalCount:L,pageSize:10,currentPage:E,onChange:e=>{V(e)}}),(0,C.jsx)(o.A,{visible:T,onCancel:()=>{_(!1),Y([])},footer:null,className:"antmodalclassName",width:"700px",destroyOnClose:!0,children:(0,C.jsx)("div",{className:"flex gap-2 flex-wrap mt-4",children:null===z||void 0===z?void 0:z.map((e,t)=>{const s=e.split(".").pop().toLowerCase(),a=["jpg","jpeg","png","gif","bmp","webp"].includes(s),l="pdf"===s;return(0,C.jsx)("div",{style:{flex:"1 1 calc(33.333% - 10px)",marginBottom:"20px"},children:a?(0,C.jsx)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),target:"_blank",rel:"noopener noreferrer",children:(0,C.jsx)("img",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),alt:"attachment-".concat(t),style:{width:"100%",height:"auto",borderRadius:"8px"}})}):l?(0,C.jsx)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),target:"_blank",rel:"noopener noreferrer",children:(0,C.jsx)("div",{style:{width:"100%",height:"400px",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"},children:(0,C.jsx)("iframe",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),title:"attachment-".concat(t),style:{width:"100%",height:"100%"}})})}):(0,C.jsx)("p",{children:"Unsupported file type"})},t)})})})]})]})}}}]);
//# sourceMappingURL=1906.d1af3fe5.chunk.js.map