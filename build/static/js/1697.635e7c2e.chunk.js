"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1697],{81697:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var n=a(89379),s=a(73216),d=a(83003),o=a(65043),r=a(30064),l=a.n(r),i=a(24858),c=a(40088),p=a(78729),u=a(15187),h=a(60184),m=a(39160),x=a(23156),v=a(47196),w=a(31174),b=a(78227),j=a(65512),y=a(96651),N=a(4938),f=a(55971),g=a(60446),A=a.n(g),C=a(70579);const D=function(){const{register:e,setValue:t,formState:{errors:a},control:r}=(0,i.mN)(),{companyList:g}=(0,d.d4)(e=>e.company),{taskTypeList:D,totalTaskTypeCount:S,loading:I}=(0,d.d4)(e=>e.taskType),k=JSON.parse(localStorage.getItem("user_info_".concat(u.AU))),[T,P]=(0,o.useState)(1),[L,_]=(0,o.useState)(""),O=(0,s.Zp)(),B=(0,d.wA)(),E=(0,i.FH)({control:r,name:"PDCompanyId",defaultValue:""}),F=(0,i.FH)({control:r,name:"PDCompanyId",defaultValue:""}),H=(0,i.FH)({control:r,name:"status",defaultValue:""});(0,o.useEffect)(()=>{"admin"===(null===k||void 0===k?void 0:k.userType)&&B((0,p.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const q=[H,L].join("-"),[z,V]=(0,o.useState)(!1);(0,o.useEffect)(()=>{z?1===T?Y():P(1):V(e=>!0)},[q]),(0,o.useEffect)(()=>{Y()},[T]);const Y=()=>{const e={page:T,limit:10,reqPayload:{companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?E:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?F:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,directorId:"",text:L,sort:!0,status:"true"===H||"false"!==H&&"",isPagination:!0}};B((0,c.sA)(e))},{canCreate:J,canRead:R,canUpdate:M,canDelete:U}=(0,N.A)();return(0,C.jsxs)(m.A,{onChange:e=>{_(e)},children:[(0,C.jsx)("div",{className:"",children:(0,C.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,C.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===(null===k||void 0===k?void 0:k.userType)&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("select",(0,n.A)((0,n.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(u.OJ," ").concat(a.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===g||void 0===g?void 0:g.map(e=>(0,C.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),a.PDCompanyId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:a.PDCompanyId.message})]}),(0,C.jsx)(i.xI,{name:"status",control:r,rules:{},render:e=>{let{field:t}=e;return(0,C.jsxs)(j.A,(0,n.A)((0,n.A)({},t),{},{className:" w-32 ".concat(u.Lp," ").concat(a.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(j.A.Option,{value:"true",children:" Active "}),(0,C.jsx)(j.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,C.jsx)("button",{onClick:()=>{t("status",""),t("PDBranchId",""),t("PdDepartmentId",""),t("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),J&&(0,C.jsx)(y.A,{placement:"topLeft",title:"Add Task",children:(0,C.jsxs)("button",{onClick:()=>{O("/admin/task-type/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,C.jsx)(h.OiG,{}),(0,C.jsx)("span",{className:"text-[12px] tracking-wide",children:"Add Task"})]})})]})]})}),(0,C.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:R&&(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.no."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Department Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"HSNCode"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"fees"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"created At"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"created By"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Status"}),(M||U)&&(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),I?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(f.A,{})})}):(0,C.jsx)("tbody",{children:D&&(null===D||void 0===D?void 0:D.length)>0?null===D||void 0===D?void 0:D.map((e,t)=>{var a,n,s,d,o,r,i;return(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(T-1)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e?void 0:e.name)&&void 0!==a?a:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.departmentName)&&void 0!==n?n:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.HSNCode)&&void 0!==s?s:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d=(0,u.w2)(null===e||void 0===e?void 0:e.fees))&&void 0!==d?d:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(o=A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==o?o:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(r=null===e||void 0===e?void 0:e.createdBy)&&void 0!==r?r:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,C.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(i="Inactive")?i:"-"})}),(M||U)&&(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[M&&(0,C.jsx)(y.A,{placement:"topLeft",title:"Edit",children:(0,C.jsx)("button",{onClick:()=>{O("/admin/task-type/edit/".concat((0,w.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(x.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),U&&(0,C.jsx)(y.A,{placement:"topLeft",title:"Delete",children:(0,C.jsx)("button",{onClick:()=>(e=>{let t={_id:e};l().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&B((0,c.$S)(t)).then(e=>{T>1&&1==(null===D||void 0===D?void 0:D.length)?P(Number(T-1)):!e.error&&Y()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(v.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===D||void 0===D?void 0:D.length)>0&&(0,C.jsx)(b.A,{totalCount:S,pageSize:10,currentPage:T,onChange:e=>{P(e)}})]})}}}]);
//# sourceMappingURL=1697.635e7c2e.chunk.js.map