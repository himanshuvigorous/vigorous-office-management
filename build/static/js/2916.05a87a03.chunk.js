"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2916],{52916:(e,a,l)=>{l.r(a),l.d(a,{default:()=>T});var d=l(89379),n=l(24858),i=l(39160),o=l(83003),s=l(73216),r=l(65043),t=l(15187),c=l(31744),u=l(78729),m=l(66015),v=l(42837),p=l(88967),x=l(60184),y=l(94084),h=l(96603),N=l(65512),j=(l(20126),l(60446)),b=l.n(j),f=l(17995),g=l(89427),I=l(43895),A=l(70579);const T=()=>{const{loading:e}=(0,o.d4)(e=>e.EmployeLedger),{register:a,handleSubmit:l,control:j,watch:T,formState:{errors:q},setValue:D}=(0,n.mN)({defaultValues:{typeSelection:"Vendor"}}),S=(0,o.wA)(),_=(0,s.Zp)(),{employeList:k,loading:C}=(0,o.d4)(e=>e.employe),{companyList:P,companyListLoading:E}=(0,o.d4)(e=>e.company),{branchList:B,branchListloading:O,branchDetailsData:w}=(0,o.d4)(e=>e.branch),V=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),L=(0,n.FH)({control:j,name:"PDCompanyId",defaultValue:""}),Q=(0,n.FH)({control:j,name:"PDBranchId",defaultValue:""}),{vendorDataList:M,loading:H}=(0,o.d4)(e=>e.vendor),[F,R]=(0,r.useState)(!1),[Z,G]=(0,r.useState)([]);(0,r.useEffect)(()=>{(L||"company"===(null===V||void 0===V?void 0:V.userType)||"companyDirector"===(null===V||void 0===V?void 0:V.userType))&&S((0,c.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===V||void 0===V?void 0:V.userType)?L:"company"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.companyId}))},[L]),(0,r.useEffect)(()=>{"admin"===(null===V||void 0===V?void 0:V.userType)&&S((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const J=(0,n.FH)({name:"PDCompanyId",control:j,defaultValue:""}),K=(0,n.FH)({name:"PDBranchId",control:j,defaultValue:""});return(0,r.useEffect)(()=>{D("typeSelection","Employe")},[]),(0,r.useEffect)(()=>{S((0,v.qV)({text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===V||void 0===V?void 0:V.userType)?J:"company"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.companyId,branchId:"admin"===(null===V||void 0===V?void 0:V.userType)||"companyDirector"===(null===V||void 0===V?void 0:V.userType)||"company"===(null===V||void 0===V?void 0:V.userType)?K:"companyBranch"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.branchId}))},[K]),(0,A.jsx)(i.A,{children:(0,A.jsx)("div",{className:"gap-4",children:(0,A.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:l(e=>{var a,l;const d={companyId:"admin"===(null===V||void 0===V?void 0:V.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.companyId,directorId:"companyDirector"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.directorId,branchId:"admin"===(null===V||void 0===V?void 0:V.userType)||"companyDirector"===(null===V||void 0===V?void 0:V.userType)||"company"===(null===V||void 0===V?void 0:V.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.branchId,employeId:null===e||void 0===e||null===(a=e.employee)||void 0===a?void 0:a.value,vendorId:null===e||void 0===e?void 0:e.vendorId,advanceType:null===e||void 0===e?void 0:e.typeSelection,amount:+(null===e||void 0===e?void 0:e.amount),date:(0,t.Tk)(null===e||void 0===e?void 0:e.paymentDate),naration:null===e||void 0===e?void 0:e.naration,attachment:Z,paidToEmployeId:"cash"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(l=e.employeeId)||void 0===l?void 0:l.value:null,bankAccId:"cash"!==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.bankId:null,type:null===e||void 0===e?void 0:e.paymentMode,chequeNo:"cheque"!==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.chequeNo:null,transactionNo:"bank"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.transactionNo:null};S((0,I.fK)(d)).then(e=>{e.error||_(-1)})}),children:[(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-8 md:my-1 px-3 md:mt-4",children:["admin"===(null===V||void 0===V?void 0:V.userType)&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Company ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(n.xI,{control:j,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,A.jsxs)(N.A,(0,d.A)((0,d.A)({},a),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(N.A.Option,{value:"",children:"Select Company"}),E?(0,A.jsx)(N.A.Option,{disabled:!0,children:(0,A.jsx)(g.A,{})}):null===P||void 0===P?void 0:P.map(e=>(0,A.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),q.PDCompanyId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.PDCompanyId.message})]}),("admin"===(null===V||void 0===V?void 0:V.userType)||"company"===(null===V||void 0===V?void 0:V.userType)||"companyDirector"===(null===V||void 0===V?void 0:V.userType))&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Branch ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(n.xI,{control:j,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,A.jsxs)(N.A,(0,d.A)((0,d.A)({},a),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(N.A.Option,{value:"",children:"Select Branch"}),O?(0,A.jsx)(N.A.Option,{disabled:!0,children:(0,A.jsx)(g.A,{})}):null===B||void 0===B?void 0:B.map(e=>(0,A.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),q.PDBranchId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.PDBranchId.message})]}),"Employe"===(0,n.FH)({control:j,name:"typeSelection"})&&(0,A.jsxs)("div",{className:"w-full",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,A.jsx)(n.xI,{name:"employee",control:j,rules:{required:"Employee is required"},render:e=>{let{field:a}=e;return(0,A.jsx)(m.Ay,(0,d.A)((0,d.A)({},a),{},{onFocus:()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===V||void 0===V?void 0:V.userType)?L:"company"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.companyId,branchId:"company"===(null===V||void 0===V?void 0:V.userType)||"admin"===(null===V||void 0===V?void 0:V.userType)||"companyDirector"===(null===V||void 0===V?void 0:V.userType)?Q:"companyBranch"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.branchId};S((0,v.qV)(e))},options:null===k||void 0===k?void 0:k.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(q.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),q.employee&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.employee.message})]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Amount",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,d.A)((0,d.A)({type:"number",step:"0.01"},a("amount",{required:"Amount is required"})),{},{className:" ".concat(t.Ol," ").concat(q.amount?"border-[1px] ":"border-gray-300"),placeholder:"Enter Amount"})),q.amount&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.amount.message})]}),(0,A.jsxs)("div",{className:"py-2",children:[(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-2 md:my-1 px-3 md:mt-2",children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("div",{className:"flex items-center gap-4",children:[(0,A.jsx)("label",{className:"your-input-label-class",children:(0,A.jsx)(n.xI,{name:"paymentMode",control:j,defaultValue:"cash",rules:{required:"Type is required"},render:e=>{let{field:a}=e;return(0,A.jsxs)(h.Ay.Group,(0,d.A)((0,d.A)({defaultValue:"cash"},a),{},{children:[(0,A.jsx)(h.Ay,{className:"".concat(t.Q0),value:"cash",children:"Cash"}),(0,A.jsx)(h.Ay,{className:"".concat(t.Q0),value:"bank",children:"Bank"})]}))}})}),q.type&&(0,A.jsx)("span",{className:"error-message",children:q.type.message})]}),q.type&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.type.message})]}),"cash"!==T("paymentMode")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Sender Bank",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(n.xI,{control:j,name:"bankId",rules:{required:"bankId is required"},render:e=>{var a,l;let{field:n}=e;return(0,A.jsxs)(N.A,(0,d.A)((0,d.A)({},n),{},{defaultValue:"",className:"".concat(t.Hy," "),onFocus:()=>{S((0,c.ZN)({_id:"admin"===(null===V||void 0===V?void 0:V.userType)||"companyDirector"===(null===V||void 0===V?void 0:V.userType)||"company"===(null===V||void 0===V?void 0:V.userType)?K:"companyBranch"===(null===V||void 0===V?void 0:V.userType)?null===V||void 0===V?void 0:V._id:null===V||void 0===V?void 0:V.branchId}))},children:[(0,A.jsx)(N.A.Option,{value:"",children:"Select Bank"}),(null===w||void 0===w||null===(a=w.data)||void 0===a?void 0:a.bankData)&&(null===w||void 0===w||null===(l=w.data)||void 0===l?void 0:l.bankData.length)>0&&w.data.bankData.map(e=>(0,A.jsx)(N.A.Option,{value:e._id,children:(0,t.ig)(e)},e._id)),"         "]}))}}),q.bankId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.bankId.message})]}),"cash"===T("paymentMode")&&(0,A.jsxs)("div",{className:"w-full",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,A.jsx)(n.xI,{name:"employeeId",control:j,rules:{required:"Employee is required"},render:e=>{let{field:a}=e;return(0,A.jsx)(m.Ay,(0,d.A)((0,d.A)({},a),{},{options:null===k||void 0===k?void 0:k.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(q.employeeId?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),q.employeeId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.employeeId.message})]}),"cheque"===T("paymentMode")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Cheque No",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,d.A)((0,d.A)({type:""},a("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(t.Ol," ").concat(q.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),q.chequeNo&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.chequeNo.message})]}),"bank"===T("paymentMode")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Transaction No",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,d.A)((0,d.A)({type:"text"},a("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(t.Ol," ").concat(q.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter transaction no"})),q.transactionNo&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.transactionNo.message})]})]}),(0,A.jsx)("div",{className:"px-3",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Payment Date"}),(0,A.jsx)(n.xI,{name:"paymentDate",control:j,render:e=>{let{field:a}=e;return(0,A.jsx)(y.A,{field:a,disabledDate:e=>e&&e>b()().endOf("day"),errors:q})}}),q.date&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:"Date is required"})]})})]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Naration",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("textarea",(0,d.A)((0,d.A)({},a("naration",{required:"Naration is required"})),{},{className:" ".concat(t.Ol," ").concat(q.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),q.naration&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.naration.message})]}),(0,A.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,A.jsx)("div",{className:"font-medium mb-2",children:"Attachments:"}),F?(0,A.jsx)("div",{className:"space-y-2"}):(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsx)("input",{type:"file",onChange:e=>{const a=e.target.files[0];if(a){e.target.value=null;const l={filePath:a,isVideo:!1,isMultiple:!1};S((0,p.Sg)(l)).then(e=>{var a;null!==e&&void 0!==e&&null!==(a=e.payload)&&void 0!==a&&a.data&&G(a=>{var l;return[...a,null===(l=e.payload)||void 0===l?void 0:l.data]})})}},className:"hidden",id:"file-upload"}),(0,A.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,A.jsx)(x.chT,{className:"mr-2"})," Add Attachments"]}),(0,A.jsx)("div",{className:"space-y-2",children:null===Z||void 0===Z?void 0:Z.map((e,a)=>(0,A.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,A.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,A.jsx)(x.chT,{className:"text-gray-500"}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,A.jsx)("button",{type:"button",onClick:()=>(e=>{G(a=>a.filter((a,l)=>l!==e))})(a),className:"text-red-500 hover:text-red-700",children:(0,A.jsx)(x.QCr,{})})]},a))})]})]})]}),(0,A.jsx)("div",{className:"flex justify-end",children:(0,A.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:e?(0,A.jsx)(f.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=2916.05a87a03.chunk.js.map