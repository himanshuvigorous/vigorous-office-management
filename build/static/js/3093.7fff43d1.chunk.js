"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3093],{3093:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var l=n(89379),o=n(24858),i=n(83003),a=n(15187),d=n(65043),r=n(31744),s=n(39160),c=n(97326),u=n(53913),p=n(65512),m=(n(86178),n(60446)),v=n.n(m),h=n(78227),x=n(12106),y=(n(42837),n(94084),n(69223)),N=n(55971),w=n(50822),g=n(6720),b=n(37762),f=n(64857),j=(n(11906),n(33007),n(89427)),T=(n(70337),n(40088),n(12208)),S=(n(27744),n(17995),n(76932),n(70579));const D=function(){var e,t,n,m;const{control:D,formState:{errors:A},setValue:I,watch:C}=(0,o.mN)(),[k,G]=(0,d.useState)(10),P=(0,i.wA)(),{clientBillingPaymentTrackingReportList:R,clientBillingPaymentTrackingReportFunc_loading:F,clientBillingPaymentTrackingCount:B}=(0,i.d4)(e=>e.reports),{departmentListData:z,loading:L}=(0,i.d4)(e=>e.department),[_,E]=(0,d.useState)({}),{taskTypeList:O}=(0,i.d4)(e=>e.taskType),{clientGroupList:Y,groupSearchLoading:V}=(0,i.d4)(e=>e.clientGroup),{clientList:H}=(0,i.d4)(e=>e.client),{employeList:K}=(0,i.d4)(e=>e.employe),[M,U]=(0,d.useState)(""),W=JSON.parse(localStorage.getItem("user_info_".concat(a.AU))),{industryListData:q,indusSearchloading:J}=(0,i.d4)(e=>e.industry),{orgTypeList:Q,orgSearchloading:X}=(0,i.d4)(e=>e.orgType),[Z,$]=(0,d.useState)(1),[ee,te]=(0,d.useState)(""),{branchList:ne}=(0,i.d4)(e=>e.branch),le=(0,o.FH)({control:D,name:"PDCompanyId",defaultValue:""}),oe=(0,o.FH)({control:D,name:"PDBranchId",defaultValue:""}),ie=(0,o.FH)({control:D,name:"status",defaultValue:""}),ae=(0,o.FH)({control:D,name:"PDOrganizationType",defaultValue:""}),de=(0,o.FH)({control:D,name:"PDindustrytype",defaultValue:""}),re=(0,o.FH)({control:D,name:"department",defaultValue:""}),se=(0,o.FH)({control:D,name:"groupName",defaultValue:""});(0,d.useEffect)(()=>{const e=setTimeout(()=>{te(M)},500);return()=>{clearTimeout(e)}},[M]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})();const ce=function(){return{currentPage:Z,pageSize:k,reqPayload:{text:ee,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===W||void 0===W?void 0:W.userType)?le:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId,directorId:"",branchId:"company"===(null===W||void 0===W?void 0:W.userType)||"admin"===(null===W||void 0===W?void 0:W.userType)||"companyDirector"===(null===W||void 0===W?void 0:W.userType)?oe:"companyBranch"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.branchId,status:"true"==ie||"false"!=ie&&"",organizationId:ae,organizationIds:[],departmentId:re,departmentIds:[],industryId:de,industryIds:[],groupId:se,groupIds:[]}}};(0,d.useEffect)(()=>{ue(ee)},[Z,ee,k]);const ue=()=>{P((0,x.Ep)(ce(!0)))},[pe,me]=(0,d.useState)(!1);(0,d.useEffect)(()=>{"company"!==(null===W||void 0===W?void 0:W.userType)&&"companyDirector"!==(null===W||void 0===W?void 0:W.userType)||P((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===W||void 0===W?void 0:W.userType)?le:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId})),I("startDate",v()().subtract(1,"month")),I("endDate",v()())},[]);const ve=async()=>{ue()},he=async()=>{var e,t,n;const l=new y.Workbook,o=l.addWorksheet("clientBillingPaymentTrackingReport");o.columns=[{header:"S.No.",key:"sno",width:10},{header:"Group Name",key:"groupName",width:10},{header:"Client Name",key:"clientName",width:10},{header:"Invoice Name ",key:"invoiceName",width:10},{header:"Sub Total",key:"subTotal",width:10},{header:"IGST",key:"iGST",width:10},{header:"CGST",key:"cGST",width:10},{header:"SGST",key:"sGST",width:10},{header:"Total Invoice Amount",key:"totalInvoiceAmount",width:10},{header:"Recieved Amount",key:"recievedAmount",width:10},{header:"Recieved Date",key:"recievedDate",width:10}];o.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const i=await(null===w.K||void 0===w.K?void 0:w.K.clientBillingPaymentTrackingReportFunc(ce(!1)));if(!i&&(null===i||void 0===i||null===(e=i.data)||void 0===e||!e.docs))return;const a=null===i||void 0===i||null===(t=i.data)||void 0===t||null===(n=t.docs)||void 0===n?void 0:n.map((e,t)=>{var n,l,o,i;return{sno:t+1||"N/A",groupName:(null===e||void 0===e?void 0:e.groupName)||"N/A",clientName:(null===e||void 0===e?void 0:e.clientName)||"N/A",invoiceName:(null===e||void 0===e?void 0:e.invoiceNumber)||"N/A",subTotal:(null===e||void 0===e||null===(n=e.receiptData)||void 0===n?void 0:n.subTotalAmount)||"N/A",iGST:(null===e||void 0===e?void 0:e.IGST)||"N/A",cGST:(null===e||void 0===e?void 0:e.CGST)||"N/A",sGST:(null===e||void 0===e?void 0:e.SGST)||"N/A",totalInvoiceAmount:(null===e||void 0===e||null===(l=e.receiptData)||void 0===l?void 0:l.subTotalAmount)||"N/A",recievedAmount:(null===e||void 0===e||null===(o=e.receiptData)||void 0===o?void 0:o.grandTotalAmount)||"N/A",recievedDate:v()(null===e||void 0===e||null===(i=e.receiptData)||void 0===i?void 0:i.date).format("DD-MM-YYYY hh:mm a")||"N/A"}});null===a||void 0===a||a.forEach(e=>{o.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),o.autoFilter={from:"A1",to:"I1"},l.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="clientBillingPaymentTrackingReport.xlsx",n.click()})},xe=async()=>{var e,t,n,l,o,i;const a=new b.uE({orientation:"landscape",unit:"pt"});a.setFontSize(16),a.text("Client  - ".concat(null===_||void 0===_?void 0:_.fullName),40,40),a.text("".concat(null!==(e=null===_||void 0===_?void 0:_.email)&&void 0!==e?e:"-"," / ").concat((null===_||void 0===_||null===(t=_.mobile)||void 0===t?void 0:t.code)+(null===_||void 0===_||null===(n=_.mobile)||void 0===n?void 0:n.number)),40,60);const d=await(null===w.K||void 0===w.K?void 0:w.K.clientBillingPaymentTrackingReportFunc(ce(!1)));if(!d&&(null===d||void 0===d||null===(l=d.data)||void 0===l||!l.docs))return;const r=null===d||void 0===d||null===(o=d.data)||void 0===o||null===(i=o.docs)||void 0===i?void 0:i.map((e,t)=>{var n,l,o,i;return[t+1,(null===e||void 0===e?void 0:e.groupName)||"N/A",(null===e||void 0===e?void 0:e.clientName)||"N/A",(null===e||void 0===e?void 0:e.invoiceNumber)||"N/A",(null===e||void 0===e||null===(n=e.receiptData)||void 0===n?void 0:n.subTotalAmount)||"N/A",(null===e||void 0===e?void 0:e.IGST)||"N/A",(null===e||void 0===e?void 0:e.CGST)||"N/A",(null===e||void 0===e?void 0:e.SGST)||"N/A",(null===e||void 0===e||null===(l=e.receiptData)||void 0===l?void 0:l.subTotalAmount)||"N/A",(null===e||void 0===e||null===(o=e.receiptData)||void 0===o?void 0:o.grandTotalAmount)||"N/A",v()(null===e||void 0===e||null===(i=e.receiptData)||void 0===i?void 0:i.date).format("DD-MM-YYYY hh:mm a")||"N/A"]});(0,f.Ay)(a,{startY:70,head:[["S.No.","Group Name","Client Name","Invoice Name ","Sub Total","IGST","CGST","SGST","Total Invoice Amount","Recieved Amount","Recieved Date"]],body:r,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("clientBillingPaymentTrackingReport.pdf")},ye=[{key:"1",label:(0,S.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,S.jsxs)("div",{className:"bg-[#ececec] space-y-1 sm:flex justify-between items-center",children:[(0,S.jsxs)("div",{className:"sm:flex  grid grid-cols-1 gap-1.5 sm:flex-wrap text-[14px]",children:[("admin"===(null===W||void 0===W?void 0:W.userType)||"company"===(null===W||void 0===W?void 0:W.userType)||"companyDirector"===(null===W||void 0===W?void 0:W.userType))&&(0,S.jsxs)("div",{className:"",children:[(0,S.jsx)(o.xI,{name:"PDBranchId",control:D,render:e=>{let{field:t}=e;return(0,S.jsxs)(p.A,(0,l.A)((0,l.A)({},t),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(p.A.Option,{value:"",children:"Select Branch"}),null===ne||void 0===ne?void 0:ne.map(e=>(0,S.jsxs)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),A.PDBranchId&&(0,S.jsx)("p",{className:"text-red-500 text-sm",children:A.PDBranchId.message})]}),(0,S.jsx)("div",{className:"",children:(0,S.jsx)(o.xI,{name:"groupName",control:D,render:e=>{var t;let{field:n}=e;return(0,S.jsxs)(p.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,placeholder:"Select Group",onFocus:()=>{P((0,T.J_)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===W||void 0===W?void 0:W.userType)?le:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId,branchId:["admin","company","companyDirector"].includes(null===W||void 0===W?void 0:W.userType)?oe:"companyBranch"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.branchId,groupId:""}))},onChange:e=>n.onChange(e),filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(p.A.Option,{value:"",children:"Select Group"}),V?(0,S.jsx)(p.A.Option,{disabled:!0,children:(0,S.jsx)(j.A,{})}):null===(t=(0,a._o)(Y))||void 0===t?void 0:t.map(e=>(0,S.jsxs)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName," (",null===e||void 0===e?void 0:e.groupName,")"]},null===e||void 0===e?void 0:e._id))]}))}})})]}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{I("PDCompanyId",""),I("PDBranchId",""),I("status",""),I("PDOrganizationType",""),I("PDindustrytype",""),I("department",""),I("groupName",""),ve()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,S.jsx)("button",{onClick:()=>{ve()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,S.jsx)(s.A,{onChange:e=>{U(e)},children:(0,S.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,S.jsxs)("div",{className:"",children:[(0,S.jsx)(c.A,{className:"custom-collapse",items:ye,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,S.jsx)(g.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,S.jsxs)("div",{className:"space-y-1.5 sm:flex grid grid-cols-1 justify-between items-center",children:[(0,S.jsxs)("div",{className:"flex py-1 items-center gap-2",children:[(0,S.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,S.jsx)(p.A,{id:"pageSize",value:k,onChange:e=>{G(Number(e)),$(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:a.qc.map(e=>(0,S.jsx)(p.A.Option,{value:e,children:e},e))})]}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{xe()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,S.jsx)("button",{onClick:()=>{he()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,S.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Group Name"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Name"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Invoice Number"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Sub Total"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"IGST"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"CGST"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"SGST"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Total Invoice Amount "}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Recieved Amount "}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Recieved Date "})]})}),F?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,S.jsx)(N.A,{})})}):(0,S.jsx)("tbody",{children:R&&(null===R||void 0===R?void 0:R.length)>0?null===R||void 0===R?void 0:R.map((e,t)=>{var n,l,o,i;return(0,S.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(Z-1)*k}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.groupName}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.clientName}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.invoiceNumber)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,a.w2)(null===e||void 0===e||null===(n=e.receiptData)||void 0===n?void 0:n.subTotalAmount)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,a.w2)(null===e||void 0===e?void 0:e.IGST)}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,a.w2)(null===e||void 0===e?void 0:e.CGST)}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,a.w2)(null===e||void 0===e?void 0:e.SGST)}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,a.w2)(null===e||void 0===e||null===(l=e.receiptData)||void 0===l?void 0:l.subTotalAmount)}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,a.w2)(null===e||void 0===e||null===(o=e.receiptData)||void 0===o?void 0:o.grandTotalAmount)}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e||null===(i=e.receiptData)||void 0===i?void 0:i.date)||"-"})]})}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,S.jsxs)(u.A,{className:"antmodalclassName !w-[60%] !h-[50%]",title:"Client / ".concat(null===_||void 0===_?void 0:_.fullName," "),open:pe,onCancel:()=>me(!1),footer:null,children:[(0,S.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,S.jsxs)("div",{children:[null!==(e=null===_||void 0===_?void 0:_.email)&&void 0!==e?e:"-"," / ",(null===_||void 0===_||null===(t=_.mobile)||void 0===t?void 0:t.code)+(null===_||void 0===_||null===(n=_.mobile)||void 0===n?void 0:n.number)]})}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{xe()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,S.jsx)("button",{onClick:()=>{he()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]}),(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Department Name"})]})}),F?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,S.jsx)(N.A,{})})}):(0,S.jsx)("tbody",{children:null!==_&&void 0!==_&&_.departmentData&&(null===_||void 0===_?void 0:_.departmentData.length)>0?null===_||void 0===_||null===(m=_.departmentData)||void 0===m?void 0:m.map((e,t)=>(0,S.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(Z-1)*k}),(0,S.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.name})]})):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})]})]}),(0,S.jsx)(h.A,{totalCount:B,pageSize:k,currentPage:Z,onChange:e=>{$(e)}})]})})}}}]);
//# sourceMappingURL=3093.7fff43d1.chunk.js.map