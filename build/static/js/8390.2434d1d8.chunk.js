"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8390],{18390:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});var a=t(89379),s=t(73216),d=t(39160),n=t(83003),i=t(65043),r=t(30064),o=t.n(r),c=t(31174),u=t(23156),x=t(47196),m=t(24858),v=t(15187),h=t(78227),p=t(31744),j=t(78729),f=(t(65337),t(91579)),y=t(30326),b=t(65512),N=t(96651),g=t(4938),w=t(55971),A=t(60446),D=t.n(A),C=t(83002),I=t(89427),S=t(70579);const T=function(){const{register:e,setValue:l,control:t,formState:{errors:r}}=(0,m.mN)(),A=(0,s.Zp)(),T=(0,n.wA)(),L=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),[P,_]=(0,i.useState)(""),{companyList:B}=(0,n.d4)(e=>e.company),{branchList:O,branchListloading:k}=(0,n.d4)(e=>e.branch),{clientNewsList:H,totalNewzCount:q,loading:z}=(0,n.d4)(e=>e.clientNews),E=(0,m.FH)({control:t,name:"PDCompanyId",defaultValue:""}),F=(0,m.FH)({control:t,name:"PDBranchId",defaultValue:""}),V=(0,m.FH)({control:t,name:"status",defaultValue:""}),[Y,M]=(0,i.useState)(1),R=[F,P,V,E].join("-"),[J,U]=(0,i.useState)(!1);(0,i.useEffect)(()=>{J?1===Y?W():M(1):U(e=>!0)},[R]),(0,i.useEffect)(()=>{W()},[Y]);const W=()=>{const e={page:Y,limit:10,reqPayload:{companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?E:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,branchId:"company"===(null===L||void 0===L?void 0:L.userType)||"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)?F:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId,directorId:"",text:P,sort:!0,status:"true"===V||"false"!==V&&"",isPagination:!0}};T((0,f.Fr)(e))};(0,i.useEffect)(()=>{(E||"company"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType))&&T((0,p.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?E:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId}))},[E]),(0,i.useEffect)(()=>{"admin"===(null===L||void 0===L?void 0:L.userType)&&T((0,j.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:G,canRead:Z,canUpdate:K,canDelete:Q}=(0,g.A)();return(0,S.jsx)(d.A,{onChange:e=>{_(e)},children:(0,S.jsxs)("section",{children:[(0,S.jsxs)("div",{className:"lg:flex justify-between items-center xl:space-y-0 space-y-2 py-1",children:[(0,S.jsxs)("div",{className:"grid md:flex sm:grid-cols-3 grid-cols-1 flex-wrap md:gap-3 gap-1.5",children:["admin"===(null===L||void 0===L?void 0:L.userType)&&(0,S.jsxs)("div",{className:"",children:[(0,S.jsx)(m.xI,{control:t,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,S.jsxs)(b.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",disabled:z,className:"".concat(v.Lp," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(b.A.Option,{value:"",children:"Select Company"}),null===B||void 0===B?void 0:B.map(e=>(0,S.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),r.PDCompanyId&&(0,S.jsx)("p",{className:"text-red-500 text-sm",children:r.PDCompanyId.message})]}),("admin"===(null===L||void 0===L?void 0:L.userType)||"company"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType))&&(0,S.jsxs)("div",{className:"",children:[(0,S.jsx)(m.xI,{control:t,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,S.jsxs)(b.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",disabled:z,className:"".concat(v.Lp," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(b.A.Option,{value:"",children:"Select Branch"}),k?(0,S.jsx)(b.A.Option,{disabled:!0,children:(0,S.jsx)(I.A,{})}):null===O||void 0===O?void 0:O.map(e=>(0,S.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),r.PDBranchId&&(0,S.jsx)("p",{className:"text-red-500 text-sm",children:r.PDBranchId.message})]}),(0,S.jsx)("div",{children:(0,S.jsx)(m.xI,{control:t,name:"status",rules:{required:"Status is required"},render:e=>{let{field:l}=e;return(0,S.jsxs)(b.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",disabled:z,className:"".concat(v.Lp," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(b.A.Option,{value:"",children:"Select status"}),(0,S.jsx)(b.A.Option,{value:"true",children:"Active"}),(0,S.jsx)(b.A.Option,{value:"false",children:"Inactive"})]}))}})})]}),(0,S.jsxs)("div",{className:"flex justify-end items-end gap-2",children:[(0,S.jsx)("button",{onClick:()=>{l("PDBranchId",""),l("PDCompanyId",""),l("status","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})}),G&&(0,S.jsx)(N.A,{placement:"topLeft",title:"Add News",children:(0,S.jsxs)("button",{onClick:()=>{A("/admin/client-news/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,S.jsx)(u.OiG,{}),(0,S.jsx)("span",{className:"text-[12px]",children:"Add News"})]})})]})]}),(0,S.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:Z&&(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,S.jsx)("thead",{className:"",children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,S.jsx)("th",{className:"tableHead",children:"Title"}),(0,S.jsx)("th",{className:"tableHead",children:"Created At"}),(0,S.jsx)("th",{className:"tableHead",children:"Created By"}),(0,S.jsx)("th",{className:"tableHead",children:"Status"}),(Q||K)&&(0,S.jsx)("th",{className:"tableHead w-[15%]",children:"Action"})]})}),z?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,S.jsx)(w.A,{})})}):(0,S.jsx)("tbody",{children:H&&(null===H||void 0===H?void 0:H.length)>0?null===H||void 0===H?void 0:H.map((e,l)=>{var t,a,s,d;return(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(l%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151]"),children:[(0,S.jsx)("td",{className:"tableData ",children:l+1+10*(Y-1)}),(0,S.jsx)("td",{className:"tableData ",children:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:"-"}),(0,S.jsx)("td",{className:"tableData ",children:null!==(a=D()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==a?a:"-"}),(0,S.jsx)("td",{className:"tableData ",children:null!==(s=null===e||void 0===e?void 0:e.createdBy)&&void 0!==s?s:"-"}),(0,S.jsx)("td",{className:"tableData ",children:(0,S.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(d="Inactive")?d:"-"})}),(Q||K)&&(0,S.jsx)("td",{className:"tableData",children:(0,S.jsx)(y.A,{menu:{items:[K&&{key:"edit",label:(0,S.jsxs)("span",{onClick:()=>A("/admin/client-news/edit/".concat((0,c.w)(null===e||void 0===e?void 0:e._id))),className:"flex items-center text-[#3c8dbc] hover:text-[#337ab7]",children:[(0,S.jsx)(u.Jcp,{className:"mr-2",size:16}),"Edit"]})},Q&&{key:"delete",label:(0,S.jsxs)("span",{onClick:()=>(e=>{let l={_id:e};o().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&T((0,f._l)(l)).then(e=>{Y>1&&1==(null===H||void 0===H?void 0:H.length)?M(Number(Y-1)):W()})})})(null===e||void 0===e?void 0:e._id),className:"flex items-center text-red-600 hover:text-red-500",children:[(0,S.jsx)(x.tqC,{className:"mr-2",size:16}),"Delete"]})}].filter(Boolean)},trigger:["click"],children:(0,S.jsx)(N.A,{placement:"topLeft",title:"More Actions",children:(0,S.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(C.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})]})}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===H||void 0===H?void 0:H.length)>0&&(0,S.jsx)(h.A,{totalCount:q,pageSize:10,currentPage:Y,onChange:e=>{M(e)}})]})})}},65337:(e,l,t)=>{t.d(l,{A:()=>d});var a=t(91686),s=t(70579);const d=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,s.jsx)(a.A,{size:"large"})})}}}]);
//# sourceMappingURL=8390.2434d1d8.chunk.js.map