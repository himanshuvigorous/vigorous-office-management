"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3270],{3270:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var l=t(89379),s=t(65043),d=t(39160),n=t(83003),i=t(23156),r=t(47196),c=t(78227),o=t(73216),u=t(35475),x=t(24858),m=t(15187),p=t(31744),h=t(78729),v=t(31174),y=t(30064),b=t.n(y),j=t(30326),f=t(65512),N=t(96651),g=t(735),w=t(28249),A=t(55971),D=t(83002),C=t(4938),S=t(99974),P=t(89427),I=t(60184),L=t(70579);const _=function(){var e;const{register:a,control:t,setValue:y,formState:{errors:_}}=(0,x.mN)(),k=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),{userCompanyId:O,userBranchId:T,userType:H}=(0,g.A)(),{standardPayrollListData:B,standardPayrollListTotal:R,loading:V}=(0,n.d4)(e=>e.standardPayroll),{PageRoleData:z}=(0,n.d4)(e=>e.rolePermission),{sidebarListData:E}=(0,n.d4)(e=>e.dynamicSidebar),q=(0,n.wA)(),M=(0,o.Zp)(),{companyList:U}=(0,n.d4)(e=>e.company),{branchList:F,branchListloading:G}=(0,n.d4)(e=>e.branch),J=(0,x.FH)({control:t,name:"PDCompanyId",defaultValue:O}),{canCreate:W,canRead:Z,canUpdate:$,canDelete:K}=(0,C.A)(),[Q,X]=(0,u.ok)(),Y=parseInt(Q.get("page"))||1,ee=Q.get("branchId")||"",ae=Q.get("status")||"",[te,le]=(0,s.useState)(Y),[se,de]=(0,s.useState)(10),[ne,ie]=(0,s.useState)(ae),[re,ce]=(0,s.useState)(""),[oe,ue]=(0,s.useState)(ee);(0,s.useEffect)(()=>{const e=new URLSearchParams;te>1&&e.set("page",te),oe&&e.set("branchId",oe),ne&&e.set("status",ne),X(e)},[oe,ne,te,re]),(0,s.useEffect)(()=>{xe()},[oe,ne,te,re]);const xe=()=>{let e={currentPage:te,pageSize:se,reqPayload:{text:re,sort:!0,status:ne,isPagination:!0,directorId:"",companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?J:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?oe:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId}};q((0,w.lf)(e))};(0,s.useEffect)(()=>{(J||"company"===H||"companyDirector"===H)&&q((0,p.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:J}))},[J]),(0,s.useEffect)(()=>{"admin"===H&&q((0,h.Ar)({text:"",sort:!0,status:!0,isPagination:!1})),q((0,S.kM)({companyId:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,isPagination:!1}))},[]);const me=null===E||void 0===E||null===(e=E.find(e=>"standardPayroll"===(null===e||void 0===e?void 0:e.slug)))||void 0===e?void 0:e._id,pe=(0,C.A)(me).canRead;return(0,L.jsxs)(d.A,{onChange:e=>{ce(e)},children:[(0,L.jsxs)("div",{className:"flex justify-start items-center  my-1",children:[(0,L.jsx)("button",{className:"bg-header px-3 py-2 border border-header rounded-l-md flex justify-center items-center space-x-2 text-white",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Standard payroll"})}),(0,L.jsx)("button",{onClick:()=>{if(!pe)return null;M("/admin/payroll-list")},className:" px-3 border border-black py-2 rounded-r-md flex justify-center items-center space-x-2 text-black",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Actual Payslip"})})]}),(0,L.jsxs)("div",{className:"bg-grey-100 w-full",children:[(0,L.jsxs)("div",{className:"w-full md:flex justify-between items-center py-1 sm:space-y-0 space-y-2",children:[(0,L.jsxs)("div",{className:"md:flex justify-between grid grid-cols-1 gap-2 items-center  text-[14px] rounded-md",children:["admin"===H&&(0,L.jsx)("div",{className:"flex justify-center items-center  text-[14px] rounded-md",children:(0,L.jsx)(x.xI,{control:t,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,L.jsxs)(f.A,(0,l.A)((0,l.A)({},a),{},{defaultValue:"",disabled:V,className:"".concat(m.Lp," "),filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(f.A.Option,{value:"",children:"Select Company"}),null===U||void 0===U?void 0:U.map(e=>(0,L.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),("admin"===H||"company"===H||"companyDirector"===H)&&(0,L.jsx)("div",{className:"flex justify-center items-center  text-[14px] rounded-md",children:(0,L.jsxs)(f.A,{defaultValue:"",disabled:V,value:oe,onChange:e=>{ue(e),le(1)},className:"".concat(m.Lp," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(f.A.Option,{value:"",children:"Select Branch"}),G?(0,L.jsx)(f.A.Option,{disabled:!0,children:(0,L.jsx)(P.A,{})}):null===F||void 0===F?void 0:F.map(e=>(0,L.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,L.jsx)("div",{className:"",children:(0,L.jsxs)(f.A,{className:" w-32 ".concat(m.Lp," ").concat(_.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",disabled:V,value:ne,onChange:e=>{ie(e),le(1)},showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(f.A.Option,{value:"",children:"Select Status"}),(0,L.jsx)(f.A.Option,{value:"Draft",children:" Draft  "}),(0,L.jsx)(f.A.Option,{value:"Active",children:" Active  "}),(0,L.jsx)(f.A.Option,{value:"InActive",children:" InActive  "})]})}),(0,L.jsx)("div",{className:"w-full my-2",children:(0,L.jsx)("button",{onClick:()=>{le(1),ue(""),ie(""),ce("")},className:"bg-header py-[8px] w-full rounded-md  flex px-5 justify-center items-center  text-white",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Reset"})})})]}),W&&(0,L.jsx)("div",{className:"flex justify-end items-center ",children:(0,L.jsx)(N.A,{placement:"topLeft",title:"Create standardPayroll",children:(0,L.jsxs)("button",{onClick:()=>M("/admin/standardPayroll/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,L.jsx)(i.OiG,{}),(0,L.jsx)("span",{className:"text-[12px]",children:"Create standardPayroll"})]})})})]}),(0,L.jsxs)("div",{className:"w-full",children:[(0,L.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,L.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500] h-[40px]",children:[(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,L.jsx)("th",{className:"tableHead",children:"Name"}),(0,L.jsx)("th",{className:"tableHead",children:"Created By"}),(0,L.jsx)("th",{className:"tableHead",children:"CTC"}),(0,L.jsx)("th",{className:"tableHead",children:"Monthly Salary"}),(0,L.jsx)("th",{className:"tableHead",children:"Basic Salary"}),(0,L.jsx)("th",{className:"tableHead",children:"Status"}),(Z||$)&&(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),V?(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,L.jsx)(A.A,{})})}):(0,L.jsx)("tbody",{children:B&&(null===B||void 0===B?void 0:B.length)>0?null===B||void 0===B?void 0:B.map((e,a)=>(0,L.jsxs)("tr",{className:"border-b-[1px] ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151]"),children:[(0,L.jsx)("td",{className:"tableData",children:a+1+(te-1)*se}),(0,L.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.employeName}),(0,L.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.createdBy}),(0,L.jsx)("td",{className:"tableData",children:(0,m.w2)(null===e||void 0===e?void 0:e.ctc)}),(0,L.jsx)("td",{className:"tableData",children:(0,m.w2)(null===e||void 0===e?void 0:e.baseSalary)?(0,m.w2)(null===e||void 0===e?void 0:e.baseSalary):"-"}),(0,L.jsx)("td",{className:"tableData",children:(0,m.w2)(null===e||void 0===e?void 0:e.basicSalary)?(0,m.w2)(null===e||void 0===e?void 0:e.basicSalary):"-"}),(0,L.jsx)("td",{className:"tableData",children:(0,L.jsxs)("select",{className:"border-[1px] px-2 py-1.5 rounded-lg text-[12px]",value:null===e||void 0===e?void 0:e.status,disabled:"InActive"===(null===e||void 0===e?void 0:e.status),onChange:a=>((e,a)=>{q((0,w.Vt)({_id:a,status:e.target.value})).then(e=>{null!==e&&void 0!==e&&e.error||xe()})})(a,null===e||void 0===e?void 0:e._id),children:[(0,L.jsx)("option",{disabled:!0,value:"Draft",children:" Draft "}),(0,L.jsx)("option",{value:"Active",children:" Active "}),(0,L.jsx)("option",{value:"InActive",children:" InActive "})]})}),(Z||$)&&(0,L.jsxs)("td",{className:"tableData",children:[(0,L.jsx)(N.A,{placement:"topLeft",title:"View",children:(0,L.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",onClick:()=>{M("/admin/standardPayroll/view/".concat((0,v.w)(null===e||void 0===e?void 0:e._id)))},children:(0,L.jsx)(I.Ny1,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,L.jsx)(j.A,{menu:{items:[$&&{key:"edit",label:(0,L.jsxs)("span",{className:"flex items-center",children:[(0,L.jsx)(i.Jcp,{className:"mr-2 text-[#3c8dbc]"}),"Edit"]}),onClick:()=>M("/admin/standardPayroll/edit/".concat((0,v.w)(null===e||void 0===e?void 0:e._id)))},K&&{key:"delete",label:(0,L.jsxs)("span",{className:"flex items-center text-red-500",children:[(0,L.jsx)(r.tqC,{className:"mr-2"}),"Delete"]}),onClick:()=>(e=>{let a={_id:e};b().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&q((0,w.G$)(a)).then(e=>{te>1&&1==(null===B||void 0===B?void 0:B.length)?le(Number(te-1)):xe()})})})(null===e||void 0===e?void 0:e._id)}]},trigger:["click"],children:(0,L.jsx)(N.A,{placement:"topLeft",title:"More Actions",children:(0,L.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(D.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})]})):(0,L.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,L.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,L.jsx)(c.A,{totalCount:R,pageSize:se,currentPage:te,onChange:e=>le(e)})]})]})]})}}}]);
//# sourceMappingURL=3270.95782067.chunk.js.map