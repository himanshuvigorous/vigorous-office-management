"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8645],{58645:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var d=l(89379),a=l(73216),s=l(39160),i=l(83003),n=l(65043),o=l(30064),r=l.n(o),c=(l(31174),l(23156)),u=l(47196),p=l(24858),m=l(15187),v=l(78227),x=l(31744),h=l(78729),j=(l(65337),l(65512)),y=l(96651),f=l(4938),b=l(55971),N=l(60446),g=l.n(N),w=l(89427),A=l(60089),T=l(549),I=l(85114),D=l(31462),S=l(26929),C=l(94084),O=l(58302),k=l(42837),P=l(70579);const _=function(){const{register:e,control:t,setValue:l,formState:{errors:o}}=(0,p.mN)(),N=((0,a.Zp)(),(0,i.wA)()),_=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),{companyList:L}=(0,i.d4)(e=>e.company),{branchList:q,loading:M}=(0,i.d4)(e=>e.branch),{projectTaskList:Y,totalProjectTaskCount:B,loading:F}=(0,i.d4)(e=>e.projectTask),{employeList:H,laoding:E}=(0,i.d4)(e=>e.employe),[V,R]=(0,n.useState)(""),[z,U]=(0,n.useState)({isOpen:!1,data:null}),[Q,J]=(0,n.useState)({isOpen:!1,data:null}),[G,W]=(0,n.useState)({isOpen:!1,data:null}),[Z,K]=(0,n.useState)(1),X=(0,p.FH)({control:t,name:"PDCompanyId",defaultValue:""}),$=(0,p.FH)({control:t,name:"PDBranchId",defaultValue:""}),ee=(0,p.FH)({control:t,name:"status",defaultValue:""}),te=(0,p.FH)({control:t,name:"startDate",defaultValue:g()()}),le=(0,p.FH)({control:t,name:"endDate",defaultValue:g()()}),de=(0,p.FH)({control:t,name:"employeeId",defaultValue:""}),ae=[X,$,ee,V,te,le,de].join("-"),[se,ie]=(0,n.useState)(!1);(0,n.useEffect)(()=>{se?1===Z?ne():K(1):ie(e=>!0)},[ae]),(0,n.useEffect)(()=>{ne()},[Z]);const ne=()=>{const e={page:Z,limit:10,reqPayload:{companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?X:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId,branchId:"company"===(null===_||void 0===_?void 0:_.userType)||"admin"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType)?$:"companyBranch"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.branchId,directorId:"",text:V,sort:!0,status:ee,isPagination:!0,projectId:"",taskId:"",assignedTo:de,departmentId:"",creatorId:"",followerIds:[],startDate:te?g()(te).format("YYYY-MM-DD"):"",endDate:le?g()(le).format("YYYY-MM-DD"):""}};N((0,A.FS)(e))};(0,n.useEffect)(()=>{(X||"company"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType))&&N((0,x.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?X:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId}))},[X]),(0,n.useEffect)(()=>{"admin"===(null===_||void 0===_?void 0:_.userType)&&N((0,h.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const oe=()=>{N((0,k.qV)({companyId:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId,branchId:["admin","company","companyDirector"].includes(null===_||void 0===_?void 0:_.userType)?$:"companyBranch"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.branchId,departmentId:"",directorId:"",text:"",sort:!0,status:!0,isPagination:!1,isBranch:!0,isDirector:!1}))},re=(e,t)=>{N((0,A.fw)({_id:t,status:e})).then(e=>{e.error||ne()})},{canCreate:ce,canRead:ue,canUpdate:pe,canDelete:me}=(0,f.A)();return(0,P.jsx)(s.A,{onChange:e=>{R(e)},children:(0,P.jsxs)("section",{children:[(0,P.jsxs)("div",{className:"",children:[(0,P.jsxs)("div",{className:"grid grid-cols-1 sm:flex  gap-2 items-center justify-start py-1 text-[14px] rounded-md w-full",children:["admin"===(null===_||void 0===_?void 0:_.userType)&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)(p.xI,{control:t,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,P.jsxs)(j.A,(0,d.A)((0,d.A)({},t),{},{defaultValue:"",className:"".concat(m.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(j.A.Option,{value:"",children:"Select Company"}),null===L||void 0===L?void 0:L.map(e=>(0,P.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),o.PDCompanyId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:o.PDCompanyId.message})]}),("admin"===(null===_||void 0===_?void 0:_.userType)||"company"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType))&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)(p.xI,{control:t,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var t;let{field:l}=e;return(0,P.jsxs)(j.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:"".concat(m.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(j.A.Option,{value:"",children:"Select Branch"}),M?(0,P.jsx)(j.A.Option,{disabled:!0,children:(0,P.jsx)(w.A,{})}):null===(t=(0,m._o)(q))||void 0===t?void 0:t.map(e=>(0,P.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),o.PDBranchId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:o.PDBranchId.message})]}),(0,P.jsx)("div",{children:(0,P.jsx)(p.xI,{name:"employeeId",control:t,render:e=>{var t;let{field:l}=e;return(0,P.jsxs)(j.A,{allowClear:!0,className:"inputAntdSelectClassNameFilterReport",disabled:F,placeholder:"Select Employee",onFocus:oe,showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),value:l.value||[],onChange:e=>l.onChange(e),children:[(0,P.jsx)(j.A.Option,{value:"",children:"Select Employee"}),E?(0,P.jsx)(j.A.Option,{disabled:!0,children:(0,P.jsx)(w.A,{})}):null===(t=(0,m._o)(H,"fullName"))||void 0===t?void 0:t.map(e=>(0,P.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}})}),(0,P.jsx)("div",{children:(0,P.jsx)(p.xI,{name:"status",control:t,rules:{},render:e=>{let{field:t}=e;return(0,P.jsxs)(j.A,(0,d.A)((0,d.A)({},t),{},{className:"capitalize w-32 ".concat(m.Lp," ").concat(o.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(j.A.Option,{value:"",children:"Select Status"}),null===m.RU||void 0===m.RU?void 0:m.RU.map(e=>(0,P.jsxs)(j.A.Option,{className:"capitalize",value:e,children:[" ",e," "]},e))]}))}})}),(0,P.jsx)("div",{children:(0,P.jsx)(p.xI,{name:"startDate",control:t,defaultValue:g()(),render:e=>{let{field:t}=e;return(0,P.jsx)(C.A,{report:!0,disabled:F,placeholder:"Start date",size:"middle",field:t,errors:o})}})}),(0,P.jsx)("div",{children:(0,P.jsx)(p.xI,{name:"endDate",report:!0,control:t,defaultValue:g()(),render:e=>{let{field:t}=e;return(0,P.jsx)(C.A,{size:"middle",disabled:F,placeholder:"Start date",report:!0,field:t,errors:o})}})})]}),(0,P.jsxs)("div",{className:"flex justify-end items-center gap-2 my-1",children:[(0,P.jsx)("button",{onClick:()=>{l("status",""),l("PDBranchId",""),l("PdCompanyId",""),l("startDate",g()()),l("endDate",g()())},className:"bg-header   py-[5px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,P.jsx)("span",{className:"text-[12px]",children:"Reset"})}),ce&&(0,P.jsx)(y.A,{placement:"topLeft",title:"Add task",children:(0,P.jsxs)("button",{onClick:()=>{U({isOpen:!0,data:null})},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,P.jsx)(c.OiG,{}),(0,P.jsx)("span",{className:"text-[12px]",children:"Add task"})]})})]})]}),(0,P.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:ue&&(0,P.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,P.jsx)("thead",{className:"",children:(0,P.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[5%]",children:"S.No."}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[20%]",children:"Title"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Assigned To"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Department"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Time Spent"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Created By"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Created At"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Priority"}),(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Status"}),(me||pe)&&(0,P.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),F?(0,P.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,P.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,P.jsx)(b.A,{})})}):(0,P.jsx)("tbody",{children:Y&&(null===Y||void 0===Y?void 0:Y.length)>0?null===Y||void 0===Y?void 0:Y.map((e,t)=>{var l,d,a,s,i,n;return(0,P.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 text-center",children:t+1+10*(Z-1)}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(l=null===e||void 0===e?void 0:e.title)&&void 0!==l?l:"-"}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d=null===e||void 0===e||null===(a=e.assignedToData)||void 0===a?void 0:a.fullName)&&void 0!==d?d:"-"}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.departmentName)&&void 0!==s?s:"-"}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none text-teal-600 p-2",children:void 0!==(null===e||void 0===e?void 0:e.totalTimeSpentInMin)?"".concat(Math.floor(e.totalTimeSpentInMin/60),"h ").concat(e.totalTimeSpentInMin%60,"m"):"-"}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(i=null===e||void 0===e?void 0:e.createdBy)&&void 0!==i?i:"-"}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=g()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==n?n:"-"}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,P.jsx)("span",{className:"px-2 py-1 rounded-lg text-white text-[12px] ".concat("high"===(null===e||void 0===e?void 0:e.priority)?"bg-red-500":"medium"===(null===e||void 0===e?void 0:e.priority)?"bg-yellow-500":"bg-green-500"),children:null!==e&&void 0!==e&&e.priority?e.priority.charAt(0).toUpperCase()+e.priority.slice(1):"-"})}),(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,P.jsx)(O.A,{element:e,handleStatusChange:re})}),(me||pe)&&(0,P.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,P.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[pe&&(0,P.jsx)(y.A,{placement:"topLeft",title:"view",children:(0,P.jsx)("button",{onClick:()=>{W({isOpen:!0,data:e})},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,P.jsx)(D.JPe,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),pe&&(0,P.jsx)(y.A,{placement:"topLeft",title:"done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status)?"Edit not allowed for Done/Rejected":"Edit",children:(0,P.jsx)("button",{onClick:()=>{"done"!==(null===e||void 0===e?void 0:e.status)&&"rejected"!==(null===e||void 0===e?void 0:e.status)&&J({isOpen:!0,data:e})},disabled:"done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted transition ".concat("done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status)?"opacity-50 cursor-not-allowed":"hover:border-[#337ab7]"),type:"button",children:(0,P.jsx)(c.Jcp,{className:"".concat("done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status)?"text-gray-400":"text-[#3c8dbc] hover:text-[#337ab7]"),size:16})})}),me&&(0,P.jsx)(y.A,{placement:"topLeft",title:"done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status)?"Delete not allowed for Done/Rejected":"Delete",children:(0,P.jsx)("button",{onClick:()=>{"done"!==(null===e||void 0===e?void 0:e.status)&&"rejected"!==(null===e||void 0===e?void 0:e.status)&&(e=>{let t={_id:e};r().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&N((0,A.sl)(t)).then(e=>{Z>1&&1==(null===Y||void 0===Y?void 0:Y.length)?K(Number(Z-1)):ne()})})})(null===e||void 0===e?void 0:e._id)},disabled:"done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted transition ".concat("done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status)?"opacity-50 cursor-not-allowed":"hover:border-red-400"),type:"button",children:(0,P.jsx)(u.tqC,{className:"".concat("done"===(null===e||void 0===e?void 0:e.status)||"rejected"===(null===e||void 0===e?void 0:e.status)?"text-gray-400":"text-red-600 hover:text-red-500"),size:16})})})]})})]})}):(0,P.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,P.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"No Tasks Found"})})})]})}),(0,P.jsx)(v.A,{totalCount:B,pageSize:10,currentPage:Z,onChange:e=>{K(e)}}),(0,P.jsx)(T.A,{isOpen:null===z||void 0===z?void 0:z.isOpen,data:null===z||void 0===z?void 0:z.data,fetchListAfterSuccess:ne,closeModalFunc:()=>U({isOpen:!1,data:null}),isDirector:!0}),(0,P.jsx)(I.A,{isOpen:null===Q||void 0===Q?void 0:Q.isOpen,data:null===Q||void 0===Q?void 0:Q.data,fetchListAfterSuccess:ne,closeModalFunc:()=>J({isOpen:!1,data:null})}),(0,P.jsx)(S.A,{isOpen:null===G||void 0===G?void 0:G.isOpen,data:null===G||void 0===G?void 0:G.data,fetchListAfterSuccess:ne,closeModalFunc:()=>{W({isOpen:!1,data:null}),ne()}})]})})}},65337:(e,t,l)=>{l.d(t,{A:()=>s});var d=l(91686),a=l(70579);const s=function(){return(0,a.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,a.jsx)(d.A,{size:"large"})})}},85114:(e,t,l)=>{l.d(t,{A:()=>g});var d=l(89379),a=l(65043),s=l(24858),i=l(13382),n=l(53913),o=l(65512),r=l(83003),c=l(735),u=l(15187),p=(l(17995),l(89427),l(60089)),m=l(57944),v=l(60184),x=(l(42837),l(88967)),h=l(86178),j=l.n(h),y=l(60446),f=l.n(y),b=l(94084),N=l(70579);const g=function(e){var t;let{isOpen:l,data:h,fetchListAfterSuccess:y,closeModalFunc:g}=e;const{loading:w}=(0,r.d4)(e=>e.projectTask),{register:A,handleSubmit:T,setValue:I,control:D,watch:S,reset:C,formState:{errors:O}}=(0,s.mN)(),k=null===h||void 0===h?void 0:h._id,{userCompanyId:P,userDirectorId:_,userBranchId:L,userType:q}=(0,c.A)(),M=(0,r.wA)(),[Y,B]=(0,a.useState)([]),{employeList:F,loading:H}=(JSON.parse(localStorage.getItem("user_info_".concat(u.AU))),(0,r.d4)(e=>e.employe)),{projectmanagementList:E}=(0,r.d4)(e=>e.projectManagement),{projectTaskDetails:V}=(0,r.d4)(e=>e.projectTask),R=(0,s.FH)({control:D,name:"relatedTo",defaultValue:""}),z=(0,s.FH)({control:D,name:"employee",defaultValue:""}),U=(null===F||void 0===F||null===(t=F.find(e=>(null===e||void 0===e?void 0:e._id)===z))||void 0===t||t.reportingperson,e=>e.parentNode);(0,a.useEffect)(()=>{l&&k&&M((0,p.pA)({_id:k}))},[l,k]),(0,a.useEffect)(()=>{(async()=>{if(l&&V)try{var e;await Promise.all([M((0,m.vH)({directorId:"",companyId:null===V||void 0===V?void 0:V.companyId,branchId:null===V||void 0===V?void 0:V.branchId,text:"",sort:!0,status:"",isPagination:!1}))]),C({name:null===V||void 0===V?void 0:V.title,projectId:null===V||void 0===V?void 0:V.projectId,descriptions:null===V||void 0===V?void 0:V.description,employee:null===V||void 0===V?void 0:V.assignedTo,assignedPersonname:null===V||void 0===V||null===(e=V.assignedToData)||void 0===e?void 0:e.fullName,checkInTime:null!==V&&void 0!==V&&V.startDateTime?f()(null===V||void 0===V?void 0:V.startDateTime):null,checkOutTime:null!==V&&void 0!==V&&V.endDateTime?f()(null===V||void 0===V?void 0:V.endDateTime):null,relatedTo:null===V||void 0===V?void 0:V.relatedTo,taskPriority:null===V||void 0===V?void 0:V.priority}),B((null===V||void 0===V?void 0:V.attachment)||[])}catch(t){console.error("Error fetching data:",t)}})()},[l,V]),(0,a.useEffect)(()=>()=>{M((0,p.gO)())},[]);const Q=()=>{C(),B([]),g()};return(0,N.jsx)(n.A,{title:"Update Project Task",open:l,onCancel:Q,footer:null,width:800,centered:!0,destroyOnClose:!0,className:"antmodalclassName",children:(0,N.jsxs)("form",{autoComplete:"off",onSubmit:T(e=>{const t={_id:k,companyId:null===V||void 0===V?void 0:V.companyId,directorId:"",branchId:null===V||void 0===V?void 0:V.branchId,title:null===e||void 0===e?void 0:e.name,projectId:"project"===(null===e||void 0===e?void 0:e.relatedTo)?null===e||void 0===e?void 0:e.projectId:null,description:null===e||void 0===e?void 0:e.descriptions,followerIds:[],assignedTo:null===e||void 0===e?void 0:e.employee,startDateTime:null===e||void 0===e?void 0:e.checkInTime,endDateTime:null===e||void 0===e?void 0:e.checkOutTime,relatedTo:null===e||void 0===e?void 0:e.relatedTo,priority:null===e||void 0===e?void 0:e.taskPriority,attachment:Y,estimatedHours:null,tags:[]};M((0,p.m9)(t)).then(e=>{e.error||(C(),B([]),g(),y())})}),children:[(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 my-4",children:[(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Task Title ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,d.A)((0,d.A)({type:"text"},A("name",{required:"Task Title is required"})),{},{className:"".concat(u.Ol," ").concat(O.name?"border-red-500":"border-gray-300"),placeholder:"Enter Task Title"})),O.name&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:O.name.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Assign To ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsx)("input",(0,d.A)((0,d.A)({type:"text"},A("assignedPersonname")),{},{disabled:!0,className:"".concat(u.id," ").concat(O.name?"border-red-500":"border-gray-300"),placeholder:"Assigned To "})),O.name&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:O.name.message})]})]}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Task Priority ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{control:D,name:"taskPriority",rules:{required:"Task Priority is required"},render:e=>{var t;let{field:l}=e;return(0,N.jsxs)(o.A,(0,d.A)((0,d.A)({},l),{},{placeholder:"Select Task Priority",className:"".concat(u.Hy," ").concat(O.taskPriority?"border-red-500":"border-gray-300"),getPopupContainer:U,children:[(0,N.jsx)(o.A.Option,{value:"",children:"Select Task Priority"}),null===(t=["low","medium","high","urgent"])||void 0===t?void 0:t.map(e=>(0,N.jsx)(o.A.Option,{value:e,children:e},e))]}))}}),O.taskPriority&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:O.taskPriority.message})]}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Related To ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{control:D,name:"relatedTo",rules:{required:"Related To is required"},render:e=>{var t;let{field:l}=e;return(0,N.jsxs)(o.A,(0,d.A)((0,d.A)({},l),{},{placeholder:"Select Related To",className:"".concat(u.Hy," ").concat(O.relatedTo?"border-red-500":"border-gray-300"),getPopupContainer:U,children:[(0,N.jsx)(o.A.Option,{value:"",children:"Select Related To"}),null===(t=["project","other"])||void 0===t?void 0:t.map(e=>(0,N.jsx)(o.A.Option,{value:e,children:e},e))]}))}}),O.relatedTo&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:O.relatedTo.message})]}),"project"===R&&(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Project ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{control:D,name:"projectId",rules:{required:"Project is required"},render:e=>{let{field:t}=e;return(0,N.jsxs)(o.A,(0,d.A)((0,d.A)({},t),{},{placeholder:"Select Project",className:"".concat(u.Hy," ").concat(O.projectId?"border-red-500":"border-gray-300"),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:U,children:[(0,N.jsx)(o.A.Option,{value:"",children:"Select Project"}),null===E||void 0===E?void 0:E.map((e,t)=>(0,N.jsx)(o.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.title},t))]}))}}),O.projectId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:O.projectId.message})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Start Time ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{name:"checkInTime",control:D,rules:{required:!0},render:e=>{let{field:t}=e;return(0,N.jsx)(b.A,{field:t,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:O,disabledDate:e=>e&&e.isBefore(j()().endOf("day"),"day")})}}),O.checkInTime&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:"Start Time is required"})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["End Time ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{name:"checkOutTime",control:D,rules:{required:!0},render:e=>{let{field:t}=e;return(0,N.jsx)(b.A,{field:t,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:O,disabledDate:e=>e&&e.isBefore(j()().endOf("day"),"day")})}}),O.checkOutTime&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:"End Time is required"})]}),(0,N.jsxs)("div",{className:"col-span-2",children:[(0,N.jsxs)("label",{className:"".concat(u.Q0),children:["Description ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("textarea",(0,d.A)((0,d.A)({},A("descriptions",{required:"Description is required"})),{},{className:"".concat(u.Ol," ").concat(O.descriptions?"border-red-500":"border-gray-300"," h-24"),placeholder:"Enter description"})),O.descriptions&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:O.descriptions.message})]}),(0,N.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,N.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(!t)return;const l={filePath:t,isVideo:!1,isMultiple:!1};M((0,x.Sg)(l)).then(e=>{var t;null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.data&&B(t=>{var l;return[...t,null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.data]})})},className:"hidden",id:"file-upload"}),(0,N.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer hover:bg-gray-50",children:[(0,N.jsx)(v.chT,{className:"mr-2"})," Add Attachments"]}),(0,N.jsx)("div",{className:"space-y-2",children:null===Y||void 0===Y?void 0:Y.map((e,t)=>(0,N.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,N.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,N.jsx)(v.chT,{className:"text-gray-500"}),(0,N.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,N.jsx)("button",{type:"button",onClick:()=>(e=>{B(t=>null===t||void 0===t?void 0:t.filter((t,l)=>l!==e))})(t),className:"text-red-500 hover:text-red-700",children:(0,N.jsx)(v.QCr,{})})]},t))})]})]}),(0,N.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,N.jsx)(i.Ay,{onClick:Q,disabled:w,children:"Cancel"}),(0,N.jsx)(i.Ay,{type:"primary",htmlType:"submit",disabled:w,loading:w,children:w?"Updating...":"Update"})]})]})})}}}]);
//# sourceMappingURL=8645.bb1bd360.chunk.js.map