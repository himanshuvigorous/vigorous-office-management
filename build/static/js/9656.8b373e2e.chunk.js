"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9656],{65337:(e,a,t)=>{t.d(a,{A:()=>l});var s=t(91686),n=t(70579);const l=function(){return(0,n.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,n.jsx)(s.A,{size:"large"})})}},89656:(e,a,t)=>{t.r(a),t.d(a,{default:()=>M});var s=t(65043),n=t(39160),l=t(73216),d=t(35475),i=t(83003),o=t(30064),c=t.n(o),r=t(23156),p=t(65337),h=t(78227),x=t(15187),u=t(24858),m=t(31744),v=t(78729),w=t(71262),j=t(735),N=t(4938),b=t(31462),f=t(53913),y=t(86178),g=t.n(y),D=t(47196),A=t(31174),C=t(49804),k=t(70579);const S=function(e){var a;let{isModalOpen:t,onClose:n,handleDelete:d,expenseListData:i}=e;const[o,c]=(0,s.useState)([]),r=(0,l.Zp)();return(0,s.useEffect)(()=>{const e=null===i||void 0===i?void 0:i.find(e=>{var a;return(null===e||void 0===e?void 0:e._id)==(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a._id)});c(null===e||void 0===e?void 0:e.records)},[t,i]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(f.A,{className:"antmodalclassName",width:1e3,footer:!1,title:"".concat(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.clientName," - expenses"),open:null===t||void 0===t?void 0:t.isOpen,onOk:()=>{n()},onCancel:()=>{n()},children:(0,k.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,k.jsx)("thead",{className:"",children:(0,k.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,k.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Date"}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Amount"}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Payment Mode"}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Employee Name / Transaction No"}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Created At "}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Created By"}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Action"})]})}),(0,k.jsx)("tbody",{children:o&&(null===o||void 0===o?void 0:o.length)>0?null===o||void 0===o?void 0:o.map((e,a)=>{var t,s;return(0,k.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:a+1}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:g()(null===e||void 0===e?void 0:e.date).format("DD/MM/YYYY")}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,x.w2)((null===e||void 0===e?void 0:e.totalAmount)||"-")}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.paymentMode}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:"cash"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.employeName:"".concat(null===e||void 0===e||null===(t=e.bankData)||void 0===t?void 0:t.bankName,"/").concat(null===e||void 0===e||null===(s=e.bankData)||void 0===s?void 0:s.bankholderName,"/").concat(null===e||void 0===e?void 0:e.transactionNo)}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:null!==e&&void 0!==e&&e.createdAt?g()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm A"):"-"}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.createdBy}),(0,k.jsxs)("td",{className:"whitespace-nowrap p-2",children:[!["check","cash","bank"].includes(null===e||void 0===e?void 0:e.paymentMode)&&(0,k.jsx)("button",{onClick:()=>{r("/admin/expense/edit/".concat((0,A.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,k.jsx)(C.u6n,{className:"text-header hover:text-header",size:16})}),!["check","cash","bank"].includes(null===e||void 0===e?void 0:e.paymentMode)&&(0,k.jsx)("button",{onClick:()=>d(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,k.jsx)(D.tqC,{className:"text-red-600 hover:text-red-500",size:16})})]})]})}):(0,k.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,k.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})})};var O=t(65512),_=t(89427);const M=function(){const{userCompanyId:e,userType:a}=(0,j.A)(),t=JSON.parse(localStorage.getItem("user_info_".concat(x.AU))),{register:o,control:f,formState:{errors:y},setValue:g}=(0,u.mN)(),D=(0,l.Zp)(),A=(0,i.wA)(),{canCreate:C,canRead:M,canUpdate:I,canDelete:L}=(0,N.A)(),{expenseListData:z,totaladvanceListCount:Y,loading:B}=(0,i.d4)(e=>e.expense),{companyList:P}=(0,i.d4)(e=>e.company),{branchList:T,loading:E}=(0,i.d4)(e=>e.branch),[R,F]=(0,s.useState)({data:null,isOpen:!1}),[U,q]=(0,d.ok)(),J=parseInt(U.get("page"))||1,V=U.get("branchId")||"",[W,Z]=(0,s.useState)(J),[G,H]=(0,s.useState)(10),[K,Q]=(0,s.useState)(""),[X,$]=(0,s.useState)(V);(0,s.useEffect)(()=>{const e=new URLSearchParams;W>1&&e.set("page",W),X&&e.set("branchId",X),q(e)},[W,G,X,K]),(0,s.useEffect)(()=>{ee()},[W,G,X,K]);const ee=()=>{const a={currentPage:W,pageSize:G,reqData:{directorId:"",companyId:e,branchId:"company"===(null===t||void 0===t?void 0:t.userType)||"admin"===(null===t||void 0===t?void 0:t.userType)||"companyDirector"===(null===t||void 0===t?void 0:t.userType)?X:"companyBranch"===(null===t||void 0===t?void 0:t.userType)?null===t||void 0===t?void 0:t._id:null===t||void 0===t?void 0:t.branchId,text:K,type:"",sort:!0,status:"",isPagination:!0}};A((0,w.tC)(a))};return(0,s.useEffect)(()=>{"company"!==a&&"companyDirector"!==a||A((0,m.d0)({text:"",sort:!0,status:!0,companyId:e,isPagination:!1}))},[]),(0,s.useEffect)(()=>{"admin"===a&&A((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,k.jsx)(n.A,{onChange:e=>{Q(e)},children:B?(0,k.jsx)(p.A,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"",children:(0,k.jsxs)("div",{className:"sm:flex justify-between items-center sm:space-y-0 space-y-2 py-1",children:[(0,k.jsx)("div",{className:"sm:flex items-center sm:space-x-2 sm:space-y-0 space-y-1 ",children:("admin"===a||"company"===a||"companyDirector"===a)&&(0,k.jsx)("div",{className:"",children:(0,k.jsxs)(O.A,{value:X,onChange:e=>{$(e),Z(1)},defaultValue:"",disabled:B,className:"".concat(x.Lp," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,k.jsx)(O.A.Option,{value:"",children:"Select Branch"}),E?(0,k.jsx)(O.A.Option,{disabled:!0,children:(0,k.jsx)(_.A,{})}):null===T||void 0===T?void 0:T.map(e=>(0,k.jsx)(O.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})})}),(0,k.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,k.jsx)("button",{onClick:()=>{Z(1),$(""),Q("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,k.jsx)("span",{className:"text-[12px]",children:"Reset"})}),C&&(0,k.jsxs)("button",{onClick:()=>{D("/admin/expense/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,k.jsx)(r.OiG,{}),(0,k.jsx)("span",{className:"text-[12px]",children:"Add expense"})]})]})]})}),(0,k.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:M&&(0,k.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,k.jsx)("thead",{className:"",children:(0,k.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,k.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Client Name"}),(0,k.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Action"})]})}),(0,k.jsx)("tbody",{children:z&&(null===z||void 0===z?void 0:z.length)>0?null===z||void 0===z?void 0:z.map((e,a)=>(0,k.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:a+1+(W-1)*G}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.clientName}),(0,k.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,k.jsx)("button",{onClick:()=>F({data:e,isOpen:!0}),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,k.jsx)(b._BJ,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})]})):(0,k.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,k.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,k.jsx)(S,{handleDelete:e=>{let a={_id:e};c().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&A((0,w.Wz)(a)).then(e=>{ee()})})},isModalOpen:R,onClose:()=>F({data:null,isOpen:!1}),expenseListData:z}),(null===z||void 0===z?void 0:z.length)>0&&(0,k.jsx)(h.A,{totalCount:Y,pageSize:G,currentPage:W,onChange:e=>Z(e)})]})})}}}]);
//# sourceMappingURL=9656.8b373e2e.chunk.js.map