"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6190],{16190:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var n=a(89379),s=a(65043),r=a(39160),l=a(83003),c=a(23156),d=a(47196),o=a(78227),i=a(86178),p=a.n(i),x=a(73216),u=a(24858),h=a(15187),m=a(16998),w=a(31744),j=a(78729),f=a(31174),v=a(30064),b=a.n(v),N=a(65512),y=a(96651),g=a(735),A=a(4938),C=a(55971),D=a(89427),S=a(70579);const I=function(){const{register:e,control:t,setValue:a,formState:{errors:i}}=(0,u.mN)(),{userCompanyId:v,userBranchId:I,userType:L}=(0,g.A)(),{allowanceListData:P,allowanceListTotal:B,loading:O}=(0,l.d4)(e=>e.allowance),[_,k]=(0,s.useState)(1),E=(0,l.wA)(),F=(0,x.Zp)(),{companyList:q}=(0,l.d4)(e=>e.company),{branchList:V,loading:z}=(0,l.d4)(e=>e.branch),Y=(0,u.FH)({control:t,name:"status",defaultValue:""}),H=(0,u.FH)({control:t,name:"PDCompanyId",defaultValue:v}),R=(0,u.FH)({control:t,name:"PDBranchId",defaultValue:I}),{canCreate:T,canRead:M,canUpdate:G,canDelete:J}=(0,A.A)(),[K,U]=(0,s.useState)(""),W=[H,R,Y,K].join("-"),[Z,Q]=(0,s.useState)(!1);(0,s.useEffect)(()=>{Z?1===_?X():k(1):Q(e=>!0)},[W]),(0,s.useEffect)(()=>{X()},[_]);const X=()=>{let e={currentPage:_,pageSize:10,reqPayload:{text:K,sort:!0,status:"true"===Y||"false"!=Y&&"",isPagination:!0,directorId:"",companyId:H||"",branchId:R||""}};E((0,m.Fp)(e))};return(0,s.useEffect)(()=>{(H||"company"===L||"companyDirector"===L)&&E((0,w.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:H}))},[H]),(0,s.useEffect)(()=>{"admin"===L&&E((0,j.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,S.jsx)(r.A,{onChange:e=>{U(e)},children:(0,S.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,S.jsxs)("div",{className:"w-full sm:flex justify-between items-center py-1 sm:space-y-0 space-y-2",children:[(0,S.jsxs)("div",{className:"sm:flex justify-between items-center  sm:space-x-2 space-x-0 px-2 text-[14px] rounded-md",children:["admin"===L&&(0,S.jsx)("div",{className:"flex justify-center items-center space-x-2 text-[14px] rounded-md",children:(0,S.jsx)(u.xI,{control:t,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,S.jsxs)(N.A,(0,n.A)((0,n.A)({},t),{},{defaultValue:"",className:"".concat(h.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(N.A.Option,{value:"",children:"Select Company"}),null===q||void 0===q?void 0:q.map(e=>(0,S.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),("admin"===L||"company"===L||"companyDirector"===L)&&(0,S.jsx)("div",{className:"flex justify-center items-center space-x-2 text-[14px] rounded-md",children:(0,S.jsx)(u.xI,{control:t,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var t;let{field:a}=e;return(0,S.jsxs)(N.A,(0,n.A)((0,n.A)({},a),{},{defaultValue:"",className:"".concat(h.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(N.A.Option,{value:"",children:"Select Branch"}),z?(0,S.jsx)(N.A.Option,{disabled:!0,children:(0,S.jsx)(D.A,{})}):null===(t=(0,h._o)(V))||void 0===t?void 0:t.map(e=>(0,S.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),(0,S.jsx)(u.xI,{name:"status",control:t,rules:{},render:e=>{let{field:t}=e;return(0,S.jsxs)(N.A,(0,n.A)((0,n.A)({},t),{},{className:" w-32 ".concat(h.Lp," ").concat(i.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(N.A.Option,{value:"",children:"Select Status"}),(0,S.jsx)(N.A.Option,{value:"true",children:" Active "}),(0,S.jsx)(N.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,S.jsx)("button",{onClick:()=>{a("status",""),a("PDBranchId",""),a("PdDepartmentId",""),a("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})}),T&&M&&(0,S.jsx)(y.A,{placement:"topLeft",title:"Create Allowance",children:(0,S.jsxs)("button",{onClick:()=>F("/admin/allowances/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,S.jsx)(c.OiG,{}),(0,S.jsx)("span",{className:"text-[12px]",children:"Create Allowance"})]})})]})]}),(0,S.jsxs)("div",{className:"w-full",children:[(0,S.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:M&&(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Name"}),("admin"===L||"company"===L||"companyDirector"===L)&&(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Branch Name"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(G||J)&&(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),O?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,S.jsx)(C.A,{})})}):(0,S.jsx)("tbody",{children:P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,t)=>{var a,n;return(0,S.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:t+1+10*(_-1)}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:e.name}),("admin"===L||"company"===L||"companyDirector"===L)&&(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:null===(a=e.branchData)||void 0===a?void 0:a.fullName}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:p()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,S.jsx)(y.A,{placement:"topLeft",title:"Status - ".concat(null!==e&&void 0!==e&&e.status?"Active":" InActive"),children:(0,S.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(n="Inactive")?n:"-"})})}),(G||J)&&(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,S.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[G&&(0,S.jsx)(y.A,{placement:"topLeft",title:"Edit",children:(0,S.jsx)("button",{onClick:()=>F("/admin/allowances/edit/".concat((0,f.w)(null===e||void 0===e?void 0:e._id))),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(c.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),J&&(0,S.jsx)(y.A,{placement:"topLeft",title:"Delete",children:(0,S.jsx)("button",{onClick:()=>(e=>{let t={_id:e};b().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&E((0,m.KN)(t)).then(e=>{_>1&&1==(null===P||void 0===P?void 0:P.length)?k(Number(_-1)):X()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted hover:bg-red-100",type:"button",children:(0,S.jsx)(d.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,S.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,S.jsx)(o.A,{totalCount:B,pageSize:10,currentPage:_,onChange:e=>{k(e)}})]})]})})}}}]);
//# sourceMappingURL=6190.1ee962de.chunk.js.map