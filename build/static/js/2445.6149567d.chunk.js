"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2445],{32445:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(65043),n=a(39160),l=a(73216),c=a(83003),d=a(23156),i=a(47196),o=a(30064),r=a.n(o),p=a(31174),u=a(27971),x=(a(65337),a(78227)),m=a(15187),h=a(24858),v=a(78729),j=a(65512),w=(a(31744),a(4938)),y=a(55971),f=a(60446),N=a.n(f),g=a(70579);const b=function(){const{register:e,setValue:t,formState:{errors:a},control:o}=(0,h.mN)(),f=(0,l.Zp)(),b=(0,c.wA)(),{employeeDocumentList:A,totalEmpDoctCount:C,loading:D}=(0,c.d4)(e=>e.employeeDocument),[S,k]=(0,s.useState)(""),[I,P]=(0,s.useState)(""),T=(0,h.FH)({control:o,name:"PDCompanyId",defaultValue:""}),{companyList:_}=(0,c.d4)(e=>e.company),O=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),[z,E]=(0,s.useState)(1),L=[I,T,S].join("-"),[B,F]=(0,s.useState)(!1);(0,s.useEffect)(()=>{B?1===z?M():E(1):F(e=>!0)},[L]),(0,s.useEffect)(()=>{M()},[z]);const{canCreate:Y,canRead:R,canUpdate:V,canDelete:J}=(0,w.A)(),M=()=>{const e={currentPage:z,pageSize:10,data:{companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?T:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,isPagination:!0,text:S,sort:!0,status:I}};b((0,u.a5)(e))};return(0,s.useEffect)(()=>{"admin"===(null===O||void 0===O?void 0:O.userType)&&b((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,g.jsx)(n.A,{onChange:e=>{k(e)},children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,g.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===(null===O||void 0===O?void 0:O.userType)&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)(j.A,{defaultValue:"",value:T,onChange:e=>{t("PDCompanyId",e)},className:" ".concat(m.Lp," ").concat(a.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)(j.A.Option,{className:"",value:"",children:"Select Company"}),null===_||void 0===_?void 0:_.map(e=>(0,g.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}),a.PDCompanyId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:a.PDCompanyId.message})]}),(0,g.jsxs)(j.A,{className:" ".concat(m.Lp," "),value:I,onChange:e=>{P(e)},placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(j.A.Option,{value:"",children:"Select Status"}),(0,g.jsx)(j.A.Option,{value:!0,children:"Active"}),(0,g.jsx)(j.A.Option,{value:!1,children:"InActive"})]})]}),(0,g.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,g.jsx)("button",{onClick:()=>{P("")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,g.jsx)("span",{className:"text-[12px]",children:"Reset"})}),Y&&(0,g.jsxs)("button",{onClick:()=>{f("/admin/document-type/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,g.jsx)(d.OiG,{}),(0,g.jsx)("span",{className:"text-[12px]",children:"Add Document Type"})]})]})]})}),(0,g.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:R&&(0,g.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,g.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Name"}),"admin"===(null===O||void 0===O?void 0:O.userType)&&(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Company name"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Type"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"createdAt"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"createdBy"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"status"}),(J||V)&&(0,g.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),D?(0,g.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,g.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,g.jsx)(y.A,{})})}):(0,g.jsx)("tbody",{children:A&&(null===A||void 0===A?void 0:A.length)>0?null===A||void 0===A?void 0:A.map((e,t)=>{var a,s,n,l;return(0,g.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:t+1+10*(z-1)}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.name}),"admin"===(null===O||void 0===O?void 0:O.userType)&&(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:null!==(a=null===e||void 0===e||null===(s=e.companyData)||void 0===s?void 0:s.fullName)&&void 0!==a?a:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.type}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:N()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:null!==(n=null===e||void 0===e?void 0:e.createdBy)&&void 0!==n?n:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,g.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(l="Inactive")?l:"-"})}),(J||V)&&(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,g.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[V&&(0,g.jsx)("button",{onClick:()=>{f("/admin/document-type/edit/".concat((0,p.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,g.jsx)(d.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})}),J&&(0,g.jsx)("button",{onClick:()=>(e=>{let t={_id:e};r().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&b((0,u.An)(t)).then(e=>{null!==e&&void 0!==e&&e.error||(z>1&&1==(null===A||void 0===A?void 0:A.length)?E(Number(z-1)):M())})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,g.jsx)(i.tqC,{className:"text-red-600 hover:text-red-500",size:16})})]})})]})}):(0,g.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,g.jsx)("td",{colSpan:7,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,g.jsx)(x.A,{totalCount:C,pageSize:10,currentPage:z,onChange:e=>{E(e)}})]})})}},65337:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(91686),n=a(70579);const l=function(){return(0,n.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,n.jsx)(s.A,{size:"large"})})}}}]);
//# sourceMappingURL=2445.6149567d.chunk.js.map