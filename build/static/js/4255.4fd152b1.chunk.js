"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4255],{54255:(e,l,s)=>{s.r(l),s.d(l,{default:()=>F});var t=s(89379),a=s(24858),i=s(83003),n=s(73216),r=s(15187),d=s(65043),o=s(39160),c=s(65512),m=s(17995),u=s(89427),x=s(42837),v=s(48883),p=s(70337),h=s(16370),j=s(53727),y=s(75337),g=s(94084),N=s(88967),b=s(60446),A=s.n(b),f=s(31421),T=s(57944),I=s(60184),S=s(31174),C=s(70579);const O=["service","product"],G=["Low","Medium","High"],q=["isBillable","Fixed"],w=["Weekly","Monthly","Yearly"],D=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Q=["January","February","March","April","May","June","July","August","September","October","November","December"];const F=function(){var e;const{loading:l,projectmanagementDetailsData:s}=(0,i.d4)(e=>e.projectManagement),{register:b,handleSubmit:F,control:k,watch:P,formState:{errors:H},setValue:L,getValues:_}=(0,a.mN)({defaultValues:{billing:{duration:"Weekly",schedule:{weekly:{day:"Monday"},monthly:{date:1},quartAndYearly:{month:"January",date:1}}},projectType:"product",priority:"Medium",billingType:"isBillable",employeIds:[],items:[],tags:[],filePath:[],subTotal:0,finalAmount:0}}),B=(0,i.wA)(),M=(0,n.Zp)(),{projectIdEnc:U}=(0,n.g)(),R=U?(0,S.Yc)(U):null;(0,d.useEffect)(()=>{R&&B((0,T.v)({_id:R}))},[]);const{loading:V,employeList:W}=(0,i.d4)(e=>e.employe),{branchList:E,branchListloading:Y}=(0,i.d4)(e=>e.branch),{clientList:J,loading:z}=(0,i.d4)(e=>e.client),{ServerManagementList:Z,loading:K}=(0,i.d4)(e=>e.serverManagement),{projectCategoryList:X,loading:$}=(0,i.d4)(e=>e.projectCategory),{projectserviceList:ee,loading:le}=(0,i.d4)(e=>e.projectservice),[se,te]=(0,d.useState)([]),{fields:ae,append:ie,remove:ne}=(0,a.jz)({control:k,name:"items"}),[re,de]=(0,d.useState)([]),oe=(0,a.FH)({control:k,name:"items",defaultValue:[]});(0,d.useEffect)(()=>{const e=(oe||[]).reduce((e,l)=>e+(Number(null===l||void 0===l?void 0:l.amount)||0),0),l=e;L("subTotal",e),L("finalAmount",l)},[oe,L]),(0,d.useEffect)(()=>{if(s){var e;B((0,x.qV)({text:"",status:!0,sort:!0,isTL:"",isHR:"",isManager:"",isPagination:!1,departmentId:"",designationId:"",companyId:null===s||void 0===s?void 0:s.companyId,branchId:null===s||void 0===s?void 0:s.branchId,isBranch:!0,isDirector:!0})).then(e=>{null!==e&&void 0!==e&&e.error||L("employee",null===s||void 0===s?void 0:s.teamLeadId)}),B((0,p.Aq)({companyId:null===s||void 0===s?void 0:s.companyId,branchId:null===s||void 0===s?void 0:s.branchId,groupId:"",directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1})).then(e=>{null!==e&&void 0!==e&&e.error||L("client",null===s||void 0===s?void 0:s.clientId)}),B((0,v.dQ)({companyId:null===s||void 0===s?void 0:s.companyId,branchId:null===s||void 0===s?void 0:s.branchId,text:"",sort:!0,status:"",isPagination:!1})).then(e=>{null!==e&&void 0!==e&&e.error||L("server",null===s||void 0===s?void 0:s.serverId)}),B((0,h.Au)({companyId:null===s||void 0===s?void 0:s.companyId,branchId:null===s||void 0===s?void 0:s.branchId,text:"",sort:!0,status:"",isPagination:!1})).then(e=>{null!==e&&void 0!==e&&e.error||L("projectCategory",null===s||void 0===s?void 0:s.categoryId)}),B((0,f.J8)({companyId:null===s||void 0===s?void 0:s.companyId,branchId:null===s||void 0===s?void 0:s.branchId,text:"",sort:!0,status:"",isPagination:!1})),L("customerName",null===s||void 0===s?void 0:s.customerName),L("title",null===s||void 0===s?void 0:s.title),L("startUpFee",null===s||void 0===s?void 0:s.startUpFee),L("projectType",null===s||void 0===s?void 0:s.projectType),L("priority",null===s||void 0===s?void 0:s.priority),L("billingType",null===s||void 0===s?void 0:s.billingType);const l=null===s||void 0===s||null===(e=s.services)||void 0===e?void 0:e.map(e=>({type:e.type,amount:e.amount,name:null===e||void 0===e?void 0:e.name,GSTRate:+(null===e||void 0===e?void 0:e.GSTRate),GSTAmount:+(null===e||void 0===e?void 0:e.GSTAmount),amountAfterGST:+(null===e||void 0===e?void 0:e.amountAfterGST),expenseId:"service"===e.type?null===e||void 0===e?void 0:e.expenseId:null===e||void 0===e?void 0:e.serverId,remark:null===e||void 0===e?void 0:e.remark}));L("items",l),L("billing",null===s||void 0===s?void 0:s.billing),L("subTotal",null===s||void 0===s?void 0:s.subTotal),L("GSTTotal",null===s||void 0===s?void 0:s.GSTTotal),L("finalWithGSTAmount",null===s||void 0===s?void 0:s.finalWithGSTAmount),L("startDate",A()(null===s||void 0===s?void 0:s.startDate)),L("deadlineDate",A()(null===s||void 0===s?void 0:s.deadlineDate)),L("description",null===s||void 0===s?void 0:s.description),de(null===s||void 0===s?void 0:s.filePath)}},[s]);const ce=(e,l,s)=>{const t=l*s/100,a=l+t;L("items.".concat(e,".GSTAmount"),t),L("items.".concat(e,".amountAfterGST"),a),ve()},me=()=>(P("items")||[]).reduce((e,l)=>e+(l.amount||0),0),ue=()=>(P("items")||[]).reduce((e,l)=>e+(l.GSTAmount||0),0),xe=()=>(P("items")||[]).reduce((e,l)=>e+(l.amountAfterGST||0),0),ve=()=>{const e=me(),l=ue(),s=xe();L("subTotal",e),L("GSTTotal",l),L("finalWithGSTAmount",s)};return(0,C.jsx)(o.A,{children:(0,C.jsx)("div",{className:"gap-4",children:(0,C.jsxs)("form",{autoComplete:"off",className:"mt-5 md:px-1",onSubmit:F(e=>{var l;const t={_id:R,companyId:null===s||void 0===s?void 0:s.companyId,branchId:null===s||void 0===s?void 0:s.branchId,directorId:null===s||void 0===s?void 0:s.directorId,managerId:"",teamLeadId:(null===e||void 0===e?void 0:e.employee)||"",clientId:(null===e||void 0===e?void 0:e.client)||"",categoryId:(null===e||void 0===e?void 0:e.projectCategory)||"",employeIds:(null===e||void 0===e?void 0:e.employeIds)||[],customerName:e.customerName,title:e.title,startUpFee:+(null===e||void 0===e?void 0:e.startUpFee),projectType:e.projectType,priority:e.priority,billingType:e.billingType,billing:e.billing,services:(null===(l=e.items)||void 0===l?void 0:l.map(e=>{var l,s;return{type:e.type,amount:e.amount?+e.amount:0,name:"service"===e.type?null===(l=ee.find(l=>l._id===e.expenseId))||void 0===l?void 0:l.name:"server"===e.type?null===(s=Z.find(l=>l._id===e.expenseId))||void 0===s?void 0:s.serverName:null===e||void 0===e?void 0:e.name,expenseId:"service"===e.type?e.expenseId||"":null,serverId:"server"===e.type?e.expenseId||"":null,GSTRate:+(null===e||void 0===e?void 0:e.GSTRate),GSTAmount:+(null===e||void 0===e?void 0:e.GSTAmount),amountAfterGST:+(null===e||void 0===e?void 0:e.amountAfterGST),remark:e.remark||""}}))||[],subTotal:+e.subTotal,GSTTotal:+(null===e||void 0===e?void 0:e.GSTTotal),finalWithGSTAmount:+(null===e||void 0===e?void 0:e.finalWithGSTAmount),startDate:(0,r.Tk)(e.startDate),deadlineDate:(0,r.Tk)(e.deadlineDate),description:e.description,filePath:re};B((0,T.Gw)(t)).then(e=>{e.error||M(-1)})}),children:[(0,C.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Create New Project"}),(0,C.jsxs)("div",{className:" p-2 ",children:[(0,C.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Basic Information"}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Title ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)("input",(0,t.A)((0,t.A)({type:"text"},b("title",{required:"Title is required"})),{},{className:"".concat(r.Ol," ").concat(H.title?"border-[1px] ":"border-gray-300"),placeholder:"Project Title"})),H.title&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.title.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Customer Name ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)("input",(0,t.A)((0,t.A)({type:"text"},b("customerName",{required:"Customer name is required"})),{},{className:"".concat(r.Ol," ").concat(H.customerName?"border-[1px] ":"border-gray-300"),placeholder:"Customer Name"})),H.customerName&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.customerName.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Client ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{name:"client",control:k,rules:{required:"Client is required"},render:e=>{var l;let{field:s}=e;return(0,C.jsxs)(c.A,(0,t.A)((0,t.A)({},s),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(r.Hy," ").concat(H.client?"border-[1px] ":"border-gray-300"),children:[(0,C.jsx)(c.A.Option,{value:"",children:"Select client"}),z?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(u.A,{})}):null===(l=(0,r._o)(J,"fullName"))||void 0===l?void 0:l.map(e=>(0,C.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}))}}),H.client&&(0,C.jsx)("p",{className:"text-red-500 text-sm mt-1",children:H.client.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Project Category ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{name:"projectCategory",control:k,rules:{required:"Project Category is required"},render:e=>{var l;let{field:s}=e;return(0,C.jsxs)(c.A,(0,t.A)((0,t.A)({},s),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(r.Hy),children:[(0,C.jsx)(c.A.Option,{value:"",children:"Select Project Category"}),$?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(u.A,{})}):null===(l=(0,r._o)(X,"name"))||void 0===l?void 0:l.map(e=>(0,C.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]}))}}),H.projectCategory&&(0,C.jsx)("p",{className:"text-red-500 text-sm mt-1",children:H.projectCategory.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Project Type ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{control:k,name:"projectType",rules:{required:"Project type is required"},render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:O.map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}))}}),H.projectType&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.projectType.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Project Handling Employee ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{control:k,name:"employee",rules:{required:"employee is required"},render:e=>{var l;let{field:s}=e;return(0,C.jsxs)(c.A,(0,t.A)((0,t.A)({},s),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(r.Hy," mt-2"),children:[(0,C.jsx)(c.A.Option,{value:"",selected:!0,children:"Select Project Handling Employee"}),V?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(u.A,{})}):null===(l=(0,r._o)(W,"fullName"))||void 0===l?void 0:l.map((e,l)=>(0,C.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),H.employee&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.employee.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Start Up Fee"}),(0,C.jsxs)("div",{className:"flex items-center",children:[(0,C.jsx)("input",(0,t.A)((0,t.A)({type:"number",step:"0.01"},b("startUpFee",{})),{},{className:"".concat(r.Ol),placeholder:"Start Up Fee"})),H.startUpFee&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:null===(e=H.startUpFee)||void 0===e?void 0:e.message})]})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Priority ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{control:k,name:"priority",rules:{required:"Priority is required"},render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:G.map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e},e))}))}}),H.priority&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.priority.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Start Date ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{name:"startDate",control:k,rules:{required:"Start date is required"},render:e=>{let{field:l}=e;return(0,C.jsx)(g.A,{field:l,errors:H})}}),H.startDate&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.startDate.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Deadline Date"}),(0,C.jsx)(a.xI,{name:"deadlineDate",control:k,render:e=>{let{field:l}=e;return(0,C.jsx)(g.A,{field:l,disabledDate:e=>{const l=P("startDate");return l&&e&&e.isBefore(A()(l),"day")}})}})]})]})]}),(0,C.jsxs)("div",{className:" p-2 ",children:[(0,C.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Billing Information"}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(r.Q0),children:["Billing Type ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(a.xI,{control:k,name:"billingType",rules:{required:"Billing type is required"},render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:q.map(e=>(0,C.jsx)(c.A.Option,{value:e,children:"isBillable"===e?"Billable":"Fixed"},e))}))}}),H.billingType&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:H.billingType.message})]}),"isBillable"===P("billingType")&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Billing Duration"}),(0,C.jsx)(a.xI,{control:k,name:"billing.duration",render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:w.map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e},e))}))}})]}),"Weekly"===P("billing.duration")&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Billing Day"}),(0,C.jsx)(a.xI,{control:k,name:"billing.schedule.weekly.day",render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:D.map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e},e))}))}})]}),"Monthly"===P("billing.duration")&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Billing Date"}),(0,C.jsx)(a.xI,{control:k,name:"billing.schedule.monthly.date",render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:Array.from({length:31},(e,l)=>l+1).map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e},e))}))}})]}),("Quarterly"===P("billing.duration")||"Yearly"===P("billing.duration"))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Billing Month"}),(0,C.jsx)(a.xI,{control:k,name:"billing.schedule.quartAndYearly.month",render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:Q.map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e},e))}))}})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Billing Date"}),(0,C.jsx)(a.xI,{control:k,name:"billing.schedule.quartAndYearly.date",render:e=>{let{field:l}=e;return(0,C.jsx)(c.A,(0,t.A)((0,t.A)({},l),{},{className:"".concat(r.Hy),children:Array.from({length:31},(e,l)=>l+1).map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e},e))}))}})]})]})]})]})]}),(0,C.jsxs)("div",{className:"p-2",children:[(0,C.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Services & Servers"}),(0,C.jsxs)("div",{className:"space-y-4",children:[ae.map((e,l)=>{var s,i,n,d,o,m,x,v,p,h,y,g,N,b,A,f,T,I,S,O;return(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 border rounded p-2",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Type"}),(0,C.jsx)(a.xI,{control:k,name:"items.".concat(l,".type"),rules:{required:"Type is required"},render:e=>{let{field:s}=e;return(0,C.jsxs)(c.A,(0,t.A)((0,t.A)({},s),{},{className:"".concat(r.Hy),placeholder:"Select Type",onChange:e=>{s.onChange(e),L("items.".concat(l,".expenseId"),""),L("items.".concat(l,".name"),"")},children:[(0,C.jsx)(c.A.Option,{value:"",children:"Select Type"}),["service","server","other"].map(e=>(0,C.jsx)(c.A.Option,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}))}}),(null===(s=H.items)||void 0===s||null===(i=s[l])||void 0===i?void 0:i.type)&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:null===(n=H.items)||void 0===n||null===(d=n[l])||void 0===d||null===(o=d.type)||void 0===o?void 0:o.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"service"===P("items.".concat(l,".type"))?"Service":"server"===P("items.".concat(l,".type"))?"Server":"Name"}),"other"===P("items.".concat(l,".type"))?(0,C.jsx)(a.xI,{name:"items.".concat(l,".name"),control:k,rules:{required:"Name is required"},render:e=>{let{field:l}=e;return(0,C.jsx)("input",(0,t.A)((0,t.A)({},l),{},{type:"text",className:"".concat(r.Ol),placeholder:"Enter name"}))}}):(0,C.jsx)(a.xI,{control:k,name:"items.".concat(l,".expenseId"),rules:{required:"".concat("service"===P("items.".concat(l,".type"))?"Service":"Server"," is required")},render:e=>{var s,a;let{field:i}=e;return(0,C.jsxs)(c.A,(0,t.A)((0,t.A)({},i),{},{loading:"service"===P("items.".concat(l,".type"))?le:K,className:"".concat(r.Hy),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),onChange:(e,s)=>{i.onChange(e);const t=(null===s||void 0===s?void 0:s.children)||"";L("items.".concat(l,".name"),t)},children:[(0,C.jsxs)(c.A.Option,{value:"",children:["Select ","service"===P("items.".concat(l,".type"))?"Service":"Server"]}),"service"===P("items.".concat(l,".type"))?le?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(u.A,{})}):null===(s=(0,r._o)(ee,"name"))||void 0===s?void 0:s.map(e=>(0,C.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)):K?(0,C.jsx)(c.A.Option,{disabled:!0,children:(0,C.jsx)(u.A,{})}):null===(a=(0,r._o)(Z,"serverName"))||void 0===a?void 0:a.map(e=>(0,C.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.serverName},null===e||void 0===e?void 0:e._id))]}))}}),(null===(m=H.items)||void 0===m||null===(x=m[l])||void 0===x?void 0:x.expenseId)&&"other"!==P("items.".concat(l,".type"))&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:null===(v=H.items)||void 0===v||null===(p=v[l])||void 0===p||null===(h=p.expenseId)||void 0===h?void 0:h.message}),(null===(y=H.items)||void 0===y||null===(g=y[l])||void 0===g?void 0:g.name)&&"other"===P("items.".concat(l,".type"))&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:null===(N=H.items)||void 0===N||null===(b=N[l])||void 0===b||null===(A=b.name)||void 0===A?void 0:A.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Amount"}),(0,C.jsx)(a.xI,{name:"items.".concat(l,".amount"),control:k,rules:{required:"Amount is required",min:0},render:e=>{let{field:s}=e;return(0,C.jsx)("input",(0,t.A)((0,t.A)({},s),{},{type:"number",step:"0.01",min:"0",className:"".concat(r.Ol),placeholder:"Amount",onChange:e=>{const t=parseFloat(e.target.value)||0;s.onChange(t);const a=P("items.".concat(l,".GSTRate"))||0;ce(l,t,a)}}))}}),(null===(f=H.items)||void 0===f||null===(T=f[l])||void 0===T?void 0:T.amount)&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:null===(I=H.items)||void 0===I||null===(S=I[l])||void 0===S||null===(O=S.amount)||void 0===O?void 0:O.message})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"GST %"}),(0,C.jsx)(a.xI,{name:"items.".concat(l,".GSTRate"),control:k,render:e=>{let{field:s}=e;return(0,C.jsxs)(c.A,(0,t.A)((0,t.A)({},s),{},{className:"".concat(r.Hy),placeholder:"GST %",onChange:e=>{s.onChange(e);const t=P("items.".concat(l,".amount"))||0;ce(l,t,e)},children:[(0,C.jsx)(c.A.Option,{value:0,children:"0%"}),(0,C.jsx)(c.A.Option,{value:5,children:"5%"}),(0,C.jsx)(c.A.Option,{value:12,children:"12%"}),(0,C.jsx)(c.A.Option,{value:18,children:"18%"}),(0,C.jsx)(c.A.Option,{value:28,children:"28%"})]}))}})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"GST Amt"}),(0,C.jsxs)("div",{className:"".concat(r.Ol," bg-gray-100 flex items-center justify-center"),children:["\u20b9",(P("items.".concat(l,".GSTAmount"))||0).toFixed(2)]})]}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Total"}),(0,C.jsxs)("div",{className:"".concat(r.Ol," bg-gray-100 flex items-center justify-center"),children:["\u20b9",(P("items.".concat(l,".amountAfterGST"))||0).toFixed(2)]})]}),(0,C.jsxs)("div",{className:"flex items-end md:col-span-2 w-full",children:[(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Remark"}),(0,C.jsx)(a.xI,{name:"items.".concat(l,".remark"),control:k,render:e=>{let{field:l}=e;return(0,C.jsx)("input",(0,t.A)((0,t.A)({},l),{},{type:"text",className:"".concat(r.Ol," flex-grow"),placeholder:"Remark"}))}})]}),(0,C.jsx)("button",{type:"button",onClick:()=>ne(l),className:"ml-2 text-red-500 h-10 px-2 flex items-center justify-center bg-red-50 rounded",children:(0,C.jsx)(j.A,{})})]})]},e.id)}),(0,C.jsxs)("button",{type:"button",onClick:()=>ie({type:"",expenseId:"",name:"",amount:0,GSTRate:0,GSTAmount:0,amountAfterGST:0,remark:""}),className:"mt-2 text-blue-500 flex items-center",children:[(0,C.jsx)(y.A,{className:"mr-1"})," Add Item"]})]})]}),(0,C.jsxs)("div",{className:"p-2",children:[(0,C.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Financial Summary"}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,C.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,C.jsx)("p",{className:"text-gray-600",children:"Subtotal:"}),(0,C.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["\u20b9",me().toFixed(2)]})]}),(0,C.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,C.jsx)("p",{className:"text-gray-600",children:"Total GST:"}),(0,C.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["\u20b9",ue().toFixed(2)]})]}),(0,C.jsxs)("div",{className:"bg-purple-50 p-3 rounded",children:[(0,C.jsx)("p",{className:"text-gray-600",children:"Total with GST:"}),(0,C.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:["\u20b9",xe().toFixed(2)]})]})]})]}),(0,C.jsxs)("div",{className:" p-2 ",children:[(0,C.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Additional Information"}),(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Description"}),(0,C.jsx)("textarea",(0,t.A)((0,t.A)({},b("description")),{},{rows:4,className:"".concat(r.Ol),placeholder:"Project description"}))]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"".concat(r.Q0),children:"Add Documents"}),(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsx)("input",{type:"file",onChange:e=>{const l={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};B((0,N.Sg)(l)).then(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.payload)&&void 0!==l&&l.data&&de(l=>[...l,e.payload.data])})},className:"hidden",id:"file-upload"}),(0,C.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex justify-start items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,C.jsx)(I.chT,{className:"mr-2"}),"Add Documents"]}),(0,C.jsx)("div",{className:"space-y-2",children:re.map((e,l)=>(0,C.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,C.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,C.jsx)(I.chT,{className:"text-gray-500"}),(0,C.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,C.jsx)("button",{type:"button",onClick:()=>(e=>{de(l=>l.filter((l,s)=>s!==e))})(l),className:"text-red-500 hover:text-red-700",children:(0,C.jsx)(I.QCr,{})})]},l))})]})]})]}),(0,C.jsx)("div",{className:"flex justify-end",children:(0,C.jsx)("button",{type:"submit",disabled:l,className:"".concat(l?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:l?(0,C.jsx)(m.A,{}):"Create Project"})})]})})})}}}]);
//# sourceMappingURL=4255.4fd152b1.chunk.js.map