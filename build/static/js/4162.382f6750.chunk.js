"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4162],{4162:(e,l,i)=>{i.r(l),i.d(l,{default:()=>S});var d=i(89379),n=i(65043),a=i(24858),o=i(39160),r=i(83003),s=i(15187),t=i(73216),c=i(12208),u=i(66015),v=i(60184),m=i(31744),p=i(78729),h=i(33007),x=i(70337),y=i(42837),j=i(88967),g=i(40088),N=i(69527),I=i(27744),f=i(96603),b=i(65512),T=i(94084),A=(i(86178),i(60446)),D=i.n(A),P=i(70579);const S=()=>{var e,l;const i=(0,t.Zp)(),A=(0,r.wA)(),{register:S,control:C,handleSubmit:w,watch:_,setValue:O,getValues:q,formState:{errors:B}}=(0,a.mN)({defaultValues:{employee:[]}}),{companyList:L}=(0,r.d4)(e=>e.company),{branchList:k}=(0,r.d4)(e=>e.branch),{departmentListData:Q}=(0,r.d4)(e=>e.department),{employeList:z}=(0,r.d4)(e=>e.employe),{clientList:V}=(0,r.d4)(e=>e.client),{clientGroupList:F}=(0,r.d4)(e=>e.clientGroup),[H,M]=(0,n.useState)([]),{taskTypeList:Y}=(0,r.d4)(e=>e.taskType),J=JSON.parse(localStorage.getItem("user_info_".concat(s.AU))),{orgTypeList:G}=(0,r.d4)(e=>e.orgType),[E,W]=(0,n.useState)(!1),[U,R]=(0,n.useState)(!1),[X,Z]=(0,n.useState)([]),[K,$]=(0,n.useState)([]),ee=e=>{if(U)e.onChange([]);else{const l=null===V||void 0===V?void 0:V.map(e=>({value:e._id,label:e.fullName}));e.onChange(l)}R(!U)},le=(0,a.FH)({control:C,name:"PDCompanyId",defaultValue:""}),ie=(0,a.FH)({control:C,name:"PDBranchId",defaultValue:""}),de=(0,a.FH)({control:C,name:"PDDepartmentId",defaultValue:""}),ne=(0,a.FH)({control:C,name:"client",defaultValue:""}),ae=1==(null===ne||void 0===ne?void 0:ne.length)&&(null===V||void 0===V||null===(e=V.find(e=>{var l;return(null===e||void 0===e?void 0:e._id)==(null===ne||void 0===ne||null===(l=ne[0])||void 0===l?void 0:l.value)}))||void 0===e?void 0:e.branchData)||[],oe=(()=>{const e=[];for(let l=2005;l<=2034;l++)e.push("".concat(l,"-").concat(l+1));return e})(),re=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Jan-Mar","Apr-Jun","Jul-Sep","Oct-Dec"],te=(["Last Day"].concat(Array.from({length:31},(e,l)=>"".concat(l+1," Day"))),(0,a.FH)({control:C,name:"isPeriod",defaultValue:""})),[ce,ue]=(0,n.useState)(!1),ve=X.map(e=>e.value),me="__all__",pe=[{label:"Select All",value:me},...X];(0,n.useEffect)(()=>{(le||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType))&&A((0,m.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?le:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId}))},[le]),(0,n.useEffect)(()=>{O("financialYear",(0,s.Yz)()),"admin"===(null===J||void 0===J?void 0:J.userType)&&A((0,p.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,n.useEffect)(()=>{(le||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)||"companyBranch"===(null===J||void 0===J?void 0:J.userType)||"employee"===(null===J||void 0===J?void 0:J.userType))&&A((0,h.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?le:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId}))},[le,ie]);(0,n.useEffect)(()=>{"group"===_("clientSelection")&&_("groupName")&&A((0,x.Aq)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,directorId:"",organizationId:"",industryId:"",groupId:_("groupName"),text:"",sort:!0,status:!0,isPagination:!1}))},[]);const he=()=>{var e;A((0,y.qV)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:["admin","company","companyDirector"].includes(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,departmentId:null===(e=_("PDDepartmentId"))||void 0===e?void 0:e.value,directorId:"",text:"",sort:!0,status:!0,isPagination:!1,isBranch:!0,isDirector:!1})).then(e=>{var l,i,d;const n=null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(i=l.data)||void 0===i||null===(d=i.docs)||void 0===d?void 0:d.map(e=>({label:(0,P.jsxs)("div",{className:"flex gap-2 items-center",children:[e.fullName,(0,P.jsx)("div",{className:"text-[10px] text-gray-500",children:"companyDirector"===e.userType?"Director":"companyBranch"===e.userType?"Branch Head":""})]}),value:e._id,searchText:e.fullName.toLowerCase()}));Z(n)})};return(0,P.jsx)(o.A,{children:(0,P.jsx)("section",{children:(0,P.jsx)("div",{className:"",children:(0,P.jsx)("div",{children:(0,P.jsx)("form",{autoComplete:"off",className:"",onSubmit:w(e=>{var l,d,n,a,o;const r={companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,directorId:"",departmentId:null!==e&&void 0!==e&&e.PDDepartmentId?null===e||void 0===e||null===(l=e.PDDepartmentId)||void 0===l?void 0:l.value:"",financialYear:null===e||void 0===e?void 0:e.financialYear,groupId:null===e||void 0===e?void 0:e.groupName,taskTypeId:null===e||void 0===e?void 0:e.PDtaskId,priority:null===e||void 0===e?void 0:e.PDTaskPriority,clientId:"group"===_("clientSelection")?null===V||void 0===V?void 0:V.map(e=>e._id):null!==e&&void 0!==e&&e.client&&(null===e||void 0===e||null===(d=e.client)||void 0===d?void 0:d.length)>0?null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.map(e=>e.value):[],employeIds:null===e||void 0===e?void 0:e.employee,taskName:null===Y||void 0===Y||null===(a=Y.find(l=>(null===l||void 0===l?void 0:l._id)===(null===e||void 0===e?void 0:e.PDtaskId)))||void 0===a?void 0:a.name,fee:null===Y||void 0===Y||null===(o=Y.find(l=>(null===l||void 0===l?void 0:l._id)===(null===e||void 0===e?void 0:e.PDtaskId)))||void 0===o?void 0:o.fees,remarks:null===e||void 0===e?void 0:e.descriptions,dueDate:(0,s.Tk)(null===e||void 0===e?void 0:e.tenureDate),documents:H,type:null===e||void 0===e?void 0:e.isPeriod,monthName:null===e||void 0===e?void 0:e.monthName,monthQuaters:null===e||void 0===e?void 0:e.quarterName,organisationId:e.organizationName,clientBranch:null===ae||void 0===ae?void 0:ae.find(l=>l._id==(null===e||void 0===e?void 0:e.clientBranch))};A((0,N.mV)(r)).then(e=>{!e.error&&i(-1)})}),children:(0,P.jsxs)("div",{className:"gap-4 border-2 border-header  p-2 rounded-md my-2 shadow ",children:[(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:my-2 px-3 md:mt-4",children:[(0,P.jsxs)("div",{className:"md:col-span-2 col-span-1 pb-2 overflow-x-auto",children:[(0,P.jsx)(a.xI,{name:"clientSelection",control:C,render:e=>{let{field:l}=e;return(0,P.jsxs)(f.Ay.Group,(0,d.A)((0,d.A)({},l),{},{onChange:e=>{l.onChange(e),O("client",[])},optionType:"button",buttonStyle:"solid",block:!0,defaultValue:"client",className:"whitespace-nowrap  ".concat(B.clientSelection?"border-[1px] text-[10px] border-red-500":"border-gray-300"),children:[(0,P.jsx)(f.Ay,{value:"client",children:"Client Wise"}),(0,P.jsx)(f.Ay,{value:"group",children:"Group Wise"}),(0,P.jsx)(f.Ay,{value:"department",children:"Department Wise"}),(0,P.jsx)(f.Ay,{value:"organization",children:"Organization Wise"})]}))}}),B.clientSelection&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.clientSelection.message})]}),"admin"===(null===J||void 0===J?void 0:J.userType)&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Company",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Company"}),null===L||void 0===L?void 0:L.map(e=>(0,P.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),B.PDCompanyId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.PDCompanyId.message})]}),("admin"===(null===J||void 0===J?void 0:J.userType)||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType))&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Branch ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Branch"}),null===k||void 0===k?void 0:k.map(e=>(0,P.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),B.PDBranchId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.PDBranchId.message})]}),"group"===_("clientSelection")&&(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Group Type ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsxs)("select",(0,d.A)((0,d.A)({},S("groupName",{required:"Organization type is required"})),{},{className:" ".concat(s.Ol," ").concat(B.groupName?"border-[1px] border-red-500":"border-gray-300"),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{A((0,c.J_)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}))},onChange:e=>{A((0,x.Aq)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,directorId:"",organizationId:"",industryId:"",groupId:e.target.value,text:"",sort:!0,status:!0,isPagination:!1})).then(e=>{var l,i,d;null!==e&&void 0!==e&&e.error?O("client",[]):O("client",null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(i=l.data)||void 0===i||null===(d=i.docs)||void 0===d?void 0:d.map(e=>({value:e._id,label:e.fullName})))})},children:[(0,P.jsx)("option",{className:"text-xs",value:"",children:"Select Group Type"}),null===F||void 0===F?void 0:F.map((e,l)=>(0,P.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName,"(",null===e||void 0===e?void 0:e.groupName,")"]}))]})),B.groupName&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.groupName.message})]}),"organization"===_("clientSelection")&&(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Organization Type"," ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsxs)("select",(0,d.A)((0,d.A)({},S("organizationName",{required:"Organization type is required"})),{},{className:" ".concat(s.Ol," ").concat(B.organizationName?"border-[1px] border-red-500":"border-gray-300"),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>A((0,I.XX)({isPagination:!1,text:"",sort:!0,status:!0})),onChange:e=>{A((0,x.Aq)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,directorId:"",organizationId:e.target.value,industryId:"",groupId:"",text:"",sort:!0,status:!0,isPagination:!1})).then(e=>{var l,i,d;null!==e&&void 0!==e&&e.error?O("client",[]):O("client",null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(i=l.data)||void 0===i||null===(d=i.docs)||void 0===d?void 0:d.map(e=>({value:e._id,label:e.fullName})))})},children:[(0,P.jsx)("option",{className:"text-xs",value:"",children:"Select Organization Type"}),null===G||void 0===G?void 0:G.map((e,l)=>(0,P.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]})),B.organizationName&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.organizationName.message})]}),(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Department ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{name:"PDDepartmentId",control:C,rules:{required:"At least one department is required"},render:e=>{let{field:l}=e;return(0,P.jsx)(u.Ay,(0,d.A)((0,d.A)({},l),{},{options:null===Q||void 0===Q?void 0:Q.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.name})),classNamePrefix:"react-select",className:"".concat(s.Ph," ").concat(B.PDDepartmentId?"border-[1px] border-red-500":"border-gray-300"),placeholder:"Select Departments",onChange:e=>{l.onChange(e),"department"===_("clientSelection")&&A((0,x.Aq)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,directorId:"",organizationId:"",industryId:"",groupId:"",departmentId:e.value,text:"",sort:!0,status:!0,isPagination:!1})).then(e=>{var l,i,d;null!==e&&void 0!==e&&e.error?O("client",[]):O("client",null===e||void 0===e||null===(l=e.payload)||void 0===l||null===(i=l.data)||void 0===i||null===(d=i.docs)||void 0===d?void 0:d.map(e=>({value:e._id,label:e.fullName})))})},value:l.value}))}}),B.PDDepartmentId&&(0,P.jsx)("p",{className:"text-red-500 text-sm mt-1",children:B.PDDepartmentId.message})]}),(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Client ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{name:"client",control:C,rules:{required:"At least one client is required"},render:e=>{let{field:l}=e;return(0,P.jsx)(u.Ay,(0,d.A)((0,d.A)({},l),{},{isMulti:!0,onFocus:()=>{null!==de&&void 0!==de&&de.value&&A((0,x.Aq)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,groupId:"",directorId:"",organizationId:"",industryId:"",departmentId:null===de||void 0===de?void 0:de.value,text:"",sort:!0,status:!0,isPagination:!1}))},options:[{value:"select_all",label:"Select All"},...Array.isArray(V)?V.map(e=>({value:e._id,label:e.fullName})):[]],classNamePrefix:"react-select",className:"".concat(s.Ph," ").concat(B.client?"border-[1px] border-red-500":"border-gray-300"),showSearch:!0,placeholder:"Select client...",onChange:e=>{O("clientBranch","");e.find(e=>"select_all"===e.value)?ee(l):(R(e.length===V.length),l.onChange(e))},value:l.value||[],formatOptionLabel:(e,i)=>{let{context:d}=i;return"select_all"===e.value?(0,P.jsxs)("div",{className:"flex items-center",children:[(0,P.jsx)("input",{type:"checkbox",checked:U,onChange:()=>ee(l),style:{marginRight:"10px"}}),(0,P.jsx)("span",{children:"Select All"})]}):e.label}}))}}),B.client&&(0,P.jsx)("p",{className:"text-red-500 text-sm mt-1",children:B.client.message})]}),(null===ae||void 0===ae?void 0:ae.length)>0&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("label",{className:"".concat(s.Q0),children:"Client Branch"}),(0,P.jsx)(a.xI,{control:C,name:"clientBranch",render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:s.Hy,showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsxs)(b.A.Option,{value:"",children:[" ","Select Client Branch"]}),null===ae||void 0===ae?void 0:ae.map(e=>(0,P.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}))}}),B.clientBranch&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.clientBranch.message})]}),(0,P.jsxs)("div",{className:"",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Task Name",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"PDtaskId",rules:{required:"Task Name is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",onFocus:()=>{var e;A((0,g.mY)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?_("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?_("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,departmentId:null===(e=_("PDDepartmentId"))||void 0===e?void 0:e.value,directorId:"",text:"",sort:!0,status:!0,isPagination:!1}))},className:s.Hy,showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsxs)(b.A.Option,{value:"",children:[" ","Select Task Name"]}),null===Y||void 0===Y?void 0:Y.map(e=>(0,P.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]}))}}),B.PDtaskId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.PDtaskId.message})]}),(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("label",{className:"".concat(s.Q0),children:"Fees"}),(0,P.jsx)("input",(0,d.A)((0,d.A)({disabled:!0,type:"text"},S("fees")),{},{value:(null===Y||void 0===Y||null===(l=Y.find(e=>(null===e||void 0===e?void 0:e._id)===_("PDtaskId")))||void 0===l?void 0:l.fees)||"",className:"".concat(s.id," ").concat(B.fees?"border-[1px] border-red-500":"border-gray-300"),placeholder:"Fees"})),B.fees&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.fees.message})]}),(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Assign To ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{name:"employee",control:C,rules:{required:"At least one employee is required"},render:e=>{let{field:l}=e;return(0,P.jsx)(b.A,{mode:"multiple",placeholder:"Assign To",value:l.value||[],onChange:e=>{e.includes(me)?ce?(l.onChange([]),ue(!1)):(l.onChange(ve),ue(!0)):(l.onChange(e),ue(e.length===ve.length))},onFocus:he,size:"large",style:{width:"100%"},options:pe,className:s.Hy,showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase())})}}),B.employee&&(0,P.jsx)("p",{className:"text-red-500 text-sm mt-1",children:B.employee.message})]}),(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Due Date ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{name:"tenureDate",control:C,rules:{required:" Due date  is required"},render:e=>{let{field:l}=e;return(0,P.jsx)(T.A,{field:l,errors:B,disabledDate:e=>e&&e.isBefore(D()().endOf("day"),"day")})}}),B.tenureDate&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.tenureDate.message})]}),(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Task Priority ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"PDTaskPriority",rules:{required:"Task Priority is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{placeholder:"Select Task Priority",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Task Priority"}),(0,P.jsx)(b.A.Option,{value:"high",children:"High"}),(0,P.jsx)(b.A.Option,{value:"medium",children:"Medium"}),(0,P.jsx)(b.A.Option,{value:"low",children:"Normal"})]}))}}),B.PDTaskPriority&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.PDTaskPriority.message})]})]}),(0,P.jsxs)("div",{className:"grid ".concat("Yearly"===te?"grid-cols-1 md:grid-cols-2":te?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"," md:gap-4 md:my-1 px-3 md:mt-4"),children:[(0,P.jsxs)("div",{children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Financial Year ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"financialYear",rules:{required:"Financial year is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{placeholder:"Select Financial year",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Financial year"}),oe.map((e,l)=>(0,P.jsx)(b.A.Option,{value:e,children:e},l))]}))}}),B.financialYear&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.financialYear.message})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Type ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"isPeriod",rules:{required:"Type is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Type"}),(0,P.jsx)(b.A.Option,{value:"Quaterly",children:" Quaterly"}),(0,P.jsx)(b.A.Option,{value:"Monthly",children:"Monthly"}),(0,P.jsx)(b.A.Option,{value:"Yearly",children:"Yearly"})]}))}}),B.isPeriod&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.isPeriod.message})]}),"Quaterly"===te&&(0,P.jsxs)("div",{children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Quarter ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"quarterName",rules:{required:"Reset Month is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Quarter"}),se.map(e=>(0,P.jsx)(b.A.Option,{value:e,children:e},e))]}))}}),B.quarterName&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.quarterName.message})]}),"Monthly"===te&&(0,P.jsxs)("div",{children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Month ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(a.xI,{control:C,name:"monthName",rules:{required:"Month is required"},render:e=>{let{field:l}=e;return(0,P.jsxs)(b.A,(0,d.A)((0,d.A)({},l),{},{defaultValue:"",className:"".concat(s.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,P.jsx)(b.A.Option,{value:"",children:"Select Month"}),re.map(e=>(0,P.jsx)(b.A.Option,{value:e,children:e},e))]}))}}),B.monthName&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.monthName.message})]})]}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:my-1 px-3 md:mt-4",children:(0,P.jsxs)("div",{className:"col-span-2",children:[(0,P.jsxs)("label",{className:"".concat(s.Q0),children:["Description ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)("input",(0,d.A)((0,d.A)({type:"text"},S("descriptions",{required:"descriptions is required"})),{},{className:"".concat(s.Ol," ").concat(B.descriptions?"border-red-500":"border-gray-300"),placeholder:"Enter descriptions "})),B.descriptions&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:B.descriptions.message})]})}),(0,P.jsxs)("div",{className:"px-3",children:[(0,P.jsx)("label",{className:"".concat(s.Q0),children:"Add Documents"}),(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsx)("input",{type:"file",onChange:e=>{const l={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};A((0,j.Sg)(l)).then(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.payload)&&void 0!==l&&l.data&&M(l=>[...l,e.payload.data])})},className:"hidden",id:"file-upload"}),(0,P.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex justify-start items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,P.jsx)(v.chT,{className:"mr-2"}),"Add Documents"]}),(0,P.jsx)("div",{className:"space-y-2",children:H.map((e,l)=>(0,P.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,P.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,P.jsx)(v.chT,{className:"text-gray-500"}),(0,P.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,P.jsx)("button",{type:"button",onClick:()=>(e=>{M(l=>l.filter((l,i)=>i!==e))})(l),className:"text-red-500 hover:text-red-700",children:(0,P.jsx)(v.QCr,{})})]},l))})]})]}),(0,P.jsx)("div",{className:"flex justify-end col-span-2 mt-4",children:(0,P.jsx)("button",{type:"submit",className:"bg-header text-white p-2 px-4 rounded",children:"Submit"})})]})})})})})})}}}]);
//# sourceMappingURL=4162.382f6750.chunk.js.map