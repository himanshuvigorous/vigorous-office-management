"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6922],{66922:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var l=a(65043),o=a(73216),n=a(35475),i=a(83003),r=a(13382),s=a(30326),d=a(65512),c=a(10898),m=a(96651),u=a(60446),h=a.n(u),p=a(4938),x=a(39160),v=a(55971),g=a(78227),y=a(31174),b=a(30064),f=a.n(b),j=a(27759),w=a(23156),N=a(47196),C=a(11906),F=a(10405),D=a(15187),k=a(89427),A=a(487),S=a(31744),I=a(60184),L=a(24858),T=a(49804),Y=a(94209),E=a(77690),z=a(69223),M=a(64857),O=a(37762),_=a(32620),P=a(60397),R=a(83002),W=a(31462),B=a(70579);const H=function(){var e,t,a,u;const{RangePicker:b}=A.A,{register:H,handleSubmit:U,control:V,formState:{errors:q},setValue:G}=(0,L.mN)({}),K=(0,o.Zp)(),Q=(0,i.wA)(),{branchList:X,branchListloading:J}=(0,i.d4)(e=>e.branch),{LeadCategoryListData:Z,totalLeadCategoryCount:$,loading:ee}=(0,i.d4)(e=>e.leadCategory),{LeadmanagementFeatureListData:te,totalLeadmanagementFeatureCount:ae,loading:le}=(0,i.d4)(e=>e.LeadmanagementFeature),[oe,ne]=(0,l.useState)({isOpen:!1,leadId:null,portal:""}),{canCreate:ie,canRead:re,canUpdate:se,canDelete:de}=(0,p.A)(),[ce,me]=(0,n.ok)(),ue=parseInt(ce.get("page"))||1,he=parseInt(ce.get("limit"))||10,pe=ce.get("branchId")||"",xe=ce.get("status")||"",ve=ce.get("categoryId")||"",ge=ce.get("subCategory")||"",ye=ce.get("time1")||null,be=ce.get("time2")||null,[fe,je]=(0,l.useState)(ue),[we,Ne]=(0,l.useState)(he),[Ce,Fe]=(0,l.useState)(xe),[De,ke]=(0,l.useState)([ye&&null!=ye?h()(ye):null,be&&null!=be?h()(be):null]),[Ae,Se]=(0,l.useState)(ve),[Ie,Le]=(0,l.useState)(ge),[Te,Ye]=(0,l.useState)(""),[Ee,ze]=(0,l.useState)(pe),[Me,Oe]=(0,l.useState)(!1),[_e,Pe]=(0,l.useState)(!1);(0,l.useEffect)(()=>{const e=new URLSearchParams;fe>1&&e.set("page",fe),(null===De||void 0===De?void 0:De.length)>0&&(e.set("time1",De[0]&&h()(De[0]).isValid()?h()(De[0]).format("YYYY-MM-DD"):""),e.set("time2",De[1]&&h()(De[1]).isValid()?h()(De[1]).format("YYYY-MM-DD"):"")),we&&e.set("limit",we),Ae&&e.set("categoryId",Ae),Ie&&e.set("subCategory",Ie),Ee&&e.set("branchId",Ee),Ce&&e.set("status",Ce),me(e)},[Ee,Ce,Te,Ae,Ie,fe,De,we]),(0,l.useEffect)(()=>{We()},[Ee,Ce,Te,Ae,Ie,fe,De,we]);const Re=JSON.parse(localStorage.getItem("user_info_".concat(D.AU)));(0,l.useEffect)(()=>{"company"!==(null===Re||void 0===Re?void 0:Re.userType)&&"companyDirector"!==(null===Re||void 0===Re?void 0:Re.userType)||Q((0,S.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.companyId}))},[]);const We=()=>{const e={limit:we,page:fe,reqPayload:{assignedToId:"",leadCategoryId:Ae,leadSubCategoryId:Ie,startDate:(null===De||void 0===De?void 0:De.length)>0&&De[0]?(0,D.Tk)(De[0]):null,endDate:(null===De||void 0===De?void 0:De.length)>1&&De[1]?(0,D.Tk)(De[1]):null,text:Te,sort:!0,companyId:"company"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.companyId,branchId:"company"===(null===Re||void 0===Re?void 0:Re.userType)||"admin"===(null===Re||void 0===Re?void 0:Re.userType)||"companyDirector"===(null===Re||void 0===Re?void 0:Re.userType)?Ee:"companyBranch"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.branchId,isPagination:!0,status:Ce}};Q((0,j.qc)(e))};(0,l.useEffect)(()=>{Q((0,F.jN)({companyId:"company"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.companyId,text:"",sort:!0,status:!0,isPagination:!1}))},[]);const Be=async()=>{try{var e;Oe(!0);const t=new z.Workbook;t.creator="Lead Management System",t.lastModifiedBy="Lead Management System",t.created=new Date,t.modified=new Date;const a=t.addWorksheet("Leads Report",{views:[{state:"frozen",ySplit:1}],properties:{tabColor:{argb:"FF4472C4"}}});a.columns=[{header:"No.",key:"sno",width:8},{header:"Lead Name",key:"name",width:25},{header:"Created Date",key:"createdAt",width:18},{header:"Mobile Number",key:"mobile",width:18},{header:"Email",key:"email",width:30},{header:"Location",key:"location",width:25},{header:"Source",key:"source",width:15},{header:"Interested In",key:"intrested",width:20},{header:"Category",key:"categoryName",width:20},{header:"Subcategory",key:"subCategoryName",width:20},{header:"Status",key:"status",width:15},{header:"Remark",key:"remark",width:30},{header:"Assigned To",key:"assignedTo",width:30}];const l=a.getRow(1);l.height=25,l.eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},e.font={bold:!0,color:{argb:"FFFFFFFF"},size:11,name:"Calibri"},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0},e.border={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}});const o=await(null===E.i||void 0===E.i?void 0:E.i.getLeadmanagementFeatureSearch({assignedToId:"",leadCategoryId:Ae,leadSubCategoryId:Ie,startDate:(null===De||void 0===De?void 0:De.length)>0&&De[0]?(0,D.Tk)(De[0]):null,endDate:(null===De||void 0===De?void 0:De.length)>1&&De[1]?(0,D.Tk)(De[1]):null,text:Te,sort:!0,companyId:"company"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.companyId,branchId:"company"===(null===Re||void 0===Re?void 0:Re.userType)||"admin"===(null===Re||void 0===Re?void 0:Re.userType)||"companyDirector"===(null===Re||void 0===Re?void 0:Re.userType)?Ee:"companyBranch"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.branchId,isPagination:!1,status:Ce}));if(null===o||void 0===o||null===(e=o.data)||void 0===e||!e.docs)return void console.error("No data received from API");o.data.docs.map((e,t)=>({sno:t+1,name:e.name||"-",createdAt:e.createdAt?h()(e.createdAt).format("DD-MM-YYYY HH:mm"):"-",mobile:e.mobile?"".concat(e.mobile.code||""," ").concat(e.mobile.number||"").trim():"-",email:e.email||"-",location:e.location||"-",source:e.source||"-",intrested:e.intrested||"-",categoryName:e.categoryName||"-",subCategoryName:e.subCategoryName||"-",status:e.status||"-",remark:e.remark||"-",assignedTo:e.userData?"".concat(e.userData.fullName,"\n(").concat(e.userData.designationName,")"):"-"})).forEach(e=>{var t;const l=a.addRow(e);l.eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:l.number%2===0?"FFF2F2F2":"FFFFFFFF"}},e.alignment={vertical:"middle",horizontal:"left",wrapText:!0},e.border={top:{style:"thin",color:{argb:"FFD9D9D9"}},left:{style:"thin",color:{argb:"FFD9D9D9"}},bottom:{style:"thin",color:{argb:"FFD9D9D9"}},right:{style:"thin",color:{argb:"FFD9D9D9"}}},e.font={size:10,name:"Calibri"}});const o=l.getCell("status"),n={new:{bg:"FFE3E8EA",text:"FF2D3E50"},contacted:{bg:"FFE6F7FF",text:"FF0078D4"},converted:{bg:"FFE6F6E6",text:"FF107C10"},lost:{bg:"FFFDE7E9",text:"FFA4262C"},"follow up":{bg:"FFFFF4CE",text:"FF8C6D00"}},i=null===(t=o.value)||void 0===t?void 0:t.toString().toLowerCase();i&&n[i]&&(o.fill={type:"pattern",pattern:"solid",fgColor:{argb:n[i].bg}},o.font.color={argb:n[i].text})}),a.autoFilter={from:"A1",to:"".concat(String.fromCharCode(64+a.columns.length),"1")},a.columns.forEach(e=>{let t=e.header.length;e.eachCell({includeEmpty:!0},e=>{const a=e.value?e.value.toString().length:0;a>t&&(t=a)}),e.width=Math.min(Math.max(t+2,10),50)});const n=a.insertRow(1,["LEADS EXPORT"]);a.mergeCells("A1:".concat(String.fromCharCode(64+a.columns.length),"1")),n.height=30,n.getCell(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},n.getCell(1).font={bold:!0,color:{argb:"FFFFFFFF"},size:16,name:"Calibri"},n.getCell(1).alignment={vertical:"middle",horizontal:"center"};const i=a.addRow([]);a.mergeCells("A".concat(i.number,":").concat(String.fromCharCode(64+a.columns.length)).concat(i.number));i.getCell(1).value="Use the dropdown filters in the header row to filter data. You can search for specific values in the filter dropdowns.",i.getCell(1).font={italic:!0,size:9,color:{argb:"FF808080"}},i.getCell(1).alignment={horizontal:"left"};const r=a.addRow([]);a.mergeCells("A".concat(r.number,":").concat(String.fromCharCode(64+a.columns.length)).concat(r.number));r.getCell(1).value="Exported by ".concat((null===Re||void 0===Re?void 0:Re.fullName)||"System"," on ").concat(h()().format("DD-MM-YYYY HH:mm")),r.getCell(1).font={italic:!0,size:9,color:{argb:"FF808080"}},r.getCell(1).alignment={horizontal:"right"};const s=await t.xlsx.writeBuffer(),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=document.createElement("a");c.href=URL.createObjectURL(d),c.download="Leads_Export_".concat(h()().format("YYYY-MM-DD_HH-mm"),".xlsx"),document.body.appendChild(c),c.click(),document.body.removeChild(c)}catch(t){console.log("Error generating Excel:",t),alert("Failed to generate Excel report. Please try again or contact support.")}finally{Oe(!1)}},He=async()=>{try{var e;Pe(!0);const t=await(null===E.i||void 0===E.i?void 0:E.i.getLeadmanagementFeatureSearch({assignedToId:"",leadCategoryId:Ae,leadSubCategoryId:Ie,startDate:(null===De||void 0===De?void 0:De.length)>0&&De[0]?(0,D.Tk)(De[0]):null,endDate:(null===De||void 0===De?void 0:De.length)>1&&De[1]?(0,D.Tk)(De[1]):null,text:Te,sort:!0,companyId:"company"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.companyId,branchId:"company"===(null===Re||void 0===Re?void 0:Re.userType)||"admin"===(null===Re||void 0===Re?void 0:Re.userType)||"companyDirector"===(null===Re||void 0===Re?void 0:Re.userType)?Ee:"companyBranch"===(null===Re||void 0===Re?void 0:Re.userType)?null===Re||void 0===Re?void 0:Re._id:null===Re||void 0===Re?void 0:Re.branchId,isPagination:!1,status:Ce}));if(null===t||void 0===t||null===(e=t.data)||void 0===e||!e.docs)return void console.error("No data received from API");const a=t.data.docs.map((e,t)=>[t+1,e.name||"-",e.createdAt?h()(e.createdAt).format("DD-MM-YYYY HH:mm"):"-",e.mobile?"".concat(e.mobile.code||""," ").concat(e.mobile.number||"").trim():"-",e.email||"-",e.location||"-",e.source||"-",e.intrested||"-",e.categoryName||"-",e.status||"-",e.remark||"-",e.userData?"".concat(e.userData.fullName," (").concat(e.userData.designationName,")"):"-"]),l=new O.uE({orientation:"landscape",unit:"mm"});l.setFontSize(16),l.setTextColor(40,53,147),l.text("LEADS REPORT",140,15,{align:"center"}),l.setFontSize(10),l.setTextColor(100,100,100),l.text("Exported by: ".concat((null===Re||void 0===Re?void 0:Re.fullName)||"System"),20,25),l.text("Export date: ".concat(h()().format("DD-MM-YYYY HH:mm")),260,25,{align:"right"}),(0,M.Ay)(l,{startY:30,head:[["No.","Lead Name","Created Date","Mobile","Email","Location","Source","Interested In","Category","Status","Remark","Assigned To"]],body:a,theme:"grid",headStyles:{fillColor:[47,84,150],textColor:255,fontStyle:"bold",fontSize:10},alternateRowStyles:{fillColor:[242,242,242]},styles:{fontSize:9,cellPadding:3,overflow:"linebreak"},columnStyles:{0:{cellWidth:12},1:{cellWidth:25},2:{cellWidth:18},3:{cellWidth:18},4:{cellWidth:30},5:{cellWidth:25},6:{cellWidth:18},7:{cellWidth:20},8:{cellWidth:20},9:{cellWidth:18},10:{cellWidth:30},11:{cellWidth:30}},didDrawCell:e=>{if("body"===e.section&&10===e.column.index){const t=e.cell.raw.toString().toLowerCase(),a={new:{bg:[227,232,234],text:[45,62,80]},contacted:{bg:[230,247,255],text:[0,120,212]},converted:{bg:[230,246,230],text:[16,124,16]},lost:{bg:[253,231,233],text:[164,38,44]},"follow up":{bg:[255,244,206],text:[140,109,0]}};if(a[t])return l.setFillColor(...a[t].bg),l.setTextColor(...a[t].text),l.rect(e.cell.x,e.cell.y,e.cell.width,e.cell.height,"F"),l.text(e.cell.raw,e.cell.x+e.cell.padding("left"),e.cell.y+e.cell.height/2+3),!1}}});const o=l.internal.getNumberOfPages();for(let e=1;e<=o;e++)l.setPage(e),l.setFontSize(10),l.setTextColor(150),l.text("Page ".concat(e," of ").concat(o),l.internal.pageSize.width-20,l.internal.pageSize.height-10);l.save("Leads_Report_".concat(h()().format("YYYY-MM-DD_HH-mm"),".pdf"))}catch(t){console.log("Error generating PDF:",t),alert("Failed to generate PDF report. Please try again.")}finally{Pe(!1)}};function Ue(e){f().fire({title:!1,text:e||"No message provided",icon:!1,confirmButtonText:"OK"})}return(0,B.jsxs)(x.A,{children:[(0,B.jsxs)("div",{className:"grid grid-cols-1 gap-2 xl:grid-cols-5 2xl:grid-cols-7 lg:grid-cols-4 sm:grid-cols-2 md:grid-cols-4 w-full items-center",children:[("admin"===(null===Re||void 0===Re?void 0:Re.userType)||"company"===(null===Re||void 0===Re?void 0:Re.userType)||"companyDirector"===(null===Re||void 0===Re?void 0:Re.userType))&&(0,B.jsx)("div",{className:"relative md:flex justify-center items-center space-x-2  text-[14px] rounded-md",children:(0,B.jsxs)(d.A,{defaultValue:"",disabled:le,onChange:e=>{ze(e),je(1)},value:Ee,className:"".concat(D.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,B.jsx)(d.A.Option,{value:"",children:"Select Branch"}),J?(0,B.jsx)(d.A.Option,{disabled:!0,children:(0,B.jsx)(k.A,{})}):null===X||void 0===X?void 0:X.map(e=>(0,B.jsx)(d.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,B.jsx)("div",{className:"w-full",children:(0,B.jsxs)(d.A,{onChange:e=>{Se(e),je(1)},value:Ae,onFocus:()=>{G("subCategory","")},className:" ".concat(D.Lp),placeholder:"Select Category",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,B.jsx)(d.A.Option,{value:"",children:"Select Category"}),ee?(0,B.jsx)(d.A.Option,{disabled:!0,children:(0,B.jsx)(k.A,{})}):null===(e=(0,D._o)(Z,"name"))||void 0===e?void 0:e.map(e=>(0,B.jsxs)(d.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.name," "]}))]})}),(0,B.jsx)("div",{className:"w-full",children:(0,B.jsxs)(d.A,{onChange:e=>{Le(e),je(1)},value:Ie,className:" ".concat(D.Lp),placeholder:"Select SubCategory",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,B.jsx)(d.A.Option,{value:"",children:"Select SubCategory"}),ee?(0,B.jsx)(d.A.Option,{disabled:!0,children:(0,B.jsx)(k.A,{})}):null===(t=(0,D._o)(Z,"name"))||void 0===t||null===(a=t.find(e=>(null===e||void 0===e?void 0:e._id)==Ae))||void 0===a||null===(u=a.leadSubCategoryData)||void 0===u?void 0:u.map(e=>(0,B.jsxs)(d.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.name," "]}))]})}),(0,B.jsx)("div",{className:"",children:(0,B.jsxs)(d.A,{className:" w-32 ".concat(D.Lp," ").concat(q.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",value:Ce,showSearch:!0,onChange:e=>{Fe(e),je(1)},disabled:le,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,B.jsx)(d.A.Option,{value:"",children:"Select Status"}),null===C.A||void 0===C.A?void 0:C.A.map(e=>(0,B.jsx)(d.A.Option,{value:e,children:e},e))]})}),(0,B.jsx)("div",{className:"w-full",children:(0,B.jsx)(b,{value:De||null,onChange:e=>{ke(e),je(1)},format:"YYYY-MM-DD",getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"})}),(0,B.jsx)("div",{className:"flex justify-end  items-center",children:(0,B.jsx)("button",{onClick:()=>{je(1),ze(""),Se(""),Le(""),Fe(""),ke([]),Ne(10),Ye("")},className:"bg-header w-full  py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,B.jsx)("span",{className:"text-[12px]",children:"Reset"})})}),ie&&(0,B.jsx)(m.A,{placement:"topLeft",title:"Add Leads",children:(0,B.jsxs)("button",{onClick:()=>K("/admin/lead-management/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,B.jsx)(w.OiG,{}),(0,B.jsx)("span",{className:"text-[12px]",children:"Add Leads"})]})})]}),(0,B.jsxs)("div",{className:"flex items-center p-2 gap-2",children:[(0,B.jsx)("span",{className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,B.jsx)(d.A,{value:we,onChange:e=>{Ne(Number(e)),je(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:D.jR.map(e=>(0,B.jsx)(d.A.Option,{value:e,children:e},e))})]}),(0,B.jsx)("div",{className:"flex justify-end items-center gap-2",children:(0,B.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,B.jsx)("button",{onClick:He,disabled:_e,className:"py-2 px-4 rounded-md flex items-center text-white text-sm transition-colors ".concat(_e?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:_e?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,B.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,B.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,B.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Export PDF"]})}),(0,B.jsx)("button",{onClick:Be,disabled:Me,className:"py-2 px-4 rounded-md flex items-center text-white text-sm transition-colors ".concat(Me?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:Me?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,B.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,B.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,B.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})})]})}),le?(0,B.jsx)(v.A,{}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto rounded-xl mt-1",children:re&&(0,B.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,B.jsx)("thead",{className:"",children:(0,B.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Lead "})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Category "})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Mobile "})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Email "})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Interest "})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Sourse "})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Last Remark "})})}),se&&(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,B.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,B.jsx)("span",{children:"Status"})})}),(0,B.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),le?(0,B.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,B.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,B.jsx)(v.A,{})})}):(0,B.jsx)("tbody",{children:te&&(null===te||void 0===te?void 0:te.length)>0?null===te||void 0===te?void 0:te.map((e,t)=>{var a,l,o,n,i,d,u,p,x,v;return(0,B.jsxs)("tr",{className:" ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,B.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+(fe-1)*we}),(0,B.jsx)("td",{className:"tableData whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e?void 0:e.name)&&void 0!==a?a:"-"}),(0,B.jsx)("td",{className:"tableData whitespace-nowrap border-none p-2 ",children:null!==(l=null===e||void 0===e?void 0:e.categoryName)&&void 0!==l?l:"-"}),(0,B.jsxs)("td",{className:"tableData  whitespace-nowrap",children:[null!==e&&void 0!==e&&null!==(o=e.mobile)&&void 0!==o&&o.number?"".concat(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.code,"  ").concat(null===e||void 0===e||null===(i=e.mobile)||void 0===i?void 0:i.number):"-"," "]}),(0,B.jsx)("td",{className:"tableData whitespace-nowrap ",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,B.jsx)("td",{className:"max-w-[200px] min-w-[200px] border-none p-2 ",children:null!==(d=null===e||void 0===e?void 0:e.intrested)&&void 0!==d?d:"-"}),(0,B.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(u=null===e||void 0===e?void 0:e.source)&&void 0!==u?u:"-"}),(0,B.jsx)("td",{className:"max-w-[200px] min-w-[200px] border-none p-2 ",children:null!==e&&void 0!==e&&null!==(p=e.latestFollowUp)&&void 0!==p&&p.remark?"".concat(null===e||void 0===e||null===(x=e.latestFollowUp)||void 0===x?void 0:x.remark," -").concat(null===e||void 0===e||null===(v=e.latestFollowUp)||void 0===v?void 0:v.type," "):"-"}),se&&(0,B.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(0,B.jsx)(s.A,{menu:{items:C.A.map(t=>({key:t,label:t,onClick:()=>((e,t)=>{const a={_id:t,status:e};Q((0,j.Il)(a)).then(e=>{null!==e&&void 0!==e&&e.error||We()})})(t,null===e||void 0===e?void 0:e._id)})),selectable:!0,defaultSelectedKeys:[null===e||void 0===e?void 0:e.status]},trigger:["click"],placement:"topLeft",children:(0,B.jsx)(r.Ay,{type:"text",size:"small",children:(0,B.jsxs)(c.A,{children:[null===e||void 0===e?void 0:e.status,(0,B.jsx)(T.oVj,{})]})})})}),(0,B.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"null"===(null===e||void 0===e?void 0:e.companyId)||null===(null===e||void 0===e?void 0:e.companyId)?(0,B.jsx)("span",{className:"py-1.5 text-black ",children:" - "}):(0,B.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[(0,B.jsx)(m.A,{placement:"topLeft",title:"view",children:(0,B.jsx)("button",{onClick:()=>{K("/admin/lead-management/view/".concat((0,y.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,B.jsx)(I.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,B.jsx)(s.A,{menu:{items:[{key:"created-at",label:(0,B.jsxs)("span",{onClick:()=>Ue(h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"Data not available"),className:"flex items-center text-teal-800 hover:text-teal-700",children:[(0,B.jsx)(_.Wv9,{className:"mr-2",size:16}),"Created At"]})},{key:"created-by",label:(0,B.jsxs)("span",{onClick:()=>Ue((null===e||void 0===e?void 0:e.createdBy)||"Data not available"),className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,B.jsx)(P.cCX,{className:"mr-2",size:16}),"Created By"]})},de&&{key:"delete",label:de?(0,B.jsxs)("span",{className:"flex items-center text-red-600 hover:text-red-500",children:[(0,B.jsx)(N.tqC,{className:"mr-2",size:16}),"Delete"]}):(0,B.jsxs)("span",{className:"flex items-center text-gray-500 cursor-not-allowed",children:[(0,B.jsx)(N.tqC,{className:"mr-2",size:16}),"Delete (No Actions)"]}),onClick:()=>{de&&(e=>{let t={_id:e};f().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&Q((0,j.rf)(t)).then(e=>{fe>1&&1==(null===te||void 0===te?void 0:te.length)?je(Number(fe-1)):!e.error&&We()})})})(null===e||void 0===e?void 0:e._id)}},se&&{key:"update",label:se?(0,B.jsxs)("span",{className:"flex items-center text-teal-600 hover:text-teal-500",children:[(0,B.jsx)(I.uO9,{className:"mr-2",size:16}),"Edit"]}):(0,B.jsxs)("span",{className:"flex items-center text-gray-500 cursor-not-allowed",children:[(0,B.jsx)(I.uO9,{className:"mr-2",size:16}),"Edit (No Actions)"]}),onClick:()=>{se&&K("/admin/lead-management/edit/".concat((0,y.w)(null===e||void 0===e?void 0:e._id)))}},se&&{key:"update",label:se?(0,B.jsxs)("span",{className:"flex items-center text-cyan-600 hover:text-cyan-500",children:[(0,B.jsx)(T.Bp7,{className:"mr-2",size:16}),"Transfer Lead"]}):(0,B.jsxs)("span",{className:"flex items-center text-gray-500 cursor-not-allowed",children:[(0,B.jsx)(T.Bp7,{className:"mr-2",size:16}),"Transfer Lead (No Actions)"]}),onClick:()=>{se&&ne({isOpen:!0,leadId:e,portal:"manager"})}},{key:"view-desc",label:(0,B.jsxs)("span",{onClick:()=>{var t;return Ue((null===e||void 0===e||null===(t=e.userData)||void 0===t?void 0:t.fullName)||"Data not available")},className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,B.jsx)(W.Bl4,{className:"mr-2",size:16}),"Assigned To"]})}]},trigger:["click"],children:(0,B.jsx)(m.A,{placement:"topLeft",title:"More Actions",children:(0,B.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,B.jsx)(R.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})})]},t)}):(0,B.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,B.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,B.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,B.jsx)(g.A,{totalCount:ae,pageSize:we,currentPage:fe,onChange:e=>je(e)})})]}),(0,B.jsx)(Y.A,{transferModal:oe,onclose:()=>{ne({isOpen:!1,leadId:null,portal:""})},LeadmanagementtransferLoading:le})]})}},94209:(e,t,a)=>{a.d(t,{A:()=>p});var l=a(89379),o=a(53913),n=a(65512),i=a(91686),r=a(15187),s=a(24858),d=a(83003),c=a(65043),m=a(42837),u=a(27759),h=a(70579);const p=e=>{let{transferModal:t,onclose:a,LeadmanagementtransferLoading:p}=e;const{register:x,control:v,handleSubmit:g,reset:y,formState:{errors:b}}=(0,s.mN)(),{employeList:f}=(0,d.d4)(e=>e.employe),j=(0,d.wA)();(0,c.useEffect)(()=>{null!==t&&void 0!==t&&t.isOpen&&w()},[t]);const w=()=>{var e,a,l;const o={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:null===t||void 0===t||null===(e=t.leadId)||void 0===e?void 0:e.companyId,directorId:null===t||void 0===t||null===(a=t.leadId)||void 0===a?void 0:a.directorId,branchId:null===t||void 0===t||null===(l=t.leadId)||void 0===l?void 0:l.branchId,isBranch:!0,isDirector:!0};j((0,m.qV)(o))};return(0,h.jsx)(o.A,{visible:null===t||void 0===t?void 0:t.isOpen,onCancel:()=>{a(),y()},footer:null,title:"Apply Leave",width:1e3,height:400,className:"antmodalclassName",children:(0,h.jsxs)("form",{autoComplete:"off",className:"",onSubmit:g(e=>{var l,o,n,i,r;const s={companyId:null===t||void 0===t||null===(l=t.leadId)||void 0===l?void 0:l.companyId,directorId:null===t||void 0===t||null===(o=t.leadId)||void 0===o?void 0:o.directorId,branchId:null===t||void 0===t||null===(n=t.leadId)||void 0===n?void 0:n.branchId,leadId:null===t||void 0===t||null===(i=t.leadId)||void 0===i?void 0:i._id,fromUser:null===t||void 0===t||null===(r=t.leadId)||void 0===r?void 0:r.assignedToId,toUser:null===e||void 0===e?void 0:e.employeeId,remark:null===e||void 0===e?void 0:e.remark};j((0,u.HU)(s)).then(e=>{e.error||(a(),y())})}),children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-2 md:my-2",children:[(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsxs)("label",{className:"".concat(r.Q0),children:["Transfer to ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)(s.xI,{control:v,name:"employeeId",rules:{required:"Task Priority is required"},render:e=>{let{field:t}=e;return(0,h.jsxs)(n.A,(0,l.A)((0,l.A)({},t),{},{placeholder:"Select Transfer To",className:"".concat(r.Hy," "),showSearch:!0,getPopupContainer:()=>document.body,popupClassName:"!z-[1580]",filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,h.jsx)(n.A.Option,{value:"",children:" Select Transfer to "}),null===f||void 0===f?void 0:f.map((e,t)=>(0,h.jsx)(n.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},t))]}))}}),b.employeeId&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:b.employeeId.message})]}),(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsxs)("label",{className:"".concat(r.Q0),children:["remark ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)("input",(0,l.A)((0,l.A)({type:"text"},x("remark",{required:"remark is required"})),{},{className:"placeholder: ".concat(r.Ol," ").concat(b.remark?"border-[1px] ":"border-gray-300"),placeholder:"Enter remark"})),b.remark&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:b.remark.message})]})]}),(0,h.jsx)("div",{className:"flex justify-end ",children:(0,h.jsx)("button",{type:"submit",disabled:p,className:"".concat(p?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3 "),children:p?(0,h.jsx)(i.A,{}):"Submit"})})]})})}}}]);
//# sourceMappingURL=6922.7dd1b41b.chunk.js.map