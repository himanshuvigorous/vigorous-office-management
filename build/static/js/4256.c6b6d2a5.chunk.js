"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4256],{44256:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(89379),s=n(73216),d=n(39160),r=n(83003),l=n(65043),i=n(30064),o=n.n(i),c=n(31174),p=n(23156),x=n(47196),m=n(16210),u=n(60184),h=n(24858),j=n(15187),v=n(78227),f=n(78729),w=n(65512),b=n(96651),g=n(735),N=n(33007),y=n(4938),A=n(55971),D=n(60446),C=n.n(D),S=n(89427),I=n(70579);const P=function(){const{register:e,setValue:t,formState:{errors:n},control:i}=(0,h.mN)(),{companyList:D}=(0,r.d4)(e=>e.company),{userCompanyId:P,userType:k}=(0,g.A)(),O=(0,s.Zp)(),L=(0,r.wA)(),{designationList:_,totalDesignationCount:B,loading:E}=(0,r.d4)(e=>e.designation),{departmentListData:F,loading:V}=(0,r.d4)(e=>e.department),[q,z]=(0,l.useState)([]),[H,Y]=(0,l.useState)(""),R=(0,h.FH)({control:i,name:"PDCompanyId",defaultValue:P}),U=(0,h.FH)({control:i,name:"PdDepartmentId",defaultValue:""}),J=(0,h.FH)({control:i,name:"status",defaultValue:""});(0,l.useEffect)(()=>{"admin"===k&&L((0,f.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,l.useEffect)(()=>{L((0,N.UU)({departmentId:U,companyId:R,text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[M,T]=(0,l.useState)(1),G=[R,U,J,H].join("-"),[W,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{W?1===M?K():T(1):Z(e=>!0)},[G]),(0,l.useEffect)(()=>{K()},[M]);const K=()=>{const e={page:M,limit:10,reqPayload:{text:H,sort:!0,companyId:R,departmentId:U,isPagination:!0,status:"true"===J||"false"!==J&&""}};L((0,m.ck)(e))},Q=()=>{null!==D&&void 0!==D&&D.length||L((0,f.Ar)({isPagination:!1,text:"",sort:!0,status:!0}))};(0,l.useEffect)(()=>{_&&X()},[_]);const X=(e,t)=>{const n=(0,j.Hc)(e,t,_);z(n)},{canCreate:$,canRead:ee,canUpdate:te,canDelete:ne}=(0,y.A)();return(0,I.jsxs)(d.A,{onChange:e=>{Y(e)},children:[(0,I.jsx)("div",{className:"",children:(0,I.jsxs)("div",{div:!0,className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,I.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 md:gap-3 gap-1",children:["admin"===k&&(0,I.jsxs)("div",{className:"w-full",children:[(0,I.jsx)(h.xI,{name:"PDCompanyId",control:i,rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,I.jsxs)(w.A,(0,a.A)((0,a.A)({},t),{},{onFocus:Q,className:"".concat(j.OJ," w-full ").concat(n.PDCompanyId?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(w.A.Option,{value:"",children:"Select Company"}),null===D||void 0===D?void 0:D.map(e=>(0,I.jsx)(w.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),n.PDCompanyId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:n.PDCompanyId.message})]}),(0,I.jsxs)("div",{className:"",children:[(0,I.jsx)(h.xI,{control:i,name:"PdDepartmentId",render:e=>{var t;let{field:n}=e;return(0,I.jsxs)(w.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",className:"".concat(j.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(w.A.Option,{value:"",children:"Select Department"}),V?(0,I.jsx)(w.A.Option,{disabled:!0,children:(0,I.jsx)(S.A,{})}):null===(t=(0,j._o)(F))||void 0===t?void 0:t.map(e=>(0,I.jsx)(w.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}}),n.PdDepartmentId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:n.PdDepartmentId.message})]}),(0,I.jsx)(h.xI,{name:"status",control:i,rules:{},render:e=>{let{field:t}=e;return(0,I.jsxs)(w.A,(0,a.A)((0,a.A)({},t),{},{className:" w-32 ".concat(j.Lp," ").concat(n.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(w.A.Option,{value:"",children:"Select Status"}),(0,I.jsx)(w.A.Option,{value:"true",children:" Active "}),(0,I.jsx)(w.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,I.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,I.jsx)("button",{onClick:()=>{t("status",""),t("PDBranchId",""),t("PdDepartmentId",""),t("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,I.jsx)("span",{className:"text-[12px]",children:"Reset"})}),$&&(0,I.jsx)(b.A,{placement:"topLeft",title:"Add Designations",children:(0,I.jsxs)("button",{onClick:()=>{O("/admin/designation/create")},className:"bg-header p-2 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,I.jsx)(p.OiG,{}),(0,I.jsx)("span",{className:"text-[12px] tracking-wide",children:"Add Designations"})]})})]})]})}),(0,I.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:ee&&(0,I.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,I.jsx)("thead",{className:"",children:(0,I.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.no."}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:(0,I.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,I.jsx)("span",{children:"Designation Name"}),(0,I.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,I.jsx)(u.Odn,{onClick:()=>X("name","asc")}),(0,I.jsx)(p.BNo,{onClick:()=>X("name","desc")})]})]})}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:(0,I.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,I.jsx)("span",{children:"Department Name"}),(0,I.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,I.jsx)(u.Odn,{onClick:()=>X("departmentData.name","asc")}),(0,I.jsx)(p.BNo,{onClick:()=>X("departmentData.name","desc")})]})]})}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"created At"}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"created By"}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(ne||te)&&(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Action"})]})}),E?(0,I.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,I.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,I.jsx)(A.A,{})})}):(0,I.jsx)("tbody",{children:q&&(null===q||void 0===q?void 0:q.length)>0?null===q||void 0===q?void 0:q.map((e,t)=>{var n,a,s,d,r,l;return(0,I.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(M-1)}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"-"}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e||null===(s=e.departmentData)||void 0===s?void 0:s.name)&&void 0!==a?a:"-"}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d=C()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==d?d:"-"}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(r=null===e||void 0===e?void 0:e.createdBy)&&void 0!==r?r:"-"}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,I.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(l="Inactive")?l:"-"})}),(te||ne)&&(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,I.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[te&&(0,I.jsx)(b.A,{placement:"topLeft",title:"Edit",children:(0,I.jsx)("button",{onClick:()=>{O("/admin/designation/edit/".concat((0,c.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,I.jsx)(p.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),ne&&(0,I.jsx)(b.A,{placement:"topLeft",title:"Delete",children:(0,I.jsx)("button",{onClick:()=>(e=>{let t={_id:e};o().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&L((0,m.ho)(t)).then(e=>{M>1&&1==(null===_||void 0===_?void 0:_.length)?T(Number(M-1)):!e.error&&K()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,I.jsx)(x.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,I.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,I.jsx)("td",{colSpan:7,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===_||void 0===_?void 0:_.length)>0&&(0,I.jsx)(v.A,{totalCount:B,pageSize:10,currentPage:M,onChange:e=>{T(e)}})]})}}}]);
//# sourceMappingURL=4256.c6b6d2a5.chunk.js.map