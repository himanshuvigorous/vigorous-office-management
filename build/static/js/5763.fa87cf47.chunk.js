"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5763],{45763:(e,s,n)=>{n.r(s),n.d(s,{default:()=>D});var a=n(89379),l=n(23156),i=n(39160),d=n(73216),r=n(83003),t=n(65043),o=n(31174),c=(n(30064),n(24858)),p=n(15187),h=(n(735),n(78227)),u=n(57916),x=n(31744),m=n(78729),v=n(65512),j=n(96651),f=n(4938),w=n(55971),y=n(60446),N=n.n(y),b=n(89427),g=n(70579);const D=function(){const{register:e,handleSubmit:s,control:n,formState:{errors:y},setValue:D}=(0,c.mN)(),S=(0,d.Zp)(),I=(0,r.wA)(),{timeSlotsListData:A,totalTimeSlotsCount:C,loading:T}=(0,r.d4)(e=>e.timeSlots),O=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))),{companyList:P}=(0,r.d4)(e=>e.company),{branchList:k,loading:B}=(0,r.d4)(e=>e.branch),[_,L]=(0,t.useState)(1),[E,M]=(0,t.useState)(""),[R,F]=(0,t.useState)(""),q=(0,c.FH)({control:n,name:"PDCompanyId",defaultValue:""}),Y=(0,c.FH)({control:n,name:"PDBranchId",defaultValue:""}),z=[Y,q,R,E].join("-"),[H,J]=(0,t.useState)(!1);(0,t.useEffect)(()=>{H?1===_?V():L(1):J(e=>!0)},[z]),(0,t.useEffect)(()=>{V()},[_]);const V=()=>{const e={limit:10,page:_,reqPayload:{text:E,sort:!0,status:R,isPagination:!0,companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,directorId:"",branchId:"company"===(null===O||void 0===O?void 0:O.userType)||"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)?Y:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId}};I((0,u.o6)(e))};(0,t.useEffect)(()=>{(q||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&I((0,x.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?q:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId}))},[q]),(0,t.useEffect)(()=>{"admin"===(null===O||void 0===O?void 0:O.userType)&&I((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:U,canRead:G,canUpdate:W,canDelete:Z}=(0,f.A)();return(0,g.jsx)(i.A,{onChange:e=>{M(e)},children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,g.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===(null===O||void 0===O?void 0:O.userType)&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)(c.xI,{name:"PDCompanyId",control:n,rules:{required:"Company is required"},render:e=>{let{field:s}=e;return(0,g.jsxs)(v.A,(0,a.A)((0,a.A)({},s),{},{className:"w-full ".concat(p.OJ," ").concat(y.PDCompanyId?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,s)=>String(null===s||void 0===s?void 0:s.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(v.A.Option,{value:"",children:"Select Company"}),null===P||void 0===P?void 0:P.map(e=>(0,g.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),y.PDCompanyId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:y.PDCompanyId.message})]}),("admin"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)(c.xI,{name:"PDBranchId",control:n,rules:{required:"Branch is required"},render:e=>{var s;let{field:n}=e;return(0,g.jsxs)(v.A,(0,a.A)((0,a.A)({},n),{},{className:"w-full ".concat(p.Lp," ").concat(y.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",getPopupContainer:e=>e.parentNode,showSearch:!0,filterOption:(e,s)=>String(null===s||void 0===s?void 0:s.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(v.A.Option,{value:"",children:"Select Branch"}),B?(0,g.jsx)(v.A.Option,{disabled:!0,children:(0,g.jsx)(b.A,{})}):null===(s=(0,p._o)(k))||void 0===s?void 0:s.map(e=>(0,g.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),y.PDBranchId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:y.PDBranchId.message})]})]}),(0,g.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,g.jsx)("button",{onClick:()=>{D("status",""),D("PDBranchId",""),D("PdDepartmentId",""),D("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,g.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,g.jsx)(j.A,{placement:"topLeft",title:"New TimeSlot",children:(0,g.jsxs)("button",{onClick:()=>S("/admin/timeSlots/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,g.jsx)(l.OiG,{}),(0,g.jsx)("span",{className:"text-[12px]",children:"Add New TimeSlot"})]})})]})]})}),(0,g.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto rounded-xl mt-1",children:G&&(0,g.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Shift Name"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Working Days"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Sunday Offs"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Saturday Offs"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Opening Time"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Closing Time"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Late Min"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Lunch Min"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"Skip Min"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"created At"})})}),(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,g.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,g.jsx)("span",{children:"created By"})})}),W&&(0,g.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),T?(0,g.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,g.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,g.jsx)(w.A,{})})}):(0,g.jsx)("tbody",{children:A&&(null===A||void 0===A?void 0:A.length)>0?null===A||void 0===A?void 0:A.map((e,s)=>{var n,a,i,d,r,t,c,p,h,u,x,m,v,f,w;return(0,g.jsxs)("tr",{className:" ".concat(s%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:s+1+10*(_-1)}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.shiftName)&&void 0!==n?n:"-"}),(0,g.jsxs)("td",{className:"whitespace-nowrap border-none p-2 ",children:["  ",null!==(a=null===e||void 0===e||null===(i=e.workingDays)||void 0===i?void 0:i.join(", "))&&void 0!==a?a:"-"]}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,g.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&null!==(d=e.weekOffRules)&&void 0!==d&&d.sundaysOff?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&null!==(r=e.weekOffRules)&&void 0!==r&&r.sundaysOff?"Yes":null!=="No"?"No":"-"})}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(t=null===e||void 0===e||null===(c=e.weekOffRules)||void 0===c||null===(p=c.saturdaysOff)||void 0===p?void 0:p.join(", "))&&void 0!==t?t:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(h=null===e||void 0===e?void 0:e.openingTime)&&void 0!==h?h:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(u=null===e||void 0===e?void 0:e.closingTime)&&void 0!==u?u:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(x=null===e||void 0===e?void 0:e.lateMIN)&&void 0!==x?x:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(m=null===e||void 0===e?void 0:e.lunchMin)&&void 0!==m?m:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(v=null===e||void 0===e?void 0:e.skipHRS)&&void 0!==v?v:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(f=N()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==f?f:"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(w=null===e||void 0===e?void 0:e.createdBy)&&void 0!==w?w:"-"}),W&&(0,g.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"null"===(null===e||void 0===e?void 0:e.companyId)||null===(null===e||void 0===e?void 0:e.companyId)?(0,g.jsx)("span",{className:"py-1.5 text-black ",children:" - "}):(0,g.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:(0,g.jsx)(j.A,{placement:"topLeft",title:"Edit",children:(0,g.jsx)("button",{onClick:()=>{S("/admin/timeSlots/edit/".concat((0,o.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,g.jsx)(l.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})]})}):(0,g.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,g.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===A||void 0===A?void 0:A.length)>0&&(0,g.jsx)(h.A,{totalCount:C,pageSize:10,currentPage:_,onChange:e=>{L(e)}})]})})}}}]);
//# sourceMappingURL=5763.fa87cf47.chunk.js.map