"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5517],{45517:(e,d,n)=>{n.r(d),n.d(d,{default:()=>B});var l=n(89379),i=n(24858),a=n(39160),o=n(83003),r=n(73216),s=n(65043),c=n(15187),t=n(66015),u=n(31744),v=n(78729),m=n(88967),p=n(96603),x=n(65512),h=n(94084),A=n(17995),I=n(60446),y=n.n(I),f=n(34203),j=n(86188),N=n(60184),b=n(31536),g=n(31174),T=n(89427),k=n(20126),_=n(70579);const B=()=>{const{loading:e}=(0,o.d4)(e=>e.fundTransfer),{register:d,handleSubmit:n,control:I,watch:B,formState:{errors:S},setValue:D}=(0,i.mN)({defaultValues:{transferType:"internal"}}),E=(0,o.wA)(),O=(0,r.Zp)(),w=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),{fundTransferDetails:U}=(0,o.d4)(e=>e.fundTransfer),{expenseTypeList:C}=(0,o.d4)(e=>e.expenceHead),{fundTransferIdEnc:H}=(0,r.g)(),V=(0,g.Yc)(H);(0,s.useEffect)(()=>{V&&E((0,j.Vp)({_id:V}))},[V]);const[P,q]=(0,s.useState)([]),{accountantList:R,loading:Q}=(0,o.d4)(e=>e.accountManagement),{vendorDataList:F,loading:L}=(0,o.d4)(e=>e.vendor),Y=(0,i.FH)({control:I,name:"PDCompanyId",defaultValue:""}),M=(0,i.FH)({control:I,name:"isExpense",defaultValue:""}),G=(0,i.FH)({control:I,name:"senderAccountentId",defaultValue:""}),J=(0,i.FH)({control:I,name:"receiverAccountentId",defaultValue:""}),Z=(0,i.FH)({control:I,name:"PDBranchId",defaultValue:""}),z=(0,i.FH)({control:I,name:"transferType",defaultValue:"internal"});(0,s.useEffect)(()=>{U&&(D("transferType",null===U||void 0===U?void 0:U.transferCatagoryType),D("amount",null===U||void 0===U?void 0:U.amount),D("date",y()(null===U||void 0===U?void 0:U.date)),D("naration",null===U||void 0===U?void 0:U.naration),D("UTRNumber",null===U||void 0===U?void 0:U.UTRNumber),D("senderAccountentId",null===U||void 0===U?void 0:U.senderAccountentId),D("receiverAccountentId",null===U||void 0===U?void 0:U.receiverAccountentId),D("senderBankAccId",null===U||void 0===U?void 0:U.senderBankAccId),D("receiverBankAccId",null===U||void 0===U?void 0:U.receiverBankAccId),D("senderUserId",null===U||void 0===U?void 0:U.senderUserId),D("receiverUserId",null===U||void 0===U?void 0:U.receiverUserId),D("receiverBankAccId",null===U||void 0===U?void 0:U.receiverBankAccId),D("senderBankAccId",null===U||void 0===U?void 0:U.senderBankAccId),D("senderAccountentId",null===U||void 0===U?void 0:U.senderAccountentId),D("isExpense",!0===(null===U||void 0===U?void 0:U.isExpense)?"Yes":"No"),D("expenseId",null===U||void 0===U?void 0:U.expenseId),D("vendorId",null===U||void 0===U?void 0:U.vendorId),q(null===U||void 0===U?void 0:U.attechment))},[U]);return(0,s.useEffect)(()=>{(Y||"company"===(null===w||void 0===w?void 0:w.userType)||"companyDirector"===(null===w||void 0===w?void 0:w.userType))&&E((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===w||void 0===w?void 0:w.userType)?Y:"company"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.companyId}))},[Y]),(0,s.useEffect)(()=>{"admin"===(null===w||void 0===w?void 0:w.userType)&&E((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,s.useEffect)(()=>{E((0,f.v1)({companyId:"admin"===(null===w||void 0===w?void 0:w.userType)?Y:"company"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.companyId,directorId:"companyDirector"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.directorId,branchId:"admin"===(null===w||void 0===w?void 0:w.userType)||"companyDirector"===(null===w||void 0===w?void 0:w.userType)||"company"===(null===w||void 0===w?void 0:w.userType)?Z:"companyBranch"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.branchId,text:"",sort:!0,status:!0,isPagination:!1})),E((0,k.Pe)({companyId:"admin"===(null===w||void 0===w?void 0:w.userType)?Y:"company"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.companyId,branchId:"company"===(null===w||void 0===w?void 0:w.userType)||"admin"===(null===w||void 0===w?void 0:w.userType)||"companyDirector"===(null===w||void 0===w?void 0:w.userType)?Z:"companyBranch"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}))},[]),(0,_.jsx)(a.A,{children:(0,_.jsx)("div",{className:"gap-4",children:(0,_.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:n(e=>{let d={_id:V,companyId:null===U||void 0===U?void 0:U.companyId,directorId:null===U||void 0===U?void 0:U.directorId,branchId:null===U||void 0===U?void 0:U.branchId,transferCatagoryType:null===e||void 0===e?void 0:e.transferType,amount:+(null===e||void 0===e?void 0:e.amount),date:(0,c.Tk)(null===e||void 0===e?void 0:e.date),naration:null===e||void 0===e?void 0:e.naration,attechment:P,UTRNumber:null===e||void 0===e?void 0:e.UTRNumber};var n,i,a,o;if("internal"===(null===e||void 0===e?void 0:e.transferType))d=(0,l.A)((0,l.A)({},d),{},{senderAccountentId:null===e||void 0===e?void 0:e.senderAccountentId,receiverAccountentId:null===e||void 0===e?void 0:e.receiverAccountentId,senderBankAccId:null===e||void 0===e?void 0:e.senderBankAccId,receiverBankAccId:null===e||void 0===e?void 0:e.receiverBankAccId,senderUserId:null===R||void 0===R||null===(n=R.find(d=>(null===d||void 0===d?void 0:d._id)===(null===e||void 0===e?void 0:e.senderAccountentId)))||void 0===n||null===(i=n.accountentData)||void 0===i?void 0:i._id,receiverUserId:null===R||void 0===R||null===(a=R.find(d=>(null===d||void 0===d?void 0:d._id)===(null===e||void 0===e?void 0:e.receiverAccountentId)))||void 0===a||null===(o=a.accountentData)||void 0===o?void 0:o._id});else if("credit"===(null===e||void 0===e?void 0:e.transferType)){var r,s;d=(0,l.A)((0,l.A)({},d),{},{receiverAccountentId:null===e||void 0===e?void 0:e.receiverAccountentId,receiverBankAccId:null===e||void 0===e?void 0:e.receiverBankAccId,receiverUserId:null===R||void 0===R||null===(r=R.find(d=>(null===d||void 0===d?void 0:d._id)===(null===e||void 0===e?void 0:e.receiverAccountentId)))||void 0===r||null===(s=r.accountentData)||void 0===s?void 0:s._id})}else if("debit"===(null===e||void 0===e?void 0:e.transferType)){var t,u,v;d=(0,l.A)((0,l.A)({},d),{},{senderAccountentId:null===e||void 0===e?void 0:e.senderAccountentId,senderBankAccId:null===e||void 0===e?void 0:e.senderBankAccId,senderUserId:null===R||void 0===R||null===(t=R.find(d=>(null===d||void 0===d?void 0:d._id)===(null===e||void 0===e?void 0:e.senderAccountentId)))||void 0===t||null===(u=t.accountentData)||void 0===u?void 0:u._id,isExpense:"Yes"===(null===e||void 0===e?void 0:e.isExpense),expenseId:(null===e||void 0===e||null===(v=e.expencehead)||void 0===v?void 0:v.value)||"",vendorId:(null===e||void 0===e?void 0:e.vendorId)||""})}E((0,j.tg)(d)).then(e=>{null!==e&&void 0!==e&&e.error||O(-1)})}),children:[(0,_.jsxs)("div",{className:"px-3 md:mt-4 mb-4",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0," block mb-2"),children:["Transfer Type ",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)(i.xI,{name:"transferType",control:I,rules:{required:"Transfer type is required"},render:e=>{let{field:d}=e;return(0,_.jsxs)(p.Ay.Group,(0,l.A)((0,l.A)({},d),{},{block:!0,optionType:"button",buttonStyle:"solid",className:"!w-full",children:[(0,_.jsx)(p.Ay,{value:"internal",className:"radio-custom",children:"Internal Transfer"}),(0,_.jsx)(p.Ay,{value:"credit",className:"radio-custom",children:"Credit"}),(0,_.jsx)(p.Ay,{value:"debit",className:"radio-custom",children:"Debit"})]}))}}),S.transferType&&(0,_.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.transferType.message})]}),(0,_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:my-1 px-3 md:mt-4",children:[("internal"===z||"debit"===z)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0),children:["Sender Accountent ",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)(i.xI,{name:"senderAccountentId",control:I,rules:{required:("internal"===z||"debit"===z)&&"Sender Accountent is required"},render:e=>{let{field:d}=e;return(0,_.jsx)(x.A,(0,l.A)((0,l.A)({placeholder:"Select Sender Accountent",loading:Q},d),{},{showSearch:!0,getPopupContainer:e=>e.parentNode,optionFilterProp:"children",className:"".concat(c.Hy," "),filterOption:(e,d)=>d.children.toLowerCase().indexOf(e.toLowerCase())>=0,children:null===R||void 0===R?void 0:R.map(e=>{var d;return(0,_.jsx)(x.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e||null===(d=e.accountentData)||void 0===d?void 0:d.fullName},null===e||void 0===e?void 0:e._id)})}))}}),S.senderAccountentId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.senderAccountentId.message})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("label",{className:"".concat(c.Q0),children:"Sender Bank"}),(0,_.jsx)(i.xI,{control:I,name:"senderBankAccId",render:e=>{var d,n;let{field:i}=e;return(0,_.jsxs)(x.A,(0,l.A)((0,l.A)({},i),{},{defaultValue:"",className:"".concat(c.Hy," "),children:[(0,_.jsx)(x.A.Option,{value:"",children:"Select Bank"}),(null===R||void 0===R||null===(d=R.find(e=>(null===e||void 0===e?void 0:e._id)===G))||void 0===d?void 0:d.bankAccountData)&&(null===R||void 0===R||null===(n=R.find(e=>(null===e||void 0===e?void 0:e._id)===G))||void 0===n?void 0:n.bankAccountData.length)>0&&(null===R||void 0===R?void 0:R.find(e=>(null===e||void 0===e?void 0:e._id)===G).bankAccountData.map(e=>(0,_.jsx)(x.A.Option,{value:e._id,children:(0,c.ig)(e)},e._id)))]}))}}),S.senderBankAccId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.senderBankAccId.message})]})]}),("internal"===z||"credit"===z)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0),children:["Receiver Accountent ",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)(i.xI,{name:"receiverAccountentId",control:I,rules:{required:("internal"===z||"credit"===z)&&"Receiver Accountent is required"},render:e=>{let{field:d}=e;return(0,_.jsx)(x.A,(0,l.A)((0,l.A)({placeholder:"Select Receiver Accountent",loading:Q},d),{},{showSearch:!0,getPopupContainer:e=>e.parentNode,optionFilterProp:"children",className:"".concat(c.Hy," "),filterOption:(e,d)=>d.children.toLowerCase().indexOf(e.toLowerCase())>=0,children:null===R||void 0===R?void 0:R.map(e=>{var d;return(0,_.jsx)(x.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e||null===(d=e.accountentData)||void 0===d?void 0:d.fullName},null===e||void 0===e?void 0:e._id)})}))}}),S.receiverAccountentId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.receiverAccountentId.message})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("label",{className:"".concat(c.Q0),children:"Reciever Bank"}),(0,_.jsx)(i.xI,{control:I,name:"receiverBankAccId",render:e=>{var d,n;let{field:i}=e;return(0,_.jsxs)(x.A,(0,l.A)((0,l.A)({},i),{},{defaultValue:"",className:"".concat(c.Hy," "),children:[(0,_.jsx)(x.A.Option,{value:"",children:"Select Bank"}),(null===R||void 0===R||null===(d=R.find(e=>(null===e||void 0===e?void 0:e._id)===J))||void 0===d?void 0:d.bankAccountData)&&(null===R||void 0===R||null===(n=R.find(e=>(null===e||void 0===e?void 0:e._id)===J))||void 0===n?void 0:n.bankAccountData.length)>0&&(null===R||void 0===R?void 0:R.find(e=>(null===e||void 0===e?void 0:e._id)===J).bankAccountData.map(e=>(0,_.jsx)(x.A.Option,{value:e._id,children:(0,c.ig)(e)},e._id)))]}))}}),S.receiverBankAccId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.receiverBankAccId.message})]})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0),children:["Amount",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)("input",(0,l.A)((0,l.A)({type:"number",step:"0.01"},d("amount",{required:"Amount is required"})),{},{className:" ".concat(c.Ol," ").concat(S.amount?"border-[1px] ":"border-gray-300"),placeholder:"Enter Amount"})),S.amount&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.amount.message})]}),"debit"===z&&(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("label",{className:"".concat(c.Q0),children:"Vendor"}),(0,_.jsx)(i.xI,{control:I,name:"vendorId",render:e=>{let{field:d}=e;return(0,_.jsxs)(x.A,(0,l.A)((0,l.A)({},d),{},{defaultValue:"",className:"".concat(c.Hy," "),showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(x.A.Option,{value:"",children:"Select Vendor"}),L?(0,_.jsx)(x.A.Option,{disabled:!0,children:(0,_.jsx)(T.A,{})}):null===F||void 0===F?void 0:F.map((e,d)=>(0,_.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}))}}),S.vendorId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.vendorId.message})]}),"debit"===z&&(0,_.jsxs)("div",{className:"",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0),children:["Select Is Expense ",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)(i.xI,{name:"isExpense",control:I,rules:{required:"Is Expense  required"},render:e=>{let{field:d}=e;return(0,_.jsxs)(x.A,(0,l.A)((0,l.A)({},d),{},{className:"".concat(c.Hy," ").concat(S.isExpense?"":"border-gray-300"),placeholder:"Select Is Expense",children:[(0,_.jsx)(x.A.Option,{value:"",children:"Select Is Expense"}),(0,_.jsx)(x.A.Option,{value:"Yes",children:"Yes"}),(0,_.jsx)(x.A.Option,{value:"No",children:"No"})]}))}}),S.isExpense&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.isExpense.message})]}),"Yes"==M&&"debit"===z&&(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0),children:["Expence Head  ",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)(i.xI,{name:"expencehead",control:I,rules:{required:"Expence Head is required"},render:e=>{let{field:d}=e;return(0,_.jsx)(t.Ay,(0,l.A)((0,l.A)({onFocus:()=>{const e={directorId:"",companyId:"admin"===(null===w||void 0===w?void 0:w.userType)?Y:"company"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.companyId,branchId:"company"===(null===w||void 0===w?void 0:w.userType)||"admin"===(null===w||void 0===w?void 0:w.userType)||"companyDirector"===(null===w||void 0===w?void 0:w.userType)?Z:"companyBranch"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.branchId,text:"",sort:!0,status:"",isPagination:!1};E((0,b.dV)(e))}},d),{},{options:null===C||void 0===C?void 0:C.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.name})),classNamePrefix:"react-select",className:"".concat(c.Ph," ").concat(S.expencehead?"border-[1px] ":"border-gray-300"),placeholder:"Select Expence Head"}))}}),S.expencehead&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.expencehead.message})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("label",{className:"".concat(c.Q0),children:"UTR Number"}),(0,_.jsx)("input",(0,l.A)((0,l.A)({},d("UTRNumber")),{},{className:" ".concat(c.Ol," ").concat(S.UTRNumber?"border-[1px] ":"border-gray-300"),placeholder:"Enter UTR Number"})),S.UTRNumber&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.UTRNumber.message})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("label",{className:"".concat(c.Q0),children:"Naration"}),(0,_.jsx)("textarea",(0,l.A)((0,l.A)({},d("naration")),{},{className:" ".concat(c.Ol," ").concat(S.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),S.naration&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.naration.message})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsxs)("label",{className:"".concat(c.Q0),children:["Date",(0,_.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,_.jsx)(i.xI,{name:"date",control:I,rules:{required:"Date is required"},render:e=>{let{field:d}=e;return(0,_.jsx)(h.A,{field:d,errors:S,disabledDate:e=>e&&e.isAfter(y()().endOf("day"),"day")})}}),S.date&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:S.date.message})]})]}),(0,_.jsx)("div",{className:"  pt-2 mt-1",children:(0,_.jsxs)("div",{className:"space-y-4",children:[(0,_.jsx)("input",{type:"file",onChange:e=>{const d={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};E((0,m.Sg)(d)).then(e=>{var d;null!==e&&void 0!==e&&null!==(d=e.payload)&&void 0!==d&&d.data&&q(d=>{var n;return[...d,null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.data]})})},className:"hidden",id:"file-upload"}),(0,_.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,_.jsx)(N.chT,{className:"mr-2"})," Add Attachments"]}),(0,_.jsx)("div",{className:"space-y-2",children:null===P||void 0===P?void 0:P.map((e,d)=>(0,_.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,_.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,_.jsx)(N.chT,{className:"text-gray-500"}),(0,_.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,_.jsx)("button",{type:"button",onClick:()=>(e=>{q(d=>null===d||void 0===d?void 0:d.filter((d,n)=>n!==e))})(d),className:"text-red-500 hover:text-red-700",children:(0,_.jsx)(N.QCr,{})})]},d))})]})}),(0,_.jsx)("div",{className:"flex justify-end",children:(0,_.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:e?(0,_.jsx)(A.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=5517.d9e086c6.chunk.js.map