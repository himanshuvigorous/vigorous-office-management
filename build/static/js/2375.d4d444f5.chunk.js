"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2375],{12375:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(89379),n=a(65043),l=a(39160),c=a(73216),i=a(83003),r=a(23156),d=a(47196),o=a(30064),x=a.n(o),p=a(31174),h=a(65337),m=a(96712),u=a(78227),j=a(15187),v=a(24858),f=a(31744),b=a(78729),y=a(78973),N=a(65512),g=a(96651),w=a(735),A=a(3538),D=a(70579);const C=function(){const{register:e,control:t,formState:{errors:a}}=(0,v.mN)(),{userCompanyId:o,userBranchId:C,userType:S}=(0,w.A)(),I=(0,c.Zp)(),k=(0,i.wA)(),{commonEmailData:P,totalcommonEmailCount:_,loading:B}=(0,i.d4)(e=>e.emailTemplate),[z,E]=(JSON.parse(localStorage.getItem("user_info_".concat(j.AU))),(0,n.useState)(1)),{companyList:F}=(0,i.d4)(e=>e.company),{branchList:O}=(0,i.d4)(e=>e.branch),[L,T]=(0,n.useState)(""),[q,J]=(0,n.useState)(""),H=(0,v.FH)({control:t,name:"PDCompanyId",defaultValue:o}),V=(0,v.FH)({control:t,name:"PDBranchId",defaultValue:C});(0,n.useEffect)(()=>{G()},[z,V,H,q,L]);const G=()=>{const e={currentPage:z,pageSize:10,reqData:{directorId:"",companyId:H||"",branchId:V||"",text:L,sort:!0,status:q,isPagination:!0}};k((0,m.l_)(e))};(0,n.useEffect)(()=>{(H||"company"===S||"companyDirector"===S)&&k((0,f.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:H}))},[H]),(0,n.useEffect)(()=>{"admin"===S&&k((0,b.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[M,R]=(0,n.useState)(!1),[U,W]=(0,n.useState)(null),Z=()=>{R(!1),W(null)};return(0,D.jsx)(l.A,{onChange:e=>{T(e)},children:B?(0,D.jsx)(h.A,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"",children:(0,D.jsxs)("div",{className:"flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:["admin"===S&&(0,D.jsxs)("div",{className:"flex justify-center items-center space-x-2 bg-white p-2 text-[14px] rounded-md",children:[(0,D.jsx)(A.syA,{}),(0,D.jsxs)("select",(0,s.A)((0,s.A)({},e("PDCompanyId")),{},{className:"bg-white focus:outline-none",children:[(0,D.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===F||void 0===F?void 0:F.map(e=>(0,D.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}))]}),("admin"===S||"company"===S||"companyDirector"===S)&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(v.xI,{name:"PDBranchId",control:t,rules:{required:"Branch is required"},render:e=>{let{field:t}=e;return(0,D.jsxs)(N.A,(0,s.A)((0,s.A)({},t),{},{className:"".concat(j.OJ," ").concat(a.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",children:[(0,D.jsx)(N.A.Option,{value:"",children:"Select Branch"}),null===O||void 0===O?void 0:O.map(e=>(0,D.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),a.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:a.PDBranchId.message})]}),(0,D.jsxs)(N.A,{className:" ".concat(j.Lp," "),value:q,onChange:e=>{J(e)},placeholder:"Select Status",showSearch:!0,children:[(0,D.jsx)(N.A.Option,{value:"",children:"Select Status"}),(0,D.jsx)(N.A.Option,{value:!0,children:"Active"}),(0,D.jsx)(N.A.Option,{value:!1,children:"InActive"})]})]}),(0,D.jsxs)("button",{onClick:()=>{I("/admin/policy/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,D.jsx)(r.OiG,{}),(0,D.jsx)("span",{className:"text-[12px]",children:"Add Policy"})]})]})}),B?(0,D.jsx)(h.A,{}):(0,D.jsxs)("div",{className:"w-full",children:[(0,D.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Title"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Status"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),(0,D.jsx)("tbody",{children:P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,t)=>(0,D.jsx)(n.Fragment,{children:(0,D.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:t+1+10*(z-1)}),(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.title}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,D.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":"Inactive"})}),(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,D.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[(0,D.jsx)(g.A,{placement:"topLeft",title:"Edit",children:(0,D.jsx)("button",{onClick:()=>{I("/admin/policy/edit/".concat((0,p.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(r.Jcp,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,D.jsx)(g.A,{placement:"topLeft",title:"View Details",children:(0,D.jsx)("button",{onClick:()=>(W(e),void R(!0)),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(y.JvI,{className:"text-cyan-600 hover:text-cyan-500",size:16})})}),(0,D.jsx)(g.A,{placement:"topLeft",title:"Delete",children:(0,D.jsx)("button",{onClick:()=>(e=>{let t={_id:e};x().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&k((0,m.qn)(t)).then(e=>{G()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(d.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})},e._id)):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,D.jsx)("td",{colSpan:6,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===P||void 0===P?void 0:P.length)>0&&(0,D.jsx)(u.A,{totalCount:_,pageSize:10,currentPage:z,onChange:e=>{E(e)}})]}),M&&U&&(0,D.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1501]",onClick:Z,children:(0,D.jsxs)("div",{className:"animate-slideInFromTop bg-white rounded-lg px-6 pt-6 pb-3 w-[800px] max-h-[70vh] overflow-y-hidden",onClick:e=>e.stopPropagation(),children:[(0,D.jsx)("div",{className:"mt-4",children:(0,D.jsx)("div",{dangerouslySetInnerHTML:{__html:null===U||void 0===U?void 0:U.content}})}),(0,D.jsx)("div",{className:"mt-4 flex justify-end",children:(0,D.jsx)("button",{onClick:Z,className:"px-4 py-2 text-white bg-header rounded-md",children:"Close"})})]})})]})})}},65337:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(91686),n=a(70579);const l=function(){return(0,n.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,n.jsx)(s.A,{size:"large"})})}}}]);
//# sourceMappingURL=2375.d4d444f5.chunk.js.map