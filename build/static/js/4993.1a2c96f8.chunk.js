"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4993],{74993:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var l=n(89379),a=n(24858),o=n(83003),i=n(15187),s=n(65043),d=n(31744),r=n(39160),c=n(97326),u=n(65512),p=n(96651),m=(n(86178),n(60446)),h=n.n(m),v=n(78227),x=n(12106),g=(n(42837),n(94084),n(69223)),y=n(55971),f=n(50822),j=n(6720),b=n(37762),N=n(64857),w=(n(11906),n(33007),n(89427)),S=(n(70337),n(40088),n(12208)),A=n(60184),C=(n(27744),n(17995),n(76932),n(73216)),D=n(70579);const I=function(){const{control:e,formState:{errors:t},setValue:n,watch:m}=(0,a.mN)(),[I,B]=(0,s.useState)(10),F=(0,o.wA)(),{clientGroupLedgerList:T,clientGroupLedgerFunc_loading:L,totalclientGroupLedgerCount:k,totalclientGroupLedgerCountOutstanding:P}=(0,o.d4)(e=>e.reports),{departmentListData:O,loading:z}=(0,o.d4)(e=>e.department),G=(0,C.Zp)(),[_,R]=(0,s.useState)({}),{taskTypeList:V}=(0,o.d4)(e=>e.taskType),{clientGroupList:E,groupSearchLoading:H}=(0,o.d4)(e=>e.clientGroup),{clientList:K}=(0,o.d4)(e=>e.client),{employeList:U}=(0,o.d4)(e=>e.employe),[W,q]=(0,s.useState)(""),J=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),{industryListData:Z,indusSearchloading:Q}=(0,o.d4)(e=>e.industry),{orgTypeList:Y,orgSearchloading:M}=(0,o.d4)(e=>e.orgType),[X,$]=(0,s.useState)(1),[ee,te]=(0,s.useState)(""),{branchList:ne}=(0,o.d4)(e=>e.branch),le=(0,a.FH)({control:e,name:"PDCompanyId",defaultValue:""}),ae=(0,a.FH)({control:e,name:"PDBranchId",defaultValue:""}),oe=(0,a.FH)({control:e,name:"status",defaultValue:""}),ie=(0,a.FH)({control:e,name:"PDOrganizationType",defaultValue:""}),se=(0,a.FH)({control:e,name:"PDindustrytype",defaultValue:""}),de=(0,a.FH)({control:e,name:"department",defaultValue:""}),re=(0,a.FH)({control:e,name:"closingBalanceString",defaultValue:""}),ce=(0,a.FH)({control:e,name:"groupName",defaultValue:""});(0,s.useEffect)(()=>{const e=setTimeout(()=>{te(W)},500);return()=>{clearTimeout(e)}},[W]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})();const ue=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{currentPage:X,pageSize:I,reqPayload:{text:ee,sort:!0,isPagination:e,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?le:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,directorId:"",branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?ae:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,status:"true"==oe||"false"!=oe&&"",organizationId:ie,organizationIds:[],departmentId:de,departmentIds:[],closingBalanceStatus:re,industryId:se,industryIds:[],groupId:ce,groupIds:[],isPagination:e}}};(0,s.useEffect)(()=>{pe(ee)},[X,ee,I]);const pe=()=>{F((0,x.Qu)(ue(!0)))},[me,he]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"company"!==(null===J||void 0===J?void 0:J.userType)&&"companyDirector"!==(null===J||void 0===J?void 0:J.userType)||F((0,d.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?le:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId})),n("startDate",h()().subtract(1,"month")),n("endDate",h()())},[]);const ve=async()=>{pe()},xe=[{key:"1",label:(0,D.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,D.jsxs)("div",{className:"bg-[#ececec] space-y-1 sm:flex justify-between items-center",children:[(0,D.jsxs)("div",{className:"sm:flex  grid grid-cols-1  gap-1.5 sm:flex-wrap text-[14px]",children:[("admin"===(null===J||void 0===J?void 0:J.userType)||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType))&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(a.xI,{name:"PDBranchId",control:e,render:e=>{let{field:t}=e;return(0,D.jsxs)(u.A,(0,l.A)((0,l.A)({},t),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(u.A.Option,{value:"",children:"Select Branch"}),null===ne||void 0===ne?void 0:ne.map(e=>(0,D.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,D.jsx)("div",{children:(0,D.jsx)(a.xI,{name:"closingBalanceString",control:e,rules:{},render:e=>{var t;let{field:n}=e;return(0,D.jsxs)(u.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Oustanding Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(u.A.Option,{value:"",children:"Select Balance Status"}),null===(t=[{label:"OutStanding Groups",value:"outstanding"},{label:"Zero Balance Group",value:"zero"},{label:"due Balance Group",value:"due"}])||void 0===t?void 0:t.map(e=>(0,D.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e.value,children:null===e||void 0===e?void 0:e.label}))]}))}})}),(0,D.jsx)("div",{className:"",children:(0,D.jsx)(a.xI,{name:"groupName",control:e,render:e=>{var t;let{field:n}=e;return(0,D.jsxs)(u.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,placeholder:"Select Group",onFocus:()=>{F((0,S.J_)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?le:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:["admin","company","companyDirector"].includes(null===J||void 0===J?void 0:J.userType)?ae:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,groupId:""}))},onChange:e=>n.onChange(e),filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(u.A.Option,{value:"",children:"Select Group"}),H?(0,D.jsx)(u.A.Option,{disabled:!0,children:(0,D.jsx)(w.A,{})}):null===(t=(0,i._o)(E))||void 0===t?void 0:t.map(e=>(0,D.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName," (",null===e||void 0===e?void 0:e.groupName,")"]},null===e||void 0===e?void 0:e._id))]}))}})})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{n("PDCompanyId",""),n("PDBranchId",""),n("status",""),n("PDOrganizationType",""),n("PDindustrytype",""),n("department",""),n("groupName",""),ve()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,D.jsx)("button",{onClick:()=>{ve()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,D.jsx)(r.A,{onChange:e=>{q(e)},children:(0,D.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(c.A,{className:"custom-collapse",items:xe,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,D.jsx)(j.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,D.jsxs)("div",{className:"space-y-1.5 flex justify-between items-center",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,D.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,D.jsx)(u.A,{id:"pageSize",value:I,onChange:e=>{B(Number(e)),$(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,D.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{(async()=>{var e,t;const n=new b.uE({orientation:"landscape",unit:"pt"});n.setFontSize(16);const l=await(null===f.K||void 0===f.K?void 0:f.K.clientGroupLedgerFunc(ue(!1)));if(!T&&!l)return;const a=null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>[t+1,(null===e||void 0===e?void 0:e.fullName)||"N/A",null!==e&&void 0!==e&&e.closingBalance?Number(null===e||void 0===e?void 0:e.closingBalance).toFixed(2):"0.00"]);(0,N.Ay)(n,{startY:40,head:[["S.No.","Group Name","Closing Balance"]],body:a,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),n.save("Client Group Ledger.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,D.jsx)("button",{onClick:()=>{(async()=>{var e,t;const n=new g.Workbook,l=n.addWorksheet("OverDueTasks");l.columns=[{header:"S.No.",key:"sno",width:10},{header:"Group Name",key:"group",width:30},{header:"Closing Balance",key:"closing",width:30}],l.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const a=await(null===f.K||void 0===f.K?void 0:f.K.clientGroupLedgerFunc(ue(!1)));if(!T&&!a)return;const o=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>({sno:t+1,group:(null===e||void 0===e?void 0:e.fullName)||"-",closing:null!==e&&void 0!==e&&e.closingBalance?Number(null===e||void 0===e?void 0:e.closingBalance).toFixed(2):"0.00"}));null===o||void 0===o||o.forEach(e=>{l.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),l.autoFilter={from:"A1",to:"I1"},n.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="client group.xlsx",n.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,D.jsxs)("div",{children:["Total Balance : ",P?Number(P).toFixed(2):"0.00"]}),(0,D.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Group Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap  text-right",children:"Closing Balance"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Statement"})]})}),L?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,D.jsx)(y.A,{})})}):(0,D.jsx)("tbody",{children:T&&(null===T||void 0===T?void 0:T.length)>0?null===T||void 0===T?void 0:T.map((e,t)=>{var n;return(0,D.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(X-1)*I}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2 text-right",children:null!==e&&void 0!==e&&e.closingBalance?Number(null===e||void 0===e?void 0:e.closingBalance).toFixed(2):"0.00"}),(0,D.jsx)("td",{className:"tableData ",children:(0,D.jsxs)("div",{className:"flex justify-start items-center gap-1",children:[(0,D.jsx)("span",{children:null===e||void 0===e||null===(n=e.departmentData)||void 0===n?void 0:n.length}),(0,D.jsx)(p.A,{placement:"topLeft",title:"View Statement",children:(0,D.jsx)("span",{className:"flex justify-center items-center cursor-pointer",children:(0,D.jsx)(A.Ny1,{onClick:()=>{G("/admin/client-groupstatement-report/".concat(null===e||void 0===e?void 0:e._id))},className:" hover:text-[#337ab7] text-[#3c8dbc]",size:14})})})]})||"-"})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,D.jsx)(v.A,{totalCount:k,pageSize:I,currentPage:X,onChange:e=>{$(e)}})]})})}}}]);
//# sourceMappingURL=4993.1a2c96f8.chunk.js.map