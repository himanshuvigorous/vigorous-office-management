"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2166,7280],{11645:(e,t,n)=>{n.d(t,{A:()=>a});const a=n(30227).A},26612:(e,t,n)=>{n.d(t,{A:()=>I});var a=n(65043),o=n(87483),l=n(45818),i=n(12701),s=n(98139),r=n.n(s),d=n(48060),c=n(35296),m=n(7650);const u=e=>{const{value:t,formatter:n,precision:o,decimalSeparator:l,groupSeparator:i="",prefixCls:s}=e;let r;if("function"===typeof n)r=n(t);else{const e=String(t),n=e.match(/^(-?)(\d*)(\.(\d+))?$/);if(n&&"-"!==e){const e=n[1];let t=n[2]||"0",d=n[4]||"";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,i),"number"===typeof o&&(d=d.padEnd(o,"0").slice(0,o>0?o:0)),d&&(d="".concat(l).concat(d)),r=[a.createElement("span",{key:"int",className:"".concat(s,"-content-value-int")},e,t),d&&a.createElement("span",{key:"decimal",className:"".concat(s,"-content-value-decimal")},d)]}else r=e}return a.createElement("span",{className:"".concat(s,"-content-value")},r)};var p=n(94414),v=n(78855),h=n(78446);const y=(0,v.OF)("Statistic",e=>(e=>{const{componentCls:t,marginXXS:n,padding:a,colorTextDescription:o,titleFontSize:l,colorTextHeading:i,contentFontSize:s,fontFamily:r}=e;return{[t]:Object.assign(Object.assign({},(0,p.dF)(e)),{["".concat(t,"-title")]:{marginBottom:n,color:o,fontSize:l},["".concat(t,"-skeleton")]:{paddingTop:a},["".concat(t,"-content")]:{color:i,fontSize:s,fontFamily:r,["".concat(t,"-content-value")]:{display:"inline-block",direction:"ltr"},["".concat(t,"-content-prefix, ").concat(t,"-content-suffix")]:{display:"inline-block"},["".concat(t,"-content-prefix")]:{marginInlineEnd:n},["".concat(t,"-content-suffix")]:{marginInlineStart:n}}})}})((0,h.oX)(e,{})),e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}});var x=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const f=a.forwardRef((e,t)=>{const{prefixCls:n,className:o,rootClassName:l,style:i,valueStyle:s,value:p=0,title:v,valueRender:h,prefix:f,suffix:b,loading:g=!1,formatter:j,precision:S,decimalSeparator:A=".",groupSeparator:N=",",onMouseEnter:D,onMouseLeave:I}=e,T=x(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:k,direction:w,className:O,style:C}=(0,c.TP)("statistic"),P=k("statistic",n),[H,E,M]=y(P),_=a.createElement(u,{decimalSeparator:A,groupSeparator:N,prefixCls:P,formatter:j,precision:S,value:p}),L=r()(P,{["".concat(P,"-rtl")]:"rtl"===w},O,o,l,E,M),Y=a.useRef(null);a.useImperativeHandle(t,()=>({nativeElement:Y.current}));const z=(0,d.A)(T,{aria:!0,data:!0});return H(a.createElement("div",Object.assign({},z,{ref:Y,className:L,style:Object.assign(Object.assign({},C),i),onMouseEnter:D,onMouseLeave:I}),v&&a.createElement("div",{className:"".concat(P,"-title")},v),a.createElement(m.A,{paragraph:!1,loading:g,className:"".concat(P,"-skeleton")},a.createElement("div",{style:s,className:"".concat(P,"-content")},f&&a.createElement("span",{className:"".concat(P,"-content-prefix")},f),h?h(_):_,b&&a.createElement("span",{className:"".concat(P,"-content-suffix")},b)))))});const b=f,g=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function j(e,t,n){const{format:a=""}=t,o=new Date(e).getTime(),l=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,o=(t.match(a)||[]).map(e=>e.slice(1,-1)),l=t.replace(a,"[]"),i=g.reduce((e,t)=>{let[a,o]=t;if(e.includes(a)){const t=Math.floor(n/o);return n-=t*o,e.replace(new RegExp("".concat(a,"+"),"g"),e=>{const n=e.length;return t.toString().padStart(n,"0")})}return e},l);let s=0;return i.replace(a,()=>{const e=o[s];return s+=1,e})}(n?Math.max(o-l,0):Math.max(l-o,0),a)}var S=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const A=e=>{const{value:t,format:n="HH:mm:ss",onChange:s,onFinish:r,type:d}=e,c=S(e,["value","format","onChange","onFinish","type"]),m="countdown"===d,[u,p]=a.useState(null),v=(0,o._q)(()=>{const e=Date.now(),n=function(e){return new Date(e).getTime()}(t);p({});return null===s||void 0===s||s(m?n-e:e-n),!(m&&n<e)||(null===r||void 0===r||r(),!1)});a.useEffect(()=>{let e;const t=()=>{e=(0,l.A)(()=>{v()&&t()})};return t(),()=>l.A.cancel(e)},[t,m]),a.useEffect(()=>{p({})},[]);return a.createElement(b,Object.assign({},c,{value:t,valueRender:e=>(0,i.Ob)(e,{title:void 0}),formatter:(e,t)=>u?j(e,Object.assign(Object.assign({},t),{format:n}),m):"-"}))},N=e=>a.createElement(A,Object.assign({},e,{type:"countdown"})),D=a.memo(N);b.Timer=A,b.Countdown=D;const I=b},47419:(e,t,n)=>{n.d(t,{A:()=>a});const a=n(74647).A},57280:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a=n(89379),o=n(65043),l=n(60184),i=n(39160),s=n(83003),r=n(32256),d=n(15187),c=n(86178),m=n.n(c),u=n(72166),p=n(53913),v=n(60446),h=n.n(v),y=n(70579);const x=e=>{var t,n;let{isOpen:a,onClose:o,modalData:l}=e;if(!a||!l)return null;const i=l.DayData;return(0,y.jsxs)(p.A,{open:a,onCancel:o,footer:null,title:(0,y.jsxs)("div",{className:"text-sm md:text-lg font-semibold text-header",children:["Attendance Details - (",null===(t=m()(null===i||void 0===i?void 0:i.date))||void 0===t?void 0:t.format("MMMM"),")"]}),width:800,bodyStyle:{maxHeight:"60vh",overflowY:"auto",padding:"16px"},centered:!0,children:[(0,y.jsxs)("div",{className:"mb-6",children:[(0,y.jsx)("h3",{className:"text-lg font-semibold text-header mb-3",children:"Employee Information"}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Name:"})," ",l.employee.employeeName]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Total Present Days:"})," ",l.employee.totalPresent]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Total Absent Days:"})," ",l.employee.totalAbsent]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Total Leaves:"})," ",l.employee.totalLeaves]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"First Half Days:"})," ",l.employee.firstHalfDay]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Second Half Days:"})," ",l.employee.secondHalfDay]})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("h3",{className:"text-lg font-semibold text-header mb-3",children:["Day ",i.day," - ",m()(null===i||void 0===i?void 0:i.date).format("DD/MM/YYYY")]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,y.jsxs)("div",{className:"capitalize",children:[(0,y.jsx)("strong",{children:"Status:"})," ",i.isPresentDay]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Check-in Time:"})," ",null!==i&&void 0!==i&&i.checkInTime&&"-"!==(null===i||void 0===i?void 0:i.checkInTime)?h()(null===i||void 0===i?void 0:i.checkInTime).format("hh:mm A"):"-"]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Check-out Time:"})," ",null!==i&&void 0!==i&&i.checkOutTime&&"-"!==(null===i||void 0===i?void 0:i.checkOutTime)?h()(null===i||void 0===i?void 0:i.checkOutTime).format("hh:mm A"):"-"]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Worked Hours:"})," ",null!==i&&void 0!==i&&i.workedHRS?(0,d.bZ)(null!==(n=null===i||void 0===i?void 0:i.workedHRS)&&void 0!==n?n:0):"-"]})]})]})]})};var f=n(24858),b=n(94084),g=n(4938),j=n(76399),S=n(47419),A=n(11645),N=n(89073),D=n(26612),I=n(96651),T=n(85157);const k=()=>{const e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-01")};function w(e){const t=n(86178),a=[],o=e.dailyStatus||[],l=t().month(),i=t().year(),s=t().daysInMonth();for(let n=1;n<=s;n++){const e=t({year:i,month:l,day:n}).startOf("day").toISOString(),s=o.find(e=>e.day===n);s?a.push({day:n,date:e,isPresentDay:s.isPresentDay||"-",checkInTime:s.checkInTime||"-",checkOutTime:s.checkOutTime||"-",workedHRS:s.workedHRS||"-"}):a.push({day:n,date:e,isPresentDay:"-",checkInTime:"-",checkOutTime:"-",workedHRS:"-"})}return a}const O=[{label:"H",description:"Half Day",bgColor:"bg-yellow-100",color:"gold"},{label:"P",description:"Present",bgColor:"bg-green-700 text-white",color:"green"},{label:"L",description:"Leave",bgColor:"bg-orange-100",color:"orange"},{label:"A",description:"Absent",bgColor:"bg-red-700 text-white",color:"red"},{label:"W",description:"Weekend",bgColor:"bg-orange-700 text-white",color:"volcano"},{label:"D",description:"holiday",bgColor:"bg-blue-700 text-white",color:"blue"}],C=()=>{const e=(0,s.wA)(),t=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),{AllAttendanceRecordData:n,loading:c}=(0,s.d4)(e=>e.attendance),[p,v]=(0,o.useState)([]),h=m()(),C=h.format("D"),P=h.format("MMMM"),[H,E]=(0,o.useState)(!1),{register:M,handleSubmit:_,control:L,setValue:Y,formState:{errors:z}}=(0,f.mN)(),[B,q]=(0,o.useState)(null),[F,R]=(0,o.useState)(!1),[W,V]=(0,o.useState)({}),[Q,U]=(0,o.useState)({}),X=(0,f.FH)({control:L,name:"date",defaultValue:""});(0,o.useEffect)(()=>{X&&e((0,r.YD)({companyId:"company"===(null===t||void 0===t?void 0:t.userType)?null===t||void 0===t?void 0:t._id:null===t||void 0===t?void 0:t.companyId,branchId:"companyBranch"===(null===t||void 0===t?void 0:t.userType)?null===t||void 0===t?void 0:t._id:null===t||void 0===t?void 0:t.branchId,employeId:null,currentMonth:X}))},[X]);const{canCreate:J,canRead:Z,canUpdate:G,canDelete:K}=(0,g.A)();(0,o.useEffect)(()=>{$()},[]);const $=()=>{e((0,r.YD)({companyId:"company"===(null===t||void 0===t?void 0:t.userType)?null===t||void 0===t?void 0:t._id:null===t||void 0===t?void 0:t.companyId,branchId:"companyBranch"===(null===t||void 0===t?void 0:t.userType)?null===t||void 0===t?void 0:t._id:null===t||void 0===t?void 0:t.branchId,employeId:null,currentMonth:k()}))};(0,o.useEffect)(()=>{v([]);const e=null===n||void 0===n?void 0:n.map(e=>(0,a.A)((0,a.A)({},e),{},{dailyStatus:w(e)})),{monthlySummary:t,todaySummary:o}=(e=>{const t={P:0,H:0,L:0,A:0,W:0,D:0},n={P:0,H:0,L:0,A:0,W:0,D:0},a=m()().date();return null===e||void 0===e||e.forEach(e=>{var o;null===(o=e.dailyStatus)||void 0===o||o.forEach(e=>{switch(null===e||void 0===e?void 0:e.isPresentDay){case"firstHalf":case"secondHalf":t.H++,e.day===a&&n.H++;break;case"present":t.P++,e.day===a&&n.P++;break;case"leave":t.L++,e.day===a&&n.L++;break;case"absent":t.A++,e.day===a&&n.A++;break;case"off":t.W++,e.day===a&&n.W++;break;case"holiday":t.D++,e.day===a&&n.D++}})}),{monthlySummary:t,todaySummary:n}})(e);V(t),U(o),v(e)},[n]);return(0,y.jsxs)(i.A,{className:"p-4",children:[(0,y.jsx)("form",{autoComplete:"off",children:(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"".concat(d.Q0),children:"Date"}),(0,y.jsx)(f.xI,{name:"date",control:L,render:e=>{let{field:t}=e;return(0,y.jsx)(b.A,{field:t,errors:z,picker:"month",format:"MM/YYYY",disabledDate:e=>e&&e.isAfter(m()().endOf("day"),"day")})}}),z.date&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:"Date is required"})]})}),(0,y.jsxs)(S.A,{gutter:[16,16],className:"my-4",children:[(0,y.jsx)(A.A,{xs:24,md:12,children:(0,y.jsx)(N.A,{title:"Monthly Summary",bordered:!1,headStyle:{fontSize:"0.9rem",padding:"8px 16px"},bodyStyle:{padding:"12px"},children:(0,y.jsx)(S.A,{gutter:[8,8],children:Object.entries(W).map(e=>{let[t,n]=e;const a=O.find(e=>e.label===t);return(0,y.jsx)(A.A,{xs:12,sm:8,children:(0,y.jsx)(N.A,{size:"small",bodyStyle:{padding:"8px"},children:(0,y.jsx)(D.A,{title:(0,y.jsxs)("span",{className:"".concat(null===a||void 0===a?void 0:a.bgColor," px-1 py-0.5 rounded text-xs"),style:{display:"inline-block"},children:[t,": ",null===a||void 0===a?void 0:a.description]}),value:n,valueStyle:{color:null===a||void 0===a?void 0:a.color,fontWeight:"bold",fontSize:"0.9rem"},prefix:n>0?"+":""})})},t)})})})}),(0,y.jsx)(A.A,{xs:24,md:12,children:(0,y.jsx)(N.A,{title:"Today's Summary (Day ".concat(C,")"),bordered:!1,headStyle:{fontSize:"0.9rem",padding:"8px 16px"},bodyStyle:{padding:"12px"},children:(0,y.jsx)(S.A,{gutter:[8,8],children:Object.entries(Q).map(e=>{let[t,n]=e;const a=O.find(e=>e.label===t);return(0,y.jsx)(A.A,{xs:12,sm:8,children:(0,y.jsx)(N.A,{size:"small",bodyStyle:{padding:"8px"},children:(0,y.jsx)(D.A,{title:(0,y.jsxs)("span",{className:"".concat(null===a||void 0===a?void 0:a.bgColor," px-1 py-0.5 rounded text-xs"),style:{display:"inline-block"},children:[t,": ",null===a||void 0===a?void 0:a.description]}),value:n,valueStyle:{color:null===a||void 0===a?void 0:a.color,fontWeight:"bold",fontSize:"0.9rem"},prefix:n>0?"+":""})})},t)})})})})]}),(0,y.jsx)("div",{className:"",children:(0,y.jsxs)("div",{className:"flex justify-between items-center mt-4 mb-2",children:[(0,y.jsxs)("div",{children:["Attendance Report - ",P]}),J&&Z&&(0,y.jsx)(I.A,{placement:"topLeft",title:"Add Manual Attendance",children:(0,y.jsxs)("button",{onClick:()=>E(!0),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,y.jsx)(l.OiG,{}),(0,y.jsx)("span",{className:"text-[12px]",children:"Manual Attendance"})]})})]})}),(0,y.jsx)("div",{className:"flex flex-wrap gap-2",children:O.map((e,t)=>(0,y.jsxs)("div",{className:"flex items-center ".concat(e.bgColor," rounded px-2 py-1 sm:text-sm text-xs font-semibold mb-2"),children:[(0,y.jsx)("span",{className:"mr-2",children:e.label}),(0,y.jsx)("span",{children:"> ".concat(e.description)})]},t))}),Z&&(0,y.jsxs)("div",{className:"w-full overflow-hidden bg-white shadow-xl",children:[(0,y.jsx)(T.A,{columns:[{title:"S.No",dataIndex:"sno",key:"sno",fixed:"left",width:60,render:(e,t,n)=>n+1},{title:"Employee",dataIndex:"employeeName",key:"employeeName",width:150},{title:"Summary",key:"summary",width:200,render:(e,t)=>{const n=(e=>{const t={P:0,H:0,L:0,A:0,W:0,D:0};return e.forEach(e=>{switch(null===e||void 0===e?void 0:e.isPresentDay){case"firstHalf":case"secondHalf":t.H++;break;case"present":t.P++;break;case"leave":t.L++;break;case"absent":t.A++;break;case"off":t.W++;break;case"holiday":t.D++}}),t})(t.dailyStatus);return(0,y.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(n).map(e=>{let[t,n]=e;if(n>0){const e=O.find(e=>e.label===t);return(0,y.jsxs)(j.A,{color:(null===e||void 0===e?void 0:e.color)||"default",className:"flex items-center",children:[t,": ",n]},t)}return null})})}},...Array.from({length:m()().daysInMonth()},(e,t)=>{const n=t+1;return{title:(0,y.jsx)("span",{className:"".concat(Number(C)===n?"bg-yellow-600 rounded-full px-1.5 py-1":""),children:n}),dataIndex:"day_".concat(n),key:"day_".concat(n),width:50,align:"center",onCell:e=>{const t=e.dailyStatus.find(e=>e.day===n);let a="";switch(null===t||void 0===t?void 0:t.isPresentDay){case"firstHalf":case"secondHalf":a="bg-yellow-100";break;case"present":a="bg-green-700";break;case"leave":a="bg-orange-100";break;case"absent":a="bg-red-700";break;case"off":a="bg-orange-700";break;case"holiday":a="bg-blue-700";break;default:a="bg-violet-100"}return{className:"".concat(a," ").concat(["bg-green-700","bg-red-700","bg-orange-700","bg-blue-700"].includes(a)?"text-white":""),onClick:()=>(q({DayData:t,employee:e}),void R(!0))}},render:(e,t)=>{const a=t.dailyStatus.find(e=>e.day===n);let o="-";switch(null===a||void 0===a?void 0:a.isPresentDay){case"firstHalf":case"secondHalf":o="H";break;case"present":o="P";break;case"leave":o="L";break;case"absent":o="A";break;case"off":o="W";break;case"holiday":o="D"}return(0,y.jsx)("span",{className:"cursor-pointer",children:o})}}})],dataSource:null===p||void 0===p?void 0:p.map((e,t)=>{const n=(0,a.A)((0,a.A)({key:e._id||t},e),{},{sno:t+1});return e.dailyStatus.forEach(e=>{n["day_".concat(e.day)]=e}),n}),loading:c,scroll:{x:"max-content",y:"calc(100vh - 400px)"},bordered:!0,size:"small",pagination:!1,rowHoverable:!1,components:{body:{cell:e=>(0,y.jsx)("td",(0,a.A)((0,a.A)({},e),{},{style:(0,a.A)({padding:"4px 8px"},e.style)}))}},locale:{emptyText:(0,y.jsx)("div",{className:"px-4 py-2 text-center bg-gray-200",children:"No data available"})}}),H&&(0,y.jsx)(u.default,{isOpen:!0,onClose:()=>E(!1),fetchattendanceListData:$}),F&&(0,y.jsx)(x,{isOpen:!0,onClose:()=>R(!1),modalData:B})]})]})}},72166:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(89379),o=n(65043),l=n(24858),i=n(86178),s=n.n(i),r=n(42837),d=n(83003),c=n(15187),m=n(78729),u=n(33007),p=n(31744),v=n(32256),h=n(73216),y=n(30064),x=n.n(y),f=n(94084),b=n(60446),g=n.n(b),j=n(53913),S=n(65512),A=n(17995),N=n(89427),D=n(57916),I=n(70579);const T=e=>{let{isOpen:t,onClose:n,fetchattendanceListData:i}=e;const{register:y,handleSubmit:b,watch:T,control:k,setValue:w,reset:O,formState:{errors:C}}=(0,l.mN)({defaultValues:{employeeName:"",date:"",checkInTime:"",checkOutTime:"",reason:"",errors:{}}}),P=S.A.Option,{timeSlotsListData:H}=(0,d.d4)(e=>e.timeSlots),E=((0,h.Zp)(),(0,l.FH)({control:k,name:"PDBranchId",defaultValue:""})),M=(0,l.FH)({control:k,name:"PDCompanyId",defaultValue:""}),_=(0,l.FH)({control:k,name:"PDDepartmentId",defaultValue:""}),L=(0,l.FH)({control:k,name:"PDDesignationId",defaultValue:""}),Y=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),z=(0,d.wA)(),{branchList:B,branchListloading:q}=(0,d.d4)(e=>e.branch),{companyList:F,companyListLoading:R}=(0,d.d4)(e=>e.company),{loading:W}=(0,d.d4)(e=>e.attendance),{employeList:V}=(0,d.d4)(e=>e.employe);(0,o.useEffect)(()=>{"admin"===(null===Y||void 0===Y?void 0:Y.userType)&&z((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,o.useEffect)(()=>{("admin"!==(null===Y||void 0===Y?void 0:Y.userType)||M)&&(w("PDDepartmentId",""),w("PDDesignationId",""),w("PDBranchId",""),z((0,u.UU)({companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?M:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,text:"",sort:!0,status:!0,isPagination:!1})),z((0,p.d0)({companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?M:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,text:"",sort:!0,status:!0,isPagination:!1})))},[M]),(0,o.useEffect)(()=>{!M&&"admin"===(null===Y||void 0===Y?void 0:Y.userType)||!E&&"companBranch"===(null===Y||void 0===Y?void 0:Y.userType)&&"employee"!==(null===Y||void 0===Y?void 0:Y.userType)||Q()},[M,E,_,L]),(0,o.useEffect)(()=>{U()},[E]);const Q=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?M:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,branchId:"company"===(null===Y||void 0===Y?void 0:Y.userType)||"admin"===(null===Y||void 0===Y?void 0:Y.userType)||"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType)?E:"companyBranch"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.branchId};z((0,r.qV)(e))},U=()=>{z((0,D.iU)({directorId:"",companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?M:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,branchId:"company"===(null===Y||void 0===Y?void 0:Y.userType)||"admin"===(null===Y||void 0===Y?void 0:Y.userType)||"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType)?E:"companyBranch"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.branchId,text:"",sort:!0,status:"",isPagination:!1}))};return t?(0,I.jsx)(j.A,{visible:t,onCancel:()=>{n(),O()},className:"antmodalclassName",footer:null,title:"Apply Attendence",width:600,height:400,children:(0,I.jsx)("div",{children:(0,I.jsxs)("form",{autoComplete:"off",onSubmit:b(e=>{console.log(e);const t={employeId:null===e||void 0===e?void 0:e.employee,companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?M:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,branchId:"company"===(null===Y||void 0===Y?void 0:Y.userType)||"admin"===(null===Y||void 0===Y?void 0:Y.userType)||"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType)?E:"companyBranch"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.branchId,directorId:"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.directorId,attendanceDate:g()(e.checkInTime).format("YYYY-MM-DD"),checkInTime:null!==e&&void 0!==e&&e.checkInTime?null===e||void 0===e?void 0:e.checkInTime:null,checkOutTime:e.checkOutTime?null===e||void 0===e?void 0:e.checkOutTime:null,method:"hr_portal",reason:e.reason,employeeName:e.employeeName,isVerified:!0,shift:e.shift};z((0,v.xn)(t)).then(e=>{e.error||(x().fire({icon:"success",title:"Success!",text:"Attendance record has been created successfully.",confirmButtonText:"OK",customClass:{confirmButton:"bg-header text-white hover:bg-[#063156]"}}),i(),n())})}),className:"",children:[(0,I.jsxs)("div",{className:"grid grid-col-1 md:grid-cols-2 gap-4",children:["admin"===(null===Y||void 0===Y?void 0:Y.userType)&&(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"".concat(c.Q0),children:"Company"}),(0,I.jsx)(l.xI,{name:"PDCompanyId",control:k,rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,I.jsxs)(S.A,(0,a.A)((0,a.A)({},t),{},{className:" ".concat(c.Hy," ").concat(C.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:e=>e.parentNode,children:[(0,I.jsx)(S.A.Option,{value:"",children:"Select Company"}),R?(0,I.jsx)(S.A.Option,{disabled:!0,children:(0,I.jsx)(N.A,{})}):null===F||void 0===F?void 0:F.map(e=>(0,I.jsxs)(S.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),C.PDCompanyId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:C.PDCompanyId.message})]}),("admin"===(null===Y||void 0===Y?void 0:Y.userType)||"company"===(null===Y||void 0===Y?void 0:Y.userType)||"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType))&&(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,I.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,I.jsx)(l.xI,{name:"PDBranchId",control:k,rules:{required:"Branch is required"},render:e=>{var t;let{field:n}=e;return(0,I.jsxs)(S.A,(0,a.A)((0,a.A)({},n),{},{onChange:e=>{w("employee",""),w("shift",""),n.onChange(e)},className:" ".concat(c.Hy," ").concat(C.PDPlan?"border-[1px] ":"border-gray-300"," "),dropdownStyle:{zIndex:2e3},placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:()=>document.body,children:[(0,I.jsx)(S.A.Option,{value:"",children:"Select Branch"}),q?(0,I.jsx)(S.A.Option,{disabled:!0,children:(0,I.jsx)(N.A,{})}):null===(t=(0,c._o)(B,"fullName"))||void 0===t?void 0:t.map(e=>(0,I.jsxs)(S.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),C.PDBranchId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:C.PDBranchId.message})]}),(0,I.jsxs)("div",{className:"w-full",children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Employee ",(0,I.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,I.jsx)(l.xI,{name:"employee",control:k,rules:{required:"Employee is required"},render:e=>{var t;let{field:n}=e;return(0,I.jsxs)(S.A,(0,a.A)((0,a.A)({},n),{},{onChange:e=>{var t;const n=V.find(t=>t._id===e);w("employee",e),w("shift",(null===n||void 0===n||null===(t=n.shiftTimeSlot)||void 0===t?void 0:t._id)||"")},dropdownStyle:{zIndex:2e3},getPopupContainer:()=>document.body,classNamePrefix:"react-select",className:"".concat(c.Hy," ").concat(C.employee?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Employee",children:[(0,I.jsx)(S.A.Option,{value:"",children:"Select Employee"}),q?(0,I.jsx)(S.A.Option,{disabled:!0,children:(0,I.jsx)(N.A,{})}):null===(t=(0,c._o)(V,"fullName"))||void 0===t?void 0:t.map(e=>(0,I.jsxs)(S.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),C.employee&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:C.employee.message})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Check-in Time ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(l.xI,{name:"checkInTime",control:k,rules:{required:!0},render:e=>{let{field:t}=e;return(0,I.jsx)(f.A,{field:t,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:C,disabledDate:e=>{const t=s()(),n=t.date()<=3,a=t.clone().subtract(1,"month").startOf("month"),o=(t.clone().subtract(1,"month").endOf("month"),e.isSame(a,"month")),l=e.isSame(t,"month"),i=e.isAfter(t,"day");return n?i||!o&&!l:i||!l}})}}),C.checkInTime&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:"Check-in time is required"})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Check-out Time ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(l.xI,{name:"checkOutTime",control:k,rules:{required:!0},render:e=>{let{field:t}=e;return(0,I.jsx)(f.A,{field:t,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:C,disabledDate:e=>{const t=T("checkInTime");if(!t)return!0;const n=g()(t).startOf("day"),a=n.add(1,"day");return!e.isSame(n,"day")&&!e.isSame(a,"day")}})}}),C.checkOutTime&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:"Check-out time is required"})]}),(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Select Shift ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(l.xI,{name:"shift",control:k,rules:{required:"Shift is required"},render:e=>{let{field:t}=e;return(0,I.jsxs)(S.A,(0,a.A)((0,a.A)({},t),{},{className:"".concat(c.Hy," ").concat(C.shift?"":"border-gray-300"),placeholder:"Select Shift",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:()=>document.body,dropdownStyle:{zIndex:2e3},children:[(0,I.jsx)(P,{value:"",children:"Select Shift"}),null===H||void 0===H?void 0:H.map(e=>(0,I.jsx)(P,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.shiftName},null===e||void 0===e?void 0:e._id))]}))}}),C.shift&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:C.shift.message})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Reason ",(0,I.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,I.jsx)("input",(0,a.A)((0,a.A)({type:"text"},y("reason",{required:!0})),{},{className:"".concat(c.Ol," ").concat(C.reason?"border-[1px] ":"border-gray-300"),rows:"3"})),C.reason&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:"Reason is required "})]})]}),(0,I.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:(0,I.jsx)("button",{type:"submit",disabled:W,className:"px-4 py-2 text-sm font-medium text-white ".concat(W?"bg-gray-400":"bg-header hover:bg-[#063156]"," rounded-md "),children:W?(0,I.jsx)(A.A,{}):"Submit"})})]})})}):null}}}]);
//# sourceMappingURL=7280.83b3240a.chunk.js.map