"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8898],{78898:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var s=l(89379),d=l(65043),i=l(24858),r=l(39160),n=l(83003),o=l(73216),c=l(65512),t=l(66015),m=l(735),u=l(15187),p=(l(36105),l(78729)),v=l(31744),x=l(14118),h=l(12745),y=l(56659),j=l(17995),N=l(42837),b=l(70579);const g=function(){const{loading:e}=(0,n.d4)(e=>e.proposal),{register:a,handleSubmit:l,setValue:g,control:f,formState:{errors:A}}=(0,i.mN)(),{userCompanyId:I,userDirectorId:T,userBranchId:q,userType:C}=(0,m.A)(),_=(0,n.wA)(),E=(0,o.Zp)(),P=JSON.parse(localStorage.getItem("user_info_".concat(u.AU))),{employeList:D}=(0,n.d4)(e=>e.employe),{companyList:L}=(0,n.d4)(e=>e.company),{countryListData:O,companyListLoading:w}=(0,n.d4)(e=>e.country),{branchList:S,branchListloading:k}=(0,n.d4)(e=>e.branch),B=(0,i.FH)({control:f,name:"PDCompanyId",defaultValue:I}),Q=((0,i.FH)({control:f,name:"directorId",defaultValue:T}),(0,i.FH)({control:f,name:"PDBranchId",defaultValue:q}));(0,d.useEffect)(()=>{g("PDMobileCode","+91")},[O]),(0,d.useEffect)(()=>{"admin"===(null===P||void 0===P?void 0:P.userType)&&_((0,p.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,d.useEffect)(()=>{(B||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&_((0,v.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?B:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId}))},[B]),(0,d.useEffect)(()=>{(B&&"company"===C||"admin"===C)&&_((0,x.HX)({text:"",sort:!0,status:!0,isPagination:!1,companyId:B}))},[B]),(0,d.useEffect)(()=>{H()},[Q]);const H=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?B:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?Q:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId};_((0,N.qV)(e))};return(0,b.jsx)(r.A,{children:(0,b.jsx)("div",{className:"gap-4",children:(0,b.jsxs)("form",{autoComplete:"off",className:"mt-5",onSubmit:l(e=>{var a;const l={companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?B:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,directorId:"",branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?Q:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,name:null===e||void 0===e?void 0:e.name,email:null===e||void 0===e?void 0:e.email,mobile:{code:null===e||void 0===e?void 0:e.code,number:null===e||void 0===e?void 0:e.number},employeId:null===e||void 0===e||null===(a=e.employee)||void 0===a?void 0:a.value,description:null===e||void 0===e?void 0:e.remark,fee:null===e||void 0===e?void 0:e.amount};_((0,h.X2)(l)).then(e=>{e.error||E(-1)})}),children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===P||void 0===P?void 0:P.userType)&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Company ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(i.xI,{control:f,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,b.jsxs)(c.A,(0,s.A)((0,s.A)({},a),{},{defaultValue:"",className:"".concat(u.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(c.A.Option,{value:"",children:"Select Company"}),w?(0,b.jsx)(c.A.Option,{disabled:!0,children:(0,b.jsx)(j.A,{})}):null===L||void 0===L?void 0:L.map(e=>(0,b.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.PDCompanyId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.PDCompanyId.message})]}),("admin"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Branch ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(i.xI,{control:f,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var a;let{field:l}=e;return(0,b.jsxs)(c.A,(0,s.A)((0,s.A)({},l),{},{defaultValue:"",className:"".concat(u.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(c.A.Option,{value:"",children:"Select Branch"}),k?(0,b.jsx)(c.A.Option,{disabled:!0,children:(0,b.jsx)(j.A,{})}):null===(a=(0,u._o)(S,"fullName"))||void 0===a?void 0:a.map(e=>(0,b.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.PDBranchId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.PDBranchId.message})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:my-2",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Name ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,s.A)((0,s.A)({type:"text"},a("name",{required:"Name is required"})),{},{className:"placeholder: ".concat(u.Ol," ").concat(A.name?"border-[1px] ":"border-gray-300"),placeholder:"Enter Name"})),A.name&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.name.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Handling Employee ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(i.xI,{name:"employee",control:f,rules:{required:"Employee is required"},render:e=>{var a;let{field:l}=e;return(0,b.jsx)(t.Ay,(0,s.A)((0,s.A)({},l),{},{options:null===(a=(0,u._o)(D,"fullName"))||void 0===a?void 0:a.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(u.Ph," ").concat(A.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),A.employee&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.employee.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Email ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,s.A)((0,s.A)({type:"text"},a("email",{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:" ".concat(u.Ol," ").concat(A.email?"border-[1px] ":"border-gray-300"),placeholder:"Enter Email"})),A.email&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.email.message})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"w-[150px]",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Code ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(i.xI,{control:f,name:"code",rules:{required:"code is required"},render:e=>{let{field:a}=e;return(0,b.jsx)(y.A,{field:a,errors:A})}}),A.code&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-2",children:A.code.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Mobile No ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,s.A)((0,s.A)({type:"number"},a("number",{required:"Mobile No is required",minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:" ".concat(u.Ol," ").concat(A.number?"border-[1px] ":"border-gray-300"),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))}})),A.number&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.number.message})]})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Remark ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,s.A)((0,s.A)({type:"text"},a("remark",{required:"Remark is required"})),{},{className:"placeholder: ".concat(u.Ol," ").concat(A.remark?"border-[1px] ":"border-gray-300"),placeholder:"Enter Remark"})),A.remark&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.remark.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(u.Q0),children:["Amount ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,s.A)((0,s.A)({type:"text"},a("amount",{required:"Amount is required"})),{},{className:"placeholder: ".concat(u.Ol," ").concat(A.amount?"border-[1px] ":"border-gray-300"),placeholder:"Enter Amount"})),A.amount&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.amount.message})]})]}),(0,b.jsx)("div",{className:"flex justify-end ",children:(0,b.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:e?(0,b.jsx)(j.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=8898.134c0f80.chunk.js.map