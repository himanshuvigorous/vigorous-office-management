"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2981],{22981:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var s=n(65043),r=n(83003),a=n(61413),o=n(73216),l=n(31174),d=n(15187),i=n(37762),c=n(64857),m=n(69223),x=n.n(m),h=n(39160),u=n(70579);const p=()=>{const e=(0,r.wA)(),t=(0,o.g)(),{vendorIdEnc:n}=t,m=(0,l.Yc)(n),p=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),{vendorFundPurchaseDataList:g,vendorFundPurchaseDataCount:f,loading:v}=(0,r.d4)(e=>e.vigoVendor),y=(0,s.useRef)();(0,s.useEffect)(()=>{e((0,a.GV)({companyId:"company"===(null===p||void 0===p?void 0:p.userType)?null===p||void 0===p?void 0:p._id:null===p||void 0===p?void 0:p.companyId,branchId:"companyBranch"===(null===p||void 0===p?void 0:p.userType)?null===p||void 0===p?void 0:p._id:null===p||void 0===p?void 0:p.branchId,directorId:"",vendorId:m,text:"",sort:!0,status:"",isPagination:!1}))},[]);const j=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"INR"}).format(e),N=e=>({purchaseExpense:"Purchase Expense",fundTransfer:"Fund Transfer"}[e]||e),b=null===g||void 0===g?void 0:g.reduce((e,t)=>e+t.amount,0),k=null===g||void 0===g?void 0:g.filter(e=>"purchaseExpense"===e.referanceBy).reduce((e,t)=>e+t.amount,0),C=null===g||void 0===g?void 0:g.filter(e=>"fundTransfer"===e.referanceBy).reduce((e,t)=>e+t.amount,0);return v?(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,u.jsx)(h.A,{children:(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,u.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,u.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,u.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),(0,u.jsxs)("div",{className:"ml-4",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,u.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:null===g||void 0===g?void 0:g.length})]})]})}),(0,u.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,u.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),(0,u.jsxs)("div",{className:"ml-4",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),(0,u.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:w(b)})]})]})}),(0,u.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:(0,u.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),(0,u.jsxs)("div",{className:"ml-4",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Breakdown"}),(0,u.jsxs)("p",{className:"text-sm text-gray-900",children:["Purchase: ",w(k)," | Transfer: ",w(C)]})]})]})})]}),(0,u.jsxs)("div",{className:"mb-6 flex flex-wrap gap-3",children:[(0,u.jsxs)("button",{onClick:()=>{const e=new i.Ay({orientation:"landscape",unit:"pt"});(0,c.Ay)(e,{startY:35,head:[["Date","Reference","Amount","Created By"]],body:null===g||void 0===g?void 0:g.map(e=>[j(e.date),N(e.referanceBy),Number(e.amount).toFixed(2),e.createdBy]),margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}});const t=null===g||void 0===g?void 0:g.reduce((e,t)=>e+t.amount,0),n=e.lastAutoTable.finalY+10;e.setFontSize(10),e.setTextColor(40,40,40),e.setFont(void 0,"bold"),e.text("Total Amount: ".concat(Number(t).toFixed(2)),14,n),e.save("vendor-transactions-".concat(m,"-").concat((new Date).toISOString().split("T")[0],".pdf"))},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,u.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF"]}),(0,u.jsxs)("button",{onClick:async()=>{const e=new(x().Workbook),t=e.addWorksheet("Vendor Transactions");t.mergeCells("A1:E1"),t.getCell("A1").value="Vendor Transaction Report",t.getCell("A1").font={size:16,bold:!0},t.getCell("A1").alignment={horizontal:"center"},t.mergeCells("A2:E2"),t.getCell("A2").value="Generated on: ".concat((new Date).toLocaleDateString()),t.getCell("A2").font={size:10,color:{argb:"FF666666"}},t.getCell("A2").alignment={horizontal:"center"},t.getCell("A3").value="Vendor ID: ".concat(m),t.getCell("A3").font={size:10,color:{argb:"FF666666"}};t.addRow(["Date","Reference","Amount","Created By","Created Date"]);const n=t.getRow(5);n.font={bold:!0,color:{argb:"FFFFFFFF"}},n.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF2980B9"}},n.alignment={horizontal:"center"},null===g||void 0===g||g.forEach(e=>{t.addRow([j(e.date),N(e.referanceBy),e.amount,e.createdBy,j(e.createdAt)])}),t.columns=[{width:15},{width:20},{width:15},{width:30},{width:20},{width:15}];t.getColumn(3).numFmt="$#,##0.00";const s=null===g||void 0===g?void 0:g.reduce((e,t)=>e+t.amount,0),r=t.addRow(["","Total:",s,"","",""]);r.font={bold:!0},r.getCell(3).numFmt="$#,##0.00";const a=await e.xlsx.writeBuffer(),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=URL.createObjectURL(o),d=document.createElement("a");d.href=l,d.download="vendor-transactions-".concat(m,"-").concat((new Date).toISOString().split("T")[0],".xlsx"),d.click(),URL.revokeObjectURL(l)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,u.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})]}),(0,u.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{ref:y,className:"min-w-full divide-y divide-gray-200",children:[(0,u.jsx)("thead",{className:"bg-gray-50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"})]})}),(0,u.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===g||void 0===g?void 0:g.map(e=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j(e.date)}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,u.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("purchaseExpense"===e.referanceBy?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:N(e.referanceBy)})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(e.amount)}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdBy})]},e._id))}),(null===g||void 0===g?void 0:g.length)>0&&(0,u.jsx)("tfoot",{className:"bg-gray-50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{colSpan:"2",className:"px-6 py-4 text-sm font-medium text-gray-900 text-right",children:"Total:"}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:w(b)}),(0,u.jsx)("td",{colSpan:"2"})]})})]})}),0===(null===g||void 0===g?void 0:g.length)&&!v&&(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,u.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transactions"}),(0,u.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No transactions found for this vendor."})]})]})]})})})}}}]);
//# sourceMappingURL=2981.eca7d39a.chunk.js.map