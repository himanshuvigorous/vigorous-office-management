"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1985],{61985:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var s=l(89379),i=l(24858),d=l(39160),o=l(83003),n=l(73216),r=l(31174),t=l(65043),c=l(15187),u=(l(42837),l(42044)),v=l(31744),m=l(78729),p=l(65512),x=l(17995),h=l(89427),y=l(70579);const j=()=>{var e;const{loading:a}=(0,o.d4)(e=>e.leaveType),{register:l,handleSubmit:j,control:N,setValue:A,formState:{errors:b}}=(0,i.mN)(),g=(0,o.wA)(),f=(0,n.Zp)(),{leaveTypeEnc:w}=(0,n.g)(),C=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),S=(0,r.Yc)(w),{leaveTypeDetails:T}=(0,o.d4)(e=>e.leaveType),[I,O]=(0,t.useState)(!1),{companyList:D,companyListLoading:L}=(0,o.d4)(e=>e.company),{branchList:P,branchListloading:F}=(0,o.d4)(e=>e.branch),_=(0,i.FH)({control:N,name:"totalLeaves",defaultValue:""});(0,t.useEffect)(()=>{let e={_id:S};g((0,u.wF)(e))},[]);const B=(0,i.FH)({control:N,name:"PDCompanyId",defaultValue:""}),q=(0,i.FH)({control:N,name:"isPaid",defaultValue:""});(0,t.useEffect)(()=>{T&&(A("PDCompanyId",null===T||void 0===T?void 0:T.companyId),A("PDBranchId",null===T||void 0===T?void 0:T.branchId),A("leaveTypeName",null===T||void 0===T?void 0:T.name),A("maxDays",null===T||void 0===T?void 0:T.maxDays),A("duration",null===T||void 0===T?void 0:T.duration),A("totalLeaves",null===T||void 0===T?void 0:T.totalLeaves),O(null===T||void 0===T?void 0:T.duration),A("status",null===T||void 0===T?void 0:T.status),A("isCarryForward",null===T||void 0===T?void 0:T.isCarryForword),A("isPaid",null===T||void 0===T?void 0:T.isPaid))},[T]);(0,t.useEffect)(()=>{(B||"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType))&&g((0,v.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?B:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId}))},[B]),(0,t.useEffect)(()=>{"admin"===(null===C||void 0===C?void 0:C.userType)&&g((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const H=e=>{O("true"===e),A("maxDays","")};return(0,y.jsx)(d.A,{children:(0,y.jsx)("div",{className:"gap-4",children:(0,y.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:j(e=>{const a={_id:S,companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,directorId:"companyDirector"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.directorId,branchId:"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)||"company"===(null===C||void 0===C?void 0:C.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,name:null===e||void 0===e?void 0:e.leaveTypeName,maxDays:+(null===e||void 0===e?void 0:e.maxDays),totalLeaves:+(null===e||void 0===e?void 0:e.totalLeaves),duration:"string"===typeof(null===e||void 0===e?void 0:e.duration)?JSON.parse(null===e||void 0===e?void 0:e.duration):null===e||void 0===e?void 0:e.duration,isPaid:null===e||void 0===e?void 0:e.isPaid,isCarryForword:!(!q||!I)&&(null===e||void 0===e?void 0:e.isCarryForward),status:"string"===typeof(null===e||void 0===e?void 0:e.status)?JSON.parse(null===e||void 0===e?void 0:e.status):null===e||void 0===e?void 0:e.status};g((0,u.HC)(a)).then(e=>{e.error||f(-1)})}),children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===C||void 0===C?void 0:C.userType)&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Company ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsxs)("select",(0,s.A)((0,s.A)({},l("PDCompanyId",{required:"company is required"})),{},{showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),className:" ".concat(c.Ol," ").concat(b.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,y.jsx)("option",{className:"",value:"",children:"Select Comapany"}),L?(0,y.jsx)(p.A.Option,{disabled:!0,children:(0,y.jsx)(h.A,{})}):null===D||void 0===D?void 0:D.map(e=>(0,y.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),b.PDCompanyId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDCompanyId.message})]}),("admin"===(null===C||void 0===C?void 0:C.userType)||"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType))&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(i.xI,{name:"PDBranchId",control:N,rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,y.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(c.Hy," ").concat(b.PDBranchId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Branch"}),F?(0,y.jsx)(p.A.Option,{disabled:!0,children:(0,y.jsx)(h.A,{})}):null===P||void 0===P?void 0:P.map(e=>(0,y.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDBranchId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDBranchId.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Leave Type Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"text"},l("leaveTypeName",{required:"Leave Type Name is required"})),{},{className:"".concat(c.Ol," ").concat(b.leaveTypeName?"border-[1px] ":"border-gray-300"),placeholder:"Enter Leave Type Name"})),b.leaveTypeName&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.leaveTypeName.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Total Annual Allowance ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"number"},l("totalLeaves",{required:"Total Annual Allowance is required"})),{},{className:"".concat(c.Ol," ").concat(b.totalLeaves?"border-[1px] ":"border-gray-300"),placeholder:"Enter Total Annual Allowance"})),b.totalLeaves&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.totalLeaves.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Application Limit ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(i.xI,{name:"duration",control:N,render:e=>{let{field:a}=e;return(0,y.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(c.Hy," ").concat(b.duration?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),value:I?"true":"false",placeholder:"Select Application Limit",onChange:H,children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Duration"}),(0,y.jsx)(p.A.Option,{value:"true",children:"Active"}),(0,y.jsx)(p.A.Option,{value:"false",children:"Inactive"})]}))}}),(null===b||void 0===b?void 0:b.duration)&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:null===b||void 0===b||null===(e=b.duration)||void 0===e?void 0:e.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Is This a Paid Leave? ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(i.xI,{name:"isPaid",control:N,render:e=>{let{field:a}=e;return(0,y.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(c.Hy," ").concat(b.isPaid?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Option",children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Option"}),(0,y.jsx)(p.A.Option,{value:!0,children:"Yes"}),(0,y.jsx)(p.A.Option,{value:!1,children:"No"})]}))}}),b.isPaid&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.isPaid.message})]}),I&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Maximum Days Per Application (In Month) ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"number"},l("maxDays",{required:"Maximum Days Per Application is required",validate:e=>!(e>+_)||"Maximum Days Per Application cannot be greater than Total Annual Allowance"})),{},{className:"".concat(c.Ol," ").concat(b.maxDays?"border-[1px] ":"border-gray-300"),placeholder:"Enter Maximum Days Per Application"})),b.maxDays&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.maxDays.message})]}),q&&I&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Allow Carry Forward? ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(i.xI,{name:"isCarryForward",control:N,render:e=>{let{field:a}=e;return(0,y.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(c.Hy," ").concat(b.isCarryForward?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Option",children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Option"}),(0,y.jsx)(p.A.Option,{value:!0,children:"Yes"}),(0,y.jsx)(p.A.Option,{value:!1,children:"No"})]}))}}),b.isCarryForward&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.isCarryForward.message})]}),(0,y.jsxs)("div",{className:"w-full",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Status ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(i.xI,{name:"status",control:N,render:e=>{let{field:a}=e;return(0,y.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(c.Hy," ").concat(b.status?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Status",children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Status"}),(0,y.jsx)(p.A.Option,{value:!0,children:"Active"}),(0,y.jsx)(p.A.Option,{value:!1,children:"In Active"})]}))}}),b.status&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.status.message})]})]}),(0,y.jsx)("div",{className:"flex justify-end",children:(0,y.jsx)("button",{type:"submit",disabled:a,className:"".concat(a?"bg-gray-400":"bg-header"," text-white p-2 px-4 mt-3 rounded"),children:a?(0,y.jsx)(x.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=1985.5d66d30c.chunk.js.map