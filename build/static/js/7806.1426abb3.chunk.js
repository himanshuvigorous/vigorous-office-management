"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7806],{57806:(e,a,l)=>{l.r(a),l.d(a,{default:()=>f});var d=l(89379),n=l(24858),s=l(39160),o=l(83003),i=l(73216),t=l(77396),r=(l(42837),l(65043)),c=l(15187),m=(l(31744),l(78729),l(97230)),u=l(94084),p=l(60446),v=l.n(p),x=l(65512),y=l(31174),h=l(17995),N=l(89427),j=l(70579);const f=function(){const{penaltyIdEnc:e}=(0,i.g)(),a=(0,y.Yc)(e),{employeePenaltyDetails:l}=(0,o.d4)(e=>e.employeePenalty),{loading:p}=(0,o.d4)(e=>e.employeePenalty),{register:f,control:b,watch:g,setValue:I,handleSubmit:A,formState:{errors:D}}=(0,n.mN)();(0,r.useEffect)(()=>{let e={_id:a};C((0,t.q7)(e))},[]);const q=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),{penaltyListData:P}=(0,o.d4)(e=>e.penalty),S=(0,n.FH)({control:b,name:"PDCompanyId",defaultValue:""}),_=(0,n.FH)({control:b,name:"PDBranchId",defaultValue:""});(0,r.useEffect)(()=>{w()},[_,S]),(0,r.useEffect)(()=>{l&&(I("PDBranchId",null===l||void 0===l?void 0:l.branchId),I("employee",null===l||void 0===l?void 0:l.employeId),I("employeeName",null===l||void 0===l?void 0:l.employeName),I("amount",null===l||void 0===l?void 0:l.amount),I("date",v()(null===l||void 0===l?void 0:l.issueDate)),I("penaltyName",null===l||void 0===l?void 0:l.penaltyId),I("reason",null===l||void 0===l?void 0:l.reason))},[l]);const w=()=>{const e={currentPage:"",pageSize:"",reqData:{directorId:"",companyId:"admin"===(null===q||void 0===q?void 0:q.userType)?S:"company"===(null===q||void 0===q?void 0:q.userType)?null===q||void 0===q?void 0:q._id:null===q||void 0===q?void 0:q.companyId,branchId:"company"===(null===q||void 0===q?void 0:q.userType)||"admin"===(null===q||void 0===q?void 0:q.userType)||"companyDirector"===(null===q||void 0===q?void 0:q.userType)?_:"companyBranch"===(null===q||void 0===q?void 0:q.userType)?null===q||void 0===q?void 0:q._id:null===q||void 0===q?void 0:q.branchId,text:"",sort:!0,status:"",isPagination:!0}};C((0,m.cr)(e))},E=(0,n.FH)({control:b,name:"penaltyName",defaultValue:""});(0,r.useEffect)(()=>{const e=null===P||void 0===P?void 0:P.find(e=>(null===e||void 0===e?void 0:e._id)==E);I("amount",null===e||void 0===e?void 0:e.amount)},[E]);const O=e=>e&&e.isAfter(v()().endOf("day")),C=(0,o.wA)(),T=(0,i.Zp)();return(0,j.jsx)(s.A,{children:(0,j.jsx)("div",{className:"gap-4",children:(0,j.jsxs)("form",{autoComplete:"off",className:"mt-5 md:px-1",onSubmit:A(e=>{var d;const n={_id:a,companyId:null===l||void 0===l?void 0:l.companyId,directorId:null===l||void 0===l?void 0:l.directorId,branchId:null===l||void 0===l?void 0:l.branchId,employeId:null===l||void 0===l?void 0:l.employeId,penaltyId:null===e||void 0===e?void 0:e.penaltyName,amount:Number(null===e||void 0===e?void 0:e.amount),reason:null===e||void 0===e?void 0:e.reason,issueDate:null===(d=v()(null===e||void 0===e?void 0:e.date))||void 0===d?void 0:d.format("YYYY-MM-DD")};C((0,t.pk)(n)).then(e=>{(null===e||void 0===e||!e.error)&&T(-1)})}),children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr] gap-2 md:my-2",children:[(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(c.Q0),children:["Penalty Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(n.xI,{name:"penaltyName",control:b,rules:{required:"Penaulty Name is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(x.A,(0,d.A)((0,d.A)({},a),{},{className:" ".concat(c.Hy),placeholder:"Select penalty Name ",showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(x.A.Option,{value:"",children:"Select Penalty Name "}),p?(0,j.jsx)(x.A.Option,{disabled:!0,children:(0,j.jsx)(N.A,{})}):null===P||void 0===P?void 0:P.map((e,a)=>(0,j.jsx)(x.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},a))]}))}}),D.penaltyName&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:D.penaltyName.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(c.Q0),children:["Employee Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,d.A)((0,d.A)({disabled:!0,type:"text"},f("employeeName",{required:"Employee Name is required"})),{},{className:" ".concat(D.amount?"border-[1px] ":"border-gray-300").concat(c.id),placeholder:"Employee Name"})),D.employee&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:D.employee.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsxs)("label",{className:"".concat(c.Q0),children:["Amount ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"number",disabled:!0},f("amount",{required:"Amount is required"})),{},{className:" bg-gray-200 ".concat(D.amount?"border-[1px] ":"border-gray-300").concat(c.id),placeholder:"Amount"})),D.amount&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:D.amount.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsxs)("label",{className:"".concat(c.Q0),children:["Reason ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"text"},f("reason",{required:"reason is required"})),{},{className:" ".concat(D.reason?"border-[1px] ":"border-gray-300").concat(c.Ol),placeholder:"Enter reason"})),D.reason&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:D.reason.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(c.Q0),children:["Date ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(n.xI,{name:"date",control:b,rules:{required:"Date is required"},render:e=>{let{field:a}=e;return(0,j.jsx)(u.A,{field:a,errors:D,disabledDate:O})}}),D.date&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:"date is required"})]})]}),(0,j.jsx)("div",{className:"flex justify-end m-4",children:(0,j.jsx)("button",{type:"submit",disabled:p,className:"".concat(p?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:p?(0,j.jsx)(h.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=7806.1426abb3.chunk.js.map