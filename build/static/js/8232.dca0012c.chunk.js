"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8232],{48232:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(73216),l=t(97826),d=t(83003),r=t(65043),i=t(31174),n=t(31121),c=t(39160),o=t(55971),x=t(13382),m=t(94834),h=t(65239),j=t.n(h),u=t(37762),v=t(70579);const p=()=>{var e,s,t,h,p,N,b,y,g,f,w,T;const{projectInvoiceIdEnc:A}=(0,a.g)(),S=JSON.parse((0,i.Yc)(A)),D=(0,r.useRef)(),C=(0,d.wA)(),{projectInvoiceDetailsData:P,loading:G}=(0,d.d4)(e=>e.projectInvoice),F=null===P||void 0===P?void 0:P.result;(0,r.useEffect)(()=>{C((0,l.PY)({_id:S._id}))},[]),console.log(S,F);const R=async()=>{const e=D.current,s=(await j()(e,{scale:2,useCORS:!0,allowTaint:!0})).toDataURL("image/png"),t=new u.Ay("p","mm","a4"),a=t.getImageProperties(s),l=t.internal.pageSize.getWidth(),d=a.height*l/a.width;t.addImage(s,"PNG",0,0,l,d),t.save("".concat(M,".pdf"))};if(G||!F)return(0,v.jsx)(c.A,{children:(0,v.jsx)(o.A,{})});const{invoiceType:I,invoiceNumber:M,invoiceDate:k,paymentDate:B,subTotal:E,GSTTotal:O,finalWithGSTAmount:V,amountPaid:_,balanceDue:z,gstRate:Y,items:W,paymentMethod:J,paymentReference:L,remark:U,terms:X,projectData:q,clientData:H,branchData:K,companyName:Q,accountentData:Z,gstNumber:$}=F,ee=k?(0,n.GP)(new Date(k),"dd MMM yyyy"):"",se=B?(0,n.GP)(new Date(B),"dd MMM yyyy"):"",te={};W&&W.forEach(e=>{te[e.GSTRate]||(te[e.GSTRate]={taxableValue:0,gstAmount:0}),te[e.GSTRate].taxableValue+=e.amount,te[e.GSTRate].gstAmount+=e.GSTAmount});const{previousBalance:ae=0,currentBalance:le=0,balance:de=0,amountPaid:re=0}=S;var ie,ne,ce,oe,xe,me,he,je,ue,ve,pe,Ne,be,ye,ge,fe,we,Te,Ae;return"debit"===I?(0,v.jsxs)(c.A,{children:[(0,v.jsx)("div",{className:"flex justify-end mb-2",children:(0,v.jsx)(x.Ay,{type:"primary",icon:(0,v.jsx)(m.A,{}),onClick:R,className:"print-button",children:"Print/Download"})}),(0,v.jsxs)("div",{ref:D,className:"p-6  mx-auto bg-white shadow rounded border border-gray-200",children:[(0,v.jsxs)("div",{className:"flex justify-between items-start mb-6 pb-4 border-b",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:Q}),(0,v.jsx)("p",{className:"text-sm text-gray-600",children:null===K||void 0===K||null===(ie=K.addresses)||void 0===ie||null===(ne=ie.primary)||void 0===ne?void 0:ne.street}),(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:[null===K||void 0===K||null===(ce=K.addresses)||void 0===ce||null===(oe=ce.primary)||void 0===oe?void 0:oe.city,", ",null===K||void 0===K||null===(xe=K.addresses)||void 0===xe||null===(me=xe.primary)||void 0===me?void 0:me.state," - ",null===K||void 0===K||null===(he=K.addresses)||void 0===he||null===(je=he.primary)||void 0===je?void 0:je.pinCode]}),$&&(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:["GSTIN: ",$]})]}),(0,v.jsxs)("div",{className:"text-right",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-blue-600",children:"TAX INVOICE"}),(0,v.jsxs)("p",{className:"text-sm text-gray-700",children:["Invoice #: ",M]}),(0,v.jsxs)("p",{className:"text-sm text-gray-700",children:["Date: ",ee]})]})]}),(0,v.jsxs)("div",{className:"flex justify-between mb-6",children:[(0,v.jsxs)("div",{className:"w-1/2 pr-2",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-1",children:"Bill To:"}),(0,v.jsx)("p",{className:"text-gray-800",children:null===H||void 0===H?void 0:H.fullName}),(0,v.jsx)("p",{className:"text-xs text-gray-600",children:null===H||void 0===H||null===(ue=H.addresses)||void 0===ue||null===(ve=ue.primary)||void 0===ve?void 0:ve.street}),(0,v.jsxs)("p",{className:"text-xs text-gray-600",children:[null===H||void 0===H||null===(pe=H.addresses)||void 0===pe||null===(Ne=pe.primary)||void 0===Ne?void 0:Ne.city,", ",null===H||void 0===H||null===(be=H.addresses)||void 0===be||null===(ye=be.primary)||void 0===ye?void 0:ye.state," - ",null===H||void 0===H||null===(ge=H.addresses)||void 0===ge||null===(fe=ge.primary)||void 0===fe?void 0:fe.pinCode]}),(null===H||void 0===H||null===(we=H.mobile)||void 0===we?void 0:we.number)&&(0,v.jsxs)("p",{className:"text-xs text-gray-600",children:["Phone: ",null===H||void 0===H||null===(Te=H.mobile)||void 0===Te?void 0:Te.code," ",null===H||void 0===H||null===(Ae=H.mobile)||void 0===Ae?void 0:Ae.number]})]}),(0,v.jsxs)("div",{className:"w-1/2 pl-2",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-1",children:"Project:"}),(0,v.jsx)("p",{className:"text-gray-800",children:null===q||void 0===q?void 0:q.title}),(0,v.jsxs)("p",{className:"text-xs text-gray-600",children:["Code: ",null===q||void 0===q?void 0:q.projectCode]})]})]}),(0,v.jsx)("div",{className:"mb-4",children:(0,v.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"bg-gray-100",children:[(0,v.jsx)("th",{className:"p-2 text-left border",children:"#"}),(0,v.jsx)("th",{className:"p-2 text-left border",children:"Description"}),(0,v.jsx)("th",{className:"p-2 text-right border",children:"Amount (\u20b9)"}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("th",{className:"p-2 text-right border",children:"GST Rate (%)"}),(0,v.jsx)("th",{className:"p-2 text-right border",children:"GST (\u20b9)"})]}),(0,v.jsx)("th",{className:"p-2 text-right border",children:"Total (\u20b9)"})]})}),(0,v.jsx)("tbody",{children:null===W||void 0===W?void 0:W.map((e,s)=>(0,v.jsxs)("tr",{className:"border-b",children:[(0,v.jsx)("td",{className:"p-2 border text-center",children:s+1}),(0,v.jsxs)("td",{className:"p-2 border",children:[(0,v.jsx)("p",{className:"font-medium",children:e.name}),e.remark&&(0,v.jsx)("p",{className:"text-xs text-gray-500",children:e.remark})]}),(0,v.jsx)("td",{className:"p-2 border text-right",children:e.amount.toFixed(2)}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("td",{className:"p-2 border text-right",children:[e.GSTRate,"%"]}),(0,v.jsx)("td",{className:"p-2 border text-right",children:e.GSTAmount.toFixed(2)})]}),(0,v.jsx)("td",{className:"p-2 border text-right font-medium",children:e.amountAfterGST.toFixed(2)})]},s))})]})}),(0,v.jsx)("div",{className:"mb-4 ml-auto w-64",children:(0,v.jsx)("table",{className:"w-full border-collapse text-sm",children:(0,v.jsx)("tbody",{children:Object.entries(te).map(e=>{let[s,t]=e;return(0,v.jsxs)("tr",{className:"border-b",children:[(0,v.jsxs)("td",{className:"p-1 text-right border",children:["GST @ ",s,"% on \u20b9",t.taxableValue.toFixed(2)]}),(0,v.jsxs)("td",{className:"p-1 text-right border font-medium",children:["\u20b9",t.gstAmount.toFixed(2)]})]},s)})})})}),(0,v.jsx)("div",{className:"flex justify-end mb-4",children:(0,v.jsxs)("div",{className:"w-64 border-t",children:[(0,v.jsxs)("div",{className:"flex justify-between py-1",children:[(0,v.jsx)("span",{className:"font-medium",children:"Subtotal:"}),(0,v.jsxs)("span",{children:["\u20b9",null===E||void 0===E?void 0:E.toFixed(2)]})]}),(0,v.jsxs)("div",{className:"flex justify-between py-1",children:[(0,v.jsx)("span",{className:"font-medium",children:"GST Total:"}),(0,v.jsxs)("span",{children:["\u20b9",null===O||void 0===O?void 0:O.toFixed(2)]})]}),(0,v.jsxs)("div",{className:"flex justify-between py-2 border-t font-semibold",children:[(0,v.jsx)("span",{children:"Total Amount:"}),(0,v.jsxs)("span",{className:"text-blue-600",children:["\u20b9",null===V||void 0===V?void 0:V.toFixed(2)]})]})]})}),(0,v.jsxs)("div",{className:"mb-4 border p-3 rounded bg-gray-50",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Balance Information"}),(0,v.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,v.jsxs)("div",{className:"border-r pr-4",children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Previous Balance"}),(0,v.jsxs)("p",{className:"font-medium ".concat(ae<0?"text-red-600":"text-green-600"),children:["\u20b9",Math.abs(ae).toFixed(2)," ",ae<0?"(Dr)":"(Cr)"]})]}),(0,v.jsxs)("div",{className:"border-r pr-4",children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Invoice Amount"}),(0,v.jsxs)("p",{className:"font-medium text-blue-600",children:["\u20b9",null===V||void 0===V?void 0:V.toFixed(2)]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Amount To Be Paid"}),(0,v.jsxs)("p",{className:"font-medium ".concat(le<0?"text-red-600":"text-green-600"),children:["\u20b9",Math.abs(le).toFixed(2)," ",le<0?"(Dr)":"(Cr)"]})]})]})]}),(0,v.jsxs)("div",{className:"pt-4 border-t flex justify-between",children:[(0,v.jsxs)("div",{className:"text-center w-1/3",children:[(0,v.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Customer Signature"}),(0,v.jsx)("div",{className:"h-12 border-t mt-1"})]}),(0,v.jsx)("div",{className:"text-center w-1/3",children:(0,v.jsx)("p",{className:"text-xs text-gray-500",children:"Thank you for your business!"})}),(0,v.jsxs)("div",{className:"text-center w-1/3",children:[(0,v.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Authorized Signatory"}),(0,v.jsx)("div",{className:"h-12 border-t mt-1"})]})]})]}),(0,v.jsx)("style",{jsx:!0,children:"\n          @media print {\n            .print-button {\n              display: none;\n            }\n          }\n        "})]}):(0,v.jsxs)(c.A,{children:[(0,v.jsx)("div",{className:"flex justify-end mb-4",children:(0,v.jsx)(x.Ay,{type:"primary",icon:(0,v.jsx)(m.A,{}),onClick:R,className:"print-button",children:"Print/Download"})}),(0,v.jsxs)("div",{ref:D,className:"p-6  mx-auto bg-white shadow rounded border border-gray-200",children:[(0,v.jsxs)("div",{className:"flex justify-between items-start mb-6 pb-4 border-b",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:Q}),(0,v.jsx)("p",{className:"text-sm text-gray-600",children:null===K||void 0===K||null===(e=K.addresses)||void 0===e||null===(s=e.primary)||void 0===s?void 0:s.street}),(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:[null===K||void 0===K||null===(t=K.addresses)||void 0===t||null===(h=t.primary)||void 0===h?void 0:h.city,", ",null===K||void 0===K||null===(p=K.addresses)||void 0===p||null===(N=p.primary)||void 0===N?void 0:N.state," - ",null===K||void 0===K||null===(b=K.addresses)||void 0===b||null===(y=b.primary)||void 0===y?void 0:y.pinCode]}),$&&(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:["GSTIN: ",$]})]}),(0,v.jsxs)("div",{className:"text-right",children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-green-600",children:"PAYMENT RECEIPT"}),(0,v.jsxs)("p",{className:"text-sm text-gray-700",children:["Receipt #: ",M]}),(0,v.jsxs)("p",{className:"text-sm text-gray-700",children:["Date: ",se]})]})]}),(0,v.jsxs)("div",{className:"mb-6",children:[(0,v.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,v.jsxs)("div",{className:"w-1/2 pr-2",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-1",children:"Received From:"}),(0,v.jsx)("p",{className:"text-gray-800",children:(null===H||void 0===H?void 0:H.fullName)||"N/A"}),(null===H||void 0===H||null===(g=H.addresses)||void 0===g||null===(f=g.primary)||void 0===f?void 0:f.street)&&(0,v.jsx)("p",{className:"text-xs text-gray-600",children:H.addresses.primary.street}),(null===H||void 0===H||null===(w=H.addresses)||void 0===w||null===(T=w.primary)||void 0===T?void 0:T.city)&&(0,v.jsxs)("p",{className:"text-xs text-gray-600",children:[H.addresses.primary.city,", ",H.addresses.primary.state]})]}),(0,v.jsxs)("div",{className:"w-1/2 pl-2",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-1",children:"Project:"}),(0,v.jsx)("p",{className:"text-gray-800",children:null===q||void 0===q?void 0:q.title}),(0,v.jsxs)("p",{className:"text-xs text-gray-600",children:["Code: ",null===q||void 0===q?void 0:q.projectCode]})]})]}),(0,v.jsxs)("div",{className:"border p-4 rounded bg-gray-50",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-3 text-center",children:"Payment Details"}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Amount Received"}),(0,v.jsxs)("p",{className:"font-bold text-green-600",children:["\u20b9",null===_||void 0===_?void 0:_.toFixed(2)]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Payment Method"}),(0,v.jsx)("p",{className:"font-medium",children:J||"N/A"})]}),L&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Reference Number"}),(0,v.jsx)("p",{className:"font-medium",children:L})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Payment Date"}),(0,v.jsx)("p",{className:"font-medium",children:se})]})]})]})]}),Z&&(0,v.jsxs)("div",{className:"mb-4 border p-3 rounded bg-gray-50",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-1",children:"Received By:"}),(0,v.jsx)("p",{className:"text-gray-800",children:null===Z||void 0===Z?void 0:Z.fullName}),(null===Z||void 0===Z?void 0:Z.email)&&(0,v.jsx)("p",{className:"text-xs text-gray-600",children:null===Z||void 0===Z?void 0:Z.email})]}),(0,v.jsxs)("div",{className:"mb-4 border p-3 rounded bg-gray-50",children:[(0,v.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Balance Information"}),(0,v.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,v.jsxs)("div",{className:"border-r pr-4",children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Previous Balance"}),(0,v.jsxs)("p",{className:"font-medium ".concat(ae<0?"text-red-600":"text-green-600"),children:["\u20b9",Math.abs(ae).toFixed(2)," ",ae<0?"(Dr)":"(Cr)"]})]}),(0,v.jsxs)("div",{className:"border-r pr-4",children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Amount Received"}),(0,v.jsxs)("p",{className:"font-medium text-green-600",children:["\u20b9",null===re||void 0===re?void 0:re.toFixed(2)]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-600",children:"Current Outstanding"}),(0,v.jsxs)("p",{className:"font-medium ".concat(le<0?"text-red-600":"text-green-600"),children:["\u20b9",Math.abs(le).toFixed(2)," ",le<0?"(Dr)":"(Cr)"]})]})]})]}),(0,v.jsxs)("div",{className:"pt-4 border-t flex justify-between",children:[(0,v.jsxs)("div",{className:"text-center w-1/3",children:[(0,v.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Customer Signature"}),(0,v.jsx)("div",{className:"h-12 border-t mt-1"})]}),(0,v.jsx)("div",{className:"text-center w-1/3",children:(0,v.jsx)("p",{className:"text-xs text-gray-500",children:"Thank you for your payment!"})}),(0,v.jsxs)("div",{className:"text-center w-1/3",children:[(0,v.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Authorized Signatory"}),(0,v.jsx)("div",{className:"h-12 border-t mt-1"})]})]})]}),(0,v.jsx)("style",{jsx:!0,children:"\n        @media print {\n          .print-button {\n            display: none;\n          }\n        }\n      "})]})}}}]);
//# sourceMappingURL=8232.dca0012c.chunk.js.map