"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7181],{97181:(e,s,r)=>{r.r(s),r.d(s,{default:()=>h});var l=r(89379),d=r(65043),i=r(24858),o=r(39160),a=r(15187),n=r(83003),t=r(735),c=r(78729),m=r(65512),p=r(4938),u=r(49578),x=r(17995),v=(r(29542),r(88967),r(30064),r(70579));const h=()=>{(0,d.useRef)();const e=(0,d.useRef)(null),[s,r]=(0,d.useState)(null),{register:h,handleSubmit:j,formState:{errors:y},control:b,setValue:A,getValues:g,reset:P}=(0,i.mN)(),T=(0,n.wA)(),{companyList:f}=(0,n.d4)(e=>e.company),{companyPrefixData:N,loading:S}=(0,n.d4)(e=>e.companyPrefix),[O,U]=(0,d.useState)(!1),{userType:I}=(0,t.A)(),w=JSON.parse(localStorage.getItem("user_info_".concat(a.AU))),k="admin"===(null===w||void 0===w?void 0:w.userType)?g("companyId"):"company"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===w||void 0===w?void 0:w.companyId,D=()=>{e.current!==k&&(e.current=k,"company"===I&&T((0,u.ie)({companyId:k})))};(0,d.useEffect)(()=>{"admin"===I&&T((0,c.Ar)({isPagination:!1,text:"",sort:!0,status:!0}))},[]),(0,d.useEffect)(()=>{!k||"company"!==(null===w||void 0===w?void 0:w.userType)&&"admin"!==(null===w||void 0===w?void 0:w.userType)&&"companyDirector"!==(null===w||void 0===w?void 0:w.userType)||O||D()},[k,O]),(0,d.useEffect)(()=>{A("companyId",(null===N||void 0===N?void 0:N.companyId)||""),A("branchPrefix",(null===N||void 0===N?void 0:N.branchUserNamePrefix)||""),A("DirectorUserPrefix",(null===N||void 0===N?void 0:N.directorUserNamePrefix)||""),A("tagLine",(null===N||void 0===N?void 0:N.tagline)||""),A("JWTTokenExprTime",(null===N||void 0===N?void 0:N.JWTTokenExprTime)||""),A("smtpHost",(null===N||void 0===N?void 0:N.smtpHost)||""),A("smtpPort",(null===N||void 0===N?void 0:N.smtpPort)||""),A("smtpSecure",1==(null===N||void 0===N?void 0:N.smtpSecure)),A("smtpUser",(null===N||void 0===N?void 0:N.smtpUser)||""),A("smtpPassword",(null===N||void 0===N?void 0:N.smtpPassword)||""),r((null===N||void 0===N?void 0:N.logo)||"")},[N]);const{canCreate:E,canRead:H,canUpdate:L,canDelete:C}=(0,p.A)();return"company"!==(null===w||void 0===w?void 0:w.userType)?(0,v.jsx)(o.A,{children:(0,v.jsx)("div",{className:"bg-red-100 text-red-800 p-4 rounded-md mt-2",children:(0,v.jsx)("p",{className:"text-center font-semibold",children:"You are not an authorized user. This page is viewable for Company only."})})}):(0,v.jsx)(o.A,{children:H&&(0,v.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:j(e=>{var r,l,d,i;const o={companyId:"company"===(null===w||void 0===w?void 0:w.userType)?null===w||void 0===w?void 0:w._id:null===e||void 0===e?void 0:e.companyId,directorUserNamePrefix:null===e||void 0===e?void 0:e.DirectorUserPrefix,branchUserNamePrefix:null===e||void 0===e?void 0:e.branchPrefix,tagline:null===e||void 0===e?void 0:e.tagLine,logo:s||"",JWTTokenExprTime:null===e||void 0===e?void 0:e.JWTTokenExprTime,smtpHost:null!==(r=null===e||void 0===e?void 0:e.smtpHost)&&void 0!==r?r:"",smtpPort:null!==(l=+(null===e||void 0===e?void 0:e.smtpPort))&&void 0!==l?l:"",smtpSecure:"true"==(null===e||void 0===e?void 0:e.smtpSecure)||1==(null===e||void 0===e?void 0:e.smtpSecure),smtpUser:null!==(d=null===e||void 0===e?void 0:e.smtpUser)&&void 0!==d?d:"",smtpPassword:null!==(i=null===e||void 0===e?void 0:e.smtpPassword)&&void 0!==i?i:""};T((0,u.fu)(o)).then(e=>{e.error||D()})}),children:[(0,v.jsxs)("div",{className:"flex justify-between items-center !capitalize",children:[L&&(0,v.jsx)("button",{onClick:()=>U(!O),type:"button",className:a.Wb,children:O?"Cancel":"Edit"}),L&&(0,v.jsx)("button",{type:"submit",disabled:S||!O,className:"".concat(S||!O?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:S?(0,v.jsx)(x.A,{}):"Submit"})]}),(0,v.jsxs)("div",{className:"border border-header mt-2 rounded-lg",children:[(0,v.jsx)("div",{className:"bg-header text-white py-2 px-4 rounded-t-lg",children:"Prefix Settings"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 p-2",children:[("admin"===I||"companyDirector"===I)&&(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:a.Q0,children:["Company ",(0,v.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,v.jsxs)("select",(0,l.A)((0,l.A)({},h("companyId",{required:"Company is required"})),{},{className:"".concat(a.Ol," ").concat(y.companyId?"border-[1px]":"border-gray-300"),children:[(0,v.jsx)("option",{value:"",children:"Select Company"}),null===f||void 0===f?void 0:f.map(e=>(0,v.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName," (",null===e||void 0===e?void 0:e.userName,")"]},null===e||void 0===e?void 0:e._id))]})),y.companyId&&(0,v.jsx)("p",{className:"text-red-500 text-sm",children:y.companyId.message})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"".concat(a.Q0),children:"Logout Time"}),(0,v.jsx)(i.xI,{name:"JWTTokenExprTime",control:b,disabled:!O,render:e=>{let{field:s}=e;return(0,v.jsxs)(m.A,(0,l.A)((0,l.A)({},s),{},{className:" ".concat(a.Hy," ").concat(y.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select  Logout Time",children:[(0,v.jsx)(m.A.Option,{value:"",children:"Select Logout Time"}),(0,v.jsx)(m.A.Option,{value:"30m",children:"30 minutes"}),(0,v.jsx)(m.A.Option,{value:"1h",children:"1 hour"}),(0,v.jsx)(m.A.Option,{value:"6h",children:"6 hours"}),(0,v.jsx)(m.A.Option,{value:"12h",children:"12 hours"}),(0,v.jsx)(m.A.Option,{value:"24h",children:"1 day"}),(0,v.jsx)(m.A.Option,{value:"3d",children:"3 days"}),(0,v.jsx)(m.A.Option,{value:"7d",children:"7 days"}),(0,v.jsx)(m.A.Option,{value:"30d",children:"1 month (30 days)"}),(0,v.jsx)(m.A.Option,{value:"60d",children:"2 months (60 days)"}),(0,v.jsx)(m.A.Option,{value:"90d",children:"3 months (90 days)"}),(0,v.jsx)(m.A.Option,{value:"120d",children:"4 months (120 days)"}),(0,v.jsx)(m.A.Option,{value:"240d",children:"8 months (240 days)"}),(0,v.jsx)(m.A.Option,{value:"365d",children:"1 year"})]}))}}),y.JWTTokenExprTime&&(0,v.jsx)("p",{className:"text-red-500 text-sm",children:y.JWTTokenExprTime.message})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:a.Q0,children:"Branch Username Prefix"}),(0,v.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!O},h("branchPrefix")),{},{className:"".concat(O?a.Ol:a.id," ").concat(y.branchPrefix?"border-[1px]":"border-gray-300"),placeholder:"Branch Username Prefix"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:a.Q0,children:"Director Username Prefix"}),(0,v.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!O},h("DirectorUserPrefix")),{},{className:"".concat(O?a.Ol:a.id," ").concat(y.DirectorUserPrefix?"border-[1px]":"border-gray-300"),placeholder:"Director Username Prefix"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:a.Q0,children:"Tagline"}),(0,v.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!O},h("tagLine")),{},{className:"".concat(O?a.Ol:a.id," ").concat(y.tagLine?"border-[1px]":"border-gray-300"),placeholder:"Tagline"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:a.Q0,children:"Smtp Host"}),(0,v.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!O},h("smtpHost")),{},{className:"".concat(O?a.Ol:a.id," ").concat(y.smtpHost?"border-[1px]":"border-gray-300"),placeholder:"smtp Host"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"".concat(a.Q0),children:"SMTP Port"}),(0,v.jsx)(i.xI,{name:"smtpPort",control:b,disabled:!O,render:e=>{let{field:s}=e;return(0,v.jsxs)(m.A,(0,l.A)((0,l.A)({},s),{},{className:" ".concat(a.Hy," ").concat(y.smtpPort?"border-[1px]":"border-gray-300"),placeholder:"Select SMTP Port",children:[(0,v.jsx)(m.A.Option,{value:"",children:"Select SMTP Port"}),(0,v.jsx)(m.A.Option,{value:587,children:"587 (TLS - STARTTLS)"}),(0,v.jsx)(m.A.Option,{value:465,children:"465 (SSL)"})]}))}}),y.smtpPort&&(0,v.jsx)("p",{className:"text-red-500 text-sm",children:y.smtpPort.message})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"".concat(a.Q0),children:"Is SMTP Secure"}),(0,v.jsx)(i.xI,{name:"smtpSecure",control:b,disabled:!O,render:e=>{let{field:s}=e;return(0,v.jsxs)(m.A,(0,l.A)((0,l.A)({},s),{},{className:" ".concat(a.Hy," ").concat(y.smtpSecure?"border-[1px] ":"border-gray-300"),placeholder:"Select  Is SMTP Secure",children:[(0,v.jsx)(m.A.Option,{value:"",children:'Select Is SMTP Secure"'}),(0,v.jsx)(m.A.Option,{value:!0,children:"True"}),(0,v.jsx)(m.A.Option,{value:!1,children:"False"})]}))}}),y.smtpSecure&&(0,v.jsx)("p",{className:"text-red-500 text-sm",children:y.smtpSecure.message})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:a.Q0,children:"smtp User"}),(0,v.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!O},h("smtpUser")),{},{className:"".concat(O?a.Ol:a.id," ").concat(y.smtpUser?"border-[1px]":"border-gray-300"),placeholder:"smtp User"}))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:a.Q0,children:"smtp Password"}),(0,v.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!O},h("smtpPassword")),{},{className:"".concat(O?a.Ol:a.id," ").concat(y.smtpPassword?"border-[1px]":"border-gray-300"),placeholder:"smtp Password"}))]})]})]})]})})}}}]);
//# sourceMappingURL=7181.06864c0d.chunk.js.map