"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4120],{91739:(e,l,a)=>{a.r(l),a.d(l,{default:()=>j});var s=a(89379),d=a(65043),i=a(39160),n=a(83003),r=a(73216),o=a(24858),t=a(31174),c=a(735),u=a(15187),m=(a(36105),a(65512)),v=a(78729),p=a(31744),x=(a(14118),a(12208)),h=a(56659),N=a(17995),y=a(70579);const j=function(){const{loading:e}=(0,n.d4)(e=>e.clientGroup),{register:l,handleSubmit:a,setValue:j,control:g,formState:{errors:b}}=(0,o.mN)(),{userCompanyId:f,userDirectorId:A,userBranchId:I,userType:D}=(0,c.A)(),P=(0,n.wA)(),C=(0,r.Zp)(),{clientGrpIdEnc:B}=(0,r.g)(),O=(0,t.Yc)(B),T=JSON.parse(localStorage.getItem("user_info_".concat(u.AU))),{clientGroupDetails:w}=(0,n.d4)(e=>e.clientGroup),{companyList:_}=(0,n.d4)(e=>e.company),{countryListData:q,companyListLoading:L}=(0,n.d4)(e=>e.country),{branchList:S,branchListloading:E}=(0,n.d4)(e=>e.branch),Q=(0,o.FH)({control:g,name:"PDCompanyId",defaultValue:f}),V=((0,o.FH)({control:g,name:"directorId",defaultValue:A}),(0,o.FH)({control:g,name:"PDBranchId",defaultValue:I}));return(0,d.useEffect)(()=>{(Q||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&P((0,p.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?Q:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId}))},[Q]),(0,d.useEffect)(()=>{"admin"===(null===T||void 0===T?void 0:T.userType)&&P((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,d.useEffect)(()=>{let e={_id:O};P((0,x.lt)(e))},[]),(0,d.useEffect)(()=>{var e,l;w&&(j("PDCompanyId",null===w||void 0===w?void 0:w.companyId),j("PDBranchId",null===w||void 0===w?void 0:w.branchId),j("fullName",null===w||void 0===w?void 0:w.fullName),j("email",null===w||void 0===w?void 0:w.email),j("password",null===w||void 0===w?void 0:w.password),j("PDCode",null===w||void 0===w||null===(e=w.mobile)||void 0===e?void 0:e.code),j("openingBalance",null===w||void 0===w?void 0:w.openingBalance),j("PDNumber",null===w||void 0===w||null===(l=w.mobile)||void 0===l?void 0:l.number),j("status",null!==w&&void 0!==w&&w.status?"true":"false"))},[w]),(0,y.jsx)(i.A,{children:(0,y.jsx)("div",{className:"gap-4",children:(0,y.jsxs)("form",{autoComplete:"off",className:"mt-3",onSubmit:a(e=>{var l;const a={_id:O,companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?Q:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId,directorId:"",branchId:"company"===(null===T||void 0===T?void 0:T.userType)||"admin"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType)?V:"companyBranch"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.branchId,fullName:null===e||void 0===e?void 0:e.fullName,openingBalance:+(null===e||void 0===e?void 0:e.openingBalance),email:null===e||void 0===e||null===(l=e.email)||void 0===l?void 0:l.toLowerCase(),userType:"clientGroup",mobile:{code:null===e||void 0===e?void 0:e.PDCode,number:null===e||void 0===e?void 0:e.PDNumber},status:"true"===(null===e||void 0===e?void 0:e.status)};P((0,x.IQ)(a)).then(e=>{e.error||C(-1)})}),children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:my-2",children:["admin"===(null===T||void 0===T?void 0:T.userType)&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Company ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(o.xI,{control:g,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,y.jsxs)(m.A,(0,s.A)((0,s.A)({},l),{},{defaultValue:"",className:"".concat(u.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(m.A.Option,{value:"",children:"Select Company"}),L?(0,y.jsx)(m.A.Option,{disabled:!0,children:(0,y.jsx)(N.A,{})}):null===_||void 0===_?void 0:_.map(e=>(0,y.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDCompanyId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDCompanyId.message})]}),("admin"===(null===T||void 0===T?void 0:T.userType)||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&(0,y.jsxs)("div",{children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Branch ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(o.xI,{control:g,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var l;let{field:a}=e;return(0,y.jsxs)(m.A,(0,s.A)((0,s.A)({},a),{},{defaultValue:"",className:"".concat(u.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(m.A.Option,{value:"",children:"Select Branch"}),E?(0,y.jsx)(m.A.Option,{disabled:!0,children:(0,y.jsx)(N.A,{})}):null===(l=(0,u._o)(S,"fullName"))||void 0===l?void 0:l.map(e=>(0,y.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDBranchId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDBranchId.message})]})]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:my-2",children:[(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"text"},l("fullName",{required:"Name is required"})),{},{className:"placeholder: ".concat(u.Ol," ").concat(b.fullName?"border-[1px] ":"border-gray-300"),placeholder:"Enter Name"})),b.fullName&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.fullName.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Email ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"text"},l("email",{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:" ".concat(u.Ol," ").concat(b.email?"border-[1px] ":"border-gray-300"),placeholder:"Enter Email",style:{textTransform:"lowercase"}})),b.email&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.email.message})]}),(0,y.jsxs)("div",{className:"flex gap-3",children:[(0,y.jsxs)("div",{className:"w-[150px]",children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Code ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(o.xI,{control:g,name:"PDCode",rules:{required:"code is required"},render:e=>{let{field:l}=e;return(0,y.jsx)(h.A,{field:l,errors:b})}}),b.PDCode&&(0,y.jsx)("p",{className:"text-red-500 text-sm mt-2",children:b.PDCode.message})]}),(0,y.jsxs)("div",{className:"w-full",children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Mobile No ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"number"},l("PDNumber",{required:"Mobile No is required",minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:" ".concat(u.Ol," ").concat(b.PDNumber?"border-[1px] ":"border-gray-300"),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))}})),b.PDNumber&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDNumber.message})]})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsx)("label",{className:"".concat(u.Q0),children:"Opening Balance"}),(0,y.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"any"},l("openingBalance",{})),{},{disabled:null===w||void 0===w?void 0:w.openingBalance,className:" ".concat(u.Ol," ").concat(b.openingBalance?"border-[1px] ":"border-gray-300"," "),placeholder:"Enter Opening Balance"})),b.openingBalance&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.openingBalance.message})]}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("label",{className:"".concat(u.Q0),children:["Status ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(o.xI,{control:g,name:"status",rules:{required:"status is required"},render:e=>{let{field:l}=e;return(0,y.jsxs)(m.A,(0,s.A)((0,s.A)({},l),{},{defaultValue:"",className:"".concat(u.Hy," "),children:[(0,y.jsx)(m.A.Option,{value:"",children:"Select status"}),(0,y.jsx)(m.A.Option,{value:"true",children:"Active"}),(0,y.jsx)(m.A.Option,{value:"false",children:"Inactive"})]}))}}),b.status&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.status.message})]})]}),(0,y.jsx)("div",{className:"flex justify-end ",children:(0,y.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 mt-3 rounded"),children:e?(0,y.jsx)(N.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=4120.6c091a5a.chunk.js.map