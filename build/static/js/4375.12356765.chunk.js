"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4375],{84375:(e,l,i)=>{i.r(l),i.d(l,{default:()=>P});var s=i(89379),a=i(24858),n=i(83003),t=i(73216),d=i(15187),r=i(65043),o=i(31744),c=i(39160),m=i(65512),u=i(17995),v=i(89427),p=i(42837),x=i(48883),h=i(70337),y=i(16370),j=i(53727),N=i(75337),g=i(94084),b=i(88967),A=i(60446),f=i.n(A),T=i(31421),I=i(57944),S=i(60184),O=i(70579);const C=["service","product"],D=["Low","Medium","High"],_=["isBillable","Fixed"],q=["Weekly","Monthly","Yearly"],B=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];const P=function(){var e;const{loading:l}=(0,n.d4)(e=>e.projectManagement),{register:i,handleSubmit:A,control:P,watch:Q,formState:{errors:G},setValue:F,getValues:H}=(0,a.mN)({defaultValues:{billing:{duration:"Weekly",schedule:{weekly:{day:"Monday"},monthly:{date:1},quartAndYearly:{month:"January",date:1}}},projectType:"product",priority:"Medium",billingType:"isBillable",employeIds:[],items:[],tags:[],filePath:[],subTotal:0,finalAmount:0}}),k=(0,n.wA)(),L=(0,t.Zp)(),M=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),{loading:V,employeList:U}=(0,n.d4)(e=>e.employe),{branchList:R,branchListloading:W}=(0,n.d4)(e=>e.branch),{clientList:E,loading:J}=(0,n.d4)(e=>e.client),{ServerManagementList:Y,loading:z}=(0,n.d4)(e=>e.serverManagement),{projectCategoryList:Z,loading:K}=(0,n.d4)(e=>e.projectCategory),{projectserviceList:X,loading:$}=(0,n.d4)(e=>e.projectservice),[ee,le]=(0,r.useState)([]),{fields:ie,append:se,remove:ae}=(0,a.jz)({control:P,name:"items"}),ne=(0,a.FH)({control:P,name:"PDCompanyId",defaultValue:""}),te=(0,a.FH)({control:P,name:"PDBranchId",defaultValue:""}),de=(0,a.FH)({control:P,name:"items",defaultValue:[]});(0,r.useEffect)(()=>{const e=(de||[]).reduce((e,l)=>e+(Number(null===l||void 0===l?void 0:l.amount)||0),0),l=e;F("subTotal",e),F("finalAmount",l)},[de,F]),(0,r.useEffect)(()=>{(ne||"company"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType))&&k((0,o.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?ne:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId}))},[ne]),(0,r.useEffect)(()=>{(()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isManager:"",isPagination:!1,departmentId:"",designationId:"",companyId:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?te:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,isBranch:!0,isDirector:!0};k((0,p.qV)(e))})(),k((0,h.Aq)({companyId:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?te:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,groupId:"",directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1})),k((0,x.dQ)({companyId:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?te:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,text:"",sort:!0,status:"",isPagination:!1})),k((0,y.Au)({companyId:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?te:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,text:"",sort:!0,status:"",isPagination:!1})),k((0,T.J8)({companyId:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?te:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,text:"",sort:!0,status:"",isPagination:!1}))},[te]);const re=(e,l,i)=>{const s=l*i/100,a=l+s;F("items.".concat(e,".GSTAmount"),s),F("items.".concat(e,".amountAfterGST"),a),ue()},oe=()=>(Q("items")||[]).reduce((e,l)=>e+(l.amount||0),0),ce=()=>(Q("items")||[]).reduce((e,l)=>e+(l.GSTAmount||0),0),me=()=>(Q("items")||[]).reduce((e,l)=>e+(l.amountAfterGST||0),0),ue=()=>{const e=oe(),l=ce(),i=me();F("subTotal",e),F("GSTTotal",l),F("finalWithGSTAmount",i)};return(0,O.jsx)(c.A,{children:(0,O.jsx)("div",{className:"gap-4",children:(0,O.jsxs)("form",{autoComplete:"off",className:"mt-5 md:px-1",onSubmit:A(e=>{var l,i,s,a;const n={companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,directorId:"companyDirector"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.directorId,branchId:"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)||"company"===(null===M||void 0===M?void 0:M.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,managerId:"",teamLeadId:(null===e||void 0===e?void 0:e.employee)||"",clientId:(null===e||void 0===e?void 0:e.client)||"",categoryId:(null===e||void 0===e?void 0:e.projectCategory)||"",employeIds:(null===e||void 0===e?void 0:e.employeIds)||[],customerName:e.customerName,title:e.title,startUpFee:+(null===e||void 0===e?void 0:e.startUpFee),projectType:e.projectType,priority:e.priority,billingType:e.billingType,billing:e.billing,services:(null===(l=e.items)||void 0===l?void 0:l.map(e=>{var l,i;return{type:e.type,amount:e.amount?+e.amount:0,name:"service"===e.type?null===(l=X.find(l=>l._id===e.expenseId))||void 0===l?void 0:l.name:"server"===e.type?null===(i=Y.find(l=>l._id===e.expenseId))||void 0===i?void 0:i.serverName:null===e||void 0===e?void 0:e.name,expenseId:"service"===e.type?e.expenseId||"":null,serverId:"server"===e.type?e.expenseId||"":null,GSTRate:+(null===e||void 0===e?void 0:e.GSTRate),GSTAmount:+(null===e||void 0===e?void 0:e.GSTAmount),amountAfterGST:+(null===e||void 0===e?void 0:e.amountAfterGST),remark:e.remark||""}}))||[],subTotal:(null===(i=e.items)||void 0===i?void 0:i.length)>0?+e.subTotal:0,GSTTotal:(null===(s=e.items)||void 0===s?void 0:s.length)>0?+(null===e||void 0===e?void 0:e.GSTTotal):0,finalWithGSTAmount:(null===(a=e.items)||void 0===a?void 0:a.length)>0?+(null===e||void 0===e?void 0:e.finalWithGSTAmount):0,startDate:(0,d.Tk)(e.startDate),deadlineDate:(0,d.Tk)(e.deadlineDate),description:e.description,filePath:ee};k((0,I.rQ)(n)).then(e=>{e.error||L(-1)})}),children:[(0,O.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Create New Project"}),(0,O.jsxs)("div",{className:" p-2 ",children:[(0,O.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Basic Information"}),(0,O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[("admin"===(null===M||void 0===M?void 0:M.userType)||"company"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType))&&(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Branch ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{name:"PDBranchId",control:P,rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy," ").concat(G.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,O.jsx)(m.A.Option,{value:"",children:"Select Branch"}),W?(0,O.jsx)(m.A.Option,{disabled:!0,children:(0,O.jsx)(v.A,{})}):null===R||void 0===R?void 0:R.map(e=>(0,O.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),G.PDBranchId&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.PDBranchId.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Title ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)("input",(0,s.A)((0,s.A)({type:"text"},i("title",{required:"Title is required"})),{},{className:"".concat(d.Ol," ").concat(G.title?"border-[1px] ":"border-gray-300"),placeholder:"Project Title"})),G.title&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.title.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Customer Name ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)("input",(0,s.A)((0,s.A)({type:"text"},i("customerName",{required:"Customer name is required"})),{},{className:"".concat(d.Ol," ").concat(G.customerName?"border-[1px] ":"border-gray-300"),placeholder:"Customer Name"})),G.customerName&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.customerName.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Client ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{name:"client",control:P,rules:{required:"Client is required"},render:e=>{var l;let{field:i}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},i),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(d.Hy," ").concat(G.client?"border-[1px] ":"border-gray-300"),children:[(0,O.jsx)(m.A.Option,{value:"",children:"Select client"}),J?(0,O.jsx)(m.A.Option,{disabled:!0,children:(0,O.jsx)(v.A,{})}):null===(l=(0,d._o)(E,"fullName"))||void 0===l?void 0:l.map(e=>(0,O.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}))}}),G.client&&(0,O.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.client.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Project Category ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{name:"projectCategory",control:P,rules:{required:"Project Category is required"},render:e=>{var l;let{field:i}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},i),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(d.Hy),children:[(0,O.jsx)(m.A.Option,{value:"",children:"Select Project Category"}),K?(0,O.jsx)(m.A.Option,{disabled:!0,children:(0,O.jsx)(v.A,{})}):null===(l=(0,d._o)(Z,"name"))||void 0===l?void 0:l.map(e=>(0,O.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]}))}}),G.projectCategory&&(0,O.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.projectCategory.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Project Type ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{control:P,name:"projectType",rules:{required:"Project type is required"},render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:C.map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}))}}),G.projectType&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.projectType.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Project Handling Employee ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{control:P,name:"employee",rules:{required:"employee is required"},render:e=>{var l;let{field:i}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},i),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(d.Hy," mt-2"),children:[(0,O.jsx)(m.A.Option,{value:"",selected:!0,children:"Select Project Handling Employee"}),V?(0,O.jsx)(m.A.Option,{disabled:!0,children:(0,O.jsx)(v.A,{})}):null===(l=(0,d._o)(U,"fullName"))||void 0===l?void 0:l.map((e,l)=>(0,O.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),G.employee&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.employee.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Start Up Fee"}),(0,O.jsxs)("div",{className:"flex items-center",children:[(0,O.jsx)("input",(0,s.A)((0,s.A)({type:"number",step:"0.01"},i("startUpFee",{})),{},{className:"".concat(d.Ol),placeholder:"Start Up Fee"})),G.startUpFee&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:null===(e=G.startUpFee)||void 0===e?void 0:e.message})]})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Priority ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{control:P,name:"priority",rules:{required:"Priority is required"},render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:D.map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e},e))}))}}),G.priority&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.priority.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Start Date ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{name:"startDate",control:P,rules:{required:"Start date is required"},render:e=>{let{field:l}=e;return(0,O.jsx)(g.A,{field:l,errors:G})}}),G.startDate&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.startDate.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Deadline Date"}),(0,O.jsx)(a.xI,{name:"deadlineDate",control:P,render:e=>{let{field:l}=e;return(0,O.jsx)(g.A,{field:l,disabledDate:e=>{const l=Q("startDate");return l&&e&&e.isBefore(f()(l),"day")}})}})]})]})]}),(0,O.jsxs)("div",{className:" p-2 ",children:[(0,O.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Billing Information"}),(0,O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,O.jsxs)("div",{className:"",children:[(0,O.jsxs)("label",{className:"".concat(d.Q0),children:["Billing Type ",(0,O.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,O.jsx)(a.xI,{control:P,name:"billingType",rules:{required:"Billing type is required"},render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:_.map(e=>(0,O.jsx)(m.A.Option,{value:e,children:"isBillable"===e?"Billable":"Fixed"},e))}))}}),G.billingType&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:G.billingType.message})]}),"isBillable"===Q("billingType")&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Billing Duration"}),(0,O.jsx)(a.xI,{control:P,name:"billing.duration",render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:q.map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e},e))}))}})]}),"Weekly"===Q("billing.duration")&&(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Billing Day"}),(0,O.jsx)(a.xI,{control:P,name:"billing.schedule.weekly.day",render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:B.map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e},e))}))}})]}),"Monthly"===Q("billing.duration")&&(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Billing Date"}),(0,O.jsx)(a.xI,{control:P,name:"billing.schedule.monthly.date",render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:Array.from({length:31},(e,l)=>l+1).map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e},e))}))}})]}),("Quarterly"===Q("billing.duration")||"Yearly"===Q("billing.duration"))&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Billing Month"}),(0,O.jsx)(a.xI,{control:P,name:"billing.schedule.quartAndYearly.month",render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:w.map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e},e))}))}})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Billing Date"}),(0,O.jsx)(a.xI,{control:P,name:"billing.schedule.quartAndYearly.date",render:e=>{let{field:l}=e;return(0,O.jsx)(m.A,(0,s.A)((0,s.A)({},l),{},{className:"".concat(d.Hy),children:Array.from({length:31},(e,l)=>l+1).map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e},e))}))}})]})]})]})]})]}),(0,O.jsxs)("div",{className:"p-2",children:[(0,O.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Services & Servers"}),(0,O.jsxs)("div",{className:"space-y-4",children:[ie.map((e,l)=>{var i,n,t,r,o,c,u,p,x,h,y,N,g,b,A,f,T,I,S,C;return(0,O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 border rounded p-2",children:[(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Type"}),(0,O.jsx)(a.xI,{control:P,name:"items.".concat(l,".type"),rules:{required:"Type is required"},render:e=>{let{field:i}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},i),{},{className:"".concat(d.Hy),placeholder:"Select Type",onChange:e=>{i.onChange(e),F("items.".concat(l,".expenseId"),""),F("items.".concat(l,".name"),"")},children:[(0,O.jsx)(m.A.Option,{value:"",children:"Select Type"}),["service","server","other"].map(e=>(0,O.jsx)(m.A.Option,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}))}}),(null===(i=G.items)||void 0===i||null===(n=i[l])||void 0===n?void 0:n.type)&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:null===(t=G.items)||void 0===t||null===(r=t[l])||void 0===r||null===(o=r.type)||void 0===o?void 0:o.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"service"===Q("items.".concat(l,".type"))?"Service":"server"===Q("items.".concat(l,".type"))?"Server":"Name"}),"other"===Q("items.".concat(l,".type"))?(0,O.jsx)(a.xI,{name:"items.".concat(l,".name"),control:P,rules:{required:"Name is required"},render:e=>{let{field:l}=e;return(0,O.jsx)("input",(0,s.A)((0,s.A)({},l),{},{type:"text",className:"".concat(d.Ol),placeholder:"Enter name"}))}}):(0,O.jsx)(a.xI,{control:P,name:"items.".concat(l,".expenseId"),rules:{required:"".concat("service"===Q("items.".concat(l,".type"))?"Service":"Server"," is required")},render:e=>{var i,a;let{field:n}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},n),{},{loading:"service"===Q("items.".concat(l,".type"))?$:z,className:"".concat(d.Hy),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),onChange:(e,i)=>{n.onChange(e);const s=(null===i||void 0===i?void 0:i.children)||"";F("items.".concat(l,".name"),s)},children:[(0,O.jsxs)(m.A.Option,{value:"",children:["Select ","service"===Q("items.".concat(l,".type"))?"Service":"Server"]}),"service"===Q("items.".concat(l,".type"))?$?(0,O.jsx)(m.A.Option,{disabled:!0,children:(0,O.jsx)(v.A,{})}):null===(i=(0,d._o)(X,"name"))||void 0===i?void 0:i.map(e=>(0,O.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)):z?(0,O.jsx)(m.A.Option,{disabled:!0,children:(0,O.jsx)(v.A,{})}):null===(a=(0,d._o)(Y,"serverName"))||void 0===a?void 0:a.map(e=>(0,O.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.serverName},null===e||void 0===e?void 0:e._id))]}))}}),(null===(c=G.items)||void 0===c||null===(u=c[l])||void 0===u?void 0:u.expenseId)&&"other"!==Q("items.".concat(l,".type"))&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:null===(p=G.items)||void 0===p||null===(x=p[l])||void 0===x||null===(h=x.expenseId)||void 0===h?void 0:h.message}),(null===(y=G.items)||void 0===y||null===(N=y[l])||void 0===N?void 0:N.name)&&"other"===Q("items.".concat(l,".type"))&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:null===(g=G.items)||void 0===g||null===(b=g[l])||void 0===b||null===(A=b.name)||void 0===A?void 0:A.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Amount"}),(0,O.jsx)(a.xI,{name:"items.".concat(l,".amount"),control:P,rules:{required:"Amount is required",min:0},render:e=>{let{field:i}=e;return(0,O.jsx)("input",(0,s.A)((0,s.A)({},i),{},{type:"number",step:"0.01",min:"0",className:"".concat(d.Ol),placeholder:"Amount",onChange:e=>{const s=parseFloat(e.target.value)||0;i.onChange(s);const a=Q("items.".concat(l,".GSTRate"))||0;re(l,s,a)}}))}}),(null===(f=G.items)||void 0===f||null===(T=f[l])||void 0===T?void 0:T.amount)&&(0,O.jsx)("p",{className:"text-red-500 text-sm",children:null===(I=G.items)||void 0===I||null===(S=I[l])||void 0===S||null===(C=S.amount)||void 0===C?void 0:C.message})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"GST %"}),(0,O.jsx)(a.xI,{name:"items.".concat(l,".GSTRate"),control:P,render:e=>{let{field:i}=e;return(0,O.jsxs)(m.A,(0,s.A)((0,s.A)({},i),{},{className:"".concat(d.Hy),placeholder:"GST %",onChange:e=>{i.onChange(e);const s=Q("items.".concat(l,".amount"))||0;re(l,s,e)},children:[(0,O.jsx)(m.A.Option,{value:0,children:"0%"}),(0,O.jsx)(m.A.Option,{value:5,children:"5%"}),(0,O.jsx)(m.A.Option,{value:12,children:"12%"}),(0,O.jsx)(m.A.Option,{value:18,children:"18%"}),(0,O.jsx)(m.A.Option,{value:28,children:"28%"})]}))}})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"GST Amt"}),(0,O.jsxs)("div",{className:"".concat(d.Ol," bg-gray-100 flex items-center justify-center"),children:["\u20b9",(Q("items.".concat(l,".GSTAmount"))||0).toFixed(2)]})]}),(0,O.jsxs)("div",{className:"",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Total"}),(0,O.jsxs)("div",{className:"".concat(d.Ol," bg-gray-100 flex items-center justify-center"),children:["\u20b9",(Q("items.".concat(l,".amountAfterGST"))||0).toFixed(2)]})]}),(0,O.jsxs)("div",{className:"flex items-end md:col-span-2 w-full",children:[(0,O.jsxs)("div",{className:"w-full",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Remark"}),(0,O.jsx)(a.xI,{name:"items.".concat(l,".remark"),control:P,render:e=>{let{field:l}=e;return(0,O.jsx)("input",(0,s.A)((0,s.A)({},l),{},{type:"text",className:"".concat(d.Ol," flex-grow"),placeholder:"Remark"}))}})]}),(0,O.jsx)("button",{type:"button",onClick:()=>ae(l),className:"ml-2 text-red-500 h-10 px-2 flex items-center justify-center bg-red-50 rounded",children:(0,O.jsx)(j.A,{})})]})]},e.id)}),(0,O.jsxs)("button",{type:"button",onClick:()=>se({type:"",expenseId:"",name:"",amount:0,GSTRate:0,GSTAmount:0,amountAfterGST:0,remark:""}),className:"mt-2 text-blue-500 flex items-center",children:[(0,O.jsx)(N.A,{className:"mr-1"})," Add Item"]})]})]}),(0,O.jsxs)("div",{className:"p-2",children:[(0,O.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Financial Summary"}),(0,O.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,O.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,O.jsx)("p",{className:"text-gray-600",children:"Subtotal:"}),(0,O.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["\u20b9",oe().toFixed(2)]})]}),(0,O.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,O.jsx)("p",{className:"text-gray-600",children:"Total GST:"}),(0,O.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["\u20b9",ce().toFixed(2)]})]}),(0,O.jsxs)("div",{className:"bg-purple-50 p-3 rounded",children:[(0,O.jsx)("p",{className:"text-gray-600",children:"Total with GST:"}),(0,O.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:["\u20b9",me().toFixed(2)]})]})]})]}),(0,O.jsxs)("div",{className:" p-2 ",children:[(0,O.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-700 border-b pb-2",children:"Additional Information"}),(0,O.jsxs)("div",{className:"mb-4",children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Description"}),(0,O.jsx)("textarea",(0,s.A)((0,s.A)({},i("description")),{},{rows:4,className:"".concat(d.Ol),placeholder:"Project description"}))]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("label",{className:"".concat(d.Q0),children:"Add Documents"}),(0,O.jsxs)("div",{className:"space-y-4",children:[(0,O.jsx)("input",{type:"file",onChange:e=>{const l={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};k((0,b.Sg)(l)).then(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.payload)&&void 0!==l&&l.data&&le(l=>[...l,e.payload.data])})},className:"hidden",id:"file-upload"}),(0,O.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex justify-start items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,O.jsx)(S.chT,{className:"mr-2"}),"Add Documents"]}),(0,O.jsx)("div",{className:"space-y-2",children:ee.map((e,l)=>(0,O.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,O.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,O.jsx)(S.chT,{className:"text-gray-500"}),(0,O.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,O.jsx)("button",{type:"button",onClick:()=>(e=>{le(l=>l.filter((l,i)=>i!==e))})(l),className:"text-red-500 hover:text-red-700",children:(0,O.jsx)(S.QCr,{})})]},l))})]})]})]}),(0,O.jsx)("div",{className:"flex justify-end",children:(0,O.jsx)("button",{type:"submit",disabled:l,className:"".concat(l?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:l?(0,O.jsx)(u.A,{}):"Create Project"})})]})})})}}}]);
//# sourceMappingURL=4375.12356765.chunk.js.map