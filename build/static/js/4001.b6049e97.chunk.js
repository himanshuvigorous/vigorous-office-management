"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4001],{94001:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var l=t(65043),n=t(39160),s=t(73216),o=t(35475),d=t(83003),i=t(23156),c=t(78227),r=t(15187),p=t(24858),u=t(31744),h=t(78729),m=t(7448),x=t(53913),v=(t(31174),t(86178)),b=t.n(v),y=(t(30064),t(60184)),j=t(70579);const g=function(e){var a;let{isModalOpen:t,onClose:n,getvendoremployeeAdvancerequest:s,vendoremployeeAdvanceListData:o}=e;const[i,c]=(0,l.useState)([]),[p,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)([]);return(0,d.wA)(),(0,l.useEffect)(()=>{var e;c(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.alltransections)},[o]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.A,{className:"antmodalclassName",width:1e3,footer:!1,title:"".concat(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.fullName," - Transactions"),open:!0,onOk:()=>{n()},onCancel:()=>{n()},children:(0,j.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,j.jsx)("thead",{className:"",children:(0,j.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,j.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap",children:"payment Type"}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap",children:"payment Mode"}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap",children:"payment Details"}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Amount"}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Bill Date"}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Narration"}),(0,j.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),(0,j.jsx)("tbody",{children:i&&(null===i||void 0===i?void 0:i.length)>0?null===i||void 0===i?void 0:i.map((e,a)=>{var t,l,n,s,o;return(0,j.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:a+1}),(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:"deduction"===(null===e||void 0===e?void 0:e.paymentType)?(0,j.jsx)("span",{className:"bg-red-200 border-red-500".concat(" border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null===e||void 0===e?void 0:e.paymentType}):(0,j.jsx)("span",{className:"bg-[#E0FFBE] border-green-500".concat(" border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null===e||void 0===e?void 0:e.paymentType})}),(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.type}),(0,j.jsx)("td",{className:"w-[200px]  border-none p-2",children:("bank"==(null===e||void 0===e?void 0:e.type)?"".concat((null===e||void 0===e||null===(t=e.bankData)||void 0===t?void 0:t.bankName)||"-"," / ").concat((null===e||void 0===e||null===(l=e.bankData)||void 0===l?void 0:l.bankholderName)||"-"," / ").concat((null===e||void 0===e||null===(n=e.bankData)||void 0===n?void 0:n.accountNumber)||"-"):"cash"==(null===e||void 0===e?void 0:e.paymentmode)?null===e||void 0===e?void 0:e.employeName:"")||"-"}),(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,r.w2)(null===e||void 0===e?void 0:e.amount)}),(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:b()(null===e||void 0===e?void 0:e.date).format("DD/MM/YYYY")}),(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:(null===e||void 0===e?void 0:e.naration)||"-"}),(0,j.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,j.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:(0,j.jsx)("button",{onClick:()=>{u(!0),m(null===e||void 0===e?void 0:e.attachment)},disabled:!((null===e||void 0===e||null===(s=e.attachment)||void 0===s?void 0:s.length)>0),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,j.jsx)(y.kQE,{className:(null===e||void 0===e||null===(o=e.attachment)||void 0===o?void 0:o.length)>0?" text-rose-700":"text-gray-400",size:16})})})})]})}):(0,j.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,j.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,j.jsx)(x.A,{className:"antmodalclassName",visible:p,onCancel:()=>{u(!1),m([])},footer:null,width:"800px",destroyOnClose:!0,children:(0,j.jsx)("div",{className:"flex gap-2 flex-wrap mt-4",children:null===h||void 0===h?void 0:h.map((e,a)=>{const t=e.split(".").pop().toLowerCase(),l=["jpg","jpeg","png","gif","bmp","webp"].includes(t),n="pdf"===t;return(0,j.jsx)("div",{style:{flex:"1 1 calc(33.333% - 10px)",marginBottom:"20px"},children:l?(0,j.jsx)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),target:"_blank",rel:"noopener noreferrer",children:(0,j.jsx)("img",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),alt:"attachment-".concat(a),style:{width:"100%",height:"auto",borderRadius:"8px"}})}):n?(0,j.jsx)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),target:"_blank",rel:"noopener noreferrer",children:(0,j.jsx)("div",{style:{width:"100%",height:"400px",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"},children:(0,j.jsx)("iframe",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),title:"attachment-".concat(a),style:{width:"100%",height:"100%"}})})}):(0,j.jsx)("p",{children:"Unsupported file type"})},a)})})})]})};var f=t(65512),w=t(96651),N=t(4938),D=t(55971),A=t(89427);const k=function(){const{canCreate:e,canRead:a}=(0,N.A)(),{register:t,control:x,formState:{errors:v},setValue:b}=(0,p.mN)(),y=(0,s.Zp)(),k=(0,d.wA)(),{vendoremployeeAdvanceListData:S,totalvendoremployeeAdvanceListCount:C,loading:T}=(0,d.d4)(e=>e.vendoremployeeAdvance),[L,O]=(0,l.useState)({isOpen:!1,data:null}),I=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),{companyList:_}=(0,d.d4)(e=>e.company),{branchList:E,branchListloading:V}=(0,d.d4)(e=>e.branch),B=(0,p.FH)({control:x,name:"typeSelection",defaultValue:"Vendor"}),[F,R]=(0,o.ok)(),H=parseInt(F.get("page"))||1,P=F.get("branchId")||"",[z,M]=(0,l.useState)(H),[Y,q]=(0,l.useState)(10),[U,G]=(0,l.useState)(""),[Z,J]=(0,l.useState)(P);(0,l.useEffect)(()=>{const e=new URLSearchParams;z>1&&e.set("page",z),Z&&e.set("branchId",Z),R(e)},[z,Y,Z,U]),(0,l.useEffect)(()=>{Q()},[z,Y,Z,B,U]);const Q=()=>{const e={currentPage:z,pageSize:Y,reqData:{directorId:"",companyId:"company"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.companyId,branchId:"company"===(null===I||void 0===I?void 0:I.userType)||"admin"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType)?Z:"companyBranch"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.branchId,employeId:"",clientGroupId:"",startDate:"",endDate:"",type:"",text:U,sort:!0,status:"",isPagination:!0,advanceType:B}};k((0,m.ZA)(e))};return(0,l.useEffect)(()=>{"company"!==(null===I||void 0===I?void 0:I.userType)&&"companyDirector"!==(null===I||void 0===I?void 0:I.userType)||k((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.companyId}))},[]),(0,l.useEffect)(()=>{"admin"===(null===I||void 0===I?void 0:I.userType)&&k((0,h.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,j.jsx)(n.A,{onChange:e=>{G(e)},children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"",children:(0,j.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,j.jsx)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:("admin"===(null===I||void 0===I?void 0:I.userType)||"company"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType))&&(0,j.jsx)("div",{className:"",children:(0,j.jsxs)(f.A,{value:Z,onChange:e=>{J(e),M(1)},defaultValue:"",disabled:T,className:"".concat(r.Lp," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(f.A.Option,{value:"",children:"Select Branch"}),V?(0,j.jsx)(f.A.Option,{disabled:!0,children:(0,j.jsx)(A.A,{})}):null===E||void 0===E?void 0:E.map(e=>(0,j.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})})}),(0,j.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,j.jsx)("button",{onClick:()=>{M(1),J(""),G("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,j.jsx)("span",{className:"text-[12px]",children:"Reset"})}),e&&(0,j.jsx)(w.A,{placement:"topLeft",title:"Vendor Employee Advance",children:(0,j.jsxs)("button",{onClick:()=>{y("/admin/vendoremployeeAdvance/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,j.jsx)(i.OiG,{}),(0,j.jsx)("span",{className:"text-[12px]",children:"Add Vendor  Advance"})]})})]})]})}),(0,j.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:a&&(0,j.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,j.jsx)("thead",{className:"",children:(0,j.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,j.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,j.jsx)("th",{className:"tableHead",children:"Vendor Name"}),(0,j.jsx)("th",{className:"tableHead",children:"Total Deposit Amount"}),(0,j.jsx)("th",{className:"tableHead",children:"Available Balance"}),a&&(0,j.jsx)("th",{className:"tableHead",children:"Transactions"})]})}),T?(0,j.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,j.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,j.jsx)(D.A,{})})}):(0,j.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.length)>0?S.map((e,t)=>{var l,n;return(0,j.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,j.jsx)("td",{className:"tableData",children:t+1+(z-1)*Y}),(0,j.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.fullName}),(0,j.jsx)("td",{className:"tableData",children:(0,r.w2)(null!==(l=null===e||void 0===e?void 0:e.totalDepositAmount)&&void 0!==l?l:"-")}),(0,j.jsx)("td",{className:"tableData",children:(0,r.w2)(null!==(n=null===e||void 0===e?void 0:e.availableBalance)&&void 0!==n?n:"-")}),(0,j.jsx)("td",{className:"tableData",children:(0,j.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:a&&(0,j.jsx)("button",{onClick:()=>{O({isOpen:!0,data:e})},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,j.jsx)("span",{className:" hover:text-cyan-500 text-cyan-700",children:"View List"})})})})]})}):(0,j.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,j.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===L||void 0===L?void 0:L.isOpen)&&(0,j.jsx)(g,{isModalOpen:L,getvendoremployeeAdvancerequest:Q,vendoremployeeAdvanceListData:S,onClose:()=>O({isOpen:!1,_id:null,type:null})}),(null===S||void 0===S?void 0:S.length)>0&&(0,j.jsx)(c.A,{totalCount:C,pageSize:Y,currentPage:z,onChange:e=>M(e)})]})})}}}]);
//# sourceMappingURL=4001.b6049e97.chunk.js.map