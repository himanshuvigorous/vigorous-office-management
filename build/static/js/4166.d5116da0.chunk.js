"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4166],{24166:(e,a,t)=>{t.r(a),t.d(a,{default:()=>B});var s=t(65043),l=t(39160),d=t(73216),i=t(35475),n=t(83003),o=(t(30064),t(31174)),c=t(78227),r=t(15187),u=t(31744),v=t(78729),x=t(93898),p=t(86178),m=t.n(p),h=t(6720),b=t(30326),j=t(53913),N=t(65512),y=t(96651),g=t(4938),f=t(55971),D=t(60446),A=t.n(D),w=t(31462),k=t(83002),C=t(78973),T=t(89427),S=t(32620),z=t(60397),L=t(60184),P=t(45394),Y=t(3825),V=t(29882),O=t(70579);const B=function(){var e,a,t,p,D,B,_,I,M,H,R,E,J,U,q,F;const G=(0,d.Zp)(),W=(0,n.wA)(),{paymentListData:X,totalpaymentListCount:Z,loading:K}=(0,n.d4)(e=>e.payment),Q=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),{branchList:$,branchListloading:ee}=(0,n.d4)(e=>e.branch),[ae,te]=(0,i.ok)(),se=parseInt(ae.get("page"))||1,le=ae.get("branchId")||"",de=ae.get("status")||"",ie=ae.get("startDate")||null,ne=ae.get("endDate")||null,[oe,ce]=(0,s.useState)(se),[re,ue]=(0,s.useState)(10),[ve,xe]=(0,s.useState)(de),[pe,me]=(0,s.useState)(""),[he,be]=(0,s.useState)(le),[je,Ne]=(0,s.useState)(ie?A()(ie):null),[ye,ge]=(0,s.useState)(ne?A()(ne):null);(0,s.useEffect)(()=>{const e=new URLSearchParams;oe>1&&e.set("page",oe),je&&e.set("startDate",je),ye&&e.set("endDate",ye),he&&e.set("branchId",he),ve&&e.set("status",ve),te(e)},[oe,re,he,ve,pe,je,ye]),(0,s.useEffect)(()=>{ke()},[oe,re,he,ve,pe,je,ye]);const[fe,De]=(0,s.useState)(!1),[Ae,we]=(0,s.useState)({}),ke=()=>{const e={currentPage:oe,pageSize:re,reqData:{directorId:"",companyId:"company"===(null===Q||void 0===Q?void 0:Q.userType)?null===Q||void 0===Q?void 0:Q._id:null===Q||void 0===Q?void 0:Q.companyId,branchId:"company"===(null===Q||void 0===Q?void 0:Q.userType)||"admin"===(null===Q||void 0===Q?void 0:Q.userType)||"companyDirector"===(null===Q||void 0===Q?void 0:Q.userType)?he:"companyBranch"===(null===Q||void 0===Q?void 0:Q.userType)?null===Q||void 0===Q?void 0:Q._id:null===Q||void 0===Q?void 0:Q.branchId,text:pe,sort:!0,type:["payroll","advance","purchase"],startDate:(0,r.Tk)(je),endDate:(0,r.Tk)(ye),status:ve,isPagination:!0}};W((0,x.l5)(e))},{canCreate:Ce,canRead:Te,canUpdate:Se,canDelete:ze}=(0,g.A)();return(0,s.useEffect)(()=>{"company"!==(null===Q||void 0===Q?void 0:Q.userType)&&"companyDirector"!==(null===Q||void 0===Q?void 0:Q.userType)||W((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===Q||void 0===Q?void 0:Q.userType)?null===Q||void 0===Q?void 0:Q._id:null===Q||void 0===Q?void 0:Q.companyId}))},[]),(0,s.useEffect)(()=>{"admin"===(null===Q||void 0===Q?void 0:Q.userType)&&W((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,O.jsx)(l.A,{onChange:e=>{me(e)},children:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:"",children:(0,O.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,O.jsxs)("div",{className:"flex items-center flex-wrap gap-1",children:[("admin"===(null===Q||void 0===Q?void 0:Q.userType)||"company"===(null===Q||void 0===Q?void 0:Q.userType)||"companyDirector"===(null===Q||void 0===Q?void 0:Q.userType))&&(0,O.jsx)("div",{className:"",children:(0,O.jsxs)(N.A,{value:he,onChange:e=>{be(e),ce(1)},defaultValue:"",disabled:K,className:"".concat(r.Lp," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,O.jsx)(N.A.Option,{value:"",children:"Select Branch"}),ee?(0,O.jsx)(N.A.Option,{disabled:!0,children:(0,O.jsx)(T.A,{})}):null===$||void 0===$?void 0:$.map(e=>(0,O.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,O.jsxs)(N.A,{value:ve,onChange:e=>{xe(e),ce(1)},disabled:K,className:"".concat(r.Lp," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,O.jsx)(N.A.Option,{value:"",children:"Select Status"}),(0,O.jsx)(N.A.Option,{value:"Draft",children:"Pending"}),(0,O.jsx)(N.A.Option,{value:"Paid",children:"Paid"})]}),(0,O.jsx)("div",{children:(0,O.jsx)(V.A,{value:je,onChange:e=>{Ne(e),ce(1)},disabled:K,report:!0,size:"middle"})}),(0,O.jsx)("div",{children:(0,O.jsx)(V.A,{value:ye,onChange:e=>{ge(e),ce(1)},disabled:K,report:!0,size:"middle"})})]}),(0,O.jsx)("div",{className:"flex justify-end items-center gap-2",children:(0,O.jsx)("button",{onClick:()=>{ce(1),be(""),xe(""),me("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,O.jsx)("span",{className:"text-[12px]",children:"Reset"})})})]})}),(0,O.jsxs)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:[Te&&(0,O.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,O.jsx)("thead",{className:"",children:(0,O.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,O.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,O.jsx)("th",{className:"tableHead",children:"Bill Date"}),(0,O.jsx)("th",{className:"tableHead",children:"Vendor Name"}),(0,O.jsx)("th",{className:"tableHead",children:"Asset / Expense Type"}),(0,O.jsx)("th",{className:"tableHead",children:"Description"}),(0,O.jsx)("th",{className:"tableHead",children:"Amount"}),(0,O.jsx)("th",{className:"tableHead",children:"Status"}),(0,O.jsx)("th",{className:"tableHead",children:"Payment Date"}),Ce&&(0,O.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),K?(0,O.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,O.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,O.jsx)(f.A,{})})}):(0,O.jsx)("tbody",{children:X&&(null===X||void 0===X?void 0:X.length)>0?null===X||void 0===X?void 0:X.map((e,a)=>{var t,s,l,d,i,n,c,u;return(0,O.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,O.jsx)("td",{className:"tableData",children:a+1+(oe-1)*re}),(0,O.jsx)("td",{className:"tableData w-[150px]",children:(0,r.Tk)(null===e||void 0===e?void 0:e.createdAt)}),(0,O.jsxs)("td",{className:"tableData w-[100px]",children:["purchase"===(null===e||void 0===e?void 0:e.type)&&"".concat("Vendor"===(null===e||void 0===e||null===(t=e.purchaseAssetData)||void 0===t?void 0:t.purchaseType)?"".concat((null===e||void 0===e||null===(s=e.purchaseAssetData)||void 0===s?void 0:s.userName)||"-"," "):"".concat((null===e||void 0===e||null===(l=e.purchaseAssetData)||void 0===l?void 0:l.userName)||"Other"," ")),"cashBook"===(null===e||void 0===e?void 0:e.type)&&" ".concat((null===e||void 0===e||null===(d=e.cashbookData)||void 0===d?void 0:d.userName)||"-","  ").concat(null!==e&&void 0!==e&&null!==(i=e.cashbookData)&&void 0!==i&&i.date?"/".concat(m()(null===e||void 0===e||null===(n=e.cashbookData)||void 0===n?void 0:n.date).format("MM/YYYY")):""," "),"payroll"===(null===e||void 0===e?void 0:e.type)&&" ".concat((null===e||void 0===e?void 0:e.type)||"-"," ")]}),(0,O.jsx)("td",{className:"tableData w-[100px] capitalize ",children:"purchase"===(null===e||void 0===e?void 0:e.type)&&"Vendor"===(null===e||void 0===e||null===(c=e.purchaseAssetData)||void 0===c?void 0:c.purchaseType)?null===e||void 0===e||null===(u=e.purchaseAssetData)||void 0===u?void 0:u.assetName:(null===e||void 0===e||e.type,null===e||void 0===e?void 0:e.type)}),(0,O.jsx)("td",{className:"tableData lg:min-w-[600px] lg:w-[600px]  w-[400px] min-w-[400px] ",children:(null===e||void 0===e?void 0:e.remarks)||"-"}),(0,O.jsx)("td",{className:"tableData",children:(0,r.w2)((null===e||void 0===e?void 0:e.amount)||(null===e||void 0===e?void 0:e.cashbookTotalAmount))}),(0,O.jsx)("td",{className:"tableData",children:(0,O.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"bg-cyan-100 border border-cyan-600 text-cyan-800":"Reject"===(null===e||void 0===e?void 0:e.status)||"Rejected"===(null===e||void 0===e?void 0:e.status)?"bg-rose-100 border border-rose-600 text-rose-800":"Paid"===(null===e||void 0===e?void 0:e.status)?"bg-green-100 border border-green-600 text-green-800":"bg-yellow-100 border border-yellow-600 text-yellow-800"),children:"Draft"===(null===e||void 0===e?void 0:e.status)?"Pending":null===e||void 0===e?void 0:e.status})}),(0,O.jsx)("td",{className:"tableData w-[100px]",children:null!==e&&void 0!==e&&e.date?m()(null===e||void 0===e?void 0:e.date).format("DD/MM/YYYY"):"-"}),(0,O.jsx)("td",{className:"tableData",children:(0,O.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[Te&&(0,O.jsx)(y.A,{placement:"topLeft",title:"View Details",children:(0,O.jsx)("button",{onClick:()=>{(e=>{we(e),De(!0)})(e)},className:"px-2 py-2 text-xs rounded-md bg-transparent text-header border border-muted",type:"button",children:(0,O.jsx)(L.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]"})})}),Ce&&"Draft"===(null===e||void 0===e?void 0:e.status)?(0,O.jsx)(y.A,{placement:"topLeft",title:"Make Payment",children:(0,O.jsx)("button",{onClick:()=>{"Draft"===(null===e||void 0===e?void 0:e.status)&&G("/admin/payment/edit/".concat((0,o.w)(null===e||void 0===e?void 0:e._id)))},className:"p-1 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,O.jsx)(h.DwJ,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:14})})}):(0,O.jsx)(y.A,{placement:"topLeft",title:" (No Actions Allowed)",children:(0,O.jsx)("button",{className:"p-1 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,O.jsx)(h.DwJ,{className:"hover:text-gray-600 text-gray-500",size:14})})}),Ce&&(0,O.jsx)(b.A,{menu:{items:[{key:"edit",label:(0,O.jsxs)("span",{onClick:()=>{"Paid"===(null===e||void 0===e?void 0:e.status)&&G("/admin/payment/view/".concat((0,o.w)(null===e||void 0===e?void 0:e._id)))},className:"flex items-center ".concat("Draft"!==(null===e||void 0===e?void 0:e.status)?"text-[#3c8dbc] hover:text-[#337ab7]":"text-gray-500 cursor-not-allowed"),children:[(0,O.jsx)(w._BJ,{className:"mr-2",size:14}),"Draft"!==(null===e||void 0===e?void 0:e.status)?"View":"No Actions (Not Paid)"]}),disabled:"Paid"!==(null===e||void 0===e?void 0:e.status)},{key:"view-comment",label:(0,O.jsxs)("span",{onClick:()=>(0,r.v2)((null===e||void 0===e?void 0:e.remarks)||"Data not available"),className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,O.jsx)(C.qSe,{className:"mr-2",size:16}),"View Comment"]})},{key:"created-at",label:(0,O.jsxs)("span",{onClick:()=>(0,r.v2)(A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"Data not available"),className:"flex items-center text-teal-800 hover:text-teal-700",children:[(0,O.jsx)(S.Wv9,{className:"mr-2",size:16}),"Created At"]})},{key:"created-by",label:(0,O.jsxs)("span",{onClick:()=>(0,r.v2)((null===e||void 0===e?void 0:e.createdBy)||"Data not available"),className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,O.jsx)(z.cCX,{className:"mr-2",size:16}),"Created By"]})}]},trigger:["click"],children:(0,O.jsx)(y.A,{placement:"topLeft",title:"More Actions",children:(0,O.jsx)("button",{className:"p-1 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,O.jsx)(k.xWf,{className:"text-[#3c8dbc] hover:text-[#337ab7]",size:16})})})})]})})]})}):(0,O.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,O.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,O.jsx)(j.A,{className:"antmodalclassName",visible:fe,onCancel:()=>{we({}),De(!1)},footer:null,title:!1,width:1200,height:600,children:(0,O.jsx)("div",{className:"w-full overflow-auto",children:(0,O.jsxs)("table",{className:"w-full  rounded-lg shadow-md overflow-hidden bg-white",children:[(0,O.jsx)("thead",{children:(0,O.jsx)("tr",{children:(0,O.jsx)("th",{className:"text-header ",children:(0,O.jsx)("div",{className:"mt-2 ml-2",children:"Purchase  Details"})})})}),(0,O.jsxs)("tbody",{className:"text-sm text-gray-700",children:[(0,O.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,O.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(P.sLb,{className:"size-4 text-header text-lg"}),(0,O.jsx)("span",{className:"text-[16px] font-medium",children:"Purchase Type"})]}),(0,O.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"purchase"===Ae.type?null===Ae||void 0===Ae||null===(e=Ae.purchaseAssetData)||void 0===e?void 0:e.purchaseType:(null===Ae||void 0===Ae?void 0:Ae.type)||"N/A"})]}),(0,O.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(P.sLb,{className:"size-4 text-header text-lg"}),(0,O.jsx)("span",{className:"text-[16px] font-medium",children:"payroll"==(null===Ae||void 0===Ae?void 0:Ae.type)?"Updated By":"Name"})]}),(0,O.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"Vendor"===(null===(a=Ae.purchaseAssetData)||void 0===a?void 0:a.purchaseType)?null===(t=Ae.purchaseAssetData)||void 0===t?void 0:t.userName:"Other"===(null===Ae||void 0===Ae||null===(p=Ae.purchaseAssetData)||void 0===p?void 0:p.purchaseType)?null===(D=Ae.purchaseAssetData)||void 0===D?void 0:D.userName:"cashBook"===(null===Ae||void 0===Ae?void 0:Ae.type)?null===Ae||void 0===Ae||null===(B=Ae.cashbookData)||void 0===B?void 0:B.userName:"payroll"===(null===Ae||void 0===Ae?void 0:Ae.type)?(null===Ae||void 0===Ae?void 0:Ae.updatedBy)||(null===Ae||void 0===Ae?void 0:Ae.createdBy):"N/A"})]})]}),(0,O.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,O.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(Y.cC2,{className:"size-4 text-header text-lg"}),(0,O.jsx)("span",{className:"text-[16px] font-medium",children:"Vendor"===(null===(_=Ae.purchaseAssetData)||void 0===_?void 0:_.purchaseType)||"Other"===(null===Ae||void 0===Ae||null===(I=Ae.purchaseAssetData)||void 0===I?void 0:I.purchaseType)?"purchaseDate":"date"})]}),(0,O.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"Vendor"===(null===(M=Ae.purchaseAssetData)||void 0===M?void 0:M.purchaseType)||"Other"===(null===Ae||void 0===Ae||null===(H=Ae.purchaseAssetData)||void 0===H?void 0:H.purchaseType)?(0,r.Tk)(null===(R=Ae.purchaseAssetData)||void 0===R?void 0:R.purchaseDate)||"N/A":"cashBook"===(null===Ae||void 0===Ae?void 0:Ae.type)?(0,r.Tk)(null===Ae||void 0===Ae||null===(E=Ae.cashbookData)||void 0===E?void 0:E.date)||"N/A":"payroll"===(null===Ae||void 0===Ae?void 0:Ae.type)&&null!==Ae&&void 0!==Ae&&Ae.date?(0,r.Tk)(null===Ae||void 0===Ae?void 0:Ae.date):"N/A"})]}),(0,O.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(P.sLb,{className:"size-4 text-header text-lg"}),(0,O.jsx)("span",{className:"text-[16px] font-medium",children:"Amount"})]}),(0,O.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(0,r.w2)(null===Ae||void 0===Ae?void 0:Ae.amount)})]})]}),(0,O.jsxs)("tr",{className:" hover:bg-indigo-50",children:["Vendor"===(null===(J=Ae.purchaseAssetData)||void 0===J?void 0:J.purchaseType)&&(0,O.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(P.sLb,{className:"size-4 text-header text-lg"}),(0,O.jsx)("span",{className:"text-[16px] font-medium",children:"Asset Name"})]}),(0,O.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"Vendor"===(null===(U=Ae.purchaseAssetData)||void 0===U?void 0:U.purchaseType)?null===(q=Ae.purchaseAssetData)||void 0===q?void 0:q.assetName:"-"})]}),"purchase"===(null===Ae||void 0===Ae?void 0:Ae.type)&&(0,O.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O.jsx)(L.CLz,{className:"size-4 text-header text-lg"}),(0,O.jsx)("span",{className:"text-[16px] font-medium",children:"Gst Amount"})]}),(0,O.jsxs)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:[(null===(F=Ae.purchaseAssetData)||void 0===F?void 0:F.totalGSTAmount)||"N/A"," Rs"]})]})]})]})]})})})]}),(null===X||void 0===X?void 0:X.length)>0&&(0,O.jsx)(c.A,{totalCount:Z,pageSize:re,currentPage:oe,onChange:e=>ce(e)})]})})}},29882:(e,a,t)=>{t.d(a,{A:()=>i});var s=t(487),l=t(15187),d=t(70579);const i=function(e){let{value:a,onChange:t,picker:i="date",format:n="DD/MM/YYYY",size:o="large",disabledDate:c,disabled:r,defaultValue:u,report:v=!1,showTime:x=!1}=e;return(0,d.jsx)(s.A,{defaultValue:u,showTime:x,size:o,disabled:r,picker:i,format:n,disabledDate:c,value:a,onChange:t,getPopupContainer:()=>document.body,className:" ".concat(v?"inputCalanderClassNameReport":l.ot," "),popupClassName:"!z-[1580]"})}}}]);
//# sourceMappingURL=4166.d5116da0.chunk.js.map