"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3313],{55694:(e,d,l)=>{l.r(d),l.d(d,{default:()=>D});var i=l(89379),a=l(24858),s=l(39160),n=l(83003),o=l(73216),r=l(65043),t=l(42837),c=l(15187),m=l(31744),u=l(78729),p=l(65512),v=l(94084),x=l(86178),h=l.n(x),y=l(89388),j=l(60446),g=l.n(j),N=l(17995),f=l(89427),b=l(60184),A=l(88967),I=l(70579);const D=()=>{const{register:e,handleSubmit:d,control:l,setValue:x,formState:{errors:j}}=(0,a.mN)(),D=(0,n.wA)(),T=(0,o.Zp)(),[C,S]=(0,r.useState)({attachment:[]}),{companyList:_,companyListLoading:w}=(0,n.d4)(e=>e.company),{branchList:O,branchListloading:P}=(0,n.d4)(e=>e.branch),{employeList:L,loading:q}=(0,n.d4)(e=>e.employe),[B,E]=(0,r.useState)(!1),H=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),{loading:Q}=(0,n.d4)(e=>e.resignation),V=(0,a.FH)({control:l,name:"PDCompanyId",defaultValue:""}),k=(0,a.FH)({control:l,name:"PDBranchId",defaultValue:""});return(0,r.useEffect)(()=>{(V||"company"===(null===H||void 0===H?void 0:H.userType)||"companyDirector"===(null===H||void 0===H?void 0:H.userType))&&D((0,m.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===H||void 0===H?void 0:H.userType)?V:"company"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.companyId}))},[V]),(0,r.useEffect)(()=>{"admin"===(null===H||void 0===H?void 0:H.userType)&&D((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,I.jsx)(s.A,{children:(0,I.jsx)("div",{className:"gap-4",children:(0,I.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:d(e=>{const d={companyId:"admin"===(null===H||void 0===H?void 0:H.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.companyId,directorId:"",branchId:"admin"===(null===H||void 0===H?void 0:H.userType)||"companyDirector"===(null===H||void 0===H?void 0:H.userType)||"company"===(null===H||void 0===H?void 0:H.userType)?k:"companyBranch"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.branchId,employeId:null===e||void 0===e?void 0:e.employee,title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,applyDate:g()(null===e||void 0===e?void 0:e.applyDate).format("YYYY-MM-DD"),type:"resignation",attachment:null===C||void 0===C?void 0:C.attachment};D((0,y.H8)(d)).then(e=>{e.error||T(-1)})}),children:[(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 md:my-2",children:["admin"===(null===H||void 0===H?void 0:H.userType)&&(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Company ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(a.xI,{control:l,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:d}=e;return(0,I.jsxs)(p.A,(0,i.A)((0,i.A)({},d),{},{defaultValue:"",className:"".concat(c.Hy," "),showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(p.A.Option,{value:"",children:"Select Company"}),w?(0,I.jsx)(p.A.Option,{disabled:!0,children:(0,I.jsx)(f.A,{})}):null===_||void 0===_?void 0:_.map(e=>(0,I.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.PDCompanyId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:j.PDCompanyId.message})]}),("admin"===(null===H||void 0===H?void 0:H.userType)||"company"===(null===H||void 0===H?void 0:H.userType)||"companyDirector"===(null===H||void 0===H?void 0:H.userType))&&(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(a.xI,{control:l,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var d;let{field:l}=e;return(0,I.jsxs)(p.A,(0,i.A)((0,i.A)({},l),{},{onChange:e=>{x("employee",""),l.onChange(e)},defaultValue:"",className:"".concat(c.Hy," "),showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(p.A.Option,{value:"",children:"Select Branch"}),P?(0,I.jsx)(p.A.Option,{disabled:!0,children:(0,I.jsx)(f.A,{})}):null===(d=(0,c._o)(O,"fullName"))||void 0===d?void 0:d.map(e=>(0,I.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.PDBranchId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:j.PDBranchId.message})]}),(0,I.jsxs)("div",{className:"w-full",children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Employee Name ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(a.xI,{name:"employee",control:l,rules:{required:"Employee is required"},render:e=>{var d;let{field:l}=e;return(0,I.jsxs)(p.A,(0,i.A)((0,i.A)({},l),{},{className:"".concat(c.Hy," ").concat(j.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee",showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H.PDCompanyId:"company"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.companyId,directorId:"",branchId:"admin"===(null===H||void 0===H?void 0:H.userType)||"companyDirector"===(null===H||void 0===H?void 0:H.userType)||"company"===(null===H||void 0===H?void 0:H.userType)?k:"companyBranch"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.branchId};D((0,t.qV)(e))},children:[(0,I.jsx)(p.A.Option,{value:"",children:"Select Employee"}),q?(0,I.jsx)(p.A.Option,{disabled:!0,children:(0,I.jsx)(f.A,{})}):null===(d=(0,c._o)(L,"fullName"))||void 0===d?void 0:d.map(e=>(0,I.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.employee&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:j.employee.message})]})]}),(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2",children:[(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Description ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)("input",(0,i.A)((0,i.A)({type:"text"},e("description",{required:"Description is required"})),{},{className:"".concat(c.Ol," ").concat(j.description?"border-[1px] ":"border-gray-300"),placeholder:"Enter Description"})),j.description&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:j.description.message})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{className:"".concat(c.Q0),children:["Apply Date ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(a.xI,{name:"applyDate",rules:{required:"Date is Required"},control:l,render:e=>{let{field:d}=e;return(0,I.jsx)(v.A,{field:d,errors:j,disabledDate:e=>e&&e.isBefore(h()().endOf("day"),"day")})}}),j.applyDate&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:"Apply Date is required"})]})]}),(0,I.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 md:my-2 md:mt-0 mt-2"}),(0,I.jsxs)("div",{className:"",children:[(0,I.jsx)("label",{className:"".concat(c.Q0),children:"Documents"}),B?(0,I.jsx)("div",{className:"space-y-2"}):(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsx)("input",{type:"file",onChange:e=>{const d={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};D((0,A.Sg)(d)).then(e=>{var d;null!==e&&void 0!==e&&null!==(d=e.payload)&&void 0!==d&&d.data&&S(d=>{var l;return(0,i.A)((0,i.A)({},d),{},{attachment:[...d.attachment,null===(l=e.payload)||void 0===l?void 0:l.data]})})})},className:"hidden",id:"file-upload"}),(0,I.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-600 bg-white cursor-pointer",children:[(0,I.jsx)(b.chT,{className:"mr-2"})," Add Documents"]}),(0,I.jsx)("div",{className:"space-y-2",children:C.attachment.map((e,d)=>(0,I.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,I.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,I.jsx)(b.chT,{className:"text-gray-500"}),(0,I.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,I.jsx)("button",{type:"button",onClick:()=>(e=>{S(d=>{const l=d.attachment.filter((d,l)=>l!==e);return(0,i.A)((0,i.A)({},d),{},{attachment:l})})})(d),className:"text-red-500 hover:text-red-700",children:(0,I.jsx)(b.QCr,{})})]},d))})]})]}),(0,I.jsx)("div",{className:"flex justify-end ",children:(0,I.jsx)("button",{type:"submit",disabled:Q,className:"".concat(Q?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:Q?(0,I.jsx)(N.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=3313.1059aae0.chunk.js.map