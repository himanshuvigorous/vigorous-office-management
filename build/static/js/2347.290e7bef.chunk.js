"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2347],{65337:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(91686),a=n(70579);const l=function(){return(0,a.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,a.jsx)(s.A,{size:"large"})})}},72347:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var s=n(89379),a=n(73216),l=n(39160),d=n(83003),r=n(65043),o=n(30064),i=n.n(o),c=n(31174),u=n(23156),x=n(47196),p=n(24858),h=n(84480),m=(n(65337),n(78227)),v=n(65512),j=n(96651),w=n(30575),b=n(36105),f=n(15187),N=n(4938),y=n(55971),g=n(60446),A=n.n(g),C=n(89427),S=n(70579);const D=function(){var e,t;const{register:n,setValue:o,control:g,formState:{errors:D}}=(0,p.mN)(),I=(0,a.Zp)(),L=(0,d.wA)(),{cityListData:O,totalCityCount:P,loading:_}=(0,d.d4)(e=>e.city),{stateListData:k,loading:F}=(0,d.d4)(e=>e.states),{countryListData:q,loading:z}=(0,d.d4)(e=>e.country),[B,E]=(0,r.useState)(""),[H,R]=(0,r.useState)(1),V=(0,p.FH)({control:g,name:"PDCountryId",defaultValue:""}),Y=(0,p.FH)({control:g,name:"PDStateId",defaultValue:""}),M=(0,p.FH)({control:g,name:"status",defaultValue:""}),G=[V,Y,M,B].join("-"),[J,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{J?1===H?U():R(1):T(e=>!0)},[G]),(0,r.useEffect)(()=>{U()},[H]);const U=()=>{const e={page:H,limit:10,reqPayload:{text:B,sort:!0,status:M,isPagination:!0,countryId:V,stateId:Y}};L((0,h.C2)(e))},W=()=>{var e;null!==q&&void 0!==q&&null!==(e=q.docs)&&void 0!==e&&e.length||L((0,b.dw)({isPagination:!1,text:"",sort:!0,status:!0}))},Z=()=>{var e;null!==k&&void 0!==k&&null!==(e=k.docs)&&void 0!==e&&e.length||L((0,w.mz)({isPagination:!1,text:"",sort:!0,status:!0,countryId:V}))},{canCreate:K,canRead:Q,canUpdate:X,canDelete:$}=(0,N.A)();return(0,S.jsxs)(l.A,{onChange:e=>{E(e)},children:[(0,S.jsxs)("div",{className:"w-full xl:flex justify-between items-center xl:space-y-0 space-y-2 py-1",children:[(0,S.jsxs)("div",{className:"grid sm:grid-cols-3 grid-cols-1 md:flex  md:gap-3 gap-1 ",children:[(0,S.jsx)("div",{className:"",children:(0,S.jsx)(p.xI,{name:"PDCountryId",control:g,rules:{required:"Country is required"},render:e=>{var t;let{field:n}=e;return(0,S.jsxs)(v.A,(0,s.A)((0,s.A)({},n),{},{className:" ".concat(f.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Country Name",onFocus:W,children:[(0,S.jsx)(v.A.Option,{value:"",children:"Select Country"}),z?(0,S.jsx)(v.A.Option,{disabled:!0,children:(0,S.jsx)(C.A,{})}):null===(t=(0,f._o)(null===q||void 0===q?void 0:q.docs))||void 0===t?void 0:t.map(e=>(0,S.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,S.jsx)("div",{className:"",children:(0,S.jsx)(p.xI,{name:"PDStateId",control:g,rules:{required:"State is required"},render:e=>{var t;let{field:n}=e;return(0,S.jsxs)(v.A,(0,s.A)((0,s.A)({},n),{},{className:" ".concat(f.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),placeholder:"State Name",onFocus:Z,children:[(0,S.jsx)(v.A.Option,{value:"",children:"Select State"}),F?(0,S.jsx)(v.A.Option,{disabled:!0,children:(0,S.jsx)(C.A,{})}):null===(t=(0,f._o)(null===k||void 0===k?void 0:k.docs))||void 0===t?void 0:t.map(e=>(0,S.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,S.jsx)("div",{className:"",children:(0,S.jsx)(p.xI,{name:"status",control:g,rules:{},render:e=>{let{field:t}=e;return(0,S.jsxs)(v.A,(0,s.A)((0,s.A)({},t),{},{className:" w-32 ".concat(f.Lp," ").concat(D.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(v.A.Option,{value:"",children:"Select Status"}),(0,S.jsx)(v.A.Option,{value:!0,children:" Active "}),(0,S.jsx)(v.A.Option,{value:!1,children:" InActive "})]}))}})}),(0,S.jsx)("button",{onClick:()=>{o("status",""),o("PDCountryId",""),o("PDStateId","")},className:"bg-header  py-1 w-24 mt-1 rounded-md lg:flex hidden justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),(0,S.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{o("status",""),o("PDCountryId",""),o("PDStateId","")},className:"bg-header  py-1.5 rounded-md lg:hidden flex px-10 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})}),Q&&K&&(0,S.jsx)(j.A,{placement:"topLeft",title:"",children:(0,S.jsxs)("button",{onClick:()=>{I("/admin/city/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,S.jsx)(u.OiG,{}),(0,S.jsx)("span",{className:"text-[12px]",children:"Add City"})]})})]})]}),(0,S.jsxs)("div",{className:"w-full",children:[(0,S.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:Q&&(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,S.jsx)("thead",{className:"",children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD]  text-[12px] bg-[#074173] text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:" Country"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"State"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"City"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"created At"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"created By"}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),($||X)&&(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),_?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,S.jsx)(y.A,{})})}):(0,S.jsx)("tbody",{children:O&&null!==O&&void 0!==O&&O.docs&&(null===O||void 0===O||null===(e=O.docs)||void 0===e?void 0:e.length)>0?null===O||void 0===O||null===(t=O.docs)||void 0===t?void 0:t.map((e,t)=>{var n,s,a,l,d,r;return(0,S.jsxs)("tr",{className:"".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white","  border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(H-1)}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.countryName)&&void 0!==n?n:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s="".concat(null===e||void 0===e?void 0:e.stateName," "))&&void 0!==s?s:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a="".concat(null===e||void 0===e?void 0:e.name," "))&&void 0!==a?a:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(l="".concat(A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")," "))&&void 0!==l?l:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d="".concat(null===e||void 0===e?void 0:e.createdBy," "))&&void 0!==d?d:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,S.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(r="Inactive")?r:"-"})}),(X||$)&&(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,S.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[X&&(0,S.jsx)(j.A,{placement:"topLeft",title:"Edit",children:(0,S.jsx)("button",{onClick:()=>{I("/admin/city/edit/".concat((0,c.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(u.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),$&&(0,S.jsx)(j.A,{placement:"topLeft",title:"Delete",children:(0,S.jsx)("button",{onClick:()=>(e=>{let t={_id:e};i().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&L((0,h.Hc)(t)).then(e=>{var t;H>1&&1==(null===O||void 0===O||null===(t=O.docs)||void 0===t?void 0:t.length)?R(Number(H-1)):U()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(x.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]},t)}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:8,className:"px-6 py-2.5 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),P>10&&(0,S.jsx)(m.A,{totalCount:P,pageSize:10,currentPage:H,onChange:e=>{R(e)}})]})]})}}}]);
//# sourceMappingURL=2347.290e7bef.chunk.js.map