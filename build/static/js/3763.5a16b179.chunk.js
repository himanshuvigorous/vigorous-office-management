"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2166,3763],{43763:(e,l,n)=>{n.r(l),n.d(l,{default:()=>E});var a=n(89379),t=n(65043),i=n(39160),d=n(73216),s=n(83003),o=n(30064),r=n.n(o),c=n(23156),u=n(60184),m=n(47196),h=n(78227),v=n(86178),p=n.n(v),x=n(15187),y=n(32256),f=n(72166),j=n(91601),b=n(78729),N=n(31744),g=n(24858),I=n(30326),D=n(53913),A=n(65512),T=n(96651),S=n(60446),w=n.n(S),k=n(6720),C=n(4938),O=n(55971),P=n(94084),L=n(83002),H=n(78973),_=n(45394),B=n(3825),Y=n(79942),M=n(89427),V=n(42837),q=n(70579);const E=function(){var e,l,n,o,v,S,E,F,z,Q,R,U,W,Z,K,J;const{register:G,handleSubmit:$,control:X,formState:{errors:ee},setValue:le}=(0,g.mN)(),ne=((0,d.Zp)(),(0,s.wA)()),{attendanceList:ae,totalattendancegCount:te,loading:ie}=(0,s.d4)(e=>e.attendance),de=JSON.parse(localStorage.getItem("user_info_".concat(x.AU))),{canCreate:se,canRead:oe,canUpdate:re,canDelete:ce}=(0,C.A)(),[ue,me]=(0,t.useState)(1),[he,ve]=(0,t.useState)(""),[pe,xe]=(0,t.useState)(he),[ye,fe]=(0,t.useState)(!1),[je,be]=(0,t.useState)(!1),[Ne,ge]=(0,t.useState)(""),{companyList:Ie}=(0,s.d4)(e=>e.company),{employeList:De,laoding:Ae}=(0,s.d4)(e=>e.employe),{branchList:Te,branchListloading:Se}=(0,s.d4)(e=>e.branch),we=(0,g.FH)({control:X,name:"PDCompanyId",defaultValue:""}),ke=(0,g.FH)({control:X,name:"PDBranchId",defaultValue:""}),Ce=(0,g.FH)({control:X,name:"employeeId",defaultValue:""}),Oe=(0,g.FH)({control:X,name:"status",defaultValue:["present"]}),Pe=(0,g.FH)({control:X,name:"startDate",defaultValue:w()()}),Le=(0,g.FH)({control:X,name:"endDate",defaultValue:w()()}),He=(0,g.FH)({control:X,name:"isVerified",defaultValue:""}),_e=()=>{ne((0,V.qV)({companyId:"company"===(null===de||void 0===de?void 0:de.userType)?null===de||void 0===de?void 0:de._id:null===de||void 0===de?void 0:de.companyId,branchId:["admin","company","companyDirector"].includes(null===de||void 0===de?void 0:de.userType)?ke:"companyBranch"===(null===de||void 0===de?void 0:de.userType)?null===de||void 0===de?void 0:de._id:null===de||void 0===de?void 0:de.branchId,departmentId:"",directorId:"",text:"",sort:!0,status:!0,isPagination:!1,isBranch:!0,isDirector:!1}))},[Be,Ye]=(0,t.useState)({}),[Me,Ve]=(0,t.useState)(!1),[qe,Ee]=(0,t.useState)(""),Fe=(e,l)=>{Ee(l),Ve(!0),Ye(e)};(0,t.useEffect)(()=>{const e=setTimeout(()=>{xe(he)},500);return()=>{clearTimeout(e)}},[he]),(0,t.useEffect)(()=>{we&&le("PDBranchId","")},[we]);const[ze,Qe]=(0,t.useState)(""),Re=[we,pe,ke,ze,Oe,Pe,Le,He,Ce].join("-"),[Ue,We]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Ue?1===ue?Ze():me(1):We(e=>!0)},[Re]),(0,t.useEffect)(()=>{Ze(pe)},[ue]);const Ze=e=>{let l={currentPage:ue,pageSize:10,reqPayload:{shift:"",workType:"",text:ze,isPresentDay:Oe,status:"true"==He||"false"!=He&&"",sort:!0,isPagination:!0,companyId:"admin"===(null===de||void 0===de?void 0:de.userType)?we:"company"===(null===de||void 0===de?void 0:de.userType)?null===de||void 0===de?void 0:de._id:null===de||void 0===de?void 0:de.companyId,branchId:"company"===(null===de||void 0===de?void 0:de.userType)||"admin"===(null===de||void 0===de?void 0:de.userType)||"companyDirector"===(null===de||void 0===de?void 0:de.userType)?ke:"companyBranch"===(null===de||void 0===de?void 0:de.userType)?null===de||void 0===de?void 0:de._id:null===de||void 0===de?void 0:de.branchId,startDate:Pe?w()(Pe).format("YYYY-MM-DD"):"",endDate:Le?w()(Le).format("YYYY-MM-DD"):"",employeId:Ce||""}};ne((0,y.dS)(l))};return(0,t.useEffect)(()=>{(we||"company"===(null===de||void 0===de?void 0:de.userType)||"companyDirector"===(null===de||void 0===de?void 0:de.userType))&&ne((0,N.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===de||void 0===de?void 0:de.userType)?we:"company"===(null===de||void 0===de?void 0:de.userType)?null===de||void 0===de?void 0:de._id:null===de||void 0===de?void 0:de.companyId}))},[we]),(0,t.useEffect)(()=>{"admin"===(null===de||void 0===de?void 0:de.userType)&&ne((0,b.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,q.jsxs)(i.A,{onChange:e=>{Qe(e)},children:[(0,q.jsxs)("div",{className:"bg-grey-100 w-full p-1 sm:space-y-[4px] space-y-1",children:[(0,q.jsx)("div",{className:"2xl:flex justify-between items-center sm:space-y-[2px] space-y-1",children:(0,q.jsxs)("div",{className:"grid grid-cols-1 sm:flex sm:flex-wrap gap-2 items-center py-1 text-[14px] rounded-md",children:["admin"===(null===de||void 0===de?void 0:de.userType)&&(0,q.jsxs)("div",{className:"",children:[(0,q.jsx)(g.xI,{name:"PDCompanyId",control:X,rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,q.jsxs)(A.A,(0,a.A)((0,a.A)({},l),{},{className:" ".concat(x.Lp," ").concat(ee.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",disabled:ie,showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,q.jsx)(A.A.Option,{value:"",children:"Select Company"}),null===Ie||void 0===Ie?void 0:Ie.map(e=>(0,q.jsxs)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),ee.PDCompanyId&&(0,q.jsx)("p",{className:"text-red-500 text-sm",children:ee.PDCompanyId.message})]}),("admin"===(null===de||void 0===de?void 0:de.userType)||"company"===(null===de||void 0===de?void 0:de.userType)||"companyDirector"===(null===de||void 0===de?void 0:de.userType))&&(0,q.jsxs)("div",{className:"",children:[(0,q.jsx)(g.xI,{name:"PDBranchId",control:X,rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,q.jsxs)(A.A,(0,a.A)((0,a.A)({},l),{},{className:" ".concat(x.Lp," ").concat(ee.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",disabled:ie,showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,q.jsx)(A.A.Option,{value:"",children:"Select Branch"}),Se?(0,q.jsx)(A.A.Option,{disabled:!0,children:(0,q.jsx)(M.A,{})}):null===Te||void 0===Te?void 0:Te.map(e=>(0,q.jsx)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),ee.PDBranchId&&(0,q.jsx)("p",{className:"text-red-500 text-sm",children:ee.PDBranchId.message})]}),(0,q.jsx)("div",{className:"",children:(0,q.jsx)(g.xI,{name:"employeeId",control:X,render:e=>{var l;let{field:n}=e;return(0,q.jsxs)(A.A,{allowClear:!0,className:"inputAntdSelectClassNameFilterReport",disabled:ie,placeholder:"Select Employee",onFocus:_e,showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),value:n.value||[],onChange:e=>n.onChange(e),children:[(0,q.jsx)(A.A.Option,{value:"",children:"Select Employee"}),Ae?(0,q.jsx)(A.A.Option,{disabled:!0,children:(0,q.jsx)(M.A,{})}):null===(l=(0,x._o)(De,"fullName"))||void 0===l?void 0:l.map(e=>(0,q.jsx)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}})}),(0,q.jsx)("div",{className:"",children:(0,q.jsx)(g.xI,{name:"isVerified",control:X,rules:{},render:e=>{let{field:l}=e;return(0,q.jsxs)(A.A,(0,a.A)((0,a.A)({},l),{},{className:" w-32 ".concat(x.Lp),placeholder:"Select isVerified",showSearch:!0,disabled:ie,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,q.jsx)(A.A.Option,{value:"",children:"Select isVerified"}),(0,q.jsx)(A.A.Option,{value:"true",children:" Yes "}),(0,q.jsx)(A.A.Option,{value:"false",children:"No"})]}))}})}),(0,q.jsx)("div",{className:"",children:(0,q.jsx)(g.xI,{name:"status",control:X,rules:{},render:e=>{let{field:l}=e;return(0,q.jsxs)(A.A,(0,a.A)((0,a.A)({mode:"multiple"},l),{},{className:"   inputAntdMultiSelectClassNameFilterReport ".concat(ee.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,disabled:ie,defaultValue:"present",children:[(0,q.jsx)(A.A.Option,{value:"present",children:" Present "}),(0,q.jsxs)(A.A.Option,{value:"firstHalf",children:[" ","First Half"," "]}),(0,q.jsxs)(A.A.Option,{value:"secondHalf",children:[" ","Second Half"," "]}),(0,q.jsxs)(A.A.Option,{value:"leave",children:[" ","Leave"," "]}),(0,q.jsxs)(A.A.Option,{value:"absent",children:[" ","Absent"," "]}),(0,q.jsxs)(A.A.Option,{value:"off",children:[" ","OFF"," "]}),(0,q.jsxs)(A.A.Option,{value:"holiday",children:[" ","holiday"," "]})]}))}})}),(0,q.jsx)("div",{children:(0,q.jsx)(g.xI,{name:"startDate",control:X,defaultValue:w()(),render:e=>{let{field:l}=e;return(0,q.jsx)(P.A,{report:!0,disabled:ie,size:"middle",field:l,errors:ee})}})}),(0,q.jsx)("div",{children:(0,q.jsx)(g.xI,{name:"endDate",report:!0,control:X,defaultValue:w()(),render:e=>{let{field:l}=e;return(0,q.jsx)(P.A,{size:"middle",disabled:ie,report:!0,field:l,errors:ee})}})})]})}),(0,q.jsxs)("div",{className:"flex w-full justify-end items-center gap-2 ",children:[(0,q.jsx)("button",{onClick:()=>{le("PDBranchId",""),le("PdCompanyId",""),le("status",["present"]),le("isVerified",""),le("startDate",w()()),le("endDate",w()()),le("employeeId","")},className:"bg-header py-[5px] rounded-md flex px-5 justify-center items-center  text-white",children:(0,q.jsx)("span",{className:"text-[12px]",children:"Reset"})}),se&&oe&&(0,q.jsx)(T.A,{placement:"topLeft",title:"Add Manual Attendence",children:(0,q.jsxs)("button",{onClick:()=>fe(!0),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,q.jsx)(c.OiG,{}),(0,q.jsx)("span",{className:"text-[12px]",children:"Manual Attendance"})]})})]}),(0,q.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[oe&&(0,q.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,q.jsx)("thead",{children:(0,q.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500] h-[40px]",children:[(0,q.jsx)("th",{className:"tableHead w-[5%]",children:"S.No."}),(0,q.jsx)("th",{className:"tableHead w-[10%]",children:(0,q.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,q.jsx)("span",{children:"Profile"})})}),(0,q.jsx)("th",{className:"tableHead",children:"Employee Name"}),(0,q.jsx)("th",{className:"tableHead",children:"Attendance Date"}),(0,q.jsx)("th",{className:"tableHead",children:"Check-In Time"}),(0,q.jsx)("th",{className:"tableHead",children:"Check-Out Time"}),(0,q.jsx)("th",{className:"tableHead",children:(0,q.jsx)("div",{className:"flex gap-1",children:"Worked Hours (HH:MM)"})}),(0,q.jsx)("th",{className:"tableHead",children:"Pending Hours (HH:MM)"}),(0,q.jsx)("th",{className:"tableHead",children:"Overtime Hours (HH:MM)"}),(0,q.jsx)("th",{className:"tableHead",children:"Is WFH"}),(0,q.jsx)("th",{className:"tableHead",children:"Status"}),(0,q.jsx)("th",{className:"tableHead",children:"Last Updated By"}),(0,q.jsx)("th",{className:"tableHead",children:"Is Verified"}),(re||ce)&&(0,q.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),ie?(0,q.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,q.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,q.jsx)(O.A,{})})}):(0,q.jsx)("tbody",{children:ae&&(null===ae||void 0===ae?void 0:ae.length)>0?null===ae||void 0===ae?void 0:ae.map((e,l)=>(0,q.jsxs)("tr",{className:"border-b-[1px] ".concat(l%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151]"),children:[(0,q.jsx)("td",{className:"tableData",children:l+1+10*(ue-1)}),(0,q.jsx)("td",{className:"tableData",children:e.profileImage?(0,q.jsx)("img",{alt:"",src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e.profileImage),className:"rounded-full min-w-10 min-h-10 w-10 h-10 ring-1 ring-amber-300"}):(0,q.jsx)("img",{alt:"",src:"/images/avatar.jpg",className:"rounded-full min-w-10 min-h-10 w-10 h-10 ring-1 ring-amber-300"})}),(0,q.jsx)("td",{className:"tableData",children:e.employeName}),(0,q.jsx)("td",{className:"tableData",children:p()(e.attendanceDate).format("DD-MM-YYYY")}),(0,q.jsx)("td",{className:"tableData",children:(0,q.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[e.checkInTime?w()(e.checkInTime).format("DD-MM-YYYY hh:mm A"):"-",e.checkInTime?(0,q.jsx)(u.Ny1,{onClick:()=>Fe(e,"checkin"),className:" hover:text-[#337ab7] text-[#3c8dbc]",size:14}):""]})}),(0,q.jsx)("td",{className:"tableData",children:(0,q.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[e.checkOutTime?w()(e.checkOutTime).format("DD-MM-YYYY hh:mm A"):"-",e.checkOutTime?(0,q.jsx)(u.Ny1,{onClick:()=>Fe(e,"checkout"),className:" hover:text-[#337ab7] text-[#3c8dbc]",size:14}):""]})}),(0,q.jsx)("td",{className:"tableData",children:(0,x.bZ)(e.workedHRS)}),(0,q.jsx)("td",{className:"tableData",children:(0,x.bZ)(e.pendingHRS)}),(0,q.jsx)("td",{className:"tableData",children:(0,x.bZ)(e.overtimeHRS)}),(0,q.jsx)("td",{className:"tableData",children:e.isWFHapplied?"Yes":"No"}),(0,q.jsx)("td",{className:"tableData",children:(0,q.jsx)(T.A,{placement:"topLeft",title:"status - ".concat(e.isPresentDay),children:(0,q.jsx)("span",{className:(()=>{switch(e.isPresentDay){case"present":return"bg-[#E0FFBE] border-green-500";case"absent":return"bg-red-200 border-red-500";case"leave":return"bg-yellow-300 border-yellow-500";case"off":return"bg-gray-300 border-gray-500";case"holiday":return"bg-blue-200 border-blue-500";case"firstHalf":return"bg-orange-200 border-orange-500";case"secondHalf":return"bg-purple-200 border-purple-500";default:return"bg-white border-gray-400"}})()+" border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px] capitalize",children:e.isPresentDay})})}),(0,q.jsx)("td",{className:"tableData",children:e.updatedBy||"-"}),(0,q.jsx)("td",{className:"tableData",children:0==e.status&&"present"==e.isPresentDay?"No":"Yes"}),(re||ce)&&(0,q.jsx)("td",{className:"tableData",children:(0,q.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[re&&(0,q.jsx)(T.A,{placement:"topLeft",title:!1===(null===e||void 0===e?void 0:e.status)&&"present"==e.isPresentDay?"Approve Attendence":"Alredy Approved",children:(0,q.jsx)("button",{disabled:"present"!==e.isPresentDay||!1!==(null===e||void 0===e?void 0:e.status),onClick:()=>(e=>{let l={_id:e};r().fire({title:"Warning",text:"Are you sure you want to Approve?",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&ne((0,y.Q$)(l)).then(e=>{e.error?r().fire({title:"Error!",text:"There was an issue approving the attendance. Please try again.",icon:"error",confirmButtonText:"OK"}):r().fire({title:"Approved!",text:"The attendance has been approved successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{Ze()})}).catch(e=>{r().fire({title:"Error!",text:"An unexpected error occurred. Please try again later.",icon:"error",confirmButtonText:"OK"})})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted hover:bg-red-100",type:"button",children:(0,q.jsx)(k.VD8,{className:!1===(null===e||void 0===e?void 0:e.status)&&"present"==e.isPresentDay?"text-cyan-600 hover:text-cyan-500":"text-gray-400",size:16})})}),(0,q.jsx)(T.A,{placement:"topLeft",title:"More Actions",children:(0,q.jsx)(I.A,{menu:{items:[{key:"view-comment",label:(0,q.jsxs)("span",{onClick:()=>(0,x.v2)((null===e||void 0===e?void 0:e.reason)||"Data not available"),className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,q.jsx)(H.qSe,{className:"mr-2",size:16}),"View Comment"]})},re&&{key:"edit-attendance",label:(0,q.jsxs)("span",{onClick:()=>{be(!0),ge(null===e||void 0===e?void 0:e._id)},className:"flex items-center text-[#3c8dbc] hover:text-[#337ab7]",children:[(0,q.jsx)(c.Jcp,{className:"mr-2",size:16}),"Edit Attendance"]})},ce&&{key:"delete-attendance",label:(0,q.jsxs)("span",{onClick:()=>(e=>{let l={_id:e};r().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&ne((0,y.ss)(l)).then(e=>{ue>1&&1==(null===ae||void 0===ae?void 0:ae.length)?me(Number(ue-1)):Ze()})})})(null===e||void 0===e?void 0:e._id),className:"flex items-center text-red-600 hover:text-red-500",children:[(0,q.jsx)(m.tqC,{className:"mr-2",size:16}),"Delete Attendance"]})}].filter(Boolean)},trigger:["click"],children:(0,q.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,q.jsx)(L.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})})]})):(0,q.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,q.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,q.jsxs)(D.A,{className:"antmodalclassName sm:!w-[60%] !w-[100%] !h-[50%]",title:"Employee Name : ".concat(null===Be||void 0===Be?void 0:Be.employeName," "),open:Me,onCancel:()=>Ve(!1),footer:null,children:[(0,q.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,q.jsxs)("table",{className:"w-full rounded-lg shadow-md overflow-hidden bg-white",children:[(0,q.jsx)("thead",{children:(0,q.jsx)("tr",{children:(0,q.jsx)("th",{className:"text-header",children:(0,q.jsx)("div",{className:"mt-2 ml-2",children:" "})})})}),(0,q.jsxs)("tbody",{className:"text-sm text-gray-700",children:[(0,q.jsxs)("tr",{className:"hover:bg-indigo-50",children:[(0,q.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,q.jsx)(B.cC2,{className:"size-4 text-header text-lg"}),(0,q.jsx)("span",{className:"text-[16px] font-medium",children:"Address"})]}),(0,q.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:("checkin"===qe?null===Be||void 0===Be||null===(e=Be.checkInLocation)||void 0===e?void 0:e.address:null===Be||void 0===Be||null===(l=Be.checkOutLocation)||void 0===l?void 0:l.address)||"N/A"})]}),(0,q.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,q.jsx)(_.sLb,{className:"size-4 text-header text-lg"}),(0,q.jsx)("span",{className:"text-[16px] font-medium",children:"Distance From Branch"})]}),(0,q.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"checkin"===qe?null===Be||void 0===Be||null===(n=Be.checkInLocation)||void 0===n?void 0:n.disatnceInMeter:null===Be||void 0===Be||null===(o=Be.checkOutLocation)||void 0===o?void 0:o.disatnceInMeter})]})]}),(0,q.jsxs)("tr",{className:"hover:bg-indigo-50",children:[(0,q.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,q.jsx)(B.cC2,{className:"size-4 text-header text-lg"}),(0,q.jsx)("span",{className:"text-[16px] font-medium",children:"Latitude"})]}),(0,q.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"checkin"===qe?null===Be||void 0===Be||null===(v=Be.checkInLocation)||void 0===v?void 0:v.latitude:null===Be||void 0===Be||null===(S=Be.checkOutLocation)||void 0===S?void 0:S.latitude})]}),(0,q.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,q.jsxs)("div",{className:"flex items-center gap-2",children:[(0,q.jsx)(_.sLb,{className:"size-4 text-header text-lg"}),(0,q.jsx)("span",{className:"text-[16px] font-medium",children:"Longitude"})]}),(0,q.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:"checkin"===qe?null===Be||void 0===Be||null===(E=Be.checkInLocation)||void 0===E?void 0:E.longitude:null===Be||void 0===Be||null===(F=Be.checkOutLocation)||void 0===F?void 0:F.longitude})]})]})]})]})}),(0,q.jsx)("div",{className:"h-[400px] w-full rounded-lg overflow-hidden shadow-md",children:Be&&(0,q.jsx)(Y.u6,{mapContainerStyle:{width:"100%",height:"400px"},center:{lat:"checkin"===qe?null===Be||void 0===Be||null===(z=Be.checkInLocation)||void 0===z?void 0:z.latitude:null===Be||void 0===Be||null===(Q=Be.checkOutLocation)||void 0===Q?void 0:Q.latitude,lng:"checkin"===qe?null===Be||void 0===Be||null===(R=Be.checkInLocation)||void 0===R?void 0:R.longitude:null===Be||void 0===Be||null===(U=Be.checkOutLocation)||void 0===U?void 0:U.longitude},zoom:15,children:(0,q.jsx)(Y.pH,{position:{lat:"checkin"===qe?null===Be||void 0===Be||null===(W=Be.checkInLocation)||void 0===W?void 0:W.latitude:null===Be||void 0===Be||null===(Z=Be.checkOutLocation)||void 0===Z?void 0:Z.latitude,lng:"checkin"===qe?null===Be||void 0===Be||null===(K=Be.checkInLocation)||void 0===K?void 0:K.longitude:null===Be||void 0===Be||null===(J=Be.checkOutLocation)||void 0===J?void 0:J.longitude}})})})]})]}),(0,q.jsx)(h.A,{totalCount:te,pageSize:10,currentPage:ue,onChange:e=>{me(e)}})]}),ye&&(0,q.jsx)(f.default,{isOpen:!0,onClose:()=>fe(!1),fetchattendanceListData:Ze}),je&&(0,q.jsx)(j.A,{isOpen:!0,onClose:()=>be(!1),updateId:Ne,fetchattendanceListData:Ze})]})}},72166:(e,l,n)=>{n.r(l),n.d(l,{default:()=>S});var a=n(89379),t=n(65043),i=n(24858),d=n(86178),s=n.n(d),o=n(42837),r=n(83003),c=n(15187),u=n(78729),m=n(33007),h=n(31744),v=n(32256),p=n(73216),x=n(30064),y=n.n(x),f=n(94084),j=n(60446),b=n.n(j),N=n(53913),g=n(65512),I=n(17995),D=n(89427),A=n(57916),T=n(70579);const S=e=>{let{isOpen:l,onClose:n,fetchattendanceListData:d}=e;const{register:x,handleSubmit:j,watch:S,control:w,setValue:k,reset:C,formState:{errors:O}}=(0,i.mN)({defaultValues:{employeeName:"",date:"",checkInTime:"",checkOutTime:"",reason:"",errors:{}}}),P=g.A.Option,{timeSlotsListData:L}=(0,r.d4)(e=>e.timeSlots),H=((0,p.Zp)(),(0,i.FH)({control:w,name:"PDBranchId",defaultValue:""})),_=(0,i.FH)({control:w,name:"PDCompanyId",defaultValue:""}),B=(0,i.FH)({control:w,name:"PDDepartmentId",defaultValue:""}),Y=(0,i.FH)({control:w,name:"PDDesignationId",defaultValue:""}),M=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),V=(0,r.wA)(),{branchList:q,branchListloading:E}=(0,r.d4)(e=>e.branch),{companyList:F,companyListLoading:z}=(0,r.d4)(e=>e.company),{loading:Q}=(0,r.d4)(e=>e.attendance),{employeList:R}=(0,r.d4)(e=>e.employe);(0,t.useEffect)(()=>{"admin"===(null===M||void 0===M?void 0:M.userType)&&V((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,t.useEffect)(()=>{("admin"!==(null===M||void 0===M?void 0:M.userType)||_)&&(k("PDDepartmentId",""),k("PDDesignationId",""),k("PDBranchId",""),V((0,m.UU)({companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?_:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,text:"",sort:!0,status:!0,isPagination:!1})),V((0,h.d0)({companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?_:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,text:"",sort:!0,status:!0,isPagination:!1})))},[_]),(0,t.useEffect)(()=>{!_&&"admin"===(null===M||void 0===M?void 0:M.userType)||!H&&"companBranch"===(null===M||void 0===M?void 0:M.userType)&&"employee"!==(null===M||void 0===M?void 0:M.userType)||U()},[_,H,B,Y]),(0,t.useEffect)(()=>{W()},[H]);const U=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?_:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?H:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId};V((0,o.qV)(e))},W=()=>{V((0,A.iU)({directorId:"",companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?_:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?H:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,text:"",sort:!0,status:"",isPagination:!1}))};return l?(0,T.jsx)(N.A,{visible:l,onCancel:()=>{n(),C()},className:"antmodalclassName",footer:null,title:"Apply Attendence",width:600,height:400,children:(0,T.jsx)("div",{children:(0,T.jsxs)("form",{autoComplete:"off",onSubmit:j(e=>{console.log(e);const l={employeId:null===e||void 0===e?void 0:e.employee,companyId:"admin"===(null===M||void 0===M?void 0:M.userType)?_:"company"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.companyId,branchId:"company"===(null===M||void 0===M?void 0:M.userType)||"admin"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType)?H:"companyBranch"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.branchId,directorId:"companyDirector"===(null===M||void 0===M?void 0:M.userType)?null===M||void 0===M?void 0:M._id:null===M||void 0===M?void 0:M.directorId,attendanceDate:b()(e.checkInTime).format("YYYY-MM-DD"),checkInTime:null!==e&&void 0!==e&&e.checkInTime?null===e||void 0===e?void 0:e.checkInTime:null,checkOutTime:e.checkOutTime?null===e||void 0===e?void 0:e.checkOutTime:null,method:"hr_portal",reason:e.reason,employeeName:e.employeeName,isVerified:!0,shift:e.shift};V((0,v.xn)(l)).then(e=>{e.error||(y().fire({icon:"success",title:"Success!",text:"Attendance record has been created successfully.",confirmButtonText:"OK",customClass:{confirmButton:"bg-header text-white hover:bg-[#063156]"}}),d(),n())})}),className:"",children:[(0,T.jsxs)("div",{className:"grid grid-col-1 md:grid-cols-2 gap-4",children:["admin"===(null===M||void 0===M?void 0:M.userType)&&(0,T.jsxs)("div",{children:[(0,T.jsx)("label",{className:"".concat(c.Q0),children:"Company"}),(0,T.jsx)(i.xI,{name:"PDCompanyId",control:w,rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(g.A,(0,a.A)((0,a.A)({},l),{},{className:" ".concat(c.Hy," ").concat(O.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:e=>e.parentNode,children:[(0,T.jsx)(g.A.Option,{value:"",children:"Select Company"}),z?(0,T.jsx)(g.A.Option,{disabled:!0,children:(0,T.jsx)(D.A,{})}):null===F||void 0===F?void 0:F.map(e=>(0,T.jsxs)(g.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),O.PDCompanyId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.PDCompanyId.message})]}),("admin"===(null===M||void 0===M?void 0:M.userType)||"company"===(null===M||void 0===M?void 0:M.userType)||"companyDirector"===(null===M||void 0===M?void 0:M.userType))&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,T.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,T.jsx)(i.xI,{name:"PDBranchId",control:w,rules:{required:"Branch is required"},render:e=>{var l;let{field:n}=e;return(0,T.jsxs)(g.A,(0,a.A)((0,a.A)({},n),{},{onChange:e=>{k("employee",""),k("shift",""),n.onChange(e)},className:" ".concat(c.Hy," ").concat(O.PDPlan?"border-[1px] ":"border-gray-300"," "),dropdownStyle:{zIndex:2e3},placeholder:"Select Branch",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:()=>document.body,children:[(0,T.jsx)(g.A.Option,{value:"",children:"Select Branch"}),E?(0,T.jsx)(g.A.Option,{disabled:!0,children:(0,T.jsx)(D.A,{})}):null===(l=(0,c._o)(q,"fullName"))||void 0===l?void 0:l.map(e=>(0,T.jsxs)(g.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),O.PDBranchId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.PDBranchId.message})]}),(0,T.jsxs)("div",{className:"w-full",children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Employee ",(0,T.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,T.jsx)(i.xI,{name:"employee",control:w,rules:{required:"Employee is required"},render:e=>{var l;let{field:n}=e;return(0,T.jsxs)(g.A,(0,a.A)((0,a.A)({},n),{},{onChange:e=>{var l;const n=R.find(l=>l._id===e);k("employee",e),k("shift",(null===n||void 0===n||null===(l=n.shiftTimeSlot)||void 0===l?void 0:l._id)||"")},dropdownStyle:{zIndex:2e3},getPopupContainer:()=>document.body,classNamePrefix:"react-select",className:"".concat(c.Hy," ").concat(O.employee?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Employee",children:[(0,T.jsx)(g.A.Option,{value:"",children:"Select Employee"}),E?(0,T.jsx)(g.A.Option,{disabled:!0,children:(0,T.jsx)(D.A,{})}):null===(l=(0,c._o)(R,"fullName"))||void 0===l?void 0:l.map(e=>(0,T.jsxs)(g.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),O.employee&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.employee.message})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Check-in Time ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(i.xI,{name:"checkInTime",control:w,rules:{required:!0},render:e=>{let{field:l}=e;return(0,T.jsx)(f.A,{field:l,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:O,disabledDate:e=>{const l=s()(),n=l.date()<=3,a=l.clone().subtract(1,"month").startOf("month"),t=(l.clone().subtract(1,"month").endOf("month"),e.isSame(a,"month")),i=e.isSame(l,"month"),d=e.isAfter(l,"day");return n?d||!t&&!i:d||!i}})}}),O.checkInTime&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:"Check-in time is required"})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Check-out Time ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(i.xI,{name:"checkOutTime",control:w,rules:{required:!0},render:e=>{let{field:l}=e;return(0,T.jsx)(f.A,{field:l,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:O,disabledDate:e=>{const l=S("checkInTime");if(!l)return!0;const n=b()(l).startOf("day"),a=n.add(1,"day");return!e.isSame(n,"day")&&!e.isSame(a,"day")}})}}),O.checkOutTime&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:"Check-out time is required"})]}),(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Select Shift ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(i.xI,{name:"shift",control:w,rules:{required:"Shift is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(g.A,(0,a.A)((0,a.A)({},l),{},{className:"".concat(c.Hy," ").concat(O.shift?"":"border-gray-300"),placeholder:"Select Shift",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:()=>document.body,dropdownStyle:{zIndex:2e3},children:[(0,T.jsx)(P,{value:"",children:"Select Shift"}),null===L||void 0===L?void 0:L.map(e=>(0,T.jsx)(P,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.shiftName},null===e||void 0===e?void 0:e._id))]}))}}),O.shift&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.shift.message})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Reason ",(0,T.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,T.jsx)("input",(0,a.A)((0,a.A)({type:"text"},x("reason",{required:!0})),{},{className:"".concat(c.Ol," ").concat(O.reason?"border-[1px] ":"border-gray-300"),rows:"3"})),O.reason&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:"Reason is required "})]})]}),(0,T.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:(0,T.jsx)("button",{type:"submit",disabled:Q,className:"px-4 py-2 text-sm font-medium text-white ".concat(Q?"bg-gray-400":"bg-header hover:bg-[#063156]"," rounded-md "),children:Q?(0,T.jsx)(I.A,{}):"Submit"})})]})})}):null}},91601:(e,l,n)=>{n.d(l,{A:()=>S});var a=n(89379),t=n(65043),i=n(24858),d=n(86178),s=n.n(d),o=n(42837),r=n(83003),c=n(15187),u=n(78729),m=n(33007),h=n(31744),v=n(32256),p=n(73216),x=n(66015),y=n(30064),f=n.n(y),j=n(94084),b=n(60446),N=n.n(b),g=n(53913),I=n(65512),D=n(17995),A=n(89427),T=n(70579);const S=e=>{let{isOpen:l,onClose:n,fetchattendanceListData:d,updateId:y}=e;const{register:b,handleSubmit:S,watch:w,control:k,setValue:C,formState:{errors:O}}=(0,i.mN)({defaultValues:{employeeName:"",date:"",checkInTime:"",checkOutTime:null,reason:"",errors:{}}}),{loading:P}=(0,r.d4)(e=>e.attendance),L=((0,p.Zp)(),(0,i.FH)({control:k,name:"PDBranchId",defaultValue:""})),H=(0,i.FH)({control:k,name:"PDCompanyId",defaultValue:""}),_=(0,i.FH)({control:k,name:"PDDepartmentId",defaultValue:""}),B=(0,i.FH)({control:k,name:"PDDesignationId",defaultValue:""}),Y=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),M=(0,r.wA)(),{branchList:V,branchListLoading:q}=(0,r.d4)(e=>e.branch),{companyList:E,companyListLoading:F}=(0,r.d4)(e=>e.company),{employeList:z}=(0,r.d4)(e=>e.employe),{attendancegDetailsData:Q}=(0,r.d4)(e=>e.attendance);(0,t.useEffect)(()=>{if(Q){C("companyId",null===Q||void 0===Q?void 0:Q.companyId),C("PDBranchId",null===Q||void 0===Q?void 0:Q.branchId),C("directorId",null===Q||void 0===Q?void 0:Q.directorId),C("date",N()(null===Q||void 0===Q?void 0:Q.attendanceDate)),C("checkInTime",null!==Q&&void 0!==Q&&Q.checkInTime?N()(null===Q||void 0===Q?void 0:Q.checkInTime):null),C("checkOutTime",null!==Q&&void 0!==Q&&Q.checkOutTime?N()(null===Q||void 0===Q?void 0:Q.checkOutTime):null);const e=null===z||void 0===z?void 0:z.find(e=>e._id===(null===Q||void 0===Q?void 0:Q.employeId));e&&C("employee",{value:e._id,label:e.fullName})}},[Q]);(0,t.useEffect)(()=>{"admin"===(null===Y||void 0===Y?void 0:Y.userType)&&M((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,t.useEffect)(()=>{("admin"!==(null===Y||void 0===Y?void 0:Y.userType)||H)&&(C("PDDepartmentId",""),C("PDDesignationId",""),C("PDBranchId",""),M((0,m.UU)({companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?H:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,text:"",sort:!0,status:!0,isPagination:!1})),M((0,h.d0)({companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?H:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,text:"",sort:!0,status:!0,isPagination:!1})))},[H]),(0,t.useEffect)(()=>{!H&&"admin"===(null===Y||void 0===Y?void 0:Y.userType)||!L&&"companBranch"===(null===Y||void 0===Y?void 0:Y.userType)&&"employee"!==(null===Y||void 0===Y?void 0:Y.userType)||R()},[H,L,_,B]);const R=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===Y||void 0===Y?void 0:Y.userType)?H:"company"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.companyId,branchId:"company"===(null===Y||void 0===Y?void 0:Y.userType)||"admin"===(null===Y||void 0===Y?void 0:Y.userType)||"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType)?L:"companyBranch"===(null===Y||void 0===Y?void 0:Y.userType)?null===Y||void 0===Y?void 0:Y._id:null===Y||void 0===Y?void 0:Y.branchId};M((0,o.qV)(e)).then(e=>{!e.error&&M((0,v.xy)({_id:y}))})};return l?(0,T.jsx)(g.A,{visible:l,onCancel:()=>{n()},footer:null,className:"antmodalclassName",title:"Manual Attendence",width:600,height:400,children:(0,T.jsx)("div",{children:(0,T.jsxs)("form",{autoComplete:"off",onSubmit:S(e=>{const l={_id:y,employeId:null===Q||void 0===Q?void 0:Q.employeId,companyId:null===Q||void 0===Q?void 0:Q.companyId,branchId:null===Q||void 0===Q?void 0:Q.branchId,directorId:null===Q||void 0===Q?void 0:Q.directorId,attendanceDate:N()(e.checkInTime).format("YYYY-MM-DD"),checkInTime:null!==e&&void 0!==e&&e.checkInTime?null===e||void 0===e?void 0:e.checkInTime:null,checkOutTime:e.checkOutTime?null===e||void 0===e?void 0:e.checkOutTime:null,method:"hr_portal",reason:null===e||void 0===e?void 0:e.reason,employeeName:null===e||void 0===e?void 0:e.employeeName};M((0,v.Ab)(l)).then(e=>{e.error||(f().fire({icon:"success",title:"Success!",text:"Attendance record has been created successfully.",confirmButtonText:"OK",customClass:{confirmButton:"bg-header text-white hover:bg-[#063156]"}}),d(),n())})}),className:"",children:[(0,T.jsxs)("div",{className:"grid grid-col-1 md:grid-cols-2 gap-4",children:["admin"===(null===Y||void 0===Y?void 0:Y.userType)&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Company ",(0,T.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,T.jsx)(i.xI,{name:"PDCompanyId",control:k,rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(I.A,(0,a.A)((0,a.A)({},l),{},{className:" ".concat(c.Hy," ").concat(O.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,children:[(0,T.jsx)(I.A.Option,{value:"",children:"Select Company"}),F?(0,T.jsx)(I.A.Option,{disabled:!0,children:(0,T.jsx)(A.A,{})}):null===E||void 0===E?void 0:E.map(e=>(0,T.jsxs)(I.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),O.PDCompanyId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.PDCompanyId.message})]}),("admin"===(null===Y||void 0===Y?void 0:Y.userType)||"company"===(null===Y||void 0===Y?void 0:Y.userType)||"companyDirector"===(null===Y||void 0===Y?void 0:Y.userType))&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,T.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,T.jsx)(i.xI,{name:"PDBranchId",control:k,rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(I.A,(0,a.A)((0,a.A)({},l),{},{className:" ".concat(c.Hy," ").concat(O.PDPlan?"border-[1px] ":"border-gray-300"," z-[99999]"),placeholder:"Select Branch",showSearch:!0,getPopupContainer:e=>e.parentNode,children:[(0,T.jsx)(I.A.Option,{value:"",children:"Select Branch"}),q?(0,T.jsx)(I.A.Option,{disabled:!0,children:(0,T.jsx)(A.A,{})}):null===V||void 0===V?void 0:V.map(e=>(0,T.jsxs)(I.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),O.PDBranchId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.PDBranchId.message})]}),(0,T.jsxs)("div",{className:"w-full",children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Employee ",(0,T.jsx)("span",{className:"text-red-600",children:"* "})]}),(0,T.jsx)(i.xI,{name:"employee",control:k,rules:{required:"Employee is required"},render:e=>{let{field:l}=e;return(0,T.jsx)(x.Ay,(0,a.A)((0,a.A)({},l),{},{options:null===z||void 0===z?void 0:z.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),isDisabled:!0,classNamePrefix:"react-select",className:"".concat(c.Ph," ").concat(O.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),O.employee&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:O.employee.message})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Check-in Time ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(i.xI,{name:"checkInTime",control:k,rules:{required:!0},render:e=>{let{field:l}=e;return(0,T.jsx)(j.A,{field:l,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:O,disabledDate:e=>{const l=s()(),n=l.date()<=3,a=l.clone().subtract(1,"month").startOf("month"),t=(l.clone().subtract(1,"month").endOf("month"),e.isSame(a,"month")),i=e.isSame(l,"month"),d=e.isAfter(l,"day");return n?d||!t&&!i:d||!i}})}}),O.checkInTime&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:"Check-in time is required"})]}),(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(c.Q0),children:["Check-out Time ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(i.xI,{name:"checkOutTime",control:k,rules:{required:!0},render:e=>{let{field:l}=e;return(0,T.jsx)(j.A,{field:l,showTime:!0,format:"DD/MM/YYYY HH:mm",errors:O,disabledDate:e=>{const l=w("checkInTime");if(!l)return!0;const n=N()(l).startOf("day"),a=n.add(1,"day");return!e.isSame(n,"day")&&!e.isSame(a,"day")}})}}),O.checkOutTime&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:"Check-out time is required"})]})]}),(0,T.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:(0,T.jsx)("button",{type:"submit",disabled:P,className:"px-4 py-2 text-sm font-medium text-white ".concat(P?"bg-gray-400":"bg-header hover:bg-[#063156]"," rounded-md "),children:P?(0,T.jsx)(D.A,{}):"Submit"})})]})})}):null}}}]);
//# sourceMappingURL=3763.5a16b179.chunk.js.map