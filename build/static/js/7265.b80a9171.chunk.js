"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7265],{87265:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var s=l(89379),d=l(24858),n=l(39160),c=l(83003),i=l(73216),t=l(65043),o=l(15187),r=l(31744),u=(l(78729),l(42837)),v=(l(31536),l(88967),l(93898)),m=(l(70337),l(12208),l(8928),l(96603)),x=l(65512),h=(l(47989),l(33007),l(31174)),p=l(86178),N=l.n(p),j=l(94084),b=l(60184),y=(l(17995),l(60446)),A=l.n(y),f=l(70579);const g=()=>{var e,a,l,p,y,g,D,k,I,q;const{loading:T}=(0,c.d4)(e=>e.payment),{register:Q,handleSubmit:S,control:C,watch:Y,formState:{errors:w},setValue:V}=(0,d.mN)({defaultValues:{}}),{paymentDetails:M}=(0,c.d4)(e=>e.payment),{paymentIdEnc:_}=(0,i.g)(),B=(0,h.Yc)(_),E=(0,c.wA)(),{companyList:F}=((0,i.Zp)(),(0,c.d4)(e=>e.company)),{branchList:H}=(0,c.d4)(e=>e.branch),L=(JSON.parse(localStorage.getItem("user_info_".concat(o.AU))),(0,d.FH)({control:C,name:"PDCompanyId",defaultValue:""}),(0,d.FH)({control:C,name:"grandTotal",defaultValue:""})),{branchDetailsData:G}=(0,c.d4)(e=>e.branch),{employeList:O}=(0,c.d4)(e=>e.employe),[P,Z]=(0,t.useState)([]),J=((0,d.FH)({control:C,name:"totalBeforeGrand",defaultValue:""}),(0,d.FH)({control:C,name:"advance",defaultValue:""}),(0,d.FH)({control:C,name:"isAdvance",defaultValue:!1})),R=(0,d.FH)({control:C,name:"paymentMode",defaultValue:""});return(0,t.useEffect)(()=>{B&&E((0,v.F$)({_id:B}))},[B]),(0,t.useEffect)(()=>{var e;M&&(E((0,r.ZN)({_id:null===M||void 0===M?void 0:M.branchId})),E((0,u.qV)({text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:null===M||void 0===M?void 0:M.companyId,branchId:null===M||void 0===M?void 0:M.branchId})).then(e=>{if(null===e||void 0===e||!e.error){var a,l,s;const d=null===e||void 0===e||null===(a=e.payload)||void 0===a||null===(l=a.data)||void 0===l||null===(s=l.docs)||void 0===s?void 0:s.find(e=>(null===e||void 0===e?void 0:e._id)===(null===M||void 0===M?void 0:M.employeId));V("employeeId",null===d||void 0===d?void 0:d.fullName)}}),V("type",null===M||void 0===M?void 0:M.type),V("isAdvance",null===M||void 0===M?void 0:M.isAdjust),V("isTds",null===M||void 0===M?void 0:M.isTDS),V("isDiscount",null===M||void 0===M?void 0:M.isDiscount),V("paymentMode",null===M||void 0===M?void 0:M.paymentMode),V("maxAdvance",null===M||void 0===M||null===(e=M.applicableAdvance)||void 0===e?void 0:e.availableBalance),V("totalBeforeGrand",null===M||void 0===M?void 0:M.amount),V("advance",null===M||void 0===M?void 0:M.adjustAmount),V("grandTotal",null===M||void 0===M?void 0:M.totalAmount),V("bankId",null===M||void 0===M?void 0:M.bankAccId),V("chequeNo",null===M||void 0===M?void 0:M.chequeNo),V("transactionNo",null===M||void 0===M?void 0:M.transactionNo),V("naration",null===M||void 0===M?void 0:M.remarks),V("date",A()(null===M||void 0===M?void 0:M.date)))},[M]),(0,f.jsx)(n.A,{children:(0,f.jsx)("div",{className:"gap-4",children:(0,f.jsxs)("form",{autoComplete:"off",className:"mt-2 border border-gray-200 rounded-xl ",children:[(0,f.jsxs)("div",{className:"bg-header text-white text-xs px-3 py-2 rounded-t-xl",children:["advance"===(null===M||void 0===M?void 0:M.type)&&"".concat(null===M||void 0===M?void 0:M.type," / ").concat(null===M||void 0===M||null===(e=M.advanceData)||void 0===e?void 0:e.advanceType," / ").concat(null===M||void 0===M||null===(a=M.advanceData)||void 0===a?void 0:a.userName," /  (").concat(N()(null===M||void 0===M||null===(l=M.advanceData)||void 0===l?void 0:l.date).format("DD/MM/YYYY"),")"),"purchase"===(null===M||void 0===M?void 0:M.type)&&"".concat(null===M||void 0===M?void 0:M.type," / ").concat(null===M||void 0===M||null===(p=M.purchaseAssetData)||void 0===p?void 0:p.purchaseType," /").concat("Vendor"===(null===M||void 0===M||null===(y=M.purchaseAssetData)||void 0===y?void 0:y.purchaseType)?"".concat(null===M||void 0===M||null===(g=M.purchaseAssetData)||void 0===g?void 0:g.assetName):"".concat(null===M||void 0===M||null===(D=M.purchaseAssetData)||void 0===D?void 0:D.userName)," / (").concat(N()(null===M||void 0===M||null===(k=M.purchaseAssetData)||void 0===k?void 0:k.date).format("DD/MM/YYYY"),")"),"cashBook"===(null===M||void 0===M?void 0:M.type)&&"".concat(null===M||void 0===M?void 0:M.type," / ").concat(null===M||void 0===M||null===(I=M.cashbookData)||void 0===I?void 0:I.userName," / (").concat(N()(null===M||void 0===M||null===(q=M.cashbookData)||void 0===q?void 0:q.date).format("DD/MM/YYYY"),")")]}),(0,f.jsxs)("div",{className:"px-3",children:[(0,f.jsx)("div",{children:(0,f.jsxs)("label",{className:"".concat(o.Q0," flex items-center"),children:[(0,f.jsx)("input",(0,s.A)({disabled:!0,value:null===M||void 0===M?void 0:M.isAdjust,type:"checkbox"},Q("isAdvance"))),(0,f.jsx)("span",{className:"mx-2 text-[15px]",children:"Is Advance"})]})}),(0,f.jsx)("div",{children:(0,f.jsxs)("label",{className:"".concat(o.Q0," flex items-center"),children:[(0,f.jsx)("input",(0,s.A)({type:"checkbox",disabled:!0,defaultChecked:null===M||void 0===M?void 0:M.isDiscount},Q("isDiscount"))),(0,f.jsx)("span",{className:"mx-2 text-[15px]",children:"Is Discount"})]})}),(0,f.jsx)("div",{children:(0,f.jsxs)("label",{className:"".concat(o.Q0," flex items-center"),children:[(0,f.jsx)("input",(0,s.A)({defaultChecked:null===M||void 0===M?void 0:M.isTDS,disabled:!0,type:"checkbox"},Q("isTds"))),(0,f.jsx)("span",{className:"mx-2 text-[15px]",children:"Is TDS"})]})})]}),(0,f.jsx)("div",{className:"w-full flex flex-row items-end justify-end",children:(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:"Total Amount"}),(0,f.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Q("totalBeforeGrand",{})),{},{className:"".concat(o.id),placeholder:"total",disabled:!0}))]}),J&&(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:"Advance"}),(0,f.jsx)("input",{type:"number",disabled:!0,value:null===M||void 0===M?void 0:M.adjustAmount,className:"".concat(o.id),placeholder:"Advance"})]}),(null===M||void 0===M?void 0:M.isDiscount)&&(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:" Discount Amount "}),(0,f.jsx)("input",{type:"number",disabled:!0,value:null===M||void 0===M?void 0:M.discountAmount,className:"".concat(o.id),placeholder:"Discount"})]}),(null===M||void 0===M?void 0:M.isTDS)&&(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:" TDS Amount "}),(0,f.jsx)("input",{type:"number",disabled:!0,value:null===M||void 0===M?void 0:M.TDSAmount,className:"".concat(o.id),placeholder:"TDS"})]}),(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:"Grand Total"}),(0,f.jsx)("input",(0,s.A)((0,s.A)({type:"text"},Q("grandTotal")),{},{className:"".concat(o.id),placeholder:"grandTotal",disabled:!0}))]})]})}),Number(L)>0&&(0,f.jsxs)("div",{className:"py-2",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-2 md:my-1 px-3 md:mt-2",children:[(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[(0,f.jsx)("label",{className:"your-input-label-class",children:(0,f.jsx)(d.xI,{name:"paymentMode",control:C,rules:{required:"Type is required"},render:e=>{let{field:a}=e;return(0,f.jsxs)(m.Ay.Group,(0,s.A)((0,s.A)({disabled:!0,defaultValue:"cash"},a),{},{children:[(0,f.jsx)(m.Ay,{className:"".concat(o.Q0),value:"cash",children:"Cash"}),(0,f.jsx)(m.Ay,{className:"".concat(o.Q0),value:"cheque",children:"Cheque"}),(0,f.jsx)(m.Ay,{className:"".concat(o.Q0),value:"bank",children:"Bank"})]}))}})}),w.type&&(0,f.jsx)("span",{className:"error-message",children:w.type.message})]}),w.type&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:w.type.message})]}),"cash"!==R&&(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("label",{className:"".concat(o.Q0),children:["Sender Bank",(0,f.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,f.jsx)(d.xI,{control:C,name:"bankId",rules:{required:"bankId is required"},render:e=>{var a,l;let{field:d}=e;return(0,f.jsxs)(x.A,(0,s.A)((0,s.A)({},d),{},{defaultValue:"",disabled:!0,className:"".concat(o.ZL," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,f.jsx)(x.A.Option,{value:"",children:"Select Bank"}),(null===G||void 0===G||null===(a=G.data)||void 0===a?void 0:a.bankData)&&(null===G||void 0===G||null===(l=G.data)||void 0===l?void 0:l.bankData.length)>0&&G.data.bankData.map(e=>(0,f.jsx)(x.A.Option,{value:e._id,children:"".concat(e.bankName," (").concat(e.branchName,")")},e._id)),"         "]}))}}),w.bankId&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:w.bankId.message})]}),"cash"===R&&(0,f.jsxs)("div",{className:"w-full",children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:"Employee"}),(0,f.jsx)("input",(0,s.A)((0,s.A)({type:"",disabled:!0},Q("employeeId")),{},{className:" ".concat(o.id," ").concat(w.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),w.employeeId&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:w.employeeId.message})]}),"cheque"===R&&(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("label",{className:"".concat(o.Q0),children:["Cheque No",(0,f.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,f.jsx)("input",(0,s.A)((0,s.A)({type:"",disabled:!0},Q("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(o.id," ").concat(w.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),w.chequeNo&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:w.chequeNo.message})]}),"bank"===R&&(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("label",{className:"".concat(o.Q0),children:["Transaction No",(0,f.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,f.jsx)("input",(0,s.A)((0,s.A)({type:"text",disabled:!0},Q("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(o.id," ").concat(w.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter transaction no"})),w.transactionNo&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:w.transactionNo.message})]})]}),(0,f.jsxs)("div",{className:"px-3",children:[(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("label",{className:"".concat(o.Q0),children:["Naration",(0,f.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,f.jsx)("textarea",(0,s.A)((0,s.A)({disabled:!0},Q("naration",{required:"Naration is required"})),{},{className:" ".concat(o.id," ").concat(w.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),w.naration&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:w.naration.message})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"".concat(o.Q0),children:"Payment Date"}),(0,f.jsx)(d.xI,{name:"date",control:C,render:e=>{let{field:a}=e;return(0,f.jsx)(j.A,{disabled:!0,field:a,errors:w})}}),w.date&&(0,f.jsx)("p",{className:"text-red-500 text-sm",children:"Date is required"})]}),(0,f.jsx)("div",{className:"pt-4",children:(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsx)("input",{type:"file",className:"hidden",id:"file-upload"}),(0,f.jsx)("div",{className:"space-y-2",children:null===P||void 0===P?void 0:P.map((e,a)=>(0,f.jsx)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:(0,f.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,f.jsx)(b.chT,{className:"text-gray-500"}),(0,f.jsx)("span",{className:"text-sm text-gray-600",children:e})]})},a))})," "]})})]})]})]})})})}}}]);
//# sourceMappingURL=7265.b80a9171.chunk.js.map