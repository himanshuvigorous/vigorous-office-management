"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8422],{28422:(e,l,s)=>{s.r(l),s.d(l,{default:()=>R});var a=s(65043),t=s(39160),i=s(73216),n=s(35475),d=s(83003),r=s(23156),o=s(47196),c=s(30064),u=s.n(c),m=s(31174),x=s(60184),p=s(15187),h=s(70337),v=s(65512),j=s(96651),f=s(57692),y=s(12624),g=s(30326),N=s(4938),b=s(78729),w=s(31744),C=s(78227),A=s(55971),I=s(89379),k=s(53913),D=s(24858),S=s(89427),B=(s(17995),s(12106),s(38776)),P=s(59e3),T=s(70579);const E=e=>{var l,s;let{isOpen:t,onClose:i,fetchList:n}=e;const{register:r,handleSubmit:o,control:c,setValue:u,reset:m,formState:{errors:x}}=(0,D.mN)({defaultValues:{filePath:[]}}),j=(0,D.FH)({control:c,name:"PDBranchId",defaultValue:""}),f=(0,D.FH)({control:c,name:"PDCompanyId",defaultValue:""}),[y,g]=(0,a.useState)(!1),N=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))),C=(0,d.wA)(),{branchList:A,branchListloading:E}=(0,d.d4)(e=>e.branch),{companyList:O,companyListLoading:_}=(0,d.d4)(e=>e.company),L=(0,a.useRef)(null),{importClientsData:z}=(0,d.d4)(e=>e.client);(0,a.useEffect)(()=>{"admin"===(null===N||void 0===N?void 0:N.userType)&&C((0,b.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,a.useEffect)(()=>{("admin"===(null===N||void 0===N?void 0:N.userType)&&f||"company"===(null===N||void 0===N?void 0:N.userType)&&null!==N&&void 0!==N&&N._id||"companyDirector"===(null===N||void 0===N?void 0:N.userType))&&(u("PDBranchId",""),C((0,w.d0)({companyId:"admin"===(null===N||void 0===N?void 0:N.userType)?f:"company"===(null===N||void 0===N?void 0:N.userType)?null===N||void 0===N?void 0:N._id:null===N||void 0===N?void 0:N.companyId,text:"",sort:!0,status:!0,isPagination:!1})))},[f]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(B.A,{open:y,onClose:()=>g(!1),summary:null===z||void 0===z||null===(l=z.data)||void 0===l?void 0:l.summary,details:null===z||void 0===z||null===(s=z.data)||void 0===s?void 0:s.details}),(0,T.jsx)(k.A,{className:"antmodalclassName",visible:t,onCancel:()=>{L.current.value="",m({PDBranchId:"",filePath:[]}),i()},footer:null,title:"Import Clients",width:600,height:400,zIndex:1050,children:(0,T.jsxs)("form",{autoComplete:"off",onSubmit:o(e=>{const l=new FormData;l.append("filePath",null===e||void 0===e?void 0:e.filePath[0]),l.append("companyId","admin"===(null===N||void 0===N?void 0:N.userType)?f:"company"===(null===N||void 0===N?void 0:N.userType)?null===N||void 0===N?void 0:N._id:null===N||void 0===N?void 0:N.companyId),l.append("branchId","company"===(null===N||void 0===N?void 0:N.userType)||"admin"===(null===N||void 0===N?void 0:N.userType)||"companyDirector"===(null===N||void 0===N?void 0:N.userType)?j:"companyBranch"===(null===N||void 0===N?void 0:N.userType)?null===N||void 0===N?void 0:N._id:null===N||void 0===N?void 0:N.branchId),l.append("directorId",""),C((0,h.cT)(l)).then(e=>{null!==e&&void 0!==e&&e.error||(g(!0),n(),i(),m())})}),className:"",children:[(0,T.jsxs)("div",{className:"grid grid-col-1 md:grid-cols-2 gap-4",children:["admin"===(null===N||void 0===N?void 0:N.userType)&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(p.Q0),children:["Company ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(D.xI,{control:c,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(v.A,(0,I.A)((0,I.A)({},l),{},{defaultValue:"",className:"".concat(p.Hy," "),children:[(0,T.jsx)(v.A.Option,{value:"",children:"Select Company"}),_?(0,T.jsx)(v.A.Option,{disabled:!0,children:(0,T.jsx)(S.A,{})}):null===O||void 0===O?void 0:O.map(e=>(0,T.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),x.PDCompanyId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:x.PDCompanyId.message})]}),("admin"===(null===N||void 0===N?void 0:N.userType)||"company"===(null===N||void 0===N?void 0:N.userType)||"companyDirector"===(null===N||void 0===N?void 0:N.userType))&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{className:"".concat(p.Q0),children:["Branch ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(D.xI,{control:c,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var l;let{field:s}=e;return(0,T.jsxs)(v.A,(0,I.A)((0,I.A)({},s),{},{getPopupContainer:()=>document.body,dropdownStyle:{zIndex:2e3},className:"".concat(p.Hy," "),children:[(0,T.jsx)(v.A.Option,{value:"",children:"Select Branch"}),E?(0,T.jsx)(v.A.Option,{disabled:!0,children:(0,T.jsx)(S.A,{})}):null===(l=(0,p._o)(A,"fullName"))||void 0===l?void 0:l.map(e=>(0,T.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),x.PDBranchId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:x.PDBranchId.message})]}),(0,T.jsx)(D.xI,{name:"filePath",control:c,rules:{validate:e=>(null===e||void 0===e?void 0:e.length)>0||"File is required"},render:e=>{var l;let{field:s}=e;return(0,T.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,T.jsxs)("label",{className:"".concat(p.Q0),children:["Upload File ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)("button",{type:"button",onClick:()=>document.getElementById("hiddenFileInput").click(),className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Upload"}),(0,T.jsx)("input",{type:"file",id:"hiddenFileInput",ref:L,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{display:"none"},onChange:e=>s.onChange(e.target.files)}),(null===s||void 0===s||null===(l=s.value)||void 0===l?void 0:l.length)>0&&(0,T.jsx)("p",{className:"text-green-600 text-sm",children:s.value[0].name}),x.filePath&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:x.filePath.message})]})}})]}),(0,T.jsxs)("div",{className:"flex justify-between items-center gap-2 mt-4",children:[(0,T.jsx)("button",{type:"button",onClick:()=>{C((0,P.fu)({userType:"client"})).then(e=>{var l;null!==e&&void 0!==e&&e.error||(window.location.href=null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.downloadUrl)})},target:"_blank",className:"bg-header text-white p-2 px-4 rounded",children:"DownLoad Excel"}),(0,T.jsx)("button",{type:"submit",className:"bg-header text-white p-2 px-4 rounded",children:"Submit"})]})]})})]})};var O=s(27980),_=s(83002),L=s(86178),z=s.n(L);const R=function(){const e=(0,i.Zp)(),l=(0,d.wA)(),s=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))),{clientList:c,totalEmployeCount:I,loading:k}=(0,d.d4)(e=>e.client),{branchList:D,branchListloading:B}=(0,d.d4)(e=>e.branch),{canCreate:P,canRead:L,canUpdate:R,canDelete:H}=(0,N.A)(),[F,M]=(0,a.useState)([]),[V,U]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c&&re()},[c]);const[q,W]=(0,n.ok)(),Y=parseInt(q.get("page"))||1,G=parseInt(q.get("limit"))||10,K=q.get("branchId")||"",J=q.get("status")||"",[Q,Z]=(0,a.useState)(Y),[$,X]=(0,a.useState)(G),[ee,le]=(0,a.useState)(J),[se,ae]=(0,a.useState)(""),[te,ie]=(0,a.useState)(K);(0,a.useEffect)(()=>{const e=new URLSearchParams;Q>1&&e.set("page",Q),10!==$&&e.set("limit",$),te&&e.set("branchId",te),ee&&e.set("status",ee),W(e)},[Q,$,te,ee,se]),(0,a.useEffect)(()=>{de()},[Q,$,te,ee,se]);const ne=()=>{Z(1),X(10),ie(""),le(""),ae("")},de=()=>{let e={page:Q,limit:$,reqPayload:{companyId:"company"===(null===s||void 0===s?void 0:s.userType)?null===s||void 0===s?void 0:s._id:null===s||void 0===s?void 0:s.companyId,branchId:"company"===(null===s||void 0===s?void 0:s.userType)||"companyDirector"===(null===s||void 0===s?void 0:s.userType)?te:"companyBranch"===(null===s||void 0===s?void 0:s.userType)?null===s||void 0===s?void 0:s._id:null===s||void 0===s?void 0:s.branchId,directorId:"",organizationId:"",industryId:"",text:se,sort:!0,status:"true"===ee||"false"!==ee&&"",isPagination:!0}};l((0,h.ai)(e))};(0,a.useEffect)(()=>{"company"!==(null===s||void 0===s?void 0:s.userType)&&"companyDirector"!==(null===s||void 0===s?void 0:s.userType)||l((0,w.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===s||void 0===s?void 0:s.userType)?null===s||void 0===s?void 0:s._id:null===s||void 0===s?void 0:s.companyId}))},[]);const re=(e,l)=>{const s=(0,p.Hc)(e,l,c);M(s)};return(0,T.jsx)(t.A,{onChange:e=>{ae(e)},children:(0,T.jsxs)("section",{children:[(0,T.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,T.jsxs)("div",{className:"xl:flex justify-between items-center xl:space-y-0 space-y-2 py-1",children:[(0,T.jsxs)("div",{className:"grid md:flex sm:grid-cols-3 grid-cols-1 flex-wrap md:gap-3 gap-1.5",children:[("company"==(null===s||void 0===s?void 0:s.userType)||"companyDirector"==(null===s||void 0===s?void 0:s.userType))&&(0,T.jsx)("div",{children:(0,T.jsxs)(v.A,{value:te,onChange:e=>{ie(e),Z(1)},defaultValue:"",disabled:k,className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,T.jsx)(v.A.Option,{value:"",children:"Select Branch"}),B?(0,T.jsx)(v.A.Option,{disabled:!0,children:(0,T.jsx)(S.A,{})}):null===D||void 0===D?void 0:D.map(e=>(0,T.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,T.jsx)("div",{children:(0,T.jsxs)(v.A,{value:ee,onChange:e=>{le(e),Z(1)},disabled:k,className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,T.jsx)(v.A.Option,{value:"",children:"Select status"}),(0,T.jsx)(v.A.Option,{value:"true",children:"Active"}),(0,T.jsx)(v.A.Option,{value:"false",children:"Inactive"})]})}),(0,T.jsx)("button",{onClick:()=>{ne()},className:"bg-header py-[6px] rounded-md md:flex hidden px-5 justify-center items-center  text-white",children:(0,T.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),P&&(0,T.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,T.jsx)("button",{onClick:()=>{ne()},className:"bg-header   py-[6px] rounded-md md:hidden flex px-5 justify-center items-center  text-white md:mt-0",children:(0,T.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,T.jsx)(j.A,{placement:"topLeft",title:"Add Client",children:(0,T.jsxs)("button",{onClick:()=>{e("/admin/client/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white whitespace-nowrap",children:[(0,T.jsx)(r.OiG,{}),(0,T.jsx)("span",{className:"text-[12px]",children:"Add Client"})]})}),(0,T.jsx)(j.A,{placement:"topLeft",title:"import Clients",children:(0,T.jsxs)("button",{onClick:()=>U(!0),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white whitespace-nowrap",children:[(0,T.jsx)(r.OiG,{}),(0,T.jsx)("span",{className:"text-[12px]",children:"importClients"})]})})]})]}),(0,T.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)("span",{className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,T.jsx)(v.A,{value:$,disabled:k,onChange:e=>{X(Number(e)),Z(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:p.qc.map(e=>(0,T.jsx)(v.A.Option,{value:e,children:e},e))})]}),(0,T.jsxs)("div",{className:"bg-white !min-w-[100px] mt-2 p-2 rounded-xl shadow-sm text-sm flex items-center justify-between",children:[(0,T.jsx)("span",{className:"text-gray-600 font-medium",children:"Total Client:"}),(0,T.jsx)("span",{className:"text-header font-semibold",children:I})]})]}),(0,T.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:L&&(0,T.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,T.jsx)("thead",{className:"",children:(0,T.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500]  h-[40px]",children:[(0,T.jsx)("th",{className:"tableHead w-[5%]",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"S.No."}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{}),(0,T.jsx)(x.BNo,{})]})]})}),(0,T.jsx)("th",{className:"tableHead",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Profile"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{}),(0,T.jsx)(x.BNo,{})]})]})}),(0,T.jsx)("th",{className:"tableHead w-[10%]",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Profile Image"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{}),(0,T.jsx)(x.BNo,{})]})]})}),(0,T.jsx)("th",{className:"tableHead",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Group"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{onClick:()=>re("groupName","asc")}),(0,T.jsx)(x.BNo,{onClick:()=>re("groupName","desc")})]})]})}),(0,T.jsx)("th",{className:"tableHead w-[10%]",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Client Name"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{onClick:()=>re("fullName","asc")}),(0,T.jsx)(x.BNo,{onClick:()=>re("fullName","desc")})]})]})}),(0,T.jsx)("th",{className:"tableHead w-[10%]",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Organization"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{onClick:()=>re("organizationName","asc")}),(0,T.jsx)(x.BNo,{onClick:()=>re("organizationName","desc")})]})]})}),(0,T.jsx)("th",{className:"tableHead",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Mb. No."}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{onClick:()=>re("mobile.number","asc")}),(0,T.jsx)(x.BNo,{onClick:()=>re("mobile.number","desc")})]})]})}),(0,T.jsx)("th",{className:"tableHead",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"Email Id"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{onClick:()=>re("email","asc")}),(0,T.jsx)(x.BNo,{onClick:()=>re("email","desc")})]})]})}),(0,T.jsx)("th",{className:"tableHead",children:(0,T.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,T.jsx)("span",{children:"PAN Number"}),(0,T.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,T.jsx)(x.Odn,{onClick:()=>re("clientProfile.penNumber","asc")}),(0,T.jsx)(x.BNo,{onClick:()=>re("clientProfile.penNumber","desc")})]})]})}),(0,T.jsx)("th",{className:"tableHead",children:"Status"}),(R||H||L)&&(0,T.jsx)("th",{className:"tableHead w-[5%]",children:"Action"})]})}),k?(0,T.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,T.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,T.jsx)(A.A,{})})}):(0,T.jsx)("tbody",{children:F&&(null===F||void 0===F?void 0:F.length)>0?null===F||void 0===F?void 0:F.map((s,a)=>{var t,i,n;return(0,T.jsxs)("tr",{className:"".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151]"),children:[(0,T.jsx)("td",{className:"tableData",children:a+1+(Q-1)*$}),(0,T.jsx)("td",{className:"tableData",children:(0,T.jsx)("span",{children:(0,T.jsx)(f.A,{size:50,strokeWidth:10,type:"circle",percent:null===s||void 0===s?void 0:s.profileCompletion,strokeColor:{"0%":"#E74C3C","50%":"#108ee9","100%":"#87d068"}})})}),(0,T.jsx)("td",{className:"tableData ",children:s.profileImage?(0,T.jsx)("img",{alt:"",src:"".concat("https://vigapi.vigorousit.com","/public/").concat(s.profileImage),className:"rounded-full min-w-10 min-h-10 w-10 h-10 ring-1 ring-amber-300"}):(0,T.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-500 flex items-center justify-center",children:(0,T.jsx)(r.x$1,{className:"w-5 h-5 text-white"})})}),(0,T.jsx)("td",{className:"tableData max-w-[150px] min-w-[150px]",children:(null===s||void 0===s?void 0:s.groupName)||"-"}),(0,T.jsx)("td",{className:"min-w-[200px]",style:{whiteSpace:"normal",padding:"0.5rem",fontSize:"12.8px",textAlign:"left"},children:(null===s||void 0===s?void 0:s.fullName)||"-"}),(0,T.jsx)("td",{className:"tableData",children:(null===s||void 0===s?void 0:s.organizationName)||"-"}),(0,T.jsx)("td",{className:"tableData",children:(null===s||void 0===s||null===(t=s.mobile)||void 0===t?void 0:t.code)+(null===s||void 0===s||null===(i=s.mobile)||void 0===i?void 0:i.number)||"-"}),(0,T.jsx)("td",{className:"tableData",children:(null===s||void 0===s?void 0:s.email)||"-"}),(0,T.jsx)("td",{className:"tableData",children:(null===s||void 0===s||null===(n=s.clientProfile)||void 0===n?void 0:n.penNumber)||"-"}),(0,T.jsx)("td",{className:"tableData",children:(0,T.jsx)(j.A,{placement:"topLeft",title:"".concat(null!==s&&void 0!==s&&s.status?"Tap to Inactive":"Tap to Active"),children:(0,T.jsx)(y.A,{checked:null===s||void 0===s?void 0:s.status,onChange:()=>{u().fire({title:"Are you sure?",text:"Do you want to ".concat(null!==s&&void 0!==s&&s.status?"deactivate":"activate"," this client?"),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, change it!",cancelButtonText:"Cancel",reverseButtons:!0}).then(e=>{e.isConfirmed&&l((0,h.al)({_id:null===s||void 0===s?void 0:s._id,status:!(null!==s&&void 0!==s&&s.status)})).then(e=>{null!==e&&void 0!==e&&e.error||de()})})},style:{backgroundColor:null!==s&&void 0!==s&&s.status?"#4caf50":"#f44336",transition:"background-color 0.3s ease"},height:20,width:40})})}),(R||H||L)&&(0,T.jsx)("td",{className:"tableData",children:(0,T.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[L&&(0,T.jsx)(j.A,{placement:"topLeft",title:"View Details",children:(0,T.jsx)("button",{onClick:()=>{e("/admin/client/clientView/".concat((0,m.w)(null===s||void 0===s?void 0:s._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,T.jsx)(x.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,T.jsx)(g.A,{menu:{items:[{key:"regenerate-password",label:(0,T.jsxs)("span",{onClick:()=>(e=>{u().fire({title:"Regenerate Password",text:"Are you sure to change password of ".concat(null===e||void 0===e?void 0:e.fullName,"?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(s=>{s.isConfirmed&&l((0,b.g5)({_id:null===e||void 0===e?void 0:e._id})).then(e=>{null!==e&&void 0!==e&&e.error?u().fire("Error!","Failed to Password Regenerated Successfully.","error"):u().fire("Password Regenerated!","Password has been Regenerated.","success")})})})(s),className:"flex items-center text-blue-700 hover:text-blue-600",children:[(0,T.jsx)(O.rw_,{className:"mr-2",size:14}),"Regenerate Password"]})},R&&{key:"edit",label:(0,T.jsxs)("span",{onClick:()=>e("/admin/client/edit/".concat((0,m.w)(null===s||void 0===s?void 0:s._id))),className:"flex items-center text-[#3c8dbc] hover:text-[#337ab7]",children:[(0,T.jsx)(r.Jcp,{className:"mr-2",size:16}),"Edit"]})},H&&{key:"delete",label:(0,T.jsxs)("span",{onClick:()=>(e=>{let s={_id:e};u().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&l((0,h.zW)(s)).then(e=>{Q>1&&1==(null===c||void 0===c?void 0:c.length)?Z(Number(Q-1)):de()})})})(null===s||void 0===s?void 0:s._id),className:"flex items-center text-rose-500 hover:text-rose-500",children:[(0,T.jsx)(o.tqC,{className:"mr-2",size:16}),"Delete"]})},...L?[{key:"createdAt",label:(0,T.jsxs)("span",{className:"flex justify-start items-center gap-1",children:[(0,T.jsx)("span",{className:"font-bold text-header",children:"Created At :"}),(0,T.jsx)("span",{className:"text-[12px]",children:z()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY hh:mm a")||"N/A"})]})}]:[],...L?[{key:"createdBy",label:(0,T.jsxs)("span",{className:"flex justify-start items-center gap-1",children:[(0,T.jsx)("span",{className:"font-bold text-header",children:"Created By :"}),(0,T.jsx)("span",{className:"text-[12px]",children:(null===s||void 0===s?void 0:s.createdBy)||"N/A"})]})}]:[]].filter(Boolean)},trigger:["click"],children:(0,T.jsx)(j.A,{placement:"topLeft",title:"Actions",children:(0,T.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,T.jsx)(_.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})})]})}):(0,T.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,T.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})]}),(null===c||void 0===c?void 0:c.length)>0&&(0,T.jsx)(C.A,{totalCount:I,pageSize:$,currentPage:Q,onChange:e=>Z(e)}),(0,T.jsx)(E,{fetchList:de,isOpen:V,onClose:()=>U(!1)})]})})}},38776:(e,l,s)=>{s.d(l,{A:()=>c});s(65043);var a=s(8354),t=s(99472),i=s(54522),n=s(53913),d=s(85157),r=s(29813),o=s(70579);const c=e=>{var l,s,c,u,m,x,p,h,v,j,f,y;let{open:g,onClose:N,summary:b={totalRecords:0,successful:0,failed:0,duplicates:0,validationErrors:0,underage:0},details:w={successfulImports:[],duplicates:[],validationErrors:[],underage:[]}}=e;const{Text:C,Title:A}=r.A,I=[{label:"Total Records",value:b.totalRecords,color:"default"},{label:"Successful",value:b.successful,color:"success"},{label:"Failed",value:b.failed,color:"danger"},{label:"Duplicates",value:b.duplicates,color:"warning"},{label:"Validation Errors",value:b.validationErrors,color:"error"},{label:"Underage",value:b.underage,color:"error"}],k=[{title:"Row Number",dataIndex:"rowNumber",key:"rowNumber",width:100},{title:"Name",dataIndex:["row","fullName"],key:"fullName"},{title:"Email",dataIndex:["row","email"],key:"email"},{title:"Mobile",key:"mobile",render:(e,l)=>(0,o.jsxs)("span",{children:[l.row.primaryMobileCode," ",l.row.primaryMobileNumber]})},{title:"Errors",key:"errors",render:(e,l)=>(0,o.jsx)(i.A,{size:"small",dataSource:l.errors,renderItem:e=>(0,o.jsx)(i.A.Item,{children:(0,o.jsxs)(C,{type:"danger",children:[(0,o.jsxs)("strong",{children:[e.field,":"]})," ",e.message]})})})}],D=[{title:"Name",dataIndex:"fullName",key:"fullName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Mobile",key:"mobile",render:e=>(0,o.jsxs)("span",{children:[e.primaryMobileCode," ",e.primaryMobileNumber]})}];return(0,o.jsxs)(n.A,{title:"Import Validation Results",open:g,onCancel:N,footer:null,width:1200,centered:!0,children:[(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsx)(A,{level:5,style:{marginBottom:16},children:"Import Summary"}),(0,o.jsx)("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:I.map(e=>(0,o.jsxs)("div",{style:{border:"1px solid #d9d9d9",borderRadius:8,padding:"8px 16px",minWidth:150,textAlign:"center"},children:[(0,o.jsx)(C,{type:"secondary",children:e.label}),(0,o.jsx)("div",{children:(0,o.jsx)(C,{strong:!0,style:{color:e.value>0?"success"===e.color?"#52c41a":"#ff4d4f":"inherit"},children:e.value})})]},e.label))})]}),(null===(l=w.validationErrors)||void 0===l?void 0:l.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.A,{orientation:"left",children:["Validation Errors (",null===(s=w.validationErrors)||void 0===s?void 0:s.length,")"]}),(0,o.jsx)(d.A,{columns:k,dataSource:w.validationErrors,rowKey:e=>"validation-error-".concat(e.rowNumber),pagination:!1,size:"small",bordered:!0,scroll:{x:!0},style:{marginBottom:24}})]}),(null===(c=w.duplicates)||void 0===c?void 0:c.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.A,{orientation:"left",children:["Duplicate Entries (",null===(u=w.duplicates)||void 0===u?void 0:u.length,")"]}),(0,o.jsx)(d.A,{columns:D,dataSource:w.duplicates,rowKey:"email",pagination:!1,size:"small",bordered:!0,scroll:{x:!0},style:{marginBottom:24}})]}),(null===(m=w.underage)||void 0===m?void 0:m.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.A,{orientation:"left",children:["Underage Entries (",null===(x=w.underage)||void 0===x?void 0:x.length,")"]}),(0,o.jsx)(d.A,{columns:[{title:"Name",dataIndex:"fullName",key:"fullName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Date of Birth",dataIndex:"dateOfBirth",key:"dateOfBirth"}],dataSource:w.underage,rowKey:"email",pagination:!1,size:"small",bordered:!0,scroll:{x:!0}})]}),(null===(p=w.successfulImports)||void 0===p?void 0:p.length)>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.A,{orientation:"left",children:["Successfully Imported (",null===(h=w.successfulImports)||void 0===h?void 0:h.length,")"]}),(0,o.jsx)(d.A,{columns:D,dataSource:w.successfulImports,rowKey:"email",pagination:!1,size:"small",bordered:!0,scroll:{x:!0}})]}),0===(null===(v=w.validationErrors)||void 0===v?void 0:v.length)&&0===(null===(j=w.duplicates)||void 0===j?void 0:j.length)&&0===(null===(f=w.underage)||void 0===f?void 0:f.length)&&0===(null===(y=w.successfulImports)||void 0===y?void 0:y.length)&&(0,o.jsx)(t.A,{image:t.A.PRESENTED_IMAGE_SIMPLE,description:"No import results to display",style:{margin:"24px 0"}})]})}}}]);
//# sourceMappingURL=8422.3ddeea5d.chunk.js.map