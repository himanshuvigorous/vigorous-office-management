"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1182],{91182:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(89379),d=t(24858),l=t(83003),n=t(73216),r=t(39160),i=t(15187),c=t(65043),o=t(64510),m=t(31174),u=t(735),x=(t(14118),t(31744),t(78729),t(33007),t(94084)),h=t(60446),p=t.n(h),j=t(65512),v=t(17995),N=t(70579);const b=()=>{const{register:e,handleSubmit:s,setValue:t,control:h,formState:{errors:b}}=(0,d.mN)({defaultValues:{attendees:[{name:"",email:"",status:""}],startTime:"",endTime:"",isAllDay:"",recurrence:{frequency:"",interval:1,endDate:""}}}),{userCompanyId:f,userType:y}=(0,u.A)(),{eventCalanderEnc:A}=(0,n.g)(),g=(0,m.Yc)(A),{fields:D,append:T,remove:q}=(0,d.jz)({control:h,name:"attendees"}),{companyList:Y}=(0,l.d4)(e=>e.company),{directorLists:w}=(0,l.d4)(e=>e.director),{branchList:S}=(0,l.d4)(e=>e.branch),I=(0,l.wA)(),O=(0,n.Zp)(),{eventCalanderDetails:C,loading:M}=(0,l.d4)(e=>e.eventCalander),Q=(0,d.FH)({control:h,name:"PDCompanyId",defaultValue:f});(0,c.useEffect)(()=>{var e;C&&(t("PDCompanyId",null===C||void 0===C?void 0:C.PDCompanyId),t("title",null===C||void 0===C?void 0:C.title),t("attendees",null===C||void 0===C?void 0:C.attendees),t("startTime",p()(null===C||void 0===C?void 0:C.startDate)),t("location",null===C||void 0===C?void 0:C.location),t("endTime",p()(null===C||void 0===C?void 0:C.endDate)),t("description",null===C||void 0===C?void 0:C.description),t("status",!0===(null===C||void 0===C?void 0:C.status)?"true":"false"),null===(e=C.attendees)||void 0===e||e.forEach((e,s)=>{t("attendees[".concat(s,"].email"),(null===e||void 0===e?void 0:e.email)||""),t("attendees[".concat(s,"].name"),(null===e||void 0===e?void 0:e.name)||""),t("attendees[".concat(s,"].status"),(null===e||void 0===e?void 0:e.status)||"Pending")}))},[C,t]),(0,c.useEffect)(()=>{g&&I((0,o.rw)({_id:g}))},[]);(0,d.FH)({control:h,name:"status",defaultValue:""});return(0,N.jsx)(r.A,{children:(0,N.jsx)("div",{className:"gap-4",children:(0,N.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:s(e=>{const s=(0,a.A)((0,a.A)({_id:g,branchId:C.branchId,companyId:Q,directorID:""},e),{},{title:e.title,description:e.description,location:e.location,startDate:p()(e.startTime),endDate:p()(e.endTime),attendees:e.attendees,status:"true"===(null===e||void 0===e?void 0:e.status)});I((0,o.oy)(s)).then(e=>{e.error||O(-1)})}),children:[(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:my-2",children:[(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Title ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({},e("title",{required:"Title is required"})),{},{type:"text",className:"".concat(i.Ol," ").concat(b.title?"border-[1px] ":"border-gray-300")})),b.title&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.title.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Description ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({},e("description",{required:"Description is required"})),{},{className:"".concat(i.Ol," ").concat(b.description?"border-[1px] ":"border-gray-300")})),b.description&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.description.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Location ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({},e("location",{required:"Location is required"})),{},{type:"text",className:"".concat(i.Ol," ").concat(b.location?"border-[1px] ":"border-gray-300")})),b.location&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.location.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Start Time ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(d.xI,{name:"startTime",control:h,showTime:!0,rules:{required:"Start Time  is required"},format:"DD/MM/YYYY hh:mm",render:e=>{let{field:s}=e;return(0,N.jsx)(x.A,{field:s,showTime:!0,format:"DD/MM/YYYY hh:mm",errors:b,disabledDate:e=>e&&e.isBefore(p()().endOf("day"),"day")})}}),b.startTime&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.startTime.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["End Time ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(d.xI,{name:"endTime",control:h,showTime:!0,rules:{required:"End Time  is required"},format:"DD/MM/YYYY hh:mm",render:e=>{let{field:s}=e;return(0,N.jsx)(x.A,{field:s,showTime:!0,format:"DD/MM/YYYY hh:mm",errors:b,disabledDate:e=>e&&(null===e||void 0===e?void 0:e.isBefore(p()().endOf("day"),"day"))})}}),b.endTime&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.endTime.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Status ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(d.xI,{name:"status",control:h,rules:{required:"status  is required"},render:e=>{let{field:s}=e;return(0,N.jsxs)(j.A,(0,a.A)((0,a.A)({},s),{},{className:" ".concat(i.Hy," ").concat(b.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select status",showSearch:!0,children:[(0,N.jsx)(j.A.Option,{value:"",children:"Select status"}),(0,N.jsx)(j.A.Option,{value:"true",children:"Active"}),(0,N.jsx)(j.A.Option,{value:"false",children:"InActive"})]}))}}),b.status&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.status.message})]})]}),D.map((s,t)=>{var l,n,r,c,o,m,u,x,p,v;return(0,N.jsxs)("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Attendee Name ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({},e("attendees[".concat(t,"].name"),{required:"Attendee name is required"})),{},{placeholder:"Attendee Name",type:"text",className:"".concat(i.Ol," ").concat(null!==(l=b.attendees)&&void 0!==l&&null!==(n=l[t])&&void 0!==n&&n.name?"border-[1px] ":"border-gray-300")})),(null===(r=b.attendees)||void 0===r||null===(c=r[t])||void 0===c?void 0:c.name)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.attendees[t].name.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(i.Q0),children:["Attendee Email ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({},e("attendees[".concat(t,"].email"),{required:"Attendee email is required"})),{},{placeholder:"Attendee Email",type:"email",className:"".concat(i.Ol," ").concat(null!==(o=b.attendees)&&void 0!==o&&null!==(m=o[t])&&void 0!==m&&m.email?"border-[1px] ":"border-gray-300")})),(null===(u=b.attendees)||void 0===u||null===(x=u[t])||void 0===x?void 0:x.email)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.attendees[t].email.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsx)("label",{className:"".concat(i.Q0),children:"Attendee Status"}),(0,N.jsx)(d.xI,{name:"attendees[".concat(t,"].status"),control:h,rules:{required:"status  is required"},render:e=>{let{field:s}=e;return(0,N.jsxs)(j.A,(0,a.A)((0,a.A)({},s),{},{className:" ".concat(i.Hy," ").concat(b.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select status",showSearch:!0,children:[(0,N.jsx)(j.A.Option,{value:"",children:"Select status"}),(0,N.jsx)(j.A.Option,{value:"accepted",children:"Accepted"}),(0,N.jsx)(j.A.Option,{value:"declined",children:"Declined"})]}))}}),(null===(p=b.attendees)||void 0===p||null===(v=p[t])||void 0===v?void 0:v.status)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.attendees[t].status.message})]}),(0,N.jsx)("div",{className:"flex md:justify-center justify-end items-end",children:(0,N.jsx)("button",{type:"button",onClick:()=>q(t),className:"text-gray-600 hover:text-gray-800 flex items-center justify-center border-2 border-gray-500 p-1 rounded-lg",children:(0,N.jsx)("i",{className:"fas fa-trash-alt flex items-center justify-center w-[25px] h-[25px]"})})})]})}),(0,N.jsx)("div",{className:"mt-4",children:(0,N.jsx)("button",{type:"button",onClick:()=>T({name:"",email:"",status:"accepted"}),className:"bg-header text-white py-1.5 px-3 text-nowrap text-sm rounded ",children:"Add More"})}),(0,N.jsx)("div",{className:"flex justify-end mt-4",children:(0,N.jsx)("button",{type:"submit",disabled:M,className:"".concat(M?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:M?(0,N.jsx)(v.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=1182.a202c75f.chunk.js.map