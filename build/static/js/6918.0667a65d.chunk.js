"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6918],{96918:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var a=s(89379),n=s(23156),r=s(39160),l=s(73216),d=s(83003),i=s(65043),c=s(33007),o=s(31174),p=s(47196),x=s(30064),m=s.n(x),h=s(24858),u=s(15187),j=s(735),v=s(78227),w=s(78729),b=s(65512),f=s(96651),N=s(4938),y=s(55971),g=s(60446),A=s.n(g),C=s(70579);const D=function(){const{register:e,setValue:t,formState:{errors:s},control:x}=(0,h.mN)(),g=(0,l.Zp)(),D=(0,d.wA)(),{userCompanyId:S,userType:I}=(0,j.A)(),{departmentListData:P,totalDepartmentCount:k,loading:L}=(0,d.d4)(e=>e.department),{companyList:O}=(0,d.d4)(e=>e.company),[E,F]=(0,i.useState)(1),[_,z]=(0,i.useState)(""),B=(0,h.FH)({control:x,name:"PDCompanyId",defaultValue:S}),q=(0,h.FH)({control:x,name:"status",defaultValue:""}),{canCreate:Y,canRead:M,canUpdate:R,canDelete:V}=(0,N.A)(),H=[B,q,_].join("-"),[J,T]=(0,i.useState)(!1);(0,i.useEffect)(()=>{J?1===E?G():F(1):T(e=>!0)},[H]),(0,i.useEffect)(()=>{G()},[E]);const G=()=>{const e={limit:10,page:E,reqPayload:{text:_,sort:!0,companyId:B,isPagination:!0,status:"true"===q||"false"!==q&&""}};D((0,c.zz)(e))},U=()=>{null!==O&&void 0!==O&&O.length||D((0,w.Ar)({isPagination:!1,text:"",sort:!0,status:!0}))};return(0,C.jsx)(r.A,{onChange:e=>{z(e)},children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"",children:(0,C.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,C.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===I&&(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsx)(h.xI,{name:"PDCompanyId",control:x,rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,C.jsxs)(b.A,(0,a.A)((0,a.A)({},t),{},{onFocus:U,className:"".concat(u.OJ," w-full ").concat(s.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Company",children:[(0,C.jsx)(b.A.Option,{value:"",children:"Select Company"}),null===O||void 0===O?void 0:O.map(e=>(0,C.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),s.PDCompanyId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:s.PDCompanyId.message})]}),(0,C.jsx)(h.xI,{name:"status",control:x,rules:{},render:e=>{let{field:t}=e;return(0,C.jsxs)(b.A,(0,a.A)((0,a.A)({},t),{},{className:" w-32 ".concat(u.Lp," ").concat(s.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(b.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(b.A.Option,{value:"true",children:" Active "}),(0,C.jsx)(b.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,C.jsx)("button",{onClick:()=>{t("status",""),t("PDBranchId",""),t("PdDepartmentId",""),t("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),M&&Y&&(0,C.jsx)(f.A,{placement:"topLeft",title:"New Department",children:(0,C.jsxs)("button",{onClick:()=>{g("/admin/department/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center whitespace-nowrap items-center space-x-2 text-white",children:[(0,C.jsx)(n.OiG,{}),(0,C.jsx)("span",{className:"text-[12px]",children:"Add Department"})]})})]})]})}),(0,C.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto rounded-xl mt-1",children:(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Department Name"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Email"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Mobile Number"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"created At"})})}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"created By"})})}),(0,C.jsxs)("th",{className:"border-none p-2 whitespace-nowrap",children:[(0,C.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,C.jsx)("span",{children:"Status"})})," "]}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),L?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(y.A,{})})}):(0,C.jsx)("tbody",{children:P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,t)=>{var s,a,r,l,d,i,x,h,u;return(0,C.jsxs)("tr",{className:" ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(E-1)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.name)&&void 0!==s?s:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e?void 0:e.email)&&void 0!==a?a:"-"}),(0,C.jsxs)("td",{className:"whitespace-nowrap border-none p-2 ",children:[null!==(r=null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)&&void 0!==r?r:"-"," ",null!==(d=null===e||void 0===e||null===(i=e.mobile)||void 0===i?void 0:i.number)&&void 0!==d?d:"-"]}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(x=A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==x?x:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(h=null===e||void 0===e?void 0:e.createdBy)&&void 0!==h?h:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,C.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(u="Inactive")?u:"-"})}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"null"===(null===e||void 0===e?void 0:e.companyId)||null===(null===e||void 0===e?void 0:e.companyId)?(0,C.jsx)("span",{className:"py-1.5 text-black ",children:" - "}):(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[R&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Edit",children:(0,C.jsx)("button",{onClick:()=>{g("/admin/department/edit/".concat((0,o.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(n.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),V&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Delete",children:(0,C.jsx)("button",{onClick:()=>(e=>{let t={_id:e};m().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&D((0,c.Eg)(t)).then(e=>{E>1&&1==(null===P||void 0===P?void 0:P.length)?F(Number(E-1)):!e.error&&G()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(p.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]},t)}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,C.jsx)(v.A,{totalCount:k,pageSize:10,currentPage:E,onChange:e=>{F(e)}})]})})}}}]);
//# sourceMappingURL=6918.0667a65d.chunk.js.map