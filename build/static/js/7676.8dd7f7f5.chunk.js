"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7676],{7676:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var a=t(89379),s=t(73216),r=t(83003),o=t(65043),d=t(30064),l=t.n(d),i=t(23156),c=t(47196),p=t(24858),u=t(39160),h=t(31174),x=t(31421),m=t(15187),v=t(78227),j=t(65512),y=t(96651),b=t(4938),w=t(60446),f=t.n(w),g=t(55971),N=t(31744),D=t(89427),A=t(70579);const C=function(){const{register:e,setValue:n,control:t,formState:{errors:d}}=(0,p.mN)(),w=(0,s.Zp)(),C=(0,r.wA)(),{projectserviceList:I,totalprojectserviceCount:S,loading:P}=(0,r.d4)(e=>e.projectservice),[B,T]=(0,o.useState)(""),_=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),[L,O]=(0,o.useState)(1),{companyList:k}=(0,r.d4)(e=>e.company),{branchList:q,loading:F}=(0,r.d4)(e=>e.branch),E=(0,p.FH)({control:t,name:"PDCompanyId",defaultValue:""}),Y=(0,p.FH)({control:t,name:"PDBranchId",defaultValue:""}),z=(0,p.FH)({control:t,name:"status",defaultValue:""}),V=[E,Y,z,B].join("-"),[H,J]=(0,o.useState)(!1);(0,o.useEffect)(()=>{H?1===L?R():O(1):J(e=>!0)},[V]),(0,o.useEffect)(()=>{R()},[L]);const R=()=>{const e={page:L,limit:10,reqPayload:{directorId:"",companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?E:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId,branchId:"company"===(null===_||void 0===_?void 0:_.userType)||"admin"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType)?Y:"companyBranch"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.branchId,text:B,sort:!0,status:"true"===z||"false"!==z&&"",isPagination:!0}};C((0,x.Dx)(e))},{canCreate:M,canRead:U,canUpdate:G,canDelete:W}=(0,b.A)();return(0,o.useEffect)(()=>{(E||"company"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType))&&C((0,N.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?E:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId}))},[E]),(0,A.jsxs)(u.A,{onChange:e=>{T(e)},children:[(0,A.jsx)("div",{className:"",children:(0,A.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,A.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1.5",children:["admin"===(null===_||void 0===_?void 0:_.userType)&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("select",(0,a.A)((0,a.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(m.OJ," ").concat(d.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===k||void 0===k?void 0:k.map(e=>(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),d.PDCompanyId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:d.PDCompanyId.message})]}),("admin"===(null===_||void 0===_?void 0:_.userType)||"company"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType))&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)(p.xI,{name:"PDBranchId",control:t,rules:{required:"Branch is required"},render:e=>{var n;let{field:t}=e;return(0,A.jsxs)(j.A,(0,a.A)((0,a.A)({},t),{},{className:"".concat(m.Lp," ").concat(d.PDBranchId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,A.jsx)(j.A.Option,{value:"",children:"Select Branch"}),F?(0,A.jsx)(j.A.Option,{disabled:!0,children:(0,A.jsx)(D.A,{})}):null===(n=(0,m._o)(q))||void 0===n?void 0:n.map(e=>(0,A.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),d.PDBranchId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:d.PDBranchId.message})]}),(0,A.jsx)(p.xI,{name:"status",control:t,rules:{},render:e=>{let{field:n}=e;return(0,A.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{className:" w-32 ".concat(m.Lp," ").concat(d.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(j.A.Option,{value:"",children:"Select Status"}),(0,A.jsx)(j.A.Option,{value:"true",children:" Active "}),(0,A.jsx)(j.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,A.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,A.jsx)("button",{onClick:()=>{n("status",""),n("PDBranchId",""),n("PdDepartmentId",""),n("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Reset"})}),M&&(0,A.jsx)(y.A,{placement:"topLeft",title:"",children:(0,A.jsxs)("button",{onClick:()=>{w("/admin/projects-services/create")},className:"bg-header px-2 py-1.5 rounded-md flex whitespace-nowrap justify-center items-center space-x-2 text-white",children:[(0,A.jsx)(i.OiG,{}),(0,A.jsx)("span",{className:"text-[12px]",children:"Add New Projects Services"})]})})]})]})}),(0,A.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:U&&(0,A.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,A.jsx)("thead",{className:"",children:(0,A.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(G||W)&&(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),P?(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,A.jsx)(g.A,{})})}):(0,A.jsx)("tbody",{children:I&&(null===I||void 0===I?void 0:I.length)>0?null===I||void 0===I?void 0:I.map((e,n)=>{var t,a,s,r;return(0,A.jsxs)("tr",{className:"".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:n+1+10*(L-1)}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=f()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==a?a:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.createdBy)&&void 0!==s?s:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,A.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(r="Inactive")?r:"-"})}),(G||W)&&(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,A.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[G&&(0,A.jsx)("button",{onClick:()=>{w("/admin/projects-services/edit/".concat((0,h.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,A.jsx)(i.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})}),W&&(0,A.jsx)("button",{onClick:()=>(e=>{let n={_id:e};l().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&C((0,x.YP)(n)).then(e=>{L>1&&1==(null===I||void 0===I?void 0:I.length)?O(Number(L-1)):R()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,A.jsx)(c.tqC,{className:"text-red-600 hover:text-red-500",size:16})})]})})]})}):(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:6,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===I||void 0===I?void 0:I.length)>0&&(0,A.jsx)(v.A,{totalCount:S,pageSize:10,currentPage:L,onChange:e=>{O(e)}})]})}}}]);
//# sourceMappingURL=7676.8dd7f7f5.chunk.js.map