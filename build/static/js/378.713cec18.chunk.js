"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[378],{70378:(e,a,s)=>{s.r(a),s.d(a,{default:()=>L});var t=s(65043),l=s(73216),n=s(35475),d=s(83003),r=s(65512),i=s(96651),o=s(60446),c=s.n(o),p=(s(735),s(4938)),m=s(39160),u=s(55971),x=s(78227),h=s(31174),v=(s(30064),s(27759)),j=s(23156),g=(s(86178),s(11906)),b=s(60184),f=(s(31744),s(15187)),N=s(24858),y=s(49804),w=s(94209),A=s(89427),I=s(10405),C=s(487),S=(s(63710),s(70579));const L=function(){var e,a,s,o;const{register:L,handleSubmit:D,control:k,formState:{errors:O},setValue:T}=(0,N.mN)({}),{RangePicker:Y}=C.A,_=(0,l.Zp)(),M=(0,d.wA)(),{branchList:P,branchListloading:R}=(0,d.d4)(e=>e.branch),{LeadmanagementFeatureListData:q,totalLeadmanagementFeatureCount:F,loading:U}=(0,d.d4)(e=>e.LeadmanagementFeature),{LeadCategoryListData:z,totalLeadCategoryCount:E,loading:B}=(0,d.d4)(e=>e.leadCategory),[G,V]=(0,t.useState)({isOpen:!1,leadId:null,portal:""}),{canCreate:H,canRead:Q,canUpdate:J,canDelete:Z}=(0,p.A)(),K=JSON.parse(localStorage.getItem("user_info_".concat(f.AU))),[W,X]=(0,n.ok)(),$=parseInt(W.get("page"))||1,ee=parseInt(W.get("limit"))||10,ae=W.get("status")||"",se=W.get("categoryId")||"",te=W.get("subCategory")||"",le=W.get("time1")||"",ne=W.get("time2")||"",[de,re]=(0,t.useState)($),[ie,oe]=(0,t.useState)(ee),[ce,pe]=(0,t.useState)(ae),[me,ue]=(0,t.useState)([le?c()(le):null,ne?c()(ne):null]),[xe,he]=(0,t.useState)(se),[ve,je]=(0,t.useState)(te),[ge,be]=(0,t.useState)("");(0,t.useEffect)(()=>{const e=new URLSearchParams;de>1&&e.set("page",de),(null===me||void 0===me?void 0:me.length)>0&&(e.set("time1",me[0]&&c()(me[0]).isValid()?c()(me[0]).format("YYYY-MM-DD"):""),e.set("time2",me[1]&&c()(me[1]).isValid()?c()(me[1]).format("YYYY-MM-DD"):"")),xe&&e.set("categoryId",xe),ie&&e.set("limit",ie),ve&&e.set("subCategory",ve),ce&&e.set("status",ce),X(e)},[ce,ge,xe,ve,de,ie,me]),(0,t.useEffect)(()=>{fe()},[ce,ge,xe,ve,de,ie,me]),(0,t.useEffect)(()=>{M((0,I.jN)({companyId:"company"===(null===K||void 0===K?void 0:K.userType)?null===K||void 0===K?void 0:K._id:null===K||void 0===K?void 0:K.companyId,text:"",sort:!0,status:!0,isPagination:!1}))},[]);const fe=()=>{const e={limit:ie,page:de,reqPayload:{text:ge,sort:!0,leadCategoryId:xe,leadSubCategoryId:ve,startDate:(null===me||void 0===me?void 0:me.length)>0&&me[0]?(0,f.Tk)(me[0]):null,endDate:(null===me||void 0===me?void 0:me.length)>1&&me[1]?(0,f.Tk)(me[1]):null,companyId:null===K||void 0===K?void 0:K.companyId,branchId:null===K||void 0===K?void 0:K.branchId,isPagination:!0,status:ce,assignedToId:null===K||void 0===K?void 0:K._id}};M((0,v.qc)(e))};return"employee"!==(null===K||void 0===K?void 0:K.userType)?(0,S.jsx)(m.A,{children:(0,S.jsx)("div",{className:"bg-red-100 text-red-800 p-4 rounded-md mt-2",children:(0,S.jsx)("p",{className:"text-center font-semibold",children:"You are not an employee. This page is viewable for employees only."})})}):(0,S.jsxs)(m.A,{onChange:e=>{be(e)},children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 gap-2 xl:grid-cols-4 2xl:grid-cols-6 lg:grid-cols-4 sm:grid-cols-2 md:grid-cols-4 w-full items-center",children:[(0,S.jsx)("div",{className:"w-full",children:(0,S.jsxs)(r.A,{onChange:e=>{he(e),re(1)},value:xe,onFocus:()=>{T("subCategory","")},className:" ".concat(f.Lp),placeholder:"Select Category",showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(r.A.Option,{value:"",children:"Select Category"}),B?(0,S.jsx)(r.A.Option,{disabled:!0,children:(0,S.jsx)(A.A,{})}):null===(e=(0,f._o)(z,"name"))||void 0===e?void 0:e.map(e=>(0,S.jsxs)(r.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.name," "]}))]})}),(0,S.jsx)("div",{className:"w-full",children:(0,S.jsxs)(r.A,{className:" ".concat(f.Lp),placeholder:"Select SubCategory",showSearch:!0,value:ve,onChange:e=>{je(e),re(1)},filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(r.A.Option,{value:"",children:"Select SubCategory"}),B?(0,S.jsx)(r.A.Option,{disabled:!0,children:(0,S.jsx)(A.A,{})}):null===(a=(0,f._o)(z,"name"))||void 0===a||null===(s=a.find(e=>(null===e||void 0===e?void 0:e._id)==xe))||void 0===s||null===(o=s.leadSubCategoryData)||void 0===o?void 0:o.map(e=>(0,S.jsxs)(r.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.name," "]}))]})}),(0,S.jsx)("div",{className:"",children:(0,S.jsxs)(r.A,{value:ce,onChange:e=>{pe(e),re(1)},className:" w-32 ".concat(f.Lp," ").concat(O.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,disabled:U,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,S.jsx)(r.A.Option,{value:"",children:"Select Status"}),null===g.A||void 0===g.A?void 0:g.A.map(e=>(0,S.jsx)(r.A.Option,{value:e,children:e},e))]})}),(0,S.jsx)("div",{className:"w-full",children:(0,S.jsx)(Y,{value:me,onChange:e=>{ue(e),re(1)},format:"YYYY-MM-DD",getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"})}),(0,S.jsx)("div",{className:"flex justify-end  items-center",children:(0,S.jsx)("button",{onClick:()=>{re(1),he(""),je(""),pe(""),ue([]),oe(10),be("")},className:"bg-header w-full  py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,S.jsx)("span",{className:"text-[12px]",children:"Reset"})})}),H&&(0,S.jsx)(i.A,{placement:"topLeft",title:"Add GST Type",children:(0,S.jsxs)("button",{onClick:()=>_("/admin/lead-management/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,S.jsx)(j.OiG,{}),(0,S.jsx)("span",{className:"text-[12px]",children:"Add Leads"})]})})]}),(0,S.jsxs)("div",{className:"flex justify-between items-center m-1.5",children:[(0,S.jsxs)("div",{className:"flex items-center p-2 gap-2",children:[(0,S.jsx)("span",{className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,S.jsx)(r.A,{value:ie,onChange:e=>{oe(Number(e)),re(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:f.jR.map(e=>(0,S.jsx)(r.A.Option,{value:e,children:e},e))})]}),H&&(0,S.jsx)(i.A,{placement:"topLeft",title:"Add GST Type",children:(0,S.jsxs)("button",{onClick:()=>_("/admin/lead-management/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,S.jsx)(j.OiG,{}),(0,S.jsx)("span",{className:"text-[12px]",children:"Add Leads"})]})})]}),U?(0,S.jsx)(u.A,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto rounded-xl mt-1",children:Q&&(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,S.jsx)("thead",{className:"",children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Lead "})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Category "})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Interest "})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Sourse "})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Assigned To "})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"created At"})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"created By"})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Status"})})}),(0,S.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),U?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,S.jsx)(u.A,{})})}):(0,S.jsx)("tbody",{children:q&&(null===q||void 0===q?void 0:q.length)>0?null===q||void 0===q?void 0:q.map((e,a)=>{var s,t,l,n,d,r,o,p;return(0,S.jsxs)("tr",{className:" ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:a+1+(de-1)*ie}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.name)&&void 0!==s?s:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(t=null===e||void 0===e?void 0:e.categoryName)&&void 0!==t?t:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(l=null===e||void 0===e?void 0:e.intrested)&&void 0!==l?l:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.source)&&void 0!==n?n:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d=null===e||void 0===e||null===(r=e.userData)||void 0===r?void 0:r.fullName)&&void 0!==d?d:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(o=c()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==o?o:"-"}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(p=null===e||void 0===e?void 0:e.createdBy)&&void 0!==p?p:"-"}),Q&&(0,S.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(0,S.jsx)(i.A,{placement:"topLeft",children:(0,S.jsx)("select",{className:"border-[1px] px-2 py-1.5 rounded-lg text-[12px]",value:null===e||void 0===e?void 0:e.status,onChange:a=>((e,a)=>{const s={_id:a,status:e};M((0,v.Il)(s)).then(e=>{null!==e&&void 0!==e&&e.error||fe()})})(a.target.value,null===e||void 0===e?void 0:e._id),children:null===g.A||void 0===g.A?void 0:g.A.map(e=>(0,S.jsx)("option",{value:e,children:e},e))})})}),(0,S.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"null"===(null===e||void 0===e?void 0:e.companyId)||null===(null===e||void 0===e?void 0:e.companyId)?(0,S.jsx)("span",{className:"py-1.5 text-black ",children:" - "}):(0,S.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[Q&&(0,S.jsx)(i.A,{placement:"topLeft",title:"view",children:(0,S.jsx)("button",{onClick:()=>{_("/admin/lead-management/view/".concat((0,h.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(b.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),Q&&(0,S.jsx)(i.A,{placement:"topLeft",title:"Tranfer Lead",children:(0,S.jsx)("button",{onClick:()=>{V({isOpen:!0,leadId:e,portal:"manager"})},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(y.Bp7,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})]})})]},a)}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,S.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,S.jsx)(x.A,{totalCount:F,pageSize:ie,currentPage:de,onChange:e=>re(e)})})]}),(0,S.jsx)(w.A,{transferModal:G,onclose:()=>{V({isOpen:!1,leadId:null,portal:""})},LeadmanagementtransferLoading:U})]})}},94209:(e,a,s)=>{s.d(a,{A:()=>x});var t=s(89379),l=s(53913),n=s(65512),d=s(91686),r=s(15187),i=s(24858),o=s(83003),c=s(65043),p=s(42837),m=s(27759),u=s(70579);const x=e=>{let{transferModal:a,onclose:s,LeadmanagementtransferLoading:x}=e;const{register:h,control:v,handleSubmit:j,reset:g,formState:{errors:b}}=(0,i.mN)(),{employeList:f}=(0,o.d4)(e=>e.employe),N=(0,o.wA)();(0,c.useEffect)(()=>{null!==a&&void 0!==a&&a.isOpen&&y()},[a]);const y=()=>{var e,s,t;const l={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:null===a||void 0===a||null===(e=a.leadId)||void 0===e?void 0:e.companyId,directorId:null===a||void 0===a||null===(s=a.leadId)||void 0===s?void 0:s.directorId,branchId:null===a||void 0===a||null===(t=a.leadId)||void 0===t?void 0:t.branchId,isBranch:!0,isDirector:!0};N((0,p.qV)(l))};return(0,u.jsx)(l.A,{visible:null===a||void 0===a?void 0:a.isOpen,onCancel:()=>{s(),g()},footer:null,title:"Apply Leave",width:1e3,height:400,className:"antmodalclassName",children:(0,u.jsxs)("form",{autoComplete:"off",className:"",onSubmit:j(e=>{var t,l,n,d,r;const i={companyId:null===a||void 0===a||null===(t=a.leadId)||void 0===t?void 0:t.companyId,directorId:null===a||void 0===a||null===(l=a.leadId)||void 0===l?void 0:l.directorId,branchId:null===a||void 0===a||null===(n=a.leadId)||void 0===n?void 0:n.branchId,leadId:null===a||void 0===a||null===(d=a.leadId)||void 0===d?void 0:d._id,fromUser:null===a||void 0===a||null===(r=a.leadId)||void 0===r?void 0:r.assignedToId,toUser:null===e||void 0===e?void 0:e.employeeId,remark:null===e||void 0===e?void 0:e.remark};N((0,m.HU)(i)).then(e=>{e.error||(s(),g())})}),children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-2 md:my-2",children:[(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("label",{className:"".concat(r.Q0),children:["Transfer to ",(0,u.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,u.jsx)(i.xI,{control:v,name:"employeeId",rules:{required:"Task Priority is required"},render:e=>{let{field:a}=e;return(0,u.jsxs)(n.A,(0,t.A)((0,t.A)({},a),{},{placeholder:"Select Transfer To",className:"".concat(r.Hy," "),showSearch:!0,getPopupContainer:()=>document.body,popupClassName:"!z-[1580]",filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,u.jsx)(n.A.Option,{value:"",children:" Select Transfer to "}),null===f||void 0===f?void 0:f.map((e,a)=>(0,u.jsx)(n.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},a))]}))}}),b.employeeId&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:b.employeeId.message})]}),(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("label",{className:"".concat(r.Q0),children:["remark ",(0,u.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,u.jsx)("input",(0,t.A)((0,t.A)({type:"text"},h("remark",{required:"remark is required"})),{},{className:"placeholder: ".concat(r.Ol," ").concat(b.remark?"border-[1px] ":"border-gray-300"),placeholder:"Enter remark"})),b.remark&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:b.remark.message})]})]}),(0,u.jsx)("div",{className:"flex justify-end ",children:(0,u.jsx)("button",{type:"submit",disabled:x,className:"".concat(x?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3 "),children:x?(0,u.jsx)(d.A,{}):"Submit"})})]})})}}}]);
//# sourceMappingURL=378.713cec18.chunk.js.map