"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5443],{55443:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var n=l(89379),a=l(24858),o=l(83003),i=l(73216),d=l(15187),r=l(65043),s=(l(30064),l(31744)),c=l(78729),m=l(39160),u=l(97326),p=l(53913),v=l(65512),h=l(23156),x=(l(86178),l(60446)),y=l.n(x),f=l(78227),g=l(12106),D=(l(42837),l(94084)),j=l(78566),N=l(16210),b=l(33007),w=l(70337),I=l(40088),A=l(12208),T=l(69223),C=l(37762),k=l(64857),S=l(55971),F=l(60184),P=l(6720),L=l(50822),Y=l(35475),O=l(31174),_=l(70579);const E=function(){var e,t;const{control:l,formState:{errors:x},setValue:E}=(0,a.mN)(),M=(0,i.Zp)(),z=(0,o.wA)(),[R]=(0,Y.ok)(),H=R.get("month"),B=R.get("year"),V=(R.get("fromDashboard"),(()=>{if(H&&B){const e=["january","february","march","april","may","june","july","august","september","october","november","december"].indexOf(H.toLowerCase());if(-1!==e){const t=parseInt(B);return{startDate:y()().year(t).month(e).startOf("month"),endDate:y()().year(t).month(e).endOf("month")}}}return null})()),{pendingInvoiceReportList:W,totalpendingInvoiceCount:G,pendingInvoiceReportFunc_loading:U,totalFeePendingInvoiceCount:q}=(0,o.d4)(e=>e.reports),[K,J]=(0,r.useState)({isOpen:!1,data:null}),[Z,Q]=(0,r.useState)(""),[X,$]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[le,ne]=(0,r.useState)(10),ae=(0,r.useRef)(!1),oe=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),{clientGroupList:ie,totalClientGroupCount:de}=(0,o.d4)(e=>e.clientGroup),[re,se]=(0,r.useState)(1),[ce,me]=(0,r.useState)(""),{companyList:ue}=(0,o.d4)(e=>e.company),{branchList:pe}=(0,o.d4)(e=>e.branch),{designationList:ve}=(0,o.d4)(e=>e.designation),{departmentListData:he}=(0,o.d4)(e=>e.department),{taskTypeList:xe,totalTaskTypeCount:ye}=(0,o.d4)(e=>e.taskType),{clientList:fe,totalCompanyCount:ge,loading:De}=(0,o.d4)(e=>e.client),je=(0,a.FH)({control:l,name:"PDCompanyId",defaultValue:""}),Ne=(0,a.FH)({control:l,name:"PDBranchId",defaultValue:""}),be=(0,a.FH)({control:l,name:"status",defaultValue:""}),we=((0,a.FH)({control:l,name:"workType",defaultValue:""}),(0,a.FH)({control:l,name:"shift",defaultValue:""}),(0,a.FH)({control:l,name:"daterange",defaultValue:""}),(0,a.FH)({control:l,name:"employeeId",defaultValue:""}),(0,a.FH)({control:l,name:"isTL"}),(0,a.FH)({control:l,name:"isHR"}),(0,a.FH)({control:l,name:"PDDepartmentId"})),Ie=((0,a.FH)({control:l,name:"designation"}),(0,a.FH)({control:l,name:"clientList",defaultValue:""})),Ae=(0,a.FH)({control:l,name:"taskType",defaultValue:""}),Te=(0,a.FH)({control:l,name:"groupType",defaultValue:""}),Ce=(0,a.FH)({control:l,name:"startDate",defaultValue:(null===V||void 0===V?void 0:V.startDate)||y()().subtract(1,"month")}),ke=(0,a.FH)({control:l,name:"endDate",defaultValue:(null===V||void 0===V?void 0:V.endDate)||y()()});(0,r.useEffect)(()=>{const e=setTimeout(()=>{me(Z)},500);return()=>{clearTimeout(e)}},[Z]),(0,r.useEffect)(()=>{je&&E("PDBranchId","")},[je]);const Se=()=>{z((0,b.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:je,branchId:Ne}))};(0,r.useEffect)(()=>{V&&(E("startDate",V.startDate),E("endDate",V.endDate))},[V,E]),(0,r.useEffect)(()=>{ae.current?Fe(ce):(ae.current=!0,Fe(""))},[re,le,ce]);const Fe=e=>{let t={currentPage:re,pageSize:le,reqPayload:{text:Z,status:be,sort:!0,isPagination:!0,clientId:Ie,directorId:"",departmentId:we,companyId:"admin"===(null===oe||void 0===oe?void 0:oe.userType)?je:"company"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.companyId,branchId:"company"===(null===oe||void 0===oe?void 0:oe.userType)||"admin"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType)?Ne:"companyBranch"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.branchId,groupId:Te,taskTypeId:Ae,startDate:Ce?y()(Ce).format("YYYY-MM-DD"):"",endDate:ke?y()(ke).format("YYYY-MM-DD"):""}};z((0,g.Kd)(t))};(0,r.useEffect)(()=>{(je||"company"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType))&&z((0,s.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===oe||void 0===oe?void 0:oe.userType)?je:"company"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.companyId}))},[je]),(0,r.useEffect)(()=>{"admin"===(null===oe||void 0===oe?void 0:oe.userType)&&z((0,c.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,r.useEffect)(()=>{Pe()},[]);const Pe=()=>{let e={companyId:"admin"===(null===oe||void 0===oe?void 0:oe.userType)?je:"company"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.companyId,branchId:"company"===(null===oe||void 0===oe?void 0:oe.userType)||"admin"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType)?Ne:"companyBranch"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.branchId,directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1};z((0,w.Aq)(e))};(0,r.useEffect)(()=>{Le()},[je,Ne]);const Le=()=>{const e={companyId:"admin"===(null===oe||void 0===oe?void 0:oe.userType)?je:"company"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.companyId,branchId:"company"===(null===oe||void 0===oe?void 0:oe.userType)||"admin"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType)?Ne:"companyBranch"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.branchId,directorId:"",text:"",sort:!0,status:"",isPagination:!1};z((0,I.mY)(e))};(0,r.useEffect)(()=>{Ye()},[re,Ne,je]);const Ye=()=>{const e={companyId:"admin"===(null===oe||void 0===oe?void 0:oe.userType)?je:"company"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.companyId,branchId:"company"===(null===oe||void 0===oe?void 0:oe.userType)||"admin"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType)?Ne:"companyBranch"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.branchId,directorId:"",text:"",sort:!0,status:!0,isPagination:!1};z((0,A.J_)(e))},Oe=async()=>{const e=await(null===L.K||void 0===L.K?void 0:L.K.pendingInvoiceReportFunc({currentPage:1,pageSize:1,reqPayload:{text:Z,status:be,sort:!0,isPagination:!1,clientId:Ie,directorId:"",departmentId:we,companyId:"admin"===(null===oe||void 0===oe?void 0:oe.userType)?je:"company"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.companyId,branchId:"company"===(null===oe||void 0===oe?void 0:oe.userType)||"admin"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType)?Ne:"companyBranch"===(null===oe||void 0===oe?void 0:oe.userType)?null===oe||void 0===oe?void 0:oe._id:null===oe||void 0===oe?void 0:oe.branchId,groupId:Te,taskTypeId:Ae,startDate:Ce?y()(Ce).format("YYYY-MM-DD"):"",endDate:ke?y()(ke).format("YYYY-MM-DD"):""}}));return e&&null!==e&&void 0!==e&&e.data?e.data.docs:null},_e=[{key:"1",label:(0,_.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,_.jsxs)("div",{className:"bg-[#ececec] space-y-1",children:[(0,_.jsxs)("div",{className:"grid 2xl:grid-cols-6 xl:grid-cols-5 lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-3 grid-cols-1 gap-2 flex-wrap text-[14px] rounded-md",children:["admin"===(null===oe||void 0===oe?void 0:oe.userType)&&(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)(a.xI,{name:"PDCompanyId",control:l,render:e=>{let{field:t}=e;return(0,_.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{className:" ".concat(d.Lp," ").concat(x.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(v.A.Option,{value:"",children:"Select Company"}),null===ue||void 0===ue?void 0:ue.map(e=>(0,_.jsxs)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),x.PDCompanyId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:x.PDCompanyId.message})]}),("admin"===(null===oe||void 0===oe?void 0:oe.userType)||"company"===(null===oe||void 0===oe?void 0:oe.userType)||"companyDirector"===(null===oe||void 0===oe?void 0:oe.userType))&&(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)(a.xI,{name:"PDBranchId",control:l,render:e=>{let{field:t}=e;return(0,_.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{className:" ".concat(d.Lp," ").concat(x.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(v.A.Option,{value:"",children:"Select Branch"}),null===pe||void 0===pe?void 0:pe.map(e=>(0,_.jsxs)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),x.PDBranchId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:x.PDBranchId.message})]}),(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)(a.xI,{name:"PDDepartmentId",control:l,rules:{required:"Department is required"},render:e=>{let{field:t}=e;return(0,_.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{className:"".concat(d.Lp," ").concat(x.PDDepartmentId?"border-[1px] ":"border-gray-300"),onChange:e=>{var l;t.onChange(e),E("PDDepartmentId",l=e),E("PDDesignationId",""),z((0,N.EF)({text:"",sort:!0,status:!0,isPagination:!1,departmentId:l,companyId:je}))},onFocus:Se,placeholder:"Select Department",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(j.c,{value:"",children:"Select Department"}),null===he||void 0===he?void 0:he.map(e=>(0,_.jsx)(j.c,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}}),x.employeeId&&(0,_.jsx)("p",{className:"text-red-500 text-sm",children:x.employeeId.message})]}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(a.xI,{name:"clientList",control:l,render:e=>{let{field:t}=e;return(0,_.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{className:" ".concat(d.Lp," ").concat(x.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select client",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(v.A.Option,{value:"",children:"Select Client "}),null===fe||void 0===fe?void 0:fe.map(e=>(0,_.jsxs)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}})}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(a.xI,{name:"taskType",control:l,render:e=>{let{field:t}=e;return(0,_.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{className:" ".concat(d.Lp," ").concat(x.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Task Type",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(v.A.Option,{value:"",children:"Select Task Type "}),null===xe||void 0===xe?void 0:xe.map(e=>(0,_.jsxs)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.name," "]}))]}))}})}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(a.xI,{name:"groupType",control:l,render:e=>{let{field:t}=e;return(0,_.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{className:" ".concat(d.Lp," ").concat(x.groupType?"border-[1px] ":"border-gray-300"),placeholder:"Select Group Type",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,_.jsx)(v.A.Option,{value:"",children:"Select Group Type "}),null===ie||void 0===ie?void 0:ie.map(e=>(0,_.jsxs)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}})}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(a.xI,{name:"startDate",control:l,render:e=>{let{field:t}=e;return(0,_.jsx)(D.A,{report:!0,defaultValue:(null===V||void 0===V?void 0:V.startDate)||y()().subtract(1,"month"),size:"middle",field:t,errors:x,placeholder:"Start Date"})}})}),(0,_.jsx)("div",{className:"",children:(0,_.jsx)(a.xI,{name:"endDate",control:l,render:e=>{let{field:t}=e;return(0,_.jsx)(D.A,{report:!0,defaultValue:(null===V||void 0===V?void 0:V.endDate)||y()(),size:"middle",field:t,errors:x,placeholder:"End Date"})}})})]}),(0,_.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,_.jsx)("button",{onClick:()=>{E("PDCompanyId",""),E("PDBranchId",""),E("PDDepartmentId",""),E("clientList",""),E("taskType",""),E("groupType",""),E("startDate",null),E("endDate",null),se(1),Fe("")},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,_.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,_.jsx)("button",{onClick:()=>{se(1),Fe(ce)},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,_.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,_.jsxs)(m.A,{onChange:e=>{Q(e)},children:[(0,_.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,_.jsx)("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm border border-gray-200",children:(0,_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,_.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,_.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,_.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Total Pending Invoice Amount"}),(0,_.jsx)("p",{className:"text-sm text-gray-600",children:"Sum of all pending invoice fees"})]})]}),(0,_.jsxs)("div",{className:"text-right",children:[(0,_.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:q?"\u20b9".concat(parseFloat(q).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})):"\u20b90.00"}),(0,_.jsxs)("div",{className:"text-sm text-gray-500",children:[G," ",1===G?"record":"records"]})]})]})}),(0,_.jsxs)("div",{className:"space-y-1",children:[(0,_.jsx)(u.A,{className:"custom-collapse",items:_e,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,_.jsx)(P.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,_.jsxs)("div",{className:"space-y-1.5 sm:flex grid grid-cols-1 justify-between items-center",children:[(0,_.jsxs)("div",{className:"flex py-1 items-center gap-2",children:[(0,_.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,_.jsxs)(v.A,{id:"pageSize",value:le,onChange:e=>{ne(Number(e)),se(1)},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:[(0,_.jsx)(v.A.Option,{value:10,children:"10"}),(0,_.jsx)(v.A.Option,{value:25,children:"25"}),(0,_.jsx)(v.A.Option,{value:50,children:"50"}),(0,_.jsx)(v.A.Option,{value:100,children:"100"})]})]}),(0,_.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,_.jsxs)("button",{onClick:()=>{(async()=>{$(!0);try{const e=new T.Workbook,t=e.addWorksheet("Pending Invoice Report");t.columns=[{header:"S.No.",key:"sno",width:10},{header:"Completed Date",key:"completedDate",width:25},{header:"Client Name",key:"clientName",width:30},{header:"Department Name",key:"departmentName",width:25},{header:"Task Name",key:"taskName",width:30},{header:"Assign To",key:"assignTo",width:30},{header:"Created Date",key:"createdDate",width:25},{header:"Gross Amount",key:"grossAmount",width:20}],t.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const l=await Oe();if(!l)return;const n=l.reduce((e,t)=>e+(parseFloat(null===t||void 0===t?void 0:t.fee)||0),0),a=l.map((e,t)=>{var l,n;return{sno:t+1,completedDate:null!==e&&void 0!==e&&e.taskCompletedAt?y()(e.taskCompletedAt).format("DD-MM-YYYY hh:mm a"):"-",clientName:(null===e||void 0===e||null===(l=e.clientData)||void 0===l?void 0:l.fullName)||"-",departmentName:(null===e||void 0===e||null===(n=e.departmentData)||void 0===n?void 0:n.name)||"-",taskName:(null===e||void 0===e?void 0:e.taskName)||"-",assignTo:Array.isArray(null===e||void 0===e?void 0:e.employeData)?e.employeData.map(e=>(null===e||void 0===e?void 0:e.fullName)||"-").join(", "):(null===e||void 0===e?void 0:e.employeData)||"-",createdDate:null!==e&&void 0!==e&&e.createdAt?y()(e.createdAt).format("DD-MM-YYYY hh:mm a"):"-",grossAmount:null!==e&&void 0!==e&&e.fee?"\u20b9".concat(parseFloat(e.fee).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})):"-"}});t.addRow({sno:"TOTAL",completedDate:"",clientName:"",departmentName:"",taskName:"",assignTo:"",createdDate:"",grossAmount:"\u20b9".concat(n.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))}).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD4E5F7"}},e.font={bold:!0,size:12},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thick"},left:{style:"thin"},bottom:{style:"thick"},right:{style:"thin"}}}),t.addRow({}),null===a||void 0===a||a.forEach(e=>{t.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),t.autoFilter={from:"A1",to:"H1"},e.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download="Pending_Invoice_Report.xlsx",l.click(),$(!1)})}catch(e){console.error("Error generating Excel:",e),$(!1)}})()},disabled:X||ee,className:"py-2 my-0.5 rounded-md flex px-6 justify-center items-center text-white transition-colors duration-200 ".concat(X||ee?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:[X?(0,_.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,_.jsx)(F.Ru,{className:"mr-2 text-[14px]"}),(0,_.jsx)("span",{className:"text-[12px]",children:X?"Exporting Excel...":"Excel"})]}),(0,_.jsxs)("button",{onClick:()=>{(async()=>{te(!0);try{const e=new C.Ay({orientation:"landscape",unit:"pt"});e.setFontSize(16);const t=["S.No.","Completed Date","Client Name","Department Name","Task Name","Assign To","Created Date","Gross Amount"],l=await Oe();if(!l)return;const n=l.reduce((e,t)=>e+(parseFloat(null===t||void 0===t?void 0:t.fee)||0),0),a=l.map((e,t)=>{var l,n;return[t+1,null!==e&&void 0!==e&&e.taskCompletedAt?y()(e.taskCompletedAt).format("DD-MM-YYYY hh:mm"):"-",(null===e||void 0===e||null===(l=e.clientData)||void 0===l?void 0:l.fullName)||"-",(null===e||void 0===e||null===(n=e.departmentData)||void 0===n?void 0:n.name)||"-",(null===e||void 0===e?void 0:e.taskName)||"-",Array.isArray(null===e||void 0===e?void 0:e.employeData)?e.employeData.map(e=>(null===e||void 0===e?void 0:e.fullName)||"-").join(", "):(null===e||void 0===e?void 0:e.employeData)||"-",null!==e&&void 0!==e&&e.createdAt?y()(e.createdAt).format("DD-MM-YYYY hh:mm"):"-",null!==e&&void 0!==e&&e.fee?"\u20b9".concat(parseFloat(e.fee).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})):"-"]}),o=["TOTAL","","","","","","","\u20b9".concat(n.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))];a.unshift(o),(0,k.Ay)(e,{startY:40,head:[t],body:a,margin:{horizontal:10},columnStyles:{0:{halign:"center",cellWidth:40},1:{halign:"center",cellWidth:80},2:{halign:"left",cellWidth:100},3:{halign:"left",cellWidth:80},4:{halign:"left",cellWidth:120},5:{halign:"left",cellWidth:100},6:{halign:"center",cellWidth:80},7:{halign:"right",cellWidth:80}},styles:{cellPadding:6,fontSize:9,valign:"middle",halign:"left",lineWidth:.5},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold",halign:"center",lineWidth:.5},alternateRowStyles:{fillColor:[245,245,245]},didParseCell:function(e){if(1===e.row.index)return e.cell.styles.fillColor=[212,229,247],e.cell.styles.fontStyle="bold",e.cell.styles.halign="center",e.cell.styles.textColor=[0,0,0],void(e.cell.styles.lineWidth=1)}}),e.save("Pending_Invoice_Report.pdf"),te(!1)}catch(e){console.error("Error generating PDF:",e),te(!1)}})()},disabled:X||ee,className:"py-2 my-0.5 rounded-md flex px-6 justify-center items-center text-white transition-colors duration-200 ".concat(X||ee?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:[ee?(0,_.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,_.jsx)(F.kl1,{className:"mr-2 text-[14px]"}),(0,_.jsx)("span",{className:"text-[12px]",children:ee?"Exporting PDF...":"PDF"})]})]})]})]}),(0,_.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,_.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[5%]",children:"S.No."}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left",children:"Completed Date"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left",children:"Client name"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left",children:"Department Name"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left",children:"Task Name"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left",children:"Assign To"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left",children:"Created Date"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"Gross Amount"}),(0,_.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"Actions"})]})}),U?(0,_.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,_.jsx)("td",{colSpan:12,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:(0,_.jsx)(S.A,{})})}):(0,_.jsx)("tbody",{children:W&&(null===W||void 0===W?void 0:W.length)>0?null===W||void 0===W?void 0:W.map((e,t)=>{var l,n,a,o,i,d;return(0,_.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:t+1+(re-1)*le}),(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:null!==e&&void 0!==e&&e.taskCompletedAt?y()(null===e||void 0===e?void 0:e.taskCompletedAt).format("DD-MM-YYYY hh:mm a"):"-"}),(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:(null===e||void 0===e?void 0:e.clientData.fullName)||"-"}),(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:(null===e||void 0===e||null===(l=e.departmentData)||void 0===l?void 0:l.name)||"-"}),(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:(null===e||void 0===e?void 0:e.taskName)||"-"}),(0,_.jsx)("td",{className:"p-2 text-left min-w-[125px]",children:(0,_.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,_.jsx)("span",{children:null===e||void 0===e||null===(n=e.employeData)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.fullName}),(null===e||void 0===e||null===(o=e.employeData)||void 0===o?void 0:o.length)>1&&(0,_.jsxs)("span",{className:"text-header flex items-center gap-1",children:["+",(0,_.jsx)("span",{className:"h-5 w-5 bg-header text-white text-[12px] rounded-full flex items-center justify-center",children:(null===e||void 0===e||null===(i=e.employeData)||void 0===i?void 0:i.length)-1})]}),(0,_.jsx)(F.Ny1,{className:"text-[#374151] text-[14px] cursor-pointer",onClick:()=>J({isOpen:!0,data:e})})]})}),(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:null!==(d=y()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==d?d:"-"}),(0,_.jsx)("td",{className:"whitespace-nowrap text-right border-none px-2 py-3 font-medium",children:null!==e&&void 0!==e&&e.fee?"\u20b9".concat(parseFloat(e.fee).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})):"-"}),(0,_.jsx)("td",{className:"whitespace-nowrap text-left border-none px-2 py-3",children:(0,_.jsx)("button",{onClick:()=>{var t,l;const n={_id:null===e||void 0===e?void 0:e._id,taskName:null===e||void 0===e?void 0:e.taskName,clientId:null===e||void 0===e||null===(t=e.clientData)||void 0===t?void 0:t._id,clientName:null===e||void 0===e||null===(l=e.clientData)||void 0===l?void 0:l.fullName,fee:null===e||void 0===e?void 0:e.fee,financialYear:null===e||void 0===e?void 0:e.financialYear,type:null===e||void 0===e?void 0:e.type,branchId:null===e||void 0===e?void 0:e.branchId,companyId:null===e||void 0===e?void 0:e.companyId,taskTypeId:null===e||void 0===e?void 0:e.taskTypeId},a=(0,O.w)(JSON.stringify(n));M("/admin/invoice/create?taskData=".concat(a))},className:"px-2 py-1.5 text-xs rounded-md bg-green-600 hover:bg-green-700 text-white border-green-600 border-[1.5px] transition-colors duration-200",type:"button",children:(0,_.jsx)(h.OiG,{className:"text-white",size:16})})})]})}):(0,_.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,_.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,_.jsx)(f.A,{totalCount:G,pageSize:le,currentPage:re,onChange:e=>{se(e)}})]}),(0,_.jsx)(p.A,{title:"Employee List",visible:null===K||void 0===K?void 0:K.isOpen,onCancel:()=>J({isOpen:!1,employee:null}),className:"antmodalclassName",footer:[(0,_.jsx)("button",{onClick:()=>J({isOpen:!1,employee:null}),className:" capitalize px-2 py-1 rounded-sm bg-header text-white",children:"Close"},"close")],width:800,centered:!0,children:(0,_.jsx)("div",{className:"flex items-center",children:(0,_.jsx)("div",{className:"flex gap-3 flex-wrap ] overflow-y-auto",children:null===K||void 0===K||null===(e=K.data)||void 0===e||null===(t=e.employeData)||void 0===t?void 0:t.map(e=>(0,_.jsx)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-white hover:bg-gray-50 cursor-pointer transition-all shadow-sm hover:shadow-md border border-gray-100",children:(0,_.jsxs)("div",{className:"text-center",children:[(0,_.jsx)("p",{className:"font-medium text-gray-800 truncate max-w-[100px]",children:e.fullName}),(0,_.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})},e.id))})})})]})}}}]);
//# sourceMappingURL=5443.c922bff2.chunk.js.map