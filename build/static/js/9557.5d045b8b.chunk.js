"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9557],{79557:(e,s,a)=>{a.r(s),a.d(s,{default:()=>P});var l=a(89379),d=a(24858),t=a(39160),i=a(83003),n=a(73216),r=a(31174),c=a(65043),o=a(15187),m=a(42837),p=a(89388),u=a(94084),x=a(86178),v=a.n(x),h=a(60446),y=a.n(h),j=a(65512),N=a(31744),g=a(78729),f=a(735),b=a(17995),A=a(55971),D=a(88967),I=a(60184),C=a(70579);const P=()=>{var e;const{register:s,handleSubmit:a,control:x,setValue:h,formState:{errors:P}}=(0,d.mN)(),S=(0,i.wA)(),_=(0,n.Zp)(),{userCompanyId:B,userBranchId:E,userType:q}=(0,f.A)(),[w,O]=(0,c.useState)(!1),{resignIdEnc:Q}=(0,n.g)(),T=JSON.parse(localStorage.getItem("user_info_".concat(o.AU))),{companyList:k}=(0,i.d4)(e=>e.company),{branchList:V}=(0,i.d4)(e=>e.branch),Y=(0,r.Yc)(Q),{resignationDetails:H}=(0,i.d4)(e=>e.resignation),{employeList:F}=(0,i.d4)(e=>e.employe),{loading:L}=(0,i.d4)(e=>e.resignation),[M,J]=(0,c.useState)(!0);(0,c.useEffect)(()=>{S((0,m.qV)())},[]);const z=(0,d.FH)({control:x,name:"PDCompanyId",defaultValue:B});(0,d.FH)({control:x,name:"PDBranchId",defaultValue:E});(0,c.useEffect)(()=>{(z||"company"===q||"companyDirector"===q)&&S((0,N.d0)({text:"",sort:!0,status:!0,companyId:z}))},[z]),(0,c.useEffect)(()=>{"admin"===q&&S((0,g.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[G,U]=(0,c.useState)({attachments:[]});(0,c.useEffect)(()=>{let e={_id:Y};S((0,p.GJ)(e)).then(()=>{J(!1)})},[]);(0,c.useEffect)(()=>{H&&(h("PDBranchId",null===H||void 0===H?void 0:H.branchId),h("PDCompanyId",null===H||void 0===H?void 0:H.companyId),h("employee",null===H||void 0===H?void 0:H.employeName),h("title",null===H||void 0===H?void 0:H.title),h("description",null===H||void 0===H?void 0:H.description),h("applyDate",y()(null===H||void 0===H?void 0:H.applyDate)),U({attachments:null===H||void 0===H?void 0:H.attachment}))},[H]);return(0,C.jsx)(t.A,{children:M?(0,C.jsx)("div",{className:"h-screen w-full flex justify-center items-center",children:(0,C.jsx)(A.A,{})}):(0,C.jsx)("div",{className:"gap-4",children:(0,C.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:a(e=>{const s={_id:Y,companyId:H.companyId,directorId:"",branchId:null===H||void 0===H?void 0:H.branchId,employeId:null===H||void 0===H?void 0:H.employeId,title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,applyDate:y()(null===e||void 0===e?void 0:e.applyDate).format("YYYY-MM-DD"),attachment:null===G||void 0===G?void 0:G.attachments,noticePeriod:null===H||void 0===H?void 0:H.noticePeriod,type:"resignation",status:null===H||void 0===H?void 0:H.status};S((0,p.lz)(s)).then(e=>{e.error||_(-1)})}),children:[(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2",children:["admin"===(null===T||void 0===T?void 0:T.userType)&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(o.Q0),children:["Company ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(d.xI,{control:x,name:"PDCompanyId",rules:{required:"Company is required"},disabled:!0,render:e=>{let{field:s}=e;return(0,C.jsxs)(j.A,(0,l.A)((0,l.A)({},s),{},{className:"".concat(o.Hy," "),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Company"}),null===k||void 0===k?void 0:k.map(e=>(0,C.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),P.PDCompanyId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:P.PDCompanyId.message})]}),("admin"===(null===T||void 0===T?void 0:T.userType)||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(o.Q0),children:["Branch ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(d.xI,{control:x,name:"PDBranchId",disabled:!0,rules:{required:"Branch is required"},render:e=>{let{field:s}=e;return(0,C.jsxs)(j.A,(0,l.A)((0,l.A)({},s),{},{className:"".concat(o.Hy," "),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Branch"}),null===V||void 0===V?void 0:V.map(e=>(0,C.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),P.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:P.PDBranchId.message})]}),(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsxs)("label",{className:"".concat(o.Q0),children:["Employee Name ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!0},s("employee")),{},{className:"placeholder: ".concat(o.id," ").concat(P.employee?"border-[1px] ":"border-gray-300"),placeholder:"Enter Employee Name"})),P.employee&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:P.employee.message})]})]}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("label",{className:"".concat(o.Q0),children:["Description ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)("input",(0,l.A)((0,l.A)({type:"text"},s("description",{required:"Description is required"})),{},{className:"".concat(o.Ol," ").concat(P.description?"border-[1px] ":"border-gray-300"),placeholder:"Enter Description"})),P.description&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:P.description.message})]}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{className:"".concat(o.Q0),children:["Apply Date ",(0,C.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,C.jsx)(d.xI,{name:"applyDate",control:x,render:e=>{let{field:s}=e;return(0,C.jsx)(u.A,{field:s,errors:P,disabledDate:e=>e&&e.isBefore(v()().endOf("day"),"day")})}}),P.applyDate&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:"Apply Date is required"})]})]}),(0,C.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2"}),(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)("label",{className:"".concat(o.Q0),children:"Documents"}),w?(0,C.jsx)("div",{className:"space-y-2"}):(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsx)("input",{type:"file",onChange:e=>{const s={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};S((0,D.Sg)(s)).then(e=>{var s;null!==e&&void 0!==e&&null!==(s=e.payload)&&void 0!==s&&s.data&&U(s=>{var a;return(0,l.A)((0,l.A)({},s),{},{attachments:[...(null===s||void 0===s?void 0:s.attachments)||[],null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.data]})})})},className:"hidden",id:"file-upload"}),(0,C.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-600 bg-white cursor-pointer",children:[(0,C.jsx)(I.chT,{className:"mr-2"})," Add Documents"]}),(0,C.jsx)("div",{className:"space-y-2",children:null===G||void 0===G||null===(e=G.attachments)||void 0===e?void 0:e.map((e,s)=>(0,C.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,C.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,C.jsx)(I.chT,{className:"text-gray-500"}),(0,C.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,C.jsx)("button",{type:"button",onClick:()=>(e=>{U(s=>{const a=null===s||void 0===s?void 0:s.attachments.filter((s,a)=>a!==e);return(0,l.A)((0,l.A)({},s),{},{attachments:a})})})(s),className:"text-red-500 hover:text-red-700",children:(0,C.jsx)(I.QCr,{})})]},s))})]})]}),(0,C.jsx)("div",{className:"flex justify-end ",children:(0,C.jsx)("button",{type:"submit",disabled:L,className:"".concat(L?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:L?(0,C.jsx)(b.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=9557.5d045b8b.chunk.js.map