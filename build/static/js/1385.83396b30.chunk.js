"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1385],{51385:(e,a,s)=>{s.r(a),s.d(a,{default:()=>C});var l=s(89379),d=s(24858),t=s(39160),i=s(83003),n=s(73216),r=s(31174),c=s(65043),o=s(15187),m=s(42837),p=s(94084),u=s(86178),x=s.n(u),v=s(60446),h=s.n(v),y=s(65512),j=s(96717),N=s(735),f=s(31744),g=s(78729),b=s(17995),D=s(60184),A=s(88967),I=s(70579);const C=()=>{var e;const{loading:a}=(0,i.d4)(e=>e.Termination),{register:s,handleSubmit:u,control:v,setValue:C,formState:{errors:P}}=(0,d.mN)(),S=(0,i.wA)(),_=(0,n.Zp)(),{terminationIdEnc:B}=(0,n.g)(),E=JSON.parse(localStorage.getItem("user_info_".concat(o.AU))),{userCompanyId:T,userBranchId:q,userType:O}=(0,N.A)(),{companyList:w}=(0,i.d4)(e=>e.company),{branchList:Q}=(0,i.d4)(e=>e.branch),k=(0,r.Yc)(B),{TerminationDetails:Y}=(0,i.d4)(e=>e.Termination),{employeList:V}=(0,i.d4)(e=>e.employe),[H,F]=(0,c.useState)(!1),[L,M]=(0,c.useState)({attachments:[]});(0,c.useEffect)(()=>{S((0,m.qV)())},[]),(0,c.useEffect)(()=>{let e={_id:k};S((0,j.vS)(e))},[]);const J=(0,d.FH)({control:v,name:"PDCompanyId",defaultValue:T});(0,d.FH)({control:v,name:"PDBranchId",defaultValue:q});(0,c.useEffect)(()=>{(J||"company"===O||"companyDirector"===O)&&S((0,f.d0)({text:"",sort:!0,status:!0,companyId:J}))},[J]),(0,c.useEffect)(()=>{"admin"===O&&S((0,g.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);(0,c.useEffect)(()=>{Y&&(C("employee",null===Y||void 0===Y?void 0:Y.employeName),C("PDBranchId",null===Y||void 0===Y?void 0:Y.branchId),C("PDCompanyId",null===Y||void 0===Y?void 0:Y.companyId),C("title",null===Y||void 0===Y?void 0:Y.title),C("description",null===Y||void 0===Y?void 0:Y.description),C("applyDate",h()(null===Y||void 0===Y?void 0:Y.applyDate)),M({attachments:null===Y||void 0===Y?void 0:Y.attachment}))},[Y]);return(0,I.jsx)(t.A,{children:(0,I.jsx)("div",{className:"gap-4",children:(0,I.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:u(e=>{const a={_id:k,companyId:Y.companyId,directorId:"",branchId:null===Y||void 0===Y?void 0:Y.branchId,employeId:null===Y||void 0===Y?void 0:Y.employeId,title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,applyDate:h()(null===e||void 0===e?void 0:e.applyDate).format("YYYY-MM-DD"),noticePeriod:null===Y||void 0===Y?void 0:Y.noticePeriod,type:"termination",status:null===Y||void 0===Y?void 0:Y.status,attachment:null===L||void 0===L?void 0:L.attachments};S((0,j.OY)(a)).then(e=>{e.error||_(-1)})}),children:[(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2",children:["admin"===(null===E||void 0===E?void 0:E.userType)&&(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(o.Q0),children:["Company ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(d.xI,{control:v,name:"PDCompanyId",disabled:!0,rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,I.jsxs)(y.A,(0,l.A)((0,l.A)({},a),{},{className:"".concat(o.Hy," "),children:[(0,I.jsx)(y.A.Option,{value:"",children:"Select Company"}),null===w||void 0===w?void 0:w.map(e=>(0,I.jsx)(y.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),P.PDCompanyId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:P.PDCompanyId.message})]}),("admin"===(null===E||void 0===E?void 0:E.userType)||"company"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType))&&(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(o.Q0),children:["Branch ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(d.xI,{control:v,name:"PDBranchId",disabled:!0,rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,I.jsxs)(y.A,(0,l.A)((0,l.A)({},a),{},{className:"".concat(o.Hy," "),children:[(0,I.jsx)(y.A.Option,{value:"",children:"Select Branch"}),null===Q||void 0===Q?void 0:Q.map(e=>(0,I.jsx)(y.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),P.PDBranchId&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:P.PDBranchId.message})]}),(0,I.jsxs)("div",{className:"w-full",children:[(0,I.jsxs)("label",{className:"".concat(o.Q0),children:["Employee Name ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)("input",(0,l.A)((0,l.A)({type:"text",disabled:!0},s("employee")),{},{className:"placeholder: ".concat(o.id," ").concat(P.employee?"border-[1px] ":"border-gray-300"),placeholder:"Enter Employee Name"})),P.employee&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:P.employee.message})]})]}),(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2",children:[(0,I.jsxs)("div",{className:"",children:[(0,I.jsxs)("label",{className:"".concat(o.Q0),children:["Description ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)("input",(0,l.A)((0,l.A)({type:"text"},s("description",{required:"Description is required"})),{},{className:"".concat(o.Ol," ").concat(P.description?"border-[1px] ":"border-gray-300"),placeholder:"Enter Description"})),P.description&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:P.description.message})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{className:"".concat(o.Q0),children:["Apply Date ",(0,I.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,I.jsx)(d.xI,{name:"applyDate",control:v,render:e=>{let{field:a}=e;return(0,I.jsx)(p.A,{field:a,errors:P,disabledDate:e=>e&&e.isBefore(x()().endOf("day"),"day")})}}),P.applyDate&&(0,I.jsx)("p",{className:"text-red-500 text-sm",children:"Apply Date is required"})]})]}),(0,I.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2"}),(0,I.jsxs)("div",{className:"",children:[(0,I.jsx)("label",{className:"".concat(o.Q0),children:"Documents"}),H?(0,I.jsx)("div",{className:"space-y-2"}):(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsx)("input",{type:"file",onChange:e=>{const a={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};S((0,A.Sg)(a)).then(e=>{var a;null!==e&&void 0!==e&&null!==(a=e.payload)&&void 0!==a&&a.data&&M(a=>{var s;return(0,l.A)((0,l.A)({},a),{},{attachments:[...(null===a||void 0===a?void 0:a.attachments)||[],null===e||void 0===e||null===(s=e.payload)||void 0===s?void 0:s.data]})})})},className:"hidden",id:"file-upload"}),(0,I.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-600 bg-white cursor-pointer",children:[(0,I.jsx)(D.chT,{className:"mr-2"})," Add Documents"]}),(0,I.jsx)("div",{className:"space-y-2",children:null===L||void 0===L||null===(e=L.attachments)||void 0===e?void 0:e.map((e,a)=>(0,I.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,I.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,I.jsx)(D.chT,{className:"text-gray-500"}),(0,I.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,I.jsx)("button",{type:"button",onClick:()=>(e=>{M(a=>{const s=null===a||void 0===a?void 0:a.attachments.filter((a,s)=>s!==e);return(0,l.A)((0,l.A)({},a),{},{attachments:s})})})(a),className:"text-red-500 hover:text-red-700",children:(0,I.jsx)(D.QCr,{})})]},a))})]})]}),(0,I.jsx)("div",{className:"flex justify-end",children:(0,I.jsx)("button",{type:"submit",disabled:a,className:"".concat(a?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:a?(0,I.jsx)(b.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=1385.83396b30.chunk.js.map