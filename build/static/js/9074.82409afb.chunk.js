"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9074],{19074:(e,l,d)=>{d.r(l),d.d(l,{default:()=>f});var a=d(89379),n=d(24858),i=d(83003),s=d(73216),o=d(65043),r=d(15187),t=d(31744),c=d(78729),u=d(39160),v=d(66015),m=d(65512),x=d(28249),h=d(42837),p=d(41914),y=d(16998),j=d(17995),g=d(89427),N=d(70579);const f=()=>{const{register:e,handleSubmit:l,control:d,watch:f,formState:{errors:b},setValue:w}=(0,n.mN)(),A=(0,i.wA)(),D=(0,s.Zp)(),{allowanceListData:I,loading:P}=(0,i.d4)(e=>e.allowance),{deductionsListData:C,loading:S}=(0,i.d4)(e=>e.deductions),{employeList:T,loading:_}=(0,i.d4)(e=>e.employe),{companyList:L,companyListLoading:k}=(0,i.d4)(e=>e.company),{branchList:q,branchListloading:B}=(0,i.d4)(e=>e.branch),[O,Y]=(0,o.useState)([]),[H,E]=(0,o.useState)([]),{loading:F}=(0,i.d4)(e=>e.standardPayroll),V=(0,n.FH)({control:d,name:"employee",defaultValue:""}),Q=(0,n.FH)({control:d,name:"deductionDetails",defaultValue:""}),M=(0,n.FH)({control:d,name:"allowanceDetails",defaultValue:""});(0,o.useEffect)(()=>{if(V&&Array.isArray(V)){const e=V.map(e=>{const l=null===e||void 0===e?void 0:e.value,d=null===T||void 0===T?void 0:T.find(e=>(null===e||void 0===e?void 0:e._id)===l);if(!d)return null;let n=[];const i=(null===d||void 0===d?void 0:d.salaryData)||{},s=Number(null===i||void 0===i?void 0:i.basicSalary)||0;return Array.isArray(M)&&M.forEach(e=>{const l=null===e||void 0===e?void 0:e.allowance,d=null===I||void 0===I?void 0:I.find(e=>(null===e||void 0===e?void 0:e._id)===l),a=(null===d||void 0===d?void 0:d.name)||"-",i=null===e||void 0===e?void 0:e.isPercentage,o=Number(null===e||void 0===e?void 0:e.amount)||0,r="Yes"===i?s*o/100:o;n.push({name:a,isPercentage:i,_id:l,amount:r,type:"allowance"})}),Array.isArray(Q)&&Q.forEach(e=>{const l=null===e||void 0===e?void 0:e.deduction,d=null===C||void 0===C?void 0:C.find(e=>(null===e||void 0===e?void 0:e._id)===l),a=(null===d||void 0===d?void 0:d.name)||"-",i=null===e||void 0===e?void 0:e.isPercentage,o=Number(null===e||void 0===e?void 0:e.amount)||0,r="Yes"===i?s*o/100:o;n.push({name:a,isPercentage:i,_id:l,amount:r,type:"deduction"})}),(0,a.A)((0,a.A)({},d),{},{AllDed:n})}).filter(Boolean);E(e)}},[V,M,Q,I,C,T]);const[W,z]=(0,o.useState)(!1),U=e=>{if(W)e.onChange([]);else{const l=T.map(e=>({value:e._id,label:e.fullName}));e.onChange(l)}z(!W)},J=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),R=(0,n.FH)({control:d,name:"PDCompanyId",defaultValue:""}),Z=(0,n.FH)({control:d,name:"PDBranchId",defaultValue:""}),{fields:$,append:G,remove:K}=(0,n.jz)({control:d,name:"allowanceDetails"}),{fields:X,append:ee,remove:le}=(0,n.jz)({control:d,name:"deductionDetails"});(0,o.useEffect)(()=>{(R||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType))&&A((0,t.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?R:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId}))},[R]),(0,o.useEffect)(()=>{"admin"===(null===J||void 0===J?void 0:J.userType)&&A((0,c.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);(0,o.useEffect)(()=>{!R&&"admin"===(null===J||void 0===J?void 0:J.userType)||!Z&&"companBranch"===(null===J||void 0===J?void 0:J.userType)&&"employee"!==(null===J||void 0===J?void 0:J.userType)||((()=>{let e={reqPayload:{text:"",sort:!0,status:!0,isPagination:!1,directorId:"",companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?R:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?Z:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId}};A((0,p.xD)(e))})(),(()=>{let e={reqPayload:{text:"",sort:!0,status:!0,isPagination:!1,directorId:"",companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?R:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?Z:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId}};A((0,y.Fp)(e))})())},[R,Z]);const{Option:de}=m.A;return(0,N.jsx)(u.A,{children:(0,N.jsxs)("div",{className:"gap-4",children:[(0,N.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:l(e=>{var l,d,a,n;const i={companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,directorId:"",branchId:"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)||"company"===(null===J||void 0===J?void 0:J.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,employeIds:null!==e&&void 0!==e&&e.employee&&(null===e||void 0===e||null===(l=e.employee)||void 0===l?void 0:l.length)>0?null===e||void 0===e||null===(d=e.employee)||void 0===d?void 0:d.map(e=>e.value):[],allowances:null===e||void 0===e||null===(a=e.allowanceDetails)||void 0===a?void 0:a.map(e=>{var l;return{allowanceId:null===e||void 0===e?void 0:e.allowance,name:null===I||void 0===I||null===(l=I.find(l=>(null===l||void 0===l?void 0:l._id)===(null===e||void 0===e?void 0:e.allowance)))||void 0===l?void 0:l.name,isPercentage:"Yes"===(null===e||void 0===e?void 0:e.isPercentage),value:null===e||void 0===e?void 0:e.amount}}),deductions:null===e||void 0===e||null===(n=e.deductionDetails)||void 0===n?void 0:n.map(e=>{var l;return{deductionId:null===e||void 0===e?void 0:e.deduction,name:null===C||void 0===C||null===(l=C.find(l=>(null===l||void 0===l?void 0:l._id)===(null===e||void 0===e?void 0:e.deduction)))||void 0===l?void 0:l.name,isPercentage:"Yes"===(null===e||void 0===e?void 0:e.isPercentage),value:null===e||void 0===e?void 0:e.amount}})};A((0,x.$j)(i)).then(e=>{e.error||D(-1)})}),children:[(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===J||void 0===J?void 0:J.userType)&&(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Company ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{control:d,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,N.jsxs)(m.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(r.Hy," "),children:[(0,N.jsx)(m.A.Option,{value:"",children:"Select Company"}),k?(0,N.jsx)(m.A.Option,{disabled:!0,children:(0,N.jsx)(g.A,{})}):null===L||void 0===L?void 0:L.map(e=>(0,N.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDCompanyId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.PDCompanyId.message})]}),("admin"===(null===J||void 0===J?void 0:J.userType)||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType))&&(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Branch ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{control:d,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var l;let{field:d}=e;return(0,N.jsxs)(m.A,(0,a.A)((0,a.A)({},d),{},{onChange:e=>{w("employee",""),d.onChange(e)},defaultValue:"",className:"".concat(r.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,N.jsx)(m.A.Option,{value:"",children:"Select Branch"}),B?(0,N.jsx)(m.A.Option,{disabled:!0,children:(0,N.jsx)(g.A,{})}):null===(l=(0,r._o)(q,"fullName"))||void 0===l?void 0:l.map(e=>(0,N.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDBranchId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.PDBranchId.message})]}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Employees ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{name:"employee",control:d,rules:{required:"At least one employee is required"},render:e=>{let{field:l}=e;return(0,N.jsx)(v.Ay,(0,a.A)((0,a.A)({},l),{},{isMulti:!0,onFocus:()=>{var e;A((0,h.qV)({companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?f("PDCompanyId"):"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?f("PDBranchId"):"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,departmentId:null===(e=f("PDDepartmentId"))||void 0===e?void 0:e.value,directorId:"",text:"",sort:!0,status:!0,isPagination:!1}))},options:Array.isArray(T)&&(null===T||void 0===T?void 0:T.length)>0?[{value:"select_all",label:"Select All"},...(0,r._o)(T,"fullName").map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName}))]:[],classNamePrefix:"react-select",className:"".concat(r.Ph," ").concat(b.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employees...",onChange:e=>{e.find(e=>"select_all"===e.value)?U(l):(z((null===e||void 0===e?void 0:e.length)===(null===T||void 0===T?void 0:T.length)),l.onChange(e))},value:l.value||[],formatOptionLabel:(e,d)=>{let{context:a}=d;return"select_all"===e.value?(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("input",{type:"checkbox",checked:W,onChange:()=>U(l),style:{marginRight:"10px"}}),(0,N.jsx)("span",{children:"Select All"})]}):e.label}}))}}),b.employee&&(0,N.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.employee.message})]})]}),(0,N.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4",children:[(0,N.jsx)("div",{children:(0,N.jsxs)("div",{className:" rounded-t-lg border border-gray-300 md:mt-0 mt-3",children:[(0,N.jsxs)("div",{className:"py-2 text-white bg-header px-2 rounded-t-lg font-semibold",children:["Allowance"," "]}),$.map((l,i)=>{var s,o,t,c,u,v,x,h;return(0,N.jsx)("div",{className:" rounded-md my-2 ",children:(0,N.jsx)("div",{className:"",children:(0,N.jsxs)("div",{className:"px-3 grid md:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-4 items-end mb-3",children:[(0,N.jsx)("div",{className:"flex gap-3",children:(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Allowance ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{name:"allowanceDetails[".concat(i,"].allowance"),control:d,rules:{required:"allowance is required"},render:e=>{var l,d,n;let{field:s}=e;return(0,N.jsxs)(m.A,(0,a.A)((0,a.A)({},s),{},{className:"".concat(r.Hy," ").concat(null!==(l=b.allowanceDetails)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.allowance?"":"border-gray-300"),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select allowance",value:s.value,onChange:e=>{s.onChange(e)},children:[(0,N.jsx)(de,{value:"",children:"Select allowance"}),P?(0,N.jsx)(m.A.Option,{disabled:!0,children:(0,N.jsx)(g.A,{})}):null===(n=(0,r._o)(I))||void 0===n?void 0:n.filter(e=>!$.filter((e,l)=>l!==i).map(e=>e.allowance).includes(e._id)).map(e=>(0,N.jsx)(de,{value:e._id,children:e.name},e._id))]}))}}),(null===(s=b.allowanceDetails)||void 0===s||null===(o=s[i])||void 0===o?void 0:o.allowance)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.allowanceDetails[i].allowance.message})]})}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Is Percentage ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{name:"allowanceDetails[".concat(i,"].isPercentage"),control:d,rules:{required:"isPercentage is required"},render:e=>{var l,d;let{field:n}=e;return(0,N.jsxs)(m.A,(0,a.A)((0,a.A)({},n),{},{className:"".concat(r.Hy," ").concat(null!==(l=b.allowanceDetails)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.isPercentage?"":"border-gray-300"),placeholder:"Select Is Percentage",value:n.value,onChange:e=>{n.onChange(e)},children:[(0,N.jsx)(de,{value:"",children:"Select Is Percentage"}),(0,N.jsx)(de,{value:"Yes",children:"Yes"}),(0,N.jsx)(de,{value:"No",children:"No"})]}))}}),(null===(t=b.allowanceDetails)||void 0===t||null===(c=t[i])||void 0===c?void 0:c.isPercentage)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.allowanceDetails[i].isPercentage.message})]}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Yes"===f("allowanceDetails[".concat(i,"].isPercentage"))?"Percentage":"Amount"," ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01",placeholder:"Enter Amount"},e("allowanceDetails[".concat(i,"].amount"),{required:"Amount is required",valueAsNumber:!0,min:"Yes"===f("allowanceDetails[".concat(i,"].isPercentage"))?1:0,validate:e=>!("Yes"===f("allowanceDetails[".concat(i,"].isPercentage"))&&e>100)||"Percentage can't be more than 100"})),{},{className:"".concat(r.Ol," ").concat(null!==(u=b.deductionDetails)&&void 0!==u&&null!==(v=u[i])&&void 0!==v&&v.amount?"border-[1px]":"border-gray-300")})),(null===(x=b.allowanceDetails)||void 0===x||null===(h=x[i])||void 0===h?void 0:h.amount)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.allowanceDetails[i].amount.message})]}),(0,N.jsx)("div",{className:"py-2",children:(0,N.jsx)("div",{className:"flex justify-end items-center",children:(0,N.jsx)("button",{type:"button",onClick:()=>{K(l,i)},className:"text-rose-800 hover:text-rose-900 flex items-center justify-center p-1 rounded-lg",children:(0,N.jsx)("i",{className:"fas fa-trash-alt"})})})})]})},l.id)},i)}),(0,N.jsx)("button",{type:"button",onClick:()=>G({}),className:"".concat(r.Wb," mx-3 mb-2"),children:"Add Allowance"})]})}),(0,N.jsx)("div",{children:(0,N.jsxs)("div",{className:" rounded-t-lg border border-gray-300 ",children:[(0,N.jsxs)("div",{className:"py-2 text-white bg-header px-2 rounded-t-lg  font-semibold",children:["Deductions"," "]}),X.map((l,i)=>{var s,o,t,c,u,v,x,h;return(0,N.jsx)("div",{className:" rounded-md my-2 ",children:(0,N.jsx)("div",{className:"",children:(0,N.jsxs)("div",{className:"px-3 grid md:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-4 items-end mb-3",children:[(0,N.jsx)("div",{className:"flex gap-3",children:(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Deduction ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{name:"deductionDetails[".concat(i,"].deduction"),control:d,rules:{required:"deduction is required"},render:e=>{var l,d,n;let{field:s}=e;return(0,N.jsxs)(m.A,(0,a.A)((0,a.A)({},s),{},{className:"".concat(r.Hy," ").concat(null!==(l=b.deductionDetails)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.deduction?"":"border-gray-300"),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select deduction",value:s.value,onChange:e=>{s.onChange(e)},children:[(0,N.jsx)(de,{value:"",children:"Select deduction"}),S?(0,N.jsx)(m.A.Option,{disabled:!0,children:(0,N.jsx)(g.A,{})}):null===(n=(0,r._o)(C))||void 0===n?void 0:n.filter(e=>!X.filter((e,l)=>l!==i).map(e=>e.deduction).includes(e._id)).map(e=>(0,N.jsx)(de,{value:e._id,children:e.name},e._id))]}))}}),(null===(s=b.deductionDetails)||void 0===s||null===(o=s[i])||void 0===o?void 0:o.deduction)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.deductionDetails[i].deduction.message})]})}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Is Percentage ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(n.xI,{name:"deductionDetails[".concat(i,"].isPercentage"),control:d,rules:{required:"isPercentage is required"},render:e=>{var l,d;let{field:n}=e;return(0,N.jsxs)(m.A,(0,a.A)((0,a.A)({},n),{},{className:"".concat(r.Hy," ").concat(null!==(l=b.deductionDetails)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.isPercentage?"":"border-gray-300"),placeholder:"Select Is Percentage",value:n.value,onChange:e=>{n.onChange(e)},children:[(0,N.jsx)(de,{value:"",children:"Select Is Percentage"}),(0,N.jsx)(de,{value:"Yes",children:"Yes"}),(0,N.jsx)(de,{value:"No",children:"No"})]}))}}),(null===(t=b.deductionDetails)||void 0===t||null===(c=t[i])||void 0===c?void 0:c.isPercentage)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.deductionDetails[i].isPercentage.message})]}),(0,N.jsxs)("div",{className:"w-full",children:[(0,N.jsxs)("label",{className:"".concat(r.Q0),children:["Yes"===f("deductionDetails[".concat(i,"].isPercentage"))?"Percentage":"Amount"," ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01",placeholder:"Enter Amount"},e("deductionDetails[".concat(i,"].amount"),{required:"Amount is required",valueAsNumber:!0,min:"Yes"===f("deductionDetails[".concat(i,"].isPercentage"))?1:0,validate:e=>!("Yes"===f("deductionDetails[".concat(i,"].isPercentage"))&&e>100)||"Percentage can't be more than 100"})),{},{className:"".concat(r.Ol," ").concat(null!==(u=b.deductionDetails)&&void 0!==u&&null!==(v=u[i])&&void 0!==v&&v.amount?"border-[1px]":"border-gray-300")})),(null===(x=b.deductionDetails)||void 0===x||null===(h=x[i])||void 0===h?void 0:h.amount)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:b.deductionDetails[i].amount.message})]}),(0,N.jsx)("div",{className:"py-2",children:(0,N.jsx)("div",{className:"flex justify-end items-center",children:(0,N.jsx)("button",{type:"button",onClick:()=>{le(l,i)},className:"text-rose-800 hover:text-rose-900 flex items-center justify-center p-1 rounded-lg",children:(0,N.jsx)("i",{className:"fas fa-trash-alt"})})})})]})},l.id)},i)}),(0,N.jsx)("button",{type:"button",onClick:()=>ee({}),className:"".concat(r.Wb," mx-3 mb-2"),children:"Add Deduction"})]})})]}),(0,N.jsx)("div",{className:"flex justify-end m-2 ",children:(0,N.jsx)("button",{type:"submit",disabled:F,className:"".concat(F?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:F?(0,N.jsx)(j.A,{}):"Submit"})})]}),(0,N.jsx)("div",{className:"space-y-6",children:null===H||void 0===H?void 0:H.map(e=>{var l,d,a,n,i,s,o,r,t,c,u,v,m,x,h,p,y,j;const g=(null===e||void 0===e||null===(l=e.AllDed)||void 0===l||null===(d=l.filter(e=>{var l;return"allowance"===(null===e||void 0===e||null===(l=e.type)||void 0===l?void 0:l.toLowerCase())}))||void 0===d?void 0:d.reduce((e,l)=>e+(parseFloat(l.amount)||0),0))||0,f=(null===e||void 0===e||null===(a=e.AllDed)||void 0===a||null===(n=a.filter(e=>{var l;return"deduction"===(null===e||void 0===e||null===(l=e.type)||void 0===l?void 0:l.toLowerCase())}))||void 0===n?void 0:n.reduce((e,l)=>e+(parseFloat(l.amount)||0),0))||0,b=(parseFloat(null===e||void 0===e||null===(i=e.salaryData)||void 0===i?void 0:i.basicSalary)||0)+g-f;return(0,N.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden max-w-4xl mx-auto",children:[(0,N.jsx)("div",{className:"bg-header text-white p-5",children:(0,N.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[(0,N.jsx)("div",{className:"w-24 h-24 rounded-full bg-white flex items-center justify-center shrink-0",children:null!==e&&void 0!==e&&e.profileImage?(0,N.jsx)("img",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e.profileImage),alt:"Profile",className:"w-full h-full rounded-full object-cover"}):(0,N.jsx)("span",{className:"text-3xl font-bold text-header",children:null===e||void 0===e||null===(s=e.fullName)||void 0===s?void 0:s.charAt(0).toUpperCase()})}),(0,N.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,N.jsx)("h2",{className:"text-xl font-bold",children:null===e||void 0===e?void 0:e.fullName}),(0,N.jsx)("p",{className:"text-blue-100",children:(null===e||void 0===e?void 0:e.designation)||"Employee"}),(0,N.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mt-4 text-sm md:text-base",children:[(0,N.jsxs)("div",{className:"bg-white/10 p-2 rounded",children:[(0,N.jsx)("p",{className:"font-medium",children:"Basic Salary"}),(0,N.jsxs)("p",{className:"font-bold",children:["\u20b9",(null===e||void 0===e||null===(o=e.salaryData)||void 0===o||null===(r=o.basicSalary)||void 0===r?void 0:r.toLocaleString("en-IN"))||"0"]})]}),(0,N.jsxs)("div",{className:"bg-white/10 p-2 rounded",children:[(0,N.jsx)("p",{className:"font-medium",children:"Monthly Salary"}),(0,N.jsxs)("p",{className:"font-bold",children:["\u20b9",(null===e||void 0===e||null===(t=e.salaryData)||void 0===t||null===(c=t.currentSalary)||void 0===c?void 0:c.toLocaleString("en-IN"))||"0"]})]}),(0,N.jsxs)("div",{className:"bg-white/10 p-2 rounded",children:[(0,N.jsx)("p",{className:"font-medium",children:"Yearly Package"}),(0,N.jsxs)("p",{className:"font-bold",children:["\u20b9",(null===e||void 0===e||null===(u=e.salaryData)||void 0===u||null===(v=u.currentPackage)||void 0===v?void 0:v.toLocaleString("en-IN"))||"0"]})]})]})]})]})}),(0,N.jsx)("div",{className:"p-5",children:(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,N.jsxs)("div",{className:"border border-green-100 rounded-lg overflow-hidden",children:[(0,N.jsx)("div",{className:"bg-green-50 p-3 border-b border-green-100",children:(0,N.jsxs)("h3",{className:"text-lg font-semibold text-green-800 flex items-center gap-2",children:[(0,N.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Allowances"]})}),(0,N.jsxs)("div",{className:"divide-y divide-green-50",children:[(null===e||void 0===e||null===(m=e.AllDed)||void 0===m||null===(x=m.filter(e=>{var l;return"allowance"===(null===e||void 0===e||null===(l=e.type)||void 0===l?void 0:l.toLowerCase())}))||void 0===x?void 0:x.length)>0?e.AllDed.filter(e=>{var l;return"allowance"===(null===e||void 0===e||null===(l=e.type)||void 0===l?void 0:l.toLowerCase())}).map((e,l)=>(0,N.jsxs)("div",{className:"p-3 flex justify-between items-center",children:[(0,N.jsx)("span",{className:"font-medium text-gray-700",children:e.name}),(0,N.jsxs)("span",{className:"font-semibold text-green-600",children:["+ \u20b9",e.amount]})]},"allowance-".concat(l))):(0,N.jsx)("div",{className:"p-3 text-center text-gray-500",children:"No allowances this month"}),(0,N.jsxs)("div",{className:"p-3 bg-green-50 flex justify-between font-semibold",children:[(0,N.jsx)("span",{children:"Total Allowances"}),(0,N.jsxs)("span",{className:"text-green-700",children:["+ \u20b9",g.toLocaleString("en-IN")]})]})]})]}),(0,N.jsxs)("div",{className:"border border-red-100 rounded-lg overflow-hidden",children:[(0,N.jsx)("div",{className:"bg-red-50 p-3 border-b border-red-100",children:(0,N.jsxs)("h3",{className:"text-lg font-semibold text-red-800 flex items-center gap-2",children:[(0,N.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Deductions"]})}),(0,N.jsxs)("div",{className:"divide-y divide-red-50",children:[(null===e||void 0===e||null===(h=e.AllDed)||void 0===h||null===(p=h.filter(e=>{var l;return"deduction"===(null===e||void 0===e||null===(l=e.type)||void 0===l?void 0:l.toLowerCase())}))||void 0===p?void 0:p.length)>0?e.AllDed.filter(e=>{var l;return"deduction"===(null===e||void 0===e||null===(l=e.type)||void 0===l?void 0:l.toLowerCase())}).map((e,l)=>(0,N.jsxs)("div",{className:"p-3 flex justify-between items-center",children:[(0,N.jsx)("span",{className:"font-medium text-gray-700",children:e.name}),(0,N.jsxs)("span",{className:"font-semibold text-red-600",children:["- \u20b9",e.amount]})]},"deduction-".concat(l))):(0,N.jsx)("div",{className:"p-3 text-center text-gray-500",children:"No deductions this month"}),(0,N.jsxs)("div",{className:"p-3 bg-red-50 flex justify-between font-semibold",children:[(0,N.jsx)("span",{children:"Total Deductions"}),(0,N.jsxs)("span",{className:"text-red-700",children:["- \u20b9",f.toLocaleString("en-IN")]})]})]})]})]})}),(0,N.jsx)("div",{className:"p-5 border-t border-gray-200 bg-gray-50",children:(0,N.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-700",children:"Salary Calculation"}),(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("span",{className:"font-medium",children:"Basic Salary:"}),(0,N.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===e||void 0===e||null===(y=e.salaryData)||void 0===y||null===(j=y.basicSalary)||void 0===j?void 0:j.toLocaleString("en-IN"))||"0"]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,N.jsx)("span",{children:"Total Allowances:"}),(0,N.jsxs)("span",{children:["+ \u20b9",g.toLocaleString("en-IN")]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,N.jsx)("span",{children:"Total Deductions:"}),(0,N.jsxs)("span",{children:["- \u20b9",f.toLocaleString("en-IN")]})]}),(0,N.jsx)("div",{className:"border-t border-gray-300 my-2"}),(0,N.jsxs)("div",{className:"flex justify-between text-lg font-bold text-header",children:[(0,N.jsx)("span",{children:"Net Salary Payable:"}),(0,N.jsxs)("span",{children:["\u20b9",b.toLocaleString("en-IN")]})]})]})]})})]},(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.fullName))})})]})})}}}]);
//# sourceMappingURL=9074.82409afb.chunk.js.map