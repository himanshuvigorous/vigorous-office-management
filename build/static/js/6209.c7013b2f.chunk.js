"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6209],{26209:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var l=a(89379),s=a(65043),n=a(39160),d=a(73216),o=a(35475),i=a(83003),r=a(23156),c=a(47196),u=a(30064),p=a.n(u),m=a(31174),x=a(78227),v=a(15187),h=a(24858),b=a(31744),j=a(78729),f=a(78973),g=a(30326),y=a(53913),N=a(65512),w=a(96651),C=a(735),A=a(31462),k=a(6720),D=a(86178),S=a.n(D),R=a(55971),L=a(96717),_=a(89388),O=a(60184),P=a(83002),z=a(29542),q=a(4938),I=a(70579);const T=function(){var e,t,a,u;const{register:D,control:T,setValue:F,formState:{errors:M}}=(0,h.mN)(),{canCreate:V,canRead:Y,canUpdate:E,canDelete:B}=(0,q.A)(),{userCompanyId:H,userBranchId:U,userType:W}=(0,C.A)(),J=(0,d.Zp)(),Z=(0,i.wA)(),{TerminationData:G,totalTerminationCount:Q,loading:X}=(0,i.d4)(e=>e.Termination),[K,$]=(JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),(0,s.useState)({isOpen:!1,data:{},Termination:{}})),{companyList:ee}=(0,i.d4)(e=>e.company),{branchList:te}=(0,i.d4)(e=>e.branch),ae=(0,h.FH)({control:T,name:"PDCompanyId",defaultValue:H}),[le,se]=(0,o.ok)(),ne=parseInt(le.get("page"))||1,de=le.get("branchId")||"",oe=le.get("status")||"",[ie,re]=(0,s.useState)(ne),[ce,ue]=(0,s.useState)(10),[pe,me]=(0,s.useState)(oe),[xe,ve]=(0,s.useState)(""),[he,be]=(0,s.useState)(de);(0,s.useEffect)(()=>{const e=new URLSearchParams;ie>1&&e.set("page",ie),he&&e.set("branchId",he),pe&&e.set("status",pe),se(e)},[he,pe,ie,xe]),(0,s.useEffect)(()=>{je()},[he,pe,ie,xe]);const je=()=>{const e={currentPage:ie,pageSize:ce,reqData:{directorId:"",companyId:ae||"",branchId:he||"",text:xe,sort:!0,status:pe,isPagination:!0,type:"termination"}};Z((0,L.P_)(e))};(0,s.useEffect)(()=>{(ae||"company"===W||"companyDirector"===W)&&Z((0,b.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:ae}))},[ae]),(0,s.useEffect)(()=>{"admin"===W&&Z((0,j.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[fe,ge]=(0,s.useState)(!1),[ye,Ne]=(0,s.useState)(null),we=()=>{ge(!1),Ne(null)},Ce=(e,t)=>{p().fire({title:"Provide feedback & date",input:"textarea",inputLabel:"Feedback (optional)",inputPlaceholder:"Type your feedback here...",showCancelButton:!0,confirmButtonText:"Update as ".concat(t),cancelButtonText:"Cancel",inputValidator:e=>e&&""!==e.trim()?null:"Feedback cannot be empty",html:"Approved"===t?'\n          <div style="margin-top: 1rem;">\n            <label for="custom-date-picker">Select Date:</label>\n            <input \n    type="date" \n    id="custom-date-picker" \n    min="'.concat(S()().format("YYYY-MM-DD"),'"\n    style="\n      width: 100%;\n      margin-top: 0.5rem;\n      padding: 4px 11px;\n      height: 40px;\n      font-size: 14px;\n      line-height: 1.5715;\n      color: rgba(0, 0, 0, 0.85);\n      background-color: #fff;\n      border: 1px solid #d9d9d9;\n      border-radius: 6px;\n      transition: all 0.3s;\n      box-sizing: border-box;\n    "\n  />\n          </div>'):"",preConfirm:()=>{var e,a;const l=p().getPopup(),s=null===(e=l.querySelector("textarea"))||void 0===e?void 0:e.value.trim(),n=null===(a=l.querySelector("#custom-date-picker"))||void 0===a?void 0:a.value;if(!s)return p().showValidationMessage("Feedback is required"),!1;if(!n&&"Approved"===t)return p().showValidationMessage("Please select a future date"),!1;return n<=S()().format("YYYY-MM-DD")?(p().showValidationMessage("The selected date must be in the future"),!1):{feedback:s,date:n}}}).then(a=>{if(a.isConfirmed){const{feedback:l,date:s}=a.value;Z((0,_.Fc)({_id:null===e||void 0===e?void 0:e._id,status:t,reason:l,approvalDate:"Approved"===t?s:"Completed"===t?null===e||void 0===e?void 0:e.approvalDate:""})).then(e=>{null!==e&&void 0!==e&&e.error||(je(),p().fire("Success","Status updated","success"))})}})},Ae=e=>null===e||void 0===e?void 0:e.toLowerCase().endsWith(".pdf"),ke=e=>[".jpg",".jpeg",".png",".gif",".webp",".bmp",".tiff"].some(t=>null===e||void 0===e?void 0:e.toLowerCase().endsWith(t));return(0,I.jsxs)(n.A,{onChange:e=>{ve(e)},children:[(0,I.jsx)(y.A,{className:"antmodalclassName",title:"Attached Docs\tFor ".concat(null===K||void 0===K||null===(e=K.data)||void 0===e?void 0:e.employeName),width:1e3,footer:!1,open:K.isOpen,onOk:()=>$({open:!1,data:{}}),onCancel:()=>$({open:!1,data:{}}),children:(0,I.jsxs)("table",{className:"w-full max-w-full rounded-xl",children:[(0,I.jsx)("thead",{}),(0,I.jsx)("tbody",{children:(0,I.jsx)("tr",{children:(0,I.jsx)("td",{className:"whitespace-nowrap text-center p-2",children:(0,I.jsx)("div",{className:"flex flex-col space-y-4",children:null!==K&&void 0!==K&&null!==(t=K.data)&&void 0!==t&&t.attachment&&Array.isArray(null===K||void 0===K||null===(a=K.data)||void 0===a?void 0:a.attachment)?K.data.attachment.map((e,t)=>{const a="".concat("https://vigapi.vigorousit.com","/public/").concat(e);return ke(e)?(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsxs)("p",{className:"font-[500] text-[12px] text-black",children:["(",t+1,")"]}),(0,I.jsx)(z.A,{src:a,alt:"Uploaded ".concat(t+1)})]},t):Ae(e)?(0,I.jsx)(w.A,{placement:"topLeft",title:"PDF Attachment ".concat(t+1),children:(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsxs)("p",{className:"font-[500] text-[12px] text-black",children:["(",t+1,")"]}),(0,I.jsx)("button",{onClick:()=>window.open(a,"_blank"),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted hover:border-gray-800",type:"button",children:(0,I.jsx)(O.kl1,{className:"text-red-600 hover:text-red-700",size:26})})]})},t):null}):null!==K&&void 0!==K&&null!==(u=K.data)&&void 0!==u&&u.attachment?(()=>{const e=K.data.attachment,t="".concat("https://vigapi.vigorousit.com","/public/").concat(e);return ke(e)?(0,I.jsx)(z.A,{src:t,alt:"Uploaded Image"}):Ae(e)?(0,I.jsx)(w.A,{placement:"topLeft",title:"PDF Attachment",children:(0,I.jsx)("button",{onClick:()=>window.open(t,"_blank"),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted hover:border-gray-800",type:"button",children:(0,I.jsx)(O.kl1,{className:"text-red-600 hover:text-red-700",size:26})})}):null})():(0,I.jsx)("span",{className:"text-gray-600 text-sm text-center",children:"No File Attached"})})})})})]})}),(0,I.jsx)("div",{className:"",children:(0,I.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,I.jsxs)("div",{className:"sm:flex items-center sm:space-x-2",children:["admin"===W&&(0,I.jsx)("div",{className:"flex justify-center items-center space-x-2 text-[14px] rounded-md",children:(0,I.jsx)(h.xI,{control:T,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,I.jsxs)(N.A,(0,l.A)((0,l.A)({},t),{},{defaultValue:"",className:"".concat(v.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(N.A.Option,{value:"",children:"Select Company"}),null===ee||void 0===ee?void 0:ee.map(e=>(0,I.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),("admin"===W||"company"===W||"companyDirector"===W)&&(0,I.jsx)("div",{className:"flex justify-center sm:mb-0 mb-1 items-center space-x-2 text-[14px] rounded-md",children:(0,I.jsxs)(N.A,{defaultValue:"",value:he,onChange:e=>{be(e),re(1)},className:"".concat(v.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(N.A.Option,{value:"",children:"Select Branch"}),null===te||void 0===te?void 0:te.map(e=>(0,I.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,I.jsxs)(N.A,{defaultValue:"",className:"".concat(v.Lp," "),showSearch:!0,value:pe,onChange:e=>{me(e),re(1)},filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(N.A.Option,{value:"",children:"Select Status"}),(0,I.jsx)(N.A.Option,{value:"Requested",children:"Requested"}),(0,I.jsx)(N.A.Option,{value:"Approved",children:"Approved"}),(0,I.jsx)(N.A.Option,{value:"Rejected",children:"Rejected"}),(0,I.jsx)(N.A.Option,{value:"Completed",children:"Completed"})]})]}),(0,I.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,I.jsx)("button",{onClick:()=>{re(1),be(""),me(""),ve("")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,I.jsx)("span",{className:"text-[12px]",children:"Reset"})}),V&&(0,I.jsx)(w.A,{placement:"topLeft",title:"Create Termination",children:(0,I.jsxs)("button",{onClick:()=>{J("/admin/Termination/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,I.jsx)(r.OiG,{}),(0,I.jsx)("span",{className:"text-[12px]",children:"Add Termination"})]})})]})]})}),(0,I.jsxs)("div",{className:"w-full",children:[(0,I.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,I.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,I.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,I.jsx)("th",{className:"tableHead",children:"Employee Name"}),(0,I.jsx)("th",{className:"tableHead",children:"Apply Date"}),(0,I.jsx)("th",{className:"tableHead",children:"Notice Period(days)"}),(0,I.jsx)("th",{className:"tableHead",children:"Status"}),(0,I.jsx)("th",{className:"tableHead",children:"Action"})]})}),X?(0,I.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,I.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,I.jsx)(R.A,{})})}):(0,I.jsx)("tbody",{children:G&&(null===G||void 0===G?void 0:G.length)>0?null===G||void 0===G?void 0:G.map((e,t)=>{var a,l,n;return(0,I.jsx)(s.Fragment,{children:(0,I.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,I.jsx)("td",{className:"tableData",children:t+1+(ie-1)*ce}),(0,I.jsx)("td",{className:"tableData",children:null!==(a=null===e||void 0===e?void 0:e.employeName)&&void 0!==a?a:"-"}),(0,I.jsx)("td",{className:"tableData",children:S()(null===e||void 0===e?void 0:e.applyDate).format("DD-MM-YYYY")}),(0,I.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.noticePeriod}),(0,I.jsx)("td",{className:"tableData",children:(0,I.jsx)("span",{className:"border-[1px] px-2 py-1.5 rounded-lg text-[12px] text-black ".concat("Completed"===(null===e||void 0===e?void 0:e.status)?"bg-[#E0FFBE] border-green-600":"Requested"===(null===e||void 0===e?void 0:e.status)?"bg-blue-100 border-blue-500":"Approved"===(null===e||void 0===e?void 0:e.status)?"bg-yellow-100 border-yellow-500":"Rejected"===(null===e||void 0===e?void 0:e.status)?"bg-red-200 border-red-500":"bg-gray-100 border-gray-300"),children:null===e||void 0===e?void 0:e.status})}),(0,I.jsx)("td",{className:"tableData",children:(0,I.jsx)(g.A,{menu:{items:[{key:"view-doc",label:(0,I.jsxs)("span",{onClick:()=>{var t;return(null===e||void 0===e||null===(t=e.attachment)||void 0===t?void 0:t.length)>0&&$({isOpen:!0,data:e,resignation:{}})},className:"flex items-center ".concat((null===e||void 0===e||null===(l=e.attachment)||void 0===l?void 0:l.length)>0?"text-rose-700 hover:text-rose-700":"text-gray-400 cursor-not-allowed"),children:[(0,I.jsx)(O.kQE,{className:"mr-2",size:16}),"View Document"]}),disabled:!((null===e||void 0===e||null===(n=e.attachment)||void 0===n?void 0:n.length)>0)},{key:"view-comment",label:(0,I.jsxs)("span",{onClick:()=>(0,v.v2)((null===e||void 0===e?void 0:e.reason)||"Data not available"),className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,I.jsx)(f.qSe,{className:"mr-2",size:16}),"View Comment"]})},{key:"view-desc",label:(0,I.jsxs)("span",{onClick:()=>(0,v.v2)((null===e||void 0===e?void 0:e.description)||"Data not available"),className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,I.jsx)(f.qSe,{className:"mr-2",size:16}),"View Description"]})},E&&{key:"reject",label:(0,I.jsxs)("span",{onClick:()=>!["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)&&Ce(e,"Rejected"),className:"flex items-center ".concat(["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)?"text-gray-300 cursor-not-allowed":"text-red-500 hover:text-red-500"),children:[(0,I.jsx)(k.qSu,{className:"mr-2",size:16}),"Reject"]}),disabled:["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)},E&&{key:"approve",label:(0,I.jsxs)("span",{onClick:()=>!["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)&&Ce(e,"Approved"),className:"flex items-center ".concat(["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)?"text-gray-300 cursor-not-allowed":"text-teal-500 hover:text-teal-500"),children:[(0,I.jsx)(A.aXZ,{className:"mr-2",size:16}),"Approve"]}),disabled:["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)},E&&{key:"complete",label:(0,I.jsxs)("span",{onClick:()=>!["Completed","Rejected","Requested"].includes(null===e||void 0===e?void 0:e.status)&&Ce(e,"Completed"),className:"flex items-center ".concat(["Completed","Rejected","Requested"].includes(null===e||void 0===e?void 0:e.status)?"text-gray-300 cursor-not-allowed":"text-green-500 hover:text-green-500"),children:[(0,I.jsx)(k.Mcx,{className:"mr-2",size:16}),"Complete"]}),disabled:["Completed","Rejected","Requested"].includes(null===e||void 0===e?void 0:e.status)},E&&{key:"edit",label:(0,I.jsxs)("span",{onClick:()=>!["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)&&J("/admin/termination/edit/".concat((0,m.w)(null===e||void 0===e?void 0:e._id))),className:"flex items-center ".concat(["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)?"text-gray-300 cursor-not-allowed":"text-[#3c8dbc] hover:text-[#337ab7]"),children:[(0,I.jsx)(r.Jcp,{className:"mr-2",size:16}),"Edit"]}),disabled:["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)},B&&{key:"delete",label:(0,I.jsxs)("span",{onClick:()=>!["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)&&(e=>{let t={_id:e};p().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&Z((0,_._0)(t)).then(e=>{je(),ie>1&&1==(null===G||void 0===G?void 0:G.length)?re(Number(ie-1)):je()})})})(null===e||void 0===e?void 0:e._id),className:"flex items-center ".concat(["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)?"text-gray-300 cursor-not-allowed":"text-red-600 hover:text-red-500"),children:[(0,I.jsx)(c.tqC,{className:"mr-2",size:16}),"Delete"]}),disabled:["Completed","Rejected","Approved"].includes(null===e||void 0===e?void 0:e.status)}]},trigger:["click"],children:(0,I.jsx)(w.A,{placement:"topLeft",title:"More Actions",children:(0,I.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,I.jsx)(P.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})]})},e._id)}):(0,I.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,I.jsx)("td",{colSpan:6,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===G||void 0===G?void 0:G.length)>0&&(0,I.jsx)(x.A,{totalCount:Q,pageSize:ce,currentPage:ie,onChange:e=>re(e)})]}),fe&&ye&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1501]",onClick:we,children:(0,I.jsxs)("div",{className:"animate-slideInFromTop bg-white rounded-lg px-6 pt-6 pb-3 w-[800px] max-h-[70vh] overflow-y-hidden",onClick:e=>e.stopPropagation(),children:[(0,I.jsx)("div",{className:"mt-4",children:(0,I.jsx)("div",{dangerouslySetInnerHTML:{__html:null===ye||void 0===ye?void 0:ye.content}})}),(0,I.jsx)("div",{className:"mt-4 flex justify-end",children:(0,I.jsx)("button",{onClick:we,className:"px-4 py-2 text-white bg-header rounded-md",children:"Close"})})]})})]})}}}]);
//# sourceMappingURL=6209.c7013b2f.chunk.js.map