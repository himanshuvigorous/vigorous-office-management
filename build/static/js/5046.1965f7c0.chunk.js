"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5046],{45046:(e,l,a)=>{a.d(l,{A:()=>b});var d=a(89379),s=a(51957),i=a(24858),n=a(15187),r=a(84480),o=a(30575),t=a(36105),c=a(3825),u=a(83003),v=a(70337),m=a(65043),h=(a(86178),a(56659)),x=a(89427),p=a(70579);const b=function(e){let{clientData:l,fetchData:a}=e;const b=(0,u.wA)(),{register:y,control:g,handleSubmit:N,setValue:j,watch:D,formState:{errors:f},reset:B}=(0,i.mN)({defaultValues:{BranchDetails:[{fullName:"",userType:"clientBranch",email:"",mobile:{code:"",number:""},directorProfile:{isShareLoginDetails:!1,secondaryEmail:"",secondaryMobile:[{code:"",number:""}],landline:{code:"",number:""}},addresses:{street:"",city:"",state:"",country:"",pinCode:""}}]}}),{countryListData:A,loading:C}=(0,u.d4)(e=>e.country),{stateListData:q}=(0,u.d4)(e=>e.states),{cityListData:w}=(0,u.d4)(e=>e.city),{fields:P,append:S,remove:I}=(0,i.jz)({control:g,name:"BranchDetails"});return(0,m.useEffect)(()=>{var e,a,d;if(null!==l&&void 0!==l&&null!==(e=l.data)&&void 0!==e&&e.branchData&&(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(d=a.branchData)||void 0===d?void 0:d.length)>0){var s,i;const e=null===l||void 0===l||null===(s=l.data)||void 0===s||null===(i=s.branchData)||void 0===i?void 0:i.map(e=>{var l,a,d,s,i,n,r,o,t,c,u,v,m,h,x,p,b,y;return{clientData:[],addresses:{street:null===e||void 0===e||null===(l=e.addresses)||void 0===l||null===(a=l.primary)||void 0===a?void 0:a.street,country:null===e||void 0===e||null===(d=e.addresses)||void 0===d||null===(s=d.primary)||void 0===s?void 0:s.country,state:null===e||void 0===e||null===(i=e.addresses)||void 0===i||null===(n=i.primary)||void 0===n?void 0:n.state,city:null===e||void 0===e||null===(r=e.addresses)||void 0===r||null===(o=r.primary)||void 0===o?void 0:o.city,pinCode:null===e||void 0===e||null===(t=e.addresses)||void 0===t||null===(c=t.primary)||void 0===c?void 0:c.pinCode},_id:null===e||void 0===e?void 0:e._id,fullName:null===e||void 0===e?void 0:e.fullName,userType:"clientOwner",gst:null===e||void 0===e||null===(u=e.branchProfile)||void 0===u?void 0:u.GSTNumber,email:null===e||void 0===e?void 0:e.email,mobile:{code:null===e||void 0===e||null===(v=e.mobile)||void 0===v?void 0:v.code,number:null===e||void 0===e||null===(m=e.mobile)||void 0===m?void 0:m.number},branchProfile:{isShareLoginDetails:null===e||void 0===e||null===(h=e.branchProfile)||void 0===h?void 0:h.isShareLoginDetails,secondaryEmail:"",secondaryMobile:{code:"",number:""},landline:{code:null===e||void 0===e||null===(x=e.branchProfile)||void 0===x||null===(p=x.landline)||void 0===p?void 0:p.code,number:null===e||void 0===e||null===(b=e.branchProfile)||void 0===b||null===(y=b.landline)||void 0===y?void 0:y.number}}}});B({BranchDetails:e})}},[l,B]),(0,p.jsx)("form",{autoComplete:"off",onSubmit:N(e=>{var d,s,i,n;const r={companyId:null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.companyId,directorId:"",branchId:null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.branchId,clientId:null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i._id,type:"Branch",branchArr:null===e||void 0===e||null===(n=e.BranchDetails)||void 0===n?void 0:n.map(e=>{var l,a,d,s,i,n,r;return{_id:null===e||void 0===e?void 0:e._id,fullName:null===e||void 0===e?void 0:e.fullName,userType:"clientBranch",password:"",email:null===e||void 0===e?void 0:e.email,mobile:{code:null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code,number:null===e||void 0===e||null===(a=e.mobile)||void 0===a?void 0:a.number},branchProfile:{secondaryEmail:"",secondaryMobile:{code:"",number:""},landline:{code:null,number:null},GSTNumber:null===e||void 0===e?void 0:e.gst},addresses:{primary:{street:null===e||void 0===e||null===(d=e.addresses)||void 0===d?void 0:d.street,city:null===e||void 0===e||null===(s=e.addresses)||void 0===s?void 0:s.city,state:null===e||void 0===e||null===(i=e.addresses)||void 0===i?void 0:i.state,country:null===e||void 0===e||null===(n=e.addresses)||void 0===n?void 0:n.country,pinCode:null===e||void 0===e||null===(r=e.addresses)||void 0===r?void 0:r.pinCode},secondary:{street:"",city:"",state:"",country:"",pinCode:""},location:{latitude:0,longitude:0,address:""}}}})};b((0,v.bU)(r)).then(e=>{null!==e&&void 0!==e&&e.error||a()})}),children:(0,p.jsxs)(p.Fragment,{children:[P.map((e,l)=>{var u,m,N,j,B,P,S,E,_,L,F,O,Q,T,Z,M,k,z,G,V,$,H,R,U,X,Y,J,K,W,ee,le,ae,de,se,ie,ne,re,oe,te,ce,ue,ve,me,he;return(0,p.jsxs)("div",{className:"border border-gray-300 rounded-md my-2",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-4 bg-header rounded-t-md",children:[(0,p.jsxs)("div",{className:"px-3 py-2 text-white font-semibold",children:["Branch ",l+1]}),0!==l&&(0,p.jsx)("button",{type:"button",onClick:()=>((e,l)=>{null!==e&&void 0!==e&&e._id?b((0,v.hs)({_id:null===e||void 0===e?void 0:e._id})).then(e=>{null!==e&&void 0!==e&&e.error||a()}):I(l)})(e,l),className:"text-red-600 hover:text-red-800",children:(0,p.jsx)(c.F23,{size:20,className:"m-2"})})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"".concat(n.Q0),children:["Full Name ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)("input",(0,d.A)((0,d.A)({placeholder:"Full Name"},y("BranchDetails.".concat(l,".fullName"),{required:"Full Name is required"})),{},{defaultValue:e.fullName,className:"".concat(n.Ol," ").concat(null!==f&&void 0!==f&&null!==(u=f.BranchDetails)&&void 0!==u&&null!==(m=u[l])&&void 0!==m&&m.fullName?"border-[1px] ":"border-gray-300")})),(null===f||void 0===f||null===(N=f.BranchDetails)||void 0===N||null===(j=N[l])||void 0===j?void 0:j.fullName)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:f.BranchDetails[l].fullName.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"".concat(n.Q0),children:["Email ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)("input",(0,d.A)((0,d.A)({placeholder:"Email"},y("BranchDetails.".concat(l,".email"),{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Invalid email address"}})),{},{defaultValue:e.email,className:"".concat(n.Ol," ").concat(null!==f&&void 0!==f&&null!==(B=f.BranchDetails)&&void 0!==B&&null!==(P=B[l])&&void 0!==P&&P.email?"border-[1px] ":"border-gray-300")})),(null===f||void 0===f||null===(S=f.BranchDetails)||void 0===S||null===(E=S[l])||void 0===E?void 0:E.email)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:f.BranchDetails[l].email.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"".concat(n.Q0),children:["Mobile ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)("div",{className:"w-[150px]",children:(0,p.jsx)(i.xI,{control:g,name:"BranchDetails.".concat(l,".mobile.code"),rules:{required:"code is required"},render:e=>{let{field:l}=e;return(0,p.jsx)(h.A,{field:l,errors:f})}})}),(0,p.jsx)("div",{className:"w-full",children:(0,p.jsx)("input",(0,d.A)((0,d.A)({type:"number"},y("BranchDetails.".concat(l,".mobile.number"),{required:"Mobile number is required",minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))},placeholder:"Number",className:"".concat(n.Ol," ").concat(null!==f&&void 0!==f&&null!==(_=f.BranchDetails)&&void 0!==_&&null!==(L=_[l])&&void 0!==L&&null!==(F=L.mobile)&&void 0!==F&&F.number?"border-[1px] ":"border-gray-300")}))})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(null===f||void 0===f||null===(O=f.BranchDetails)||void 0===O||null===(Q=O[l])||void 0===Q||null===(T=Q.mobile)||void 0===T?void 0:T.code)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:f.BranchDetails[l].mobile.code.message}),(null===f||void 0===f||null===(Z=f.BranchDetails)||void 0===Z||null===(M=Z[l])||void 0===M||null===(k=M.mobile)||void 0===k?void 0:k.number)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:f.BranchDetails[l].mobile.number.message})]})]}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsx)("label",{className:"".concat(n.Q0),children:"GST Number"}),(0,p.jsx)("input",(0,d.A)((0,d.A)({type:"text"},y("BranchDetails.".concat(l,".gst"),{pattern:{value:/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[Z]{1}[0-9A-Z]{1}$/,message:"Invalid GST Number format (29AAACH7409R1ZX)"}})),{},{className:" ".concat(n.Ol," ").concat(null!==(z=f.BranchDetails)&&void 0!==z&&null!==(G=z[l])&&void 0!==G&&G.gst?"border-[1px] ":"border-gray-300"),placeholder:"Enter GST Number",maxLength:15})),(null===(V=f.BranchDetails)||void 0===V||null===($=V[l])||void 0===$?void 0:$.gst)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:null===(H=f.BranchDetails)||void 0===H||null===(R=H[l])||void 0===R?void 0:R.gst.message})]})]}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3",children:(0,p.jsxs)("div",{className:"col-span-2",children:[(0,p.jsxs)("label",{className:"".concat(n.Q0),children:["Primary Address",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)("input",(0,d.A)((0,d.A)({type:"text"},y("BranchDetails.".concat(l,".addresses.street"),{required:"Primary Address is required"})),{},{className:"".concat(n.Ol," ").concat(null!==(U=f.BranchDetails)&&void 0!==U&&null!==(X=U[l])&&void 0!==X&&null!==(Y=X.addresses)&&void 0!==Y&&Y.street?"border-[1px] ":"border-gray-300"),placeholder:"Enter Primary Address"})),(null===(J=f.BranchDetails)||void 0===J||null===(K=J[l])||void 0===K||null===(W=K.addresses)||void 0===W?void 0:W.street)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:null===(ee=f.BranchDetails)||void 0===ee||null===(le=ee[l])||void 0===le||null===(ae=le.addresses)||void 0===ae?void 0:ae.street.message})]})}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 md:gap-8 md:my-1 px-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"".concat(n.Q0),children:["Country ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)(i.xI,{control:g,name:"BranchDetails.".concat(l,".addresses.country"),rules:{required:"Country is required"},render:e=>{var a,i,r,o;let{field:c}=e;return(0,p.jsx)(s.A,(0,d.A)((0,d.A)({},c),{},{onChange:e=>c.onChange(e),className:"w-full",options:null===(a=(0,n._o)(null===A||void 0===A?void 0:A.docs))||void 0===a?void 0:a.map(e=>({value:null===e||void 0===e?void 0:e.name})),notFoundContent:C&&(0,p.jsx)(x.A,{}),children:(0,p.jsx)("input",{placeholder:"Enter Country",onFocus:()=>{b((0,t.dw)({isPagination:!1,text:"",sort:!0,status:!0}))},className:"".concat(n.Ol," ").concat(null!==(i=f.BranchDetails)&&void 0!==i&&null!==(r=i[l])&&void 0!==r&&null!==(o=r.addresses)&&void 0!==o&&o.country?"border-[1px] ":"border-gray-300")})}))}}),(null===(de=f.BranchDetails)||void 0===de||null===(se=de[l])||void 0===se||null===(ie=se.addresses)||void 0===ie?void 0:ie.country)&&(0,p.jsx)("p",{className:"".concat(n.ci),children:f.BranchDetails[l].addresses.country.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"".concat(n.Q0),children:["State ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)(i.xI,{control:g,name:"BranchDetails.".concat(l,".addresses.state"),rules:{required:"State is required"},render:e=>{var a,i,r,t;let{field:c}=e;return(0,p.jsx)(s.A,(0,d.A)((0,d.A)({},c),{},{onChange:e=>c.onChange(e),className:"w-full",options:null===(a=(0,n._o)(null===q||void 0===q?void 0:q.docs))||void 0===a?void 0:a.map(e=>({value:null===e||void 0===e?void 0:e.name})),notFoundContent:(0,p.jsx)(x.A,{}),children:(0,p.jsx)("input",{placeholder:"Enter State",onFocus:()=>{b((0,o.mz)({isPagination:!1,text:"",countryName:D("BranchDetails.".concat(l,".addresses.country")),sort:!0,status:!0}))},className:"".concat(n.Ol," ").concat(null!==(i=f.BranchDetails)&&void 0!==i&&null!==(r=i[l])&&void 0!==r&&null!==(t=r.addresses)&&void 0!==t&&t.state?"border-[1px] ":"border-gray-300")})}))}}),(null===(ne=f.BranchDetails)||void 0===ne||null===(re=ne[l])||void 0===re||null===(oe=re.addresses)||void 0===oe?void 0:oe.state)&&(0,p.jsx)("p",{className:"".concat(n.ci),children:f.BranchDetails[l].addresses.state.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"".concat(n.Q0),children:["City ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)(i.xI,{control:g,name:"BranchDetails.".concat(l,".addresses.city"),rules:{required:"City is required"},render:e=>{var a,i,o,t;let{field:c}=e;return(0,p.jsx)(s.A,(0,d.A)((0,d.A)({},c),{},{onChange:e=>c.onChange(e),className:"w-full",options:null===(a=(0,n._o)(null===w||void 0===w?void 0:w.docs))||void 0===a?void 0:a.map(e=>({value:null===e||void 0===e?void 0:e.name})),notFoundContent:(0,p.jsx)(x.A,{}),children:(0,p.jsx)("input",{placeholder:"Enter City",onFocus:()=>{b((0,r.cY)({isPagination:!1,text:"",sort:!0,status:!0,stateName:D("BranchDetails.".concat(l,".addresses.state"))}))},className:"".concat(n.Ol," ").concat(null!==(i=f.BranchDetails)&&void 0!==i&&null!==(o=i[l])&&void 0!==o&&null!==(t=o.addresses)&&void 0!==t&&t.city?"border-[1px] ":"border-gray-300")})}))}}),(null===(te=f.BranchDetails)||void 0===te||null===(ce=te[l])||void 0===ce||null===(ue=ce.addresses)||void 0===ue?void 0:ue.city)&&(0,p.jsx)("p",{className:"".concat(n.ci),children:f.BranchDetails[l].addresses.city.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"".concat(n.Q0),children:["Pin Code ",(0,p.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,p.jsx)(i.xI,{control:g,name:"BranchDetails.".concat(l,".addresses.pinCode"),rules:{required:"Pin Code is required"},render:e=>{var a,s,i;let{field:r}=e;return(0,p.jsx)("input",(0,d.A)((0,d.A)({},r),{},{type:"number",placeholder:"Enter Pin Code",maxLength:6,onInput:e=>{e.target.value.length>6&&(e.target.value=e.target.value.slice(0,6))},className:"".concat(n.Ol," ").concat(null!==(a=f.BranchDetails)&&void 0!==a&&null!==(s=a[l])&&void 0!==s&&null!==(i=s.addresses)&&void 0!==i&&i.pinCode?"border-[1px] ":"border-gray-300")}))}}),(null===(ve=f.BranchDetails)||void 0===ve||null===(me=ve[l])||void 0===me||null===(he=me.addresses)||void 0===he?void 0:he.pinCode)&&(0,p.jsx)("p",{className:"text-red-500 text-sm",children:f.BranchDetails[l].addresses.pinCode.message})]})]})]},e.id)}),(0,p.jsxs)("div",{className:"flex gap-2 justify-between items-center my-2",children:[(0,p.jsx)("button",{type:"button",onClick:()=>S({fullName:"",userType:"clientBranch",email:"",mobile:{code:"",number:""},directorProfile:{isShareLoginDetails:!1,secondaryEmail:"",secondaryMobile:[{code:"",number:""}],landline:{code:"",number:""}},addresses:{street:"",city:"",state:"",country:"",pinCode:""}}),className:"bg-header px-2 py-2 text-sm rounded-md text-white",children:"Add New Branch"}),(0,p.jsx)("button",{type:"submit",className:"bg-header px-2 py-2 text-sm rounded-md text-white",children:"Submit"})]})]})})}}}]);
//# sourceMappingURL=5046.1965f7c0.chunk.js.map