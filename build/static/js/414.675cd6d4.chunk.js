"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[414],{90414:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var n=a(65043),s=a(27759),d=a(73216),r=a(35475),i=a(83003),l=a(735),o=a(39160),c=a(24858),u=a(31744),p=a(4938),v=a(15187),h=a(55971),m=a(65512),x=a(96651),j=(a(86178),a(60446)),f=a.n(j),y=(a(31174),a(78227)),b=a(49804),w=a(30064),g=a.n(w),N=a(6720),A=a(70579);const T=()=>{const{register:e,handleSubmit:t,control:a,formState:{errors:j},setValue:w}=(0,c.mN)({}),T=((0,d.Zp)(),(0,i.wA)()),{branchList:D}=(0,i.d4)(e=>e.branch),{userCompanyId:C}=(0,l.A)(),{LeadmanagementTransferList:S,totalLeadmanagementTransferList:I,loading:L}=(0,i.d4)(e=>e.LeadmanagementFeature),{canCreate:_,canRead:B,canUpdate:R,canDelete:P}=(0,p.A)(),k=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),[q,U]=(0,r.ok)(),z=parseInt(q.get("page"))||1,F=parseInt(q.get("limit"))||10,Y=q.get("branchId")||"",[O,E]=(0,n.useState)(z),[H,M]=(0,n.useState)(F),[V,J]=(0,n.useState)(""),[Z,G]=(0,n.useState)(Y);(0,n.useEffect)(()=>{const e=new URLSearchParams;O>1&&e.set("page",O),H&&e.set("limit",H),Z&&e.set("branchId",Z),U(e)},[Z,V,O,H]),(0,n.useEffect)(()=>{"admin"!==(null===k||void 0===k?void 0:k.userType)&&"company"!==(null===k||void 0===k?void 0:k.userType)&&K()},[Z,V,O,H]);(0,n.useEffect)(()=>{"company"!==(null===k||void 0===k?void 0:k.userType)&&"companyDirector"!==(null===k||void 0===k?void 0:k.userType)||T((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId}))},[]);const K=()=>{const e={limit:H,page:O,reqPayload:{text:V,sort:!0,companyId:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?Z:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,isPagination:!0,status:"",leadId:"",fromUser:"",toUser:null===k||void 0===k?void 0:k._id,startDate:"",endDate:""}};T((0,s.Hr)(e))};return"admin"===(null===k||void 0===k?void 0:k.userType)||"company"===(null===k||void 0===k?void 0:k.userType)?(0,A.jsx)(o.A,{children:(0,A.jsx)("div",{className:"bg-red-100 text-red-800 p-4 rounded-md mt-2",children:(0,A.jsx)("p",{className:"text-center font-semibold",children:"You are not an Authorized. This page is viewable for Lead Handlers only."})})}):(0,A.jsx)(o.A,{onChange:e=>{J(e)},children:L?(0,A.jsx)(h.A,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"flex justify-between items-center m-1.5",children:(0,A.jsx)("div",{children:("admin"===(null===k||void 0===k?void 0:k.userType)||"company"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType))&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)(m.A,{defaultValue:"",onChange:e=>{G(e),E(1)},value:Z,className:"inputAntdSelectClassNameFilterReport",showSearch:!0,disabled:L,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(m.A.Option,{value:"",children:"Select Branch"}),null===D||void 0===D?void 0:D.map(e=>(0,A.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}),j.PDBranchId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:j.PDBranchId.message})]})})}),(0,A.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto rounded-xl mt-1",children:B&&(0,A.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,A.jsx)("thead",{className:"",children:(0,A.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,A.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,A.jsx)("span",{children:"Request from"})})}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,A.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,A.jsx)("span",{children:"created At"})})}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,A.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,A.jsx)("span",{children:"created By"})})}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:(0,A.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,A.jsx)("span",{children:"Status"})})}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),L?(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,A.jsx)(h.A,{})})}):(0,A.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.length)>0?null===S||void 0===S?void 0:S.map((e,t)=>{var a,n,d,r,i;return(0,A.jsxs)("tr",{className:" ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+(O-1)*H}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e||null===(n=e.FromUserData)||void 0===n?void 0:n.fullName)&&void 0!==a?a:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d=f()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==d?d:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(r=null===e||void 0===e?void 0:e.createdBy)&&void 0!==r?r:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(i=null===e||void 0===e?void 0:e.status)&&void 0!==i?i:"-"}),(0,A.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"null"===(null===e||void 0===e?void 0:e.companyId)||null===(null===e||void 0===e?void 0:e.companyId)?(0,A.jsx)("span",{className:"py-1.5 text-black ",children:" - "}):(0,A.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[R&&(0,A.jsx)(x.A,{placement:"topLeft",title:"Approve",children:(0,A.jsx)("button",{disabled:"Pending"!==(null===e||void 0===e?void 0:e.status),onClick:()=>{var t;t=null===e||void 0===e?void 0:e._id,g().fire({title:"Approve Lead Transfer Request",text:"Are you sure you want to approve this lead transfer request?",showCancelButton:!0,confirmButtonText:"Approve",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&T((0,s.t8)({_id:t,status:"Approved"})).then(e=>{null!==e&&void 0!==e&&e.error||(K(),g().fire("Approved!","The leave request has been approved.","success"))})})},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,A.jsx)(b.ti3,{className:"Pending"===(null===e||void 0===e?void 0:e.status)?" hover:text-[#337ab7] text-[#3c8dbc]":"text-gray-700",size:16})})}),R&&(0,A.jsx)(x.A,{placement:"topLeft",title:"",children:(0,A.jsx)("button",{disabled:"Pending"!==(null===e||void 0===e?void 0:e.status),onClick:()=>{var t;t=null===e||void 0===e?void 0:e._id,g().fire({title:"Reject Lead Transfer Request",text:"Are you sure you want to Reject this lead transfer request?",showCancelButton:!0,confirmButtonText:"Rejected",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&T((0,s.t8)({_id:t,status:"Rejected"})).then(e=>{null!==e&&void 0!==e&&e.error||(K(),g().fire("Rejected!","The leave request has been rejected.","success"))})})},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,A.jsx)(N.uDv,{className:"Pending"===(null===e||void 0===e?void 0:e.status)?" hover:text-rose-800 text-rose-900":"text-gray-700",size:16})})})]})})]},t)}):(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,A.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,A.jsx)(y.A,{totalCount:I,pageSize:H,currentPage:O,onChange:e=>E(e)})})]})})}}}]);
//# sourceMappingURL=414.675cd6d4.chunk.js.map