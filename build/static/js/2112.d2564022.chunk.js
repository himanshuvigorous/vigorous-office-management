"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2112],{65337:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(91686),s=n(70579);const r=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,s.jsx)(a.A,{size:"large"})})}},82112:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(89379),s=n(65043),r=n(39160),d=n(83003),l=n(23156),c=n(47196),i=n(73216),o=n(24858),p=n(15187),u=n(31744),x=n(78729),h=n(31174),m=n(30064),j=n.n(m),f=n(41914),v=n(65512),w=n(96651),b=n(735),y=n(78227),N=(n(65337),n(3538)),g=n(4938),A=n(55971),D=n(86178),C=n.n(D),S=n(89427),I=n(70579);const L=function(){const{register:e,control:t,setValue:n,formState:{errors:m}}=(0,o.mN)(),{userCompanyId:D,userBranchId:L,userType:P}=(0,b.A)(),{deductionsListData:B,deductionsListTotal:O,loading:_}=(0,d.d4)(e=>e.deductions),[k,E]=(0,s.useState)(1),q=(0,d.wA)(),z=(0,i.Zp)(),{companyList:F}=(0,d.d4)(e=>e.company),{branchList:V,loading:Y}=(0,d.d4)(e=>e.branch),H=(0,o.FH)({control:t,name:"PDCompanyId",defaultValue:D}),R=(0,o.FH)({control:t,name:"PDBranchId",defaultValue:L}),T=(0,o.FH)({control:t,name:"status",defaultValue:""}),[M,U]=(0,s.useState)(""),G=[H,R,T,M].join("-"),[J,W]=(0,s.useState)(!1);(0,s.useEffect)(()=>{J?1===k?Z():E(1):W(e=>!0)},[G]),(0,s.useEffect)(()=>{Z()},[k]);const Z=()=>{let e={currentPage:k,pageSize:10,reqPayload:{text:M,sort:!0,status:"true"===T||"false"!==T&&"",isPagination:!0,directorId:"",companyId:H||"",branchId:R||""}};q((0,f.xD)(e))};(0,s.useEffect)(()=>{(H||"company"===P||"companyDirector"===P)&&q((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:H}))},[H]),(0,s.useEffect)(()=>{"admin"===P&&q((0,x.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:K,canRead:Q,canUpdate:X,canDelete:$}=(0,g.A)();return(0,I.jsx)(r.A,{onChange:e=>{U(e)},children:(0,I.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,I.jsxs)("div",{className:"w-full sm:flex justify-between items-center py-1 sm:space-y-0 space-y-2",children:[(0,I.jsxs)("div",{className:"sm:flex justify-between items-center  sm:space-x-2 space-x-0 px-2 text-[14px] rounded-md",children:["admin"===P&&(0,I.jsxs)("div",{className:"flex justify-center items-center space-x-2 text-[14px] rounded-md",children:[(0,I.jsx)(N.syA,{}),(0,I.jsx)(o.xI,{control:t,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,I.jsxs)(v.A,(0,a.A)((0,a.A)({},t),{},{defaultValue:"",className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(v.A.Option,{value:"",children:"Select Company"}),null===F||void 0===F?void 0:F.map(e=>(0,I.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})]}),("admin"===P||"company"===P||"companyDirector"===P)&&(0,I.jsx)("div",{className:"flex justify-center items-center space-x-2 text-[14px] rounded-md",children:(0,I.jsx)(o.xI,{control:t,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var t;let{field:n}=e;return(0,I.jsxs)(v.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(v.A.Option,{value:"",children:"Select Branch"}),Y?(0,I.jsx)(v.A.Option,{disabled:!0,children:(0,I.jsx)(S.A,{})}):null===(t=(0,p._o)(V))||void 0===t?void 0:t.map(e=>(0,I.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),(0,I.jsx)(o.xI,{name:"status",control:t,rules:{},render:e=>{let{field:t}=e;return(0,I.jsxs)(v.A,(0,a.A)((0,a.A)({},t),{},{className:" w-32 ".concat(p.Lp," ").concat(m.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,I.jsx)(v.A.Option,{value:"",children:"Select Status"}),(0,I.jsx)(v.A.Option,{value:"true",children:" Active "}),(0,I.jsx)(v.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,I.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,I.jsx)("button",{onClick:()=>{n("status",""),n("PDBranchId",""),n("PdDepartmentId",""),n("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,I.jsx)("span",{className:"text-[12px]",children:"Reset"})}),K&&Q&&(0,I.jsx)(w.A,{placement:"topLeft",title:"Create Deduction",children:(0,I.jsxs)("button",{onClick:()=>z("/admin/deductions/create"),className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,I.jsx)(l.OiG,{}),(0,I.jsx)("span",{className:"text-[12px]",children:"Create Deductions"})]})})]})]}),(0,I.jsxs)("div",{className:"w-full",children:[(0,I.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:Q&&(0,I.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[20%]",children:"Name"}),("admin"===P||"company"===P||"companyDirector"===P)&&(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Branch Name"}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(X||$)&&(0,I.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),_?(0,I.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,I.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,I.jsx)(A.A,{})})}):(0,I.jsx)("tbody",{children:B&&(null===B||void 0===B?void 0:B.length)>0?null===B||void 0===B?void 0:B.map((e,t)=>{var n,a;return(0,I.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:t+1+10*(k-1)}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:e.name}),("admin"===P||"company"===P||"companyDirector"===P)&&(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:null===(n=e.branchData)||void 0===n?void 0:n.fullName}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:C()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,I.jsx)(w.A,{placement:"topLeft",title:"Status - ".concat(null!==e&&void 0!==e&&e.status?"Active":"InActive"),children:(0,I.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(a="Inactive")?a:"-"})})}),(X||$)&&(0,I.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,I.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[X&&(0,I.jsx)(w.A,{placement:"topLeft",title:"Edit",children:(0,I.jsx)("button",{onClick:()=>z("/admin/deductions/edit/".concat((0,h.w)(null===e||void 0===e?void 0:e._id))),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,I.jsx)(l.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),$&&(0,I.jsx)(w.A,{placement:"topLeft",title:"Delete",children:(0,I.jsx)("button",{onClick:()=>(e=>{let t={_id:e};j().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&q((0,f.UC)(t)).then(e=>{k>1&&1==(null===B||void 0===B?void 0:B.length)?E(Number(k-1)):Z()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted hover:bg-red-100",type:"button",children:(0,I.jsx)(c.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,I.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,I.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,I.jsx)(y.A,{totalCount:O,pageSize:10,currentPage:k,onChange:e=>{E(e)}})]})]})})}}}]);
//# sourceMappingURL=2112.d2564022.chunk.js.map