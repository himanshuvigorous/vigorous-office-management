"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5346],{75346:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var l=a(73216),s=a(35475),n=a(39160),d=a(83003),o=a(65043),i=a(60446),c=a.n(i),r=a(30064),u=a.n(r),m=a(31174),x=a(23156),p=a(47196),h=a(24858),v=a(77396),b=a(15187),y=a(6720),j=a(30326),N=a(65512),f=a(96651),g=a(4938),w=a(78227),D=a(83002),A=a(89427),C=a(70579);const S=function(){const{canCreate:e,canRead:t,canUpdate:a,canDelete:i}=(0,g.A)(),{register:r,setValue:S,control:R,formState:{errors:I}}=(0,h.mN)(),k=(0,l.Zp)(),P=(0,d.wA)(),{penaltyListData:H,totapenaltyCount:B,penaltyloading:Y}=(0,d.d4)(e=>e.employeePenalty),_=(0,h.FH)({control:R,name:"PDCompanyId",defaultValue:""}),T=(0,h.FH)({control:R,name:"PDBranchId",defaultValue:""}),E=((0,h.FH)({control:R,name:"status",defaultValue:""}),JSON.parse(localStorage.getItem("user_info_".concat(b.AU)))),[L,z]=(0,s.ok)(),F=parseInt(L.get("page"))||1,O=L.get("status")||"",[M,U]=(0,o.useState)(F),[V,q]=(0,o.useState)(10),[J,W]=(0,o.useState)(O),[G,X]=(0,o.useState)("");(0,o.useEffect)(()=>{const e=new URLSearchParams;M>1&&e.set("page",M),J&&e.set("status",J),z(e)},[J,M,G]),(0,o.useEffect)(()=>{Z()},[J,M,G]);const Z=()=>{const e={currentPage:M,pageSize:V,reqData:{directorId:"",companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?_:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:"company"===(null===E||void 0===E?void 0:E.userType)||"admin"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType)?T:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,text:G,sort:!0,status:J,isPagination:!0,employeId:"",penaltyId:"",issueDate:""}};P((0,v.IX)(e))};return(0,C.jsxs)(n.A,{onChange:e=>{X(e)},children:[(0,C.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,C.jsx)("div",{className:"",children:(0,C.jsxs)(N.A,{className:"".concat(b.Lp),placeholder:"Select Status",value:J,onChange:e=>{W(e),U(1)},disabled:Y,showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(N.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(N.A.Option,{value:"Pending",children:" Imposed "}),(0,C.jsx)(N.A.Option,{value:"Resolved",children:" Removed "})]})}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{U(1),W(""),X("")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),e&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Add Employee Penalty",children:(0,C.jsxs)("button",{onClick:()=>{k("/admin/employee-penalty/create")},className:"bg-[#074173] px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,C.jsx)(x.OiG,{}),(0,C.jsx)("span",{className:"text-[12px]",children:"Add Employee Penalty"})]})})]})]}),(0,C.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:t&&(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Employee Name"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Penalty Name"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Date"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Imposed By"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Penalty Amount"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Reason"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"createdAt"}),(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Status"}),(i||a)&&(0,C.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),Y?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:(0,C.jsx)(A.A,{})})}):(0,C.jsx)("tbody",{children:H&&(null===H||void 0===H?void 0:H.length)>0?null===H||void 0===H?void 0:H.map((e,t)=>{var l;return(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] text-[#374151] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"),children:[(0,C.jsx)("td",{className:"tableData",children:t+1+(M-1)*V}),(0,C.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.employeName)||"-"}),(0,C.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.penaltyName)||"-"}),(0,C.jsx)("td",{className:"tableData",children:null!==e&&void 0!==e&&e.issueDate?c()(e.issueDate).format("YYYY-MM-DD"):"-"}),(0,C.jsx)("td",{className:"tableData",children:null!==(l=null===e||void 0===e?void 0:e.createdBy)&&void 0!==l?l:"-"}),(0,C.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.amount)||"-"}),(0,C.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.reason)||"-"}),(0,C.jsx)("td",{className:"tableData",children:c()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,C.jsx)("td",{className:"tableData",children:(0,C.jsx)("span",{className:"".concat("Pending"===(null===e||void 0===e?void 0:e.status)?"bg-red-200 border-red-500":"bg-[#E0FFBE] border-green-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:"Pending"===(null===e||void 0===e?void 0:e.status)?"Imposed":"Resolved"===(null===e||void 0===e?void 0:e.status)?"Removed":null===e||void 0===e?void 0:e.status})}),(i||a)&&(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[a&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Status",children:(0,C.jsx)("button",{disabled:"Resolved"===(null===e||void 0===e?void 0:e.status),onClick:()=>(async e=>{(await u().fire({title:"Are you sure?",text:"Do you want to Update status to  Removed?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed?await P((0,v.eY)({_id:null===e||void 0===e?void 0:e._id,status:"Resolved"})).then(e=>{(null===e||void 0===e||!e.error)&&Z()}):u().fire("Cancelled","Your action has been cancelled.","info")})(e),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(y.tnc,{className:"Resolved"===(null===e||void 0===e?void 0:e.status)?"opacity-50 cursor-not-allowed":" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,C.jsx)(j.A,{menu:{items:[a&&{key:"edit",label:(0,C.jsxs)("span",{onClick:()=>"Resolved"!==(null===e||void 0===e?void 0:e.status)&&k("/admin/employee-penalty/edit/".concat((0,m.w)(null===e||void 0===e?void 0:e._id))),className:"flex items-center ".concat("Resolved"===(null===e||void 0===e?void 0:e.status)?"text-gray-400 cursor-not-allowed":"text-[#3c8dbc] hover:text-[#337ab7]"),children:[(0,C.jsx)(x.Jcp,{className:"mr-2",size:16}),"Edit"]}),disabled:"Resolved"===(null===e||void 0===e?void 0:e.status)},i&&{key:"delete",label:(0,C.jsxs)("span",{onClick:()=>(e=>{let t={_id:e};u().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&P((0,v.f2)(t)).then(e=>{M>1&&1==(null===H||void 0===H?void 0:H.length)?U(Number(M-1)):Z()})})})(null===e||void 0===e?void 0:e._id),className:"flex items-center text-red-600 hover:text-red-500",children:[(0,C.jsx)(p.tqC,{className:"mr-2",size:16}),"Delete"]})}]},trigger:["click"],children:(0,C.jsx)(f.A,{placement:"topLeft",title:"More Actions",children:(0,C.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(D.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===H||void 0===H?void 0:H.length)>0&&(0,C.jsx)(w.A,{totalCount:B,pageSize:V,currentPage:M,onChange:e=>U(e)})]})}}}]);
//# sourceMappingURL=5346.bfc4bbf8.chunk.js.map