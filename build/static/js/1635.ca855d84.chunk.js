"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1635],{11635:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var l=a(89379),s=a(65043),i=a(39160),n=a(83003),d=a(87632),o=a(86178),r=a.n(o),c=(a(60446),a(60184)),p=a(55008),h=a(53913),x=a(60647),u=a(65512),m=a(96651),v=a(47196),w=a(6720),f=a(24858),j=a(15187),N=a(31744),y=a(78227),b=a(89427),g=a(70579);const D=()=>{const{branchList:e,branchListloading:t}=(0,n.d4)(e=>e.branch),[a,o]=(0,s.useState)(""),D=JSON.parse(localStorage.getItem("user_info_".concat(j.AU))),{control:A,register:C,setValue:_,formState:{errors:I}}=(0,f.mN)(),S=(0,f.FH)({control:A,name:"PDBranchId",defaultValue:""}),[T,V]=(0,s.useState)(1);(0,s.useEffect)(()=>{(null!==D&&void 0!==D&&D._id||"company"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType))&&z((0,N.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===D||void 0===D?void 0:D.userType)||"company"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.companyId}))},[]);const{ClientDocumentList:k,totalClientDocumentCount:B,loading:P}=(0,n.d4)(e=>e.clientDocument),z=(0,n.wA)(),L=()=>{const e={text:a,status:"",sort:!0,limit:10,page:T,isPagination:!0,companyId:"company"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.companyId,branchId:"company"===(null===D||void 0===D?void 0:D.userType)||"admin"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType)?S:"companyBranch"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.branchId};z((0,d.FK)(e))},[Y,F]=(0,s.useState)([]),[O,q]=(0,s.useState)(!1),E=[S,a].join("-"),[G,R]=(0,s.useState)(!1);(0,s.useEffect)(()=>{G?1===T?L():V(1):R(e=>!0)},[E]),(0,s.useEffect)(()=>{L()},[S,T,a]);return(0,g.jsxs)(i.A,{onChange:e=>{o(e)},children:[(0,g.jsxs)("div",{className:"flex justify-start items-center md:space-x-2 space-x-2 py-1",children:[("admin"===(null===D||void 0===D?void 0:D.userType)||"company"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType))&&(0,g.jsxs)("div",{children:[(0,g.jsx)(f.xI,{control:A,name:"PDBranchId",rules:{required:"Branch is required"},render:a=>{let{field:s}=a;return(0,g.jsxs)(u.A,(0,l.A)((0,l.A)({},s),{},{defaultValue:"",disabled:P,className:"".concat(j.Lp),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(u.A.Option,{value:"",children:"Select Branch"}),t?(0,g.jsx)(u.A.Option,{disabled:!0,children:(0,g.jsx)(b.A,{})}):null===e||void 0===e?void 0:e.map(e=>(0,g.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),I.PDBranchId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:I.PDBranchId.message})]}),(0,g.jsx)("button",{onClick:()=>{_("PDBranchId","")},className:"bg-header rounded-md py-1.5 flex px-4 mt-1 justify-center items-center  text-white",children:(0,g.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,g.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,g.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Client Name"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Client Id"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Client Email"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Requested By"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Approved By"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Created At"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Total documents"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Pending Document Approval"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Action"})]})}),P?(0,g.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,g.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:(0,g.jsx)(b.A,{})})}):(0,g.jsx)("tbody",{children:k&&(null===k||void 0===k?void 0:k.length)>0?null===k||void 0===k?void 0:k.map((e,t)=>{var a,s;return(0,g.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:t+1+10*(T-1)}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px]",children:(null===e||void 0===e?void 0:e.fullName)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px]",children:(null===e||void 0===e?void 0:e.userName)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px]",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px]",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px]",children:(null===e||void 0===e?void 0:e.updatedBy)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px]",children:r()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px] text-center",children:(null===e||void 0===e||null===(a=e.documentData)||void 0===a?void 0:a.length)+(null===e||void 0===e||null===(s=e.financeData)||void 0===s?void 0:s.length)}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 text-[13px] text-center",children:(0,g.jsx)("div",{className:"flex justify-center items-center ",children:(0,g.jsx)("div",{className:"w-8 h-8 flex justify-center items-center  text-white bg-[#3D90D7] rounded-full",children:(null===e||void 0===e?void 0:e.documentDataCount)+(null===e||void 0===e?void 0:e.financeDataCount)})})}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2 ",children:(0,g.jsx)("div",{className:"flex justify-center items-center gap-2",children:(0,g.jsx)(m.A,{placement:"topLeft",title:"View document Details",children:(0,g.jsx)("button",{onClick:()=>{(e=>{var t,a;q(!0),F([...(null===e||void 0===e||null===(t=e.documentData)||void 0===t?void 0:t.map(e=>(0,l.A)((0,l.A)({},e),{},{type:"General"})))||[],...(null===e||void 0===e||null===(a=e.financeData)||void 0===a?void 0:a.map(e=>(0,l.A)((0,l.A)({},e),{},{type:"Finance"})))||[]])})(e)},className:"px-2 py-2 text-xs rounded-md bg-transparent text-header border border-muted",type:"button",children:(0,g.jsx)(c.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]"})})})})})]},null===e||void 0===e?void 0:e._id)}):(0,g.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,g.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),O&&(0,g.jsx)(h.A,{title:"Documents",open:O,onCancel:()=>q(!1),footer:null,width:"90%",centered:!0,zIndex:1460,className:"antmodalclassName",children:(0,g.jsx)("div",{className:"w-full max-w-full overflow-x-auto",children:(0,g.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,g.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Name"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Type"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Number"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Image"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Status"}),(0,g.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Action"})]})}),(0,g.jsx)("tbody",{children:Y&&(null===Y||void 0===Y?void 0:Y.length)>0?null===Y||void 0===Y?void 0:Y.map((e,t)=>(0,g.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:t+1}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:(null===e||void 0===e?void 0:e.name)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:(null===e||void 0===e?void 0:e.type)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:(null===e||void 0===e?void 0:e.number)||"-"}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,g.jsx)("div",{className:"w-full flex justify-start items-center gap-1",children:Array.isArray(null===e||void 0===e?void 0:e.filePath)&&e.filePath.map((e,t)=>"string"===typeof e?e.toLowerCase().endsWith(".pdf")?(0,g.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline block",children:(0,g.jsx)(c.uNb,{className:"text-rose-400 ",size:20})},t):(0,g.jsx)(p.A,{width:35,src:e,alt:"Preview ".concat(t)},t):null)})}),(0,g.jsx)("td",{className:"whitespace-nowrap p-2",children:null!==e&&void 0!==e&&e.isVerified?(0,g.jsxs)("span",{className:"bg-teal-400 py-1 px-2 text-white border-green-800 rounded-sm",children:[" ","Verified"," "]}):(0,g.jsxs)("span",{className:"bg-rose-500 py-1 px-2 text-white  rounded-sm",children:["Not Verified"," "]})}),(0,g.jsx)("td",{className:"whitespace-nowrap  p-2",children:(0,g.jsxs)("div",{className:"flex gap-2 z-50",children:[(0,g.jsx)(x.A,{title:"Verify the document",description:"Are you sure to Verify this document?",onConfirm:()=>(e=>{const t={_id:null===e||void 0===e?void 0:e._id,type:"General"==(null===e||void 0===e?void 0:e.type)?"documents":"financial",isVerified:!0};z((0,d.c4)(t)).then(e=>{e&&(F(t=>t.map(t=>{var a,s;return t._id===(null===(a=e.meta)||void 0===a||null===(s=a.arg)||void 0===s?void 0:s._id)?(0,l.A)((0,l.A)({},t),{},{isVerified:!0}):t})),L())})})(e),okText:"Yes",cancelText:"No",zIndex:1601,children:(0,g.jsx)(m.A,{placement:"topLeft",title:"Verify",children:(0,g.jsx)("button",{className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",disabled:null===e||void 0===e?void 0:e.isVerified,children:(0,g.jsx)(w.e8G,{className:"".concat(null!==e&&void 0!==e&&e.isVerified?"text-gray-500":" hover:text-green-500 text-green-600"),size:16})})})},t),(0,g.jsx)(x.A,{title:"Delete the document",description:"Are you sure to Delete this document?",onConfirm:()=>(e=>{const t={_id:null===e||void 0===e?void 0:e._id,type:"General"===(null===e||void 0===e?void 0:e.type)?"documents":"financial"};z((0,d.kr)(t)).then(e=>{var t,a;if(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&null!==(a=t.arg)&&void 0!==a&&a._id){const t=e.meta.arg._id;F(e=>e.filter(e=>e._id!==t))}})})(e),okText:"Yes",cancelText:"No",zIndex:1601,children:(0,g.jsx)(m.A,{placement:"topLeft",title:"Delete",children:(0,g.jsx)("button",{className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",disabled:null===e||void 0===e?void 0:e.isVerified,children:(0,g.jsx)(v.tqC,{className:"".concat(null!==e&&void 0!==e&&e.isVerified?"text-gray-500":" hover:text-rose-700 text-rose-800"),size:16})})})})]})})]})):(0,g.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,g.jsx)("td",{colSpan:7,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})}),(null===k||void 0===k?void 0:k.length)>0&&(0,g.jsx)(y.A,{totalCount:B,pageSize:10,currentPage:T,onChange:e=>{V(e)}})]})]})}}}]);
//# sourceMappingURL=1635.ca855d84.chunk.js.map