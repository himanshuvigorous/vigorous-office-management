"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4837],{2768:(e,s,a)=>{a.d(s,{A:()=>x});var t=a(89379),l=(a(65043),a(24858)),o=a(86178),n=a.n(o),d=a(83003),r=a(15187),i=a(30064),c=a.n(i),m=a(74930),u=a(70579);const x=e=>{let{isOpen:s,onClose:a,fetchattendanceListData:o}=e;const{register:i,handleSubmit:x,formState:{errors:p}}=(0,l.mN)({defaultValues:{employeeName:"",date:n()().format("YYYY-MM-DD"),checkInTime:"",checkOutTime:"",reason:"",errors:{}}}),h=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),v=(0,d.wA)();return s?(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-[1560]",onClick:a,children:(0,u.jsx)("div",{className:"animate-slideInFromTop bg-gray-100 rounded-lg p-6 w-full max-w-full md:max-w-2xl max-h-[60vh]  overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,u.jsx)("div",{children:(0,u.jsxs)("form",{autoComplete:"off",onSubmit:x(e=>{const s={employeId:"employee"===(null===h||void 0===h?void 0:h.userType)?null===h||void 0===h?void 0:h._id:null,companyId:null===h||void 0===h?void 0:h.companyId,branchId:null===h||void 0===h?void 0:h.branchId,directorId:null===h||void 0===h?void 0:h.directorId,compensatoryDate:null===e||void 0===e?void 0:e.fromDate,reason:null===e||void 0===e?void 0:e.leaveReason};v((0,m.fZ)(s)).then(e=>{e.error||(c().fire({icon:"success",title:"Success!",text:"Leave Request sent successfully.",confirmButtonText:"OK",customClass:{confirmButton:"bg-header text-white hover:bg-[#063156]"}}),o(),a())})}),className:"",children:[(0,u.jsx)("div",{className:"grid grid-col-1 md:grid-cols-1 gap-4",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"".concat(r.Q0),children:"Date"}),(0,u.jsx)("input",(0,t.A)((0,t.A)({type:"date",max:n()().format("YYYY-MM-DD")},i("fromDate",{required:!0})),{},{className:"".concat(r.Ol," ").concat(p.fromDate?"border-[1px] ":"border-gray-300")})),p.fromDate&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:"fromDate is required"})]})}),(0,u.jsx)("div",{className:"grid grid-col-1 md:grid-cols-1 gap-4",children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("label",{className:"".concat(r.Q0),children:" Reason"}),(0,u.jsx)("input",(0,t.A)((0,t.A)({type:"text"},i("leaveReason",{required:" Reason is required"})),{},{className:" ".concat(r.Ol," ").concat(p.leaveReason?"border-[1px] ":"border-gray-300"," "),placeholder:"Enter  Reason"})),p.leaveReason&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:p.leaveReason.message})]})}),(0,u.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:(0,u.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-header rounded-md hover:bg-[#063156]",children:"Submit"})})]})})})}):null}},24331:(e,s,a)=>{a.d(s,{A:()=>f});var t=a(89379),l=a(65043),o=a(24858),n=a(86178),d=a.n(n),r=a(83003),i=a(15187),c=a(30064),m=a.n(c),u=a(74930),x=a(94084),p=a(60446),h=a.n(p),v=a(70579);const f=e=>{let{isOpen:s,onClose:a,fetchattendanceListData:n,leaveId:c}=e;const{register:p,handleSubmit:f,control:b,setValue:j,formState:{errors:y}}=(0,o.mN)({defaultValues:{employeeName:"",date:"",checkInTime:"",checkOutTime:"",reason:"",errors:{}}}),{compensatoryLeaveData:g}=(0,r.d4)(e=>e.compensatoryleaveRequest),N=(0,r.wA)();return(0,l.useEffect)(()=>{g&&(j("fromDate",h()(null===g||void 0===g?void 0:g.compensatoryDate)),j("leaveReason",null===g||void 0===g?void 0:g.reason))},[g]),(0,l.useEffect)(()=>{c&&N((0,u.j4)({_id:c}))},[]),s?(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-[1560]",onClick:a,children:(0,v.jsx)("div",{className:"animate-slideInFromTop bg-gray-100 rounded-lg p-6 w-full max-w-full md:max-w-2xl max-h-[60vh]  overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,v.jsx)("div",{children:(0,v.jsxs)("form",{autoComplete:"off",onSubmit:f(e=>{const s={_id:c,employeId:null===g||void 0===g?void 0:g.employeId,companyId:null===g||void 0===g?void 0:g.companyId,branchId:null===g||void 0===g?void 0:g.branchId,compensatoryDate:null===e||void 0===e?void 0:e.fromDate,reason:null===e||void 0===e?void 0:e.leaveReason};N((0,u.Ej)(s)).then(e=>{e.error||(m().fire({icon:"success",title:"Success!",text:"Leave Request sent successfully.",confirmButtonText:"OK",customClass:{confirmButton:"bg-header text-white hover:bg-[#063156]"}}),n(),a())})}),className:"",children:[(0,v.jsx)("div",{className:"grid grid-col-1 md:grid-cols-1 gap-4",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"".concat(i.Q0),children:"Date"}),(0,v.jsx)(o.xI,{name:"fromDate",control:b,render:e=>{let{field:s}=e;return(0,v.jsx)(x.A,{field:s,errors:y,disabledDate:e=>e&&e.isAfter(d()().endOf("day"),"day")})}}),y.fromDate&&(0,v.jsx)("p",{className:"text-red-500 text-sm",children:"fromDate is required"})]})}),(0,v.jsx)("div",{className:"grid grid-col-1 md:grid-cols-1 gap-4",children:(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{className:"".concat(i.Q0),children:" Reason"}),(0,v.jsx)("input",(0,t.A)((0,t.A)({type:"text"},p("leaveReason",{required:" Reason is required"})),{},{className:" ".concat(i.Ol," ").concat(y.leaveReason?"border-[1px] ":"border-gray-300"," "),placeholder:"Enter  Reason"})),y.leaveReason&&(0,v.jsx)("p",{className:"text-red-500 text-sm",children:y.leaveReason.message})]})}),(0,v.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:(0,v.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-header rounded-md hover:bg-[#063156]",children:"Submit"})})]})})})}):null}},74837:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var t=a(65043),l=a(83003),o=a(23156),n=(a(30064),a(3538)),d=a(39160),r=a(15187),i=a(86178),c=a.n(i),m=a(74930),u=a(2768),x=a(24331),p=a(78227),h=a(70579);const v=function(){const e=(0,l.wA)(),[s,a]=(0,t.useState)(!1),[i,v]=(0,t.useState)(null),{compensatoryleaveRequestData:f,totalCompensatoryLeaverequestCount:b}=(0,l.d4)(e=>e.compensatoryleaveRequest),j=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),[y,g]=(0,t.useState)(1),[N,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{D()},[y]);const D=()=>{const s={currentPage:y,pageSize:10,reqData:{employeId:"employee"===(null===j||void 0===j?void 0:j.userType)?null===j||void 0===j?void 0:j._id:null,companyId:"company"===(null===j||void 0===j?void 0:j.userType)?null===j||void 0===j?void 0:j._id:null===j||void 0===j?void 0:j.companyId,branchId:"companyBranch"===(null===j||void 0===j?void 0:j.userType)?null===j||void 0===j?void 0:j._id:null===j||void 0===j?void 0:j.branchId,text:"",sort:!0,status:"",isPagination:!0}};e((0,m.HG)(s))};return"employee"!==(null===j||void 0===j?void 0:j.userType)?(0,h.jsx)(d.A,{children:(0,h.jsx)("div",{className:"bg-red-100 text-red-800 p-4 rounded-md mt-2",children:(0,h.jsx)("p",{className:"text-center font-semibold",children:"You are not an employee. This page is viewable for employees only."})})}):(0,h.jsx)(d.A,{children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"",children:(0,h.jsxs)("div",{className:"flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,h.jsxs)("div",{className:"flex justify-center items-center space-x-2 bg-white p-2 text-[14px] rounded-md",children:[(0,h.jsx)(n.syA,{}),(0,h.jsx)("span",{children:"Name"}),(0,h.jsx)(o.BNo,{})]}),(0,h.jsxs)("button",{onClick:()=>{w(!0)},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,h.jsx)(o.OiG,{}),(0,h.jsx)("span",{className:"text-[12px]",children:"Add Compensatory Leave Request"})]})]})}),(0,h.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,h.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,h.jsx)("thead",{className:"",children:(0,h.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,h.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,h.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Name"}),(0,h.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Reason"}),(0,h.jsx)("th",{className:"p-2 whitespace-nowrap",children:" date"}),(0,h.jsx)("th",{className:"p-2 whitespace-nowrap",children:"status"}),(0,h.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),(0,h.jsx)("tbody",{children:f&&(null===f||void 0===f?void 0:f.length)>0?null===f||void 0===f?void 0:f.map((e,s)=>(0,h.jsxs)("tr",{className:"text-black ".concat(s%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,h.jsx)("td",{className:"whitespace-nowrap p-2",children:s+1+10*(y-1)}),(0,h.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.employeName}),(0,h.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.reason}),(0,h.jsx)("td",{className:"whitespace-nowrap p-2",children:c()(null===e||void 0===e?void 0:e.compensatoryDate).format("DD-MM-YYYY")}),(0,h.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,h.jsx)("span",{className:"".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"bg-green-200 border-green-500 text-black":"Pending"===(null===e||void 0===e?void 0:e.status)?"bg-yellow-200 border-yellow-500 text-black":"Rejected"===(null===e||void 0===e?void 0:e.status)?"bg-red-200 border-red-500 text-black":(null===e||void 0===e||e.status,"bg-gray-200 border-gray-500 text-black")," border-[1px] px-2 py-1.5 rounded-lg text-[12px]"),children:null!==e&&void 0!==e&&e.status?e.status:"-"})}),(0,h.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,h.jsx)("span",{className:"py-1.5 flex justify-start items-center  space-x-2.5",children:(0,h.jsx)("button",{disabled:"Pending"!==(null===e||void 0===e?void 0:e.status),onClick:()=>{a(!0),v(null===e||void 0===e?void 0:e._id)},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,h.jsx)(o.Jcp,{className:" ".concat("Pending"===(null===e||void 0===e?void 0:e.status)?"hover:text-[#337ab7] text-[#3c8dbc]":"text-gray-600 hover:text-gray-500"),size:16})})})})]})):(0,h.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,h.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),N&&(0,h.jsx)(u.A,{isOpen:!0,onClose:()=>w(!1),fetchattendanceListData:D}),s&&(0,h.jsx)(x.A,{isOpen:!0,onClose:()=>{a(!1),v(null)},leaveId:i,fetchattendanceListData:D}),(0,h.jsx)(p.A,{totalCount:b,pageSize:10,currentPage:y,onChange:e=>{g(e)}})]})})}}}]);
//# sourceMappingURL=4837.8a43b5dd.chunk.js.map