"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6576],{96576:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(89379),o=a(24858),r=a(83003),l=a(15187),s=a(65043),d=a(31744),i=a(39160),c=a(97326),p=a(53913),u=a(65512),m=(a(86178),a(60446)),h=a.n(m),v=a(78227),x=a(12106),w=(a(42837),a(94084),a(69223)),y=a(55971),b=a(50822),f=a(6720),g=a(37762),N=a(64857),j=(a(11906),a(33007),a(89427),a(70337),a(40088),a(12208),a(27744),a(17995),a(76932),a(487)),D=a(70579);const{RangePicker:A}=j.A;const S=function(){var e;const{control:t,formState:{errors:a},setValue:m,watch:A}=(0,o.mN)(),{RangePicker:S}=j.A,T=e=>{},[Y,k]=(0,s.useState)(10),R=(0,r.wA)(),{invoiceGstReturnPurchaseReportList:C,invoiceGstReturnPurchaseReport_loading:I,invoiceGstReturnPurchaseReportCount:P}=(0,r.d4)(e=>e.reports),{departmentListData:F,loading:G}=(0,r.d4)(e=>e.department),[z,M]=(0,s.useState)({}),{taskTypeList:V}=(0,r.d4)(e=>e.taskType),{clientGroupList:B}=(0,r.d4)(e=>e.clientGroup),{clientList:L}=(0,r.d4)(e=>e.client),{employeList:E}=(0,r.d4)(e=>e.employe),[H,_]=(0,s.useState)(""),K=JSON.parse(localStorage.getItem("user_info_".concat(l.AU))),{industryListData:O,indusSearchloading:U}=(0,r.d4)(e=>e.industry),{orgTypeList:W,orgSearchloading:q}=(0,r.d4)(e=>e.orgType),[J,Z]=(0,s.useState)(1),[Q,X]=(0,s.useState)(""),{branchList:$}=(0,r.d4)(e=>e.branch),ee=(0,o.FH)({control:t,name:"PDCompanyId",defaultValue:""}),te=(0,o.FH)({control:t,name:"PDBranchId",defaultValue:""}),ae=(0,o.FH)({control:t,name:"status",defaultValue:""}),ne=(0,o.FH)({control:t,name:"PDOrganizationType",defaultValue:""}),oe=(0,o.FH)({control:t,name:"PDindustrytype",defaultValue:""}),re=(0,o.FH)({control:t,name:"department",defaultValue:""}),le=(0,o.FH)({control:t,name:"groupName",defaultValue:""}),se=(0,o.FH)({control:t,name:"time",defaultValue:[]});(0,s.useEffect)(()=>{const e=setTimeout(()=>{X(H)},500);return()=>{clearTimeout(e)}},[H]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})();const de=function(){return{currentPage:J,pageSize:Y,reqPayload:{text:Q,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===K||void 0===K?void 0:K.userType)?ee:"company"===(null===K||void 0===K?void 0:K.userType)?null===K||void 0===K?void 0:K._id:null===K||void 0===K?void 0:K.companyId,directorId:"",branchId:"company"===(null===K||void 0===K?void 0:K.userType)||"admin"===(null===K||void 0===K?void 0:K.userType)||"companyDirector"===(null===K||void 0===K?void 0:K.userType)?te:"companyBranch"===(null===K||void 0===K?void 0:K.userType)?null===K||void 0===K?void 0:K._id:null===K||void 0===K?void 0:K.branchId,status:"true"==ae||"false"!=ae&&"",organizationId:ne,organizationIds:[],departmentId:re,departmentIds:[],industryId:oe,industryIds:[],groupId:le,groupIds:[],startDate:(null===se||void 0===se?void 0:se.length)>0?h()(se[0]).format("YYYY-MM-DD"):"",endDate:(null===se||void 0===se?void 0:se.length)>0?h()(se[1]).format("YYYY-MM-DD"):""}}};(0,s.useEffect)(()=>{ie(Q)},[J,Q,Y]);const ie=()=>{R((0,x.Zb)(de(!0)))},[ce,pe]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"company"!==(null===K||void 0===K?void 0:K.userType)&&"companyDirector"!==(null===K||void 0===K?void 0:K.userType)||R((0,d.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===K||void 0===K?void 0:K.userType)?ee:"company"===(null===K||void 0===K?void 0:K.userType)?null===K||void 0===K?void 0:K._id:null===K||void 0===K?void 0:K.companyId})),m("startDate",h()().subtract(1,"month")),m("endDate",h()())},[]);const ue=async()=>{ie()},me=[{key:"1",label:(0,D.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,D.jsxs)("div",{className:"bg-[#ececec] space-y-1 sm:flex justify-between items-center",children:[(0,D.jsx)("div",{className:"",children:(0,D.jsx)(o.xI,{name:"time",control:t,render:e=>{let{field:t}=e;return(0,D.jsx)(S,(0,n.A)((0,n.A)({},t),{},{value:t.value,onChange:e=>t.onChange(e),format:"YYYY-MM-DD",onOk:T,getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"}))}})}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{m("PDCompanyId",""),m("PDBranchId",""),m("status",""),m("PDOrganizationType",""),m("PDindustrytype",""),m("department",""),m("groupName",""),m("time",""),ue()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,D.jsx)("button",{onClick:()=>{ue()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,D.jsx)(i.A,{onChange:e=>{_(e)},children:(0,D.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(c.A,{className:"custom-collapse",items:me,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,D.jsx)(f.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,D.jsxs)("div",{className:"space-y-1.5 sm:flex grid grid-cols-1 justify-between flex-col sm:flex-row items-center",children:[(0,D.jsxs)("div",{className:"flex py-1 items-center gap-2",children:[(0,D.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,D.jsx)(u.A,{id:"pageSize",value:Y,onChange:e=>{k(Number(e)),Z(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:l.qc.map(e=>(0,D.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{(async()=>{var e,t;const a=new g.uE({orientation:"landscape",unit:"pt"});a.setFontSize(16);const n=await(null===b.K||void 0===b.K?void 0:b.K.invoiceGstReturnPurchaseReportFunc(de(!1)));if(!C&&!n)return;const o=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var a,n;return[t+1,h()(null===e||void 0===e?void 0:e.purchaseDate).format("DD-MM-YYYY hh:mm a")||"-",(null===e||void 0===e?void 0:e.vendorName)||"-",(null===e||void 0===e?void 0:e.totalGSTAmount)||"-",(null===e||void 0===e||null===(a=e.vendorAddress)||void 0===a||null===(n=a.primary)||void 0===n?void 0:n.state)||"-",(null===e||void 0===e?void 0:e.assetName)||"-",(null===e||void 0===e?void 0:e.totalAmount)||"-",(null===e||void 0===e?void 0:e.totalGSTAmount)||"-",(null===e||void 0===e?void 0:e.grandTotal)||"-"]});(0,N.Ay)(a,{startY:40,head:[["S.No.","Bill Date","Vendor Name","Vendor Gst","State","description","amount","Gst","Total Amount"]],body:o,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("FinanceInvoiceGstReturnPurchaseReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,D.jsx)("button",{onClick:()=>{(async()=>{var e,t;const a=new w.Workbook,n=a.addWorksheet("FinanceInvoiceGstReturnPurchaseReport");n.columns=[{header:"S.No.",key:"sno",width:10},{header:"Bill Date",key:"billDate",width:30},{header:"Vendor Name",key:"vendorName",width:30},{header:"Vendor Gst",key:"vendorGst",width:25},{header:"State",key:"state",width:30},{header:"Description",key:"description",width:30},{header:"Amount",key:"amount",width:20},{header:"Gst",key:"gst",width:20},{header:"Total Amount",key:"totalAmount",width:15}],n.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const o=await(null===b.K||void 0===b.K?void 0:b.K.invoiceGstReturnPurchaseReportFunc(de(!1)));if(!C&&!o)return;const r=null===o||void 0===o||null===(e=o.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var a,n;return{sno:t+1,billDate:h()(null===e||void 0===e?void 0:e.purchaseDate).format("DD-MM-YYYY hh:mm a")||"-",vendorName:(null===e||void 0===e?void 0:e.vendorName)||"-",vendorGst:(null===e||void 0===e?void 0:e.totalGSTAmount)||"-",state:(null===e||void 0===e||null===(a=e.vendorAddress)||void 0===a||null===(n=a.primary)||void 0===n?void 0:n.state)||"-",description:(null===e||void 0===e?void 0:e.assetName)||"-",amount:(null===e||void 0===e?void 0:e.totalAmount)||"-",gst:(null===e||void 0===e?void 0:e.totalGSTAmount)||"-",totalAmount:(null===e||void 0===e?void 0:e.grandTotal)||"-"}});null===r||void 0===r||r.forEach(e=>{n.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),n.autoFilter={from:"A1",to:"I1"},a.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="FinanceInvoiceGstReturnPurchaseReport.xlsx",a.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,D.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Bill Date"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Vendor Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"State "}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Description"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Amount"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"GST"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Total Amount"})]})}),I?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,D.jsx)(y.A,{})})}):(0,D.jsx)("tbody",{children:C&&(null===C||void 0===C?void 0:C.length)>0?null===C||void 0===C?void 0:C.map((e,t)=>{var a,n;return(0,D.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(J-1)*Y}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:h()(null===e||void 0===e?void 0:e.purchaseDate).format("DD-MM-YYYY hh:mm a")||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.vendorName)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e||null===(a=e.vendorAddress)||void 0===a||null===(n=a.primary)||void 0===n?void 0:n.state)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.assetName)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,l.w2)(null===e||void 0===e?void 0:e.totalAmount)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,l.w2)(null===e||void 0===e?void 0:e.totalGSTAmount)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,l.w2)(null===e||void 0===e?void 0:e.grandTotal)||"-"})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,D.jsx)(p.A,{className:"antmodalclassName !w-[60%] !h-[50%]",title:"Departments",open:ce,onCancel:()=>pe(!1),footer:null,children:(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Department Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Email"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mobile"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created At"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created By"})]})}),I?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,D.jsx)(y.A,{})})}):(0,D.jsx)("tbody",{children:null!==z&&void 0!==z&&z.departmentData&&(null===z||void 0===z?void 0:z.departmentData.length)>0?null===z||void 0===z||null===(e=z.departmentData)||void 0===e?void 0:e.map((e,t)=>{var a,n;return(0,D.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(J-1)*Y}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.name}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,D.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[(null===e||void 0===e||null===(a=e.mobile)||void 0===a?void 0:a.code)||"-"," ",(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.number)||"-"]}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.createdBy})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})]}),(0,D.jsx)(v.A,{totalCount:P,pageSize:Y,currentPage:J,onChange:e=>{Z(e)}})]})})}}}]);
//# sourceMappingURL=6576.6ebc63df.chunk.js.map