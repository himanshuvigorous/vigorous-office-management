"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8274],{38274:(e,d,i)=>{i.r(d),i.d(d,{default:()=>x});var o=i(89379),n=i(24858),l=i(39160),a=i(83003),s=i(73216),r=i(65043),c=i(15187),t=i(31744),u=i(78729),m=i(65512),v=i(17995),p=i(84448),h=i(89427),y=i(70579);const x=()=>{const{loading:e}=(0,a.d4)(e=>e.visitReason),{register:d,handleSubmit:i,control:x,formState:{errors:j},setValue:b}=(0,n.mN)(),N=(0,a.wA)(),g=(0,s.Zp)(),{companyList:I,companyListLoading:f}=(0,a.d4)(e=>e.company),{branchList:A,branchListloading:T}=(0,a.d4)(e=>e.branch),D=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),C=(0,n.FH)({control:x,name:"PDCompanyId",defaultValue:""});return(0,r.useEffect)(()=>{(C||"company"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType))&&N((0,t.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===D||void 0===D?void 0:D.userType)?C:"company"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.companyId}))},[C]),(0,r.useEffect)(()=>{"admin"===(null===D||void 0===D?void 0:D.userType)&&N((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,y.jsx)(l.A,{children:(0,y.jsx)("div",{className:"gap-4",children:(0,y.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:i(e=>{const d={employeId:"",companyId:"admin"===(null===D||void 0===D?void 0:D.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.companyId,directorId:"companyDirector"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.directorId,branchId:"admin"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType)||"company"===(null===D||void 0===D?void 0:D.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.branchId,title:null===e||void 0===e?void 0:e.reason};N((0,p.C2)(d)).then(e=>{e.error||g(-1)})}),children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===D||void 0===D?void 0:D.userType)&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Company ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsxs)("select",(0,o.A)((0,o.A)({},d("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(c.Ol," ").concat(j.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,y.jsx)("option",{className:"",value:"",children:"Select Company"}),f?(0,y.jsx)(m.A.Option,{disabled:!0,children:(0,y.jsx)(h.A,{})}):null===I||void 0===I?void 0:I.map(e=>(0,y.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),j.PDCompanyId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:j.PDCompanyId.message})]}),("admin"===(null===D||void 0===D?void 0:D.userType)||"company"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType))&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(n.xI,{name:"PDBranchId",control:x,rules:{required:"Branch is required"},render:e=>{let{field:d}=e;return(0,y.jsxs)(m.A,(0,o.A)((0,o.A)({},d),{},{className:"".concat(c.Hy," ").concat(j.PDBranchId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,y.jsx)(m.A.Option,{value:"",children:"Select Branch"}),T?(0,y.jsx)(m.A.Option,{disabled:!0,children:(0,y.jsx)(h.A,{})}):null===A||void 0===A?void 0:A.map(e=>(0,y.jsx)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.PDBranchId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:j.PDBranchId.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Visit Reason  ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,o.A)((0,o.A)({type:"text"},d("reason",{required:"Visit Reason is required"})),{},{className:"".concat(c.Ol," ").concat(j.reason?"border-[1px] ":"border-gray-300"),placeholder:"Enter Visit Reason"})),j.reason&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:j.reason.message})]})]}),(0,y.jsx)("div",{className:"flex justify-end",children:(0,y.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white my-1 p-2 px-4 mt-3 rounded"),children:e?(0,y.jsx)(v.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=8274.8397f4ed.chunk.js.map