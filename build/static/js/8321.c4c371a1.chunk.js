"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8321],{28321:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var l=a(89379),i=a(24858),n=a(83003),o=a(15187),d=a(65043),r=a(31744),s=a(39160),c=a(97326),u=a(65512),p=(a(86178),a(60446)),v=a.n(p),m=a(78227),h=a(12106),x=(a(42837),a(94084),a(69223)),y=a(55971),g=a(50822),N=a(6720),f=a(37762),D=a(64857),w=(a(11906),a(33007),a(89427)),j=a(70337),b=(a(40088),a(12208),a(27744),a(17995),a(76932),a(55640)),A=a(70579);const S=function(){const{control:e,formState:{errors:t},setValue:a,watch:p}=(0,i.mN)(),[S,T]=(0,d.useState)(10),C=(0,n.wA)(),{clientDigitalSignatureReportList:I,clientDigitalSignatureReportFunc_loading:Y,totalDigitalSignatureIndexCount:F}=(0,n.d4)(e=>e.reports),{departmentListData:k,loading:B}=(0,n.d4)(e=>e.department),[P,_]=(0,d.useState)({}),{DigitalSignatureTypeList:L,loading:M}=(0,n.d4)(e=>e.digitalSignatureType),{taskTypeList:O}=(0,n.d4)(e=>e.taskType),{clientGroupList:R}=(0,n.d4)(e=>e.clientGroup),{clientList:z,loading:E}=(0,n.d4)(e=>e.client),{employeList:H}=(0,n.d4)(e=>e.employe),[V,K]=(0,d.useState)(""),G=JSON.parse(localStorage.getItem("user_info_".concat(o.AU))),{industryListData:U,indusSearchloading:q}=(0,n.d4)(e=>e.industry),{orgTypeList:W,orgSearchloading:J}=(0,n.d4)(e=>e.orgType),[Q,X]=(0,d.useState)(1),[Z,$]=(0,d.useState)(""),{branchList:ee}=(0,n.d4)(e=>e.branch),te=(0,i.FH)({control:e,name:"PDCompanyId",defaultValue:""}),ae=(0,i.FH)({control:e,name:"PDBranchId",defaultValue:""}),le=(0,i.FH)({control:e,name:"status",defaultValue:""}),ie=((0,i.FH)({control:e,name:"PDOrganizationType",defaultValue:""}),(0,i.FH)({control:e,name:"PDindustrytype",defaultValue:""}),(0,i.FH)({control:e,name:"department",defaultValue:""}),(0,i.FH)({control:e,name:"groupName",defaultValue:""}),(0,i.FH)({control:e,name:"client",defaultValue:""})),ne=(0,i.FH)({control:e,name:"digitalSignatureType",defaultValue:""});(0,d.useEffect)(()=>{const e=setTimeout(()=>{$(V)},500);return()=>{clearTimeout(e)}},[V]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})();const oe=function(){return{currentPage:Q,pageSize:S,reqPayload:{text:Z,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===G||void 0===G?void 0:G.userType)?te:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId,directorId:"",branchId:"company"===(null===G||void 0===G?void 0:G.userType)||"admin"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType)?ae:"companyBranch"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.branchId,status:"true"==le||"false"!=le&&"",clientId:ie,signatureTypeId:ne}}};(0,d.useEffect)(()=>{de(Z)},[Q,Z,S]);const de=()=>{C((0,h.YH)(oe(!0)))},[re,se]=(0,d.useState)(!1);(0,d.useEffect)(()=>{"company"!==(null===G||void 0===G?void 0:G.userType)&&"companyDirector"!==(null===G||void 0===G?void 0:G.userType)||C((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===G||void 0===G?void 0:G.userType)?te:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId})),a("startDate",v()().subtract(1,"month")),a("endDate",v()())},[]);const ce=async()=>{de()},ue=[{key:"1",label:(0,A.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,A.jsxs)("div",{className:"bg-[#ececec] space-y-1 2xl:flex justify-between items-center",children:[(0,A.jsxs)("div",{className:"sm:flex  grid grid-cols-1  gap-2 sm:flex-wrap text-[14px]",children:[("admin"===(null===G||void 0===G?void 0:G.userType)||"company"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType))&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)(i.xI,{name:"PDBranchId",control:e,render:e=>{let{field:t}=e;return(0,A.jsxs)(u.A,(0,l.A)((0,l.A)({},t),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(u.A.Option,{value:"",children:"Select Branch"}),null===ee||void 0===ee?void 0:ee.map(e=>(0,A.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDBranchId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,A.jsx)("div",{children:(0,A.jsx)(i.xI,{name:"client",control:e,render:e=>{var t;let{field:a}=e;return(0,A.jsxs)(u.A,(0,l.A)((0,l.A)({},a),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{C((0,j.Aq)({companyId:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId,branchId:"company"===(null===G||void 0===G?void 0:G.userType)||"admin"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType)?p("PDBranchId"):"companyBranch"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.branchId,groupId:"",directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1}))},onChange:e=>{a.onChange(e)},placeholder:"Select Client",children:[(0,A.jsx)(u.A.Option,{value:"",children:" Select Client"}),E?(0,A.jsx)(u.A.Option,{disabled:!0,children:(0,A.jsx)(w.A,{})}):null===(t=(0,o._o)(z))||void 0===t?void 0:t.map((e,t)=>(0,A.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),(0,A.jsx)("div",{children:(0,A.jsx)(i.xI,{name:"digitalSignatureType",control:e,render:e=>{var t;let{field:a}=e;return(0,A.jsxs)(u.A,{value:null===a||void 0===a?void 0:a.value,className:"inputAntdSelectClassNameFilterReport",onFocus:()=>{C((0,b.Nn)({companyId:"admin"===(null===G||void 0===G?void 0:G.userType)?p("PDCompanyId"):"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId,branchId:"company"===(null===G||void 0===G?void 0:G.userType)||"admin"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType)?p("PDBranchId"):"companyBranch"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.branchId}))},onChange:e=>{a.onChange(e)},placeholder:"Select Signature Type",showSearch:!0,children:[(0,A.jsx)(u.A.Option,{value:"",children:"Select Signature Type"}),M?(0,A.jsx)(u.A.Option,{disabled:!0,children:(0,A.jsx)(w.A,{})}):null===(t=(0,o._o)(null===L||void 0===L?void 0:L.docs))||void 0===t?void 0:t.map(e=>(0,A.jsx)(u.A.Option,{value:e._id,children:e.name},e._id))]})}})}),(0,A.jsx)("div",{children:(0,A.jsx)(i.xI,{name:"status",control:e,rules:{},render:e=>{var t;let{field:a}=e;return(0,A.jsxs)(u.A,(0,l.A)((0,l.A)({},a),{},{className:"inputAntdSelectClassNameFilterReport",placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(u.A.Option,{value:"",children:"Select Status"}),null===(t=[{label:"Active",value:"true"},{label:"InActive",value:"false"}])||void 0===t?void 0:t.map(e=>(0,A.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e.value,children:null===e||void 0===e?void 0:e.label}))]}))}})})]}),(0,A.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,A.jsx)("button",{onClick:()=>{a("PDCompanyId",""),a("PDBranchId",""),a("status",""),a("client",""),a("PDindustrytype",""),a("department",""),a("groupName",""),a("digitalSignatureType",""),ce()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,A.jsx)("button",{onClick:()=>{ce()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,A.jsx)(s.A,{onChange:e=>{K(e)},children:(0,A.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)(c.A,{className:"custom-collapse",items:ue,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,A.jsx)(N.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,A.jsxs)("div",{className:"space-y-1.5 sm:flex grid grid-cols-1 justify-between items-center",children:[(0,A.jsxs)("div",{className:"flex py-1  items-center gap-2",children:[(0,A.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,A.jsx)(u.A,{id:"pageSize",value:S,onChange:e=>{T(Number(e)),X(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:o.qc.map(e=>(0,A.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,A.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,A.jsx)("button",{onClick:()=>{(async()=>{var e,t;const a=new f.uE({orientation:"landscape",unit:"pt"});a.setFontSize(16);const l=await(null===g.K||void 0===g.K?void 0:g.K.clientDigitalSignatureReportFunc(oe(!1)));if(!I&&!l)return;const i=null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var a,l,i,n;return[t+1,(null===e||void 0===e||null===(a=e.clientData)||void 0===a?void 0:a.fullName)||"N/A",(null===e||void 0===e||null===(l=e.clientData)||void 0===l?void 0:l.groupName)||"N/A",(null===e||void 0===e||null===(i=e.signatureTypeData)||void 0===i?void 0:i.name)||"N/A",(null===e||void 0===e||null===(n=e.directorData)||void 0===n?void 0:n.fullName)||"N/A",null!==e&&void 0!==e&&e.startDate?v()(null===e||void 0===e?void 0:e.startDate).format("DD-MM-YYYY"):"N/A",null!==e&&void 0!==e&&e.expiryDate?v()(null===e||void 0===e?void 0:e.expiryDate).format("DD-MM-YYYY"):"N/A",null!==e&&void 0!==e&&e.createdAt?v()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm A"):"N/A",(null===e||void 0===e?void 0:e.createdBy)||"N/A"]});(0,D.Ay)(a,{startY:40,head:[["S.No.","Client Name","Group Name","Signature Type Name","Director Name","Start Date","Expiry Date","Created At","Created By"]],body:i,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("DigitalSignatureReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,A.jsx)("button",{onClick:()=>{(async()=>{var e,t;const a=new x.Workbook,l=a.addWorksheet("OverDueTasks");l.columns=[{header:"S.No.",key:"sno",width:10},{header:"Client Name",key:"clientName",width:30},{header:"Group Name",key:"groupName",width:30},{header:"Signature Type Name",key:"signatureType",width:30},{header:"Director Name",key:"directorName",width:30},{header:"Start Date",key:"startDate",width:20},{header:"Expiry Date",key:"expiryDate",width:20},{header:"Created At",key:"createdAt",width:25},{header:"Created By",key:"createdBy",width:25}],l.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const i=await(null===g.K||void 0===g.K?void 0:g.K.clientDigitalSignatureReportFunc(oe(!1)));if(!I&&!i)return;const n=null===i||void 0===i||null===(e=i.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var a,l,i,n;return{sno:t+1,clientName:(null===e||void 0===e||null===(a=e.clientData)||void 0===a?void 0:a.fullName)||"N/A",groupName:(null===e||void 0===e||null===(l=e.clientData)||void 0===l?void 0:l.groupName)||"N/A",signatureType:(null===e||void 0===e||null===(i=e.signatureTypeData)||void 0===i?void 0:i.name)||"N/A",directorName:(null===e||void 0===e||null===(n=e.directorData)||void 0===n?void 0:n.fullName)||"N/A",startDate:null!==e&&void 0!==e&&e.startDate?v()(null===e||void 0===e?void 0:e.startDate).format("DD-MM-YYYY"):"N/A",expiryDate:null!==e&&void 0!==e&&e.expiryDate?v()(null===e||void 0===e?void 0:e.expiryDate).format("DD-MM-YYYY"):"N/A",createdAt:null!==e&&void 0!==e&&e.createdAt?v()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm A"):"N/A",createdBy:(null===e||void 0===e?void 0:e.createdBy)||"N/A"}});null===n||void 0===n||n.forEach(e=>{l.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),l.autoFilter={from:"A1",to:"I1"},a.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="DigitalSignatureReport.xlsx",a.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,A.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,A.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Group Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Signature Type Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Director Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Start Date"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Expiry Date"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created At"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created By"})]})}),Y?(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,A.jsx)(y.A,{})})}):(0,A.jsx)("tbody",{children:I&&(null===I||void 0===I?void 0:I.length)>0?null===I||void 0===I?void 0:I.map((e,t)=>{var a,l,i,n;return(0,A.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(Q-1)*S}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e||null===(a=e.clientData)||void 0===a?void 0:a.fullName)||"N/A"}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e||null===(l=e.clientData)||void 0===l?void 0:l.groupName)||"N/A"}),(0,A.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[(null===e||void 0===e||null===(i=e.signatureTypeData)||void 0===i?void 0:i.name)||"N/A"," "]}),(0,A.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[(null===e||void 0===e||null===(n=e.directorData)||void 0===n?void 0:n.fullName)||"N/A"," "]}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:v()(null===e||void 0===e?void 0:e.startDate).format("DD-MM-YYYY")}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:v()(null===e||void 0===e?void 0:e.expiryDate).format("DD-MM-YYYY")}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:v()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.createdBy)||"N/A"})]})}):(0,A.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,A.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,A.jsx)(m.A,{totalCount:F,pageSize:S,currentPage:Q,onChange:e=>{X(e)}})]})})}}}]);
//# sourceMappingURL=8321.c4c371a1.chunk.js.map