"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7700],{57700:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var d=s(89379),l=s(65043),i=s(39160),n=s(83003),r=s(73216),t=s(24858),c=s(31174),o=s(735),u=s(86178),m=s.n(u),v=s(15187),p=s(78729),x=s(31744),h=(s(14118),s(6359)),y=s(70579);const j=function(){var e,a,s,u;const{register:j,handleSubmit:N,setValue:D,control:g,formState:{errors:b}}=(0,t.mN)(),{userCompanyId:I,userDirectorId:f,userBranchId:T,userType:A}=(0,o.A)(),P=(0,n.wA)(),S=(0,r.Zp)(),{digitalSignIdEnc:C}=(0,r.g)(),_=(0,c.Yc)(C),B=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),{companyList:Y}=(0,n.d4)(e=>e.company),{branchList:q}=(0,n.d4)(e=>e.branch),{digitalSignDetails:O}=(0,n.d4)(e=>e.digitalSign),E=(0,t.FH)({control:g,name:"PDCompanyId",defaultValue:I}),Q=((0,t.FH)({control:g,name:"directorId",defaultValue:f}),(0,t.FH)({control:g,name:"PDBranchId",defaultValue:T}));return(0,l.useEffect)(()=>{(E||"company"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType))&&P((0,x.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===B||void 0===B?void 0:B.userType)?E:"company"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.companyId}))},[E]),(0,l.useEffect)(()=>{"admin"===(null===B||void 0===B?void 0:B.userType)&&P((0,p.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,l.useEffect)(()=>{let e={_id:_};P((0,h.OH)(e))},[]),(0,l.useEffect)(()=>{O&&(D("PDCompanyId",null===O||void 0===O?void 0:O.companyId),D("PDBranchId",null===O||void 0===O?void 0:O.branchId),D("name",null===O||void 0===O?void 0:O.name),D("startDate",m()(null===O||void 0===O?void 0:O.startDate).format("YYYY-MM-DD")),D("expiryDate",m()(null===O||void 0===O?void 0:O.expiryDate).format("YYYY-MM-DD")),D("status",null===O||void 0===O?void 0:O.status))},[O]),(0,y.jsx)(i.A,{children:(0,y.jsx)("div",{className:"gap-4",children:(0,y.jsxs)("form",{autoComplete:"off",className:"mt-5",onSubmit:N(e=>{const a={_id:_,companyId:"admin"===(null===B||void 0===B?void 0:B.userType)?E:"company"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.companyId,branchId:"company"===(null===B||void 0===B?void 0:B.userType)||"admin"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType)?Q:"companyBranch"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.branchId,directorId:"",clientId:"",name:null===e||void 0===e?void 0:e.name,status:null===e||void 0===e?void 0:e.status,startDate:null===e||void 0===e?void 0:e.startDate,expiryDate:null===e||void 0===e?void 0:e.expiryDate};P((0,h.N4)(a)).then(e=>{e.error||S("/admin/digital-sign")})}),children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===B||void 0===B?void 0:B.userType)&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(v.Q0),children:["Company ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsxs)("select",(0,d.A)((0,d.A)({},j("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(v.Ol," ").concat(b.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,y.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===Y||void 0===Y?void 0:Y.map(e=>(0,y.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),b.PDCompanyId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDCompanyId.message})]}),("admin"===(null===B||void 0===B?void 0:B.userType)||"company"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType))&&(0,y.jsxs)("div",{children:[(0,y.jsxs)("label",{className:"".concat(v.Q0),children:["Branch ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsxs)("select",(0,d.A)((0,d.A)({},j("PDBranchId",{required:"Branch is required"})),{},{className:"".concat(v.Ol," ").concat(b.PDBranchId?"border-[1px] ":"border-gray-300"),children:[(0,y.jsx)("option",{value:"",children:"Select Branch"}),null===q||void 0===q?void 0:q.map(e=>(0,y.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})),b.PDBranchId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDBranchId.message})]})]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:my-2",children:[(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(v.Q0),children:["Title ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,d.A)((0,d.A)({type:"text"},j("name",{required:"Title is required"})),{},{className:"placeholder: ".concat(v.Ol," ").concat(b.name?"border-[1px] ":"border-gray-300"),placeholder:"Enter Title"})),b.name&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.name.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(v.Q0),children:["Start Date ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,d.A)((0,d.A)({},j("startDate")),{},{type:"date",className:"".concat(v.Ol," ").concat(null!==(e=b.recurrence)&&void 0!==e&&e.startDate?"border-[1px] ":"border-gray-300")})),(null===(a=b.recurrence)||void 0===a?void 0:a.startDate)&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.startDate.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(v.Q0),children:["Expiry Date ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,d.A)((0,d.A)({},j("expiryDate")),{},{type:"date",className:"".concat(v.Ol," ").concat(null!==(s=b.recurrence)&&void 0!==s&&s.expiryDate?"border-[1px] ":"border-gray-300")})),(null===(u=b.recurrence)||void 0===u?void 0:u.expiryDate)&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.expiryDate.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(v.Q0),children:["Status ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsxs)("select",(0,d.A)((0,d.A)({},j("status",{required:"Status is required"})),{},{className:"bg-white ".concat(b.status?"border-[1px] ":"border-gray-300"," ").concat(v.Ol),children:[(0,y.jsx)("option",{value:!0,children:"Active"}),(0,y.jsx)("option",{value:!1,children:"Inactive"})]})),b.status&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.status.message})]})]}),(0,y.jsx)("div",{className:"flex justify-end ",children:(0,y.jsx)("button",{type:"submit",className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Submit"})})]})})})}}}]);
//# sourceMappingURL=7700.2650ad7d.chunk.js.map