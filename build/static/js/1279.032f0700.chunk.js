"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1279],{51279:(e,a,n)=>{n.r(a),n.d(a,{default:()=>f});var s=n(89379),t=n(73216),d=n(39160),i=n(83003),o=n(65043),r=n(30064),l=n.n(r),c=n(31174),p=n(23156),u=n(47196),m=n(24858),x=n(86178),h=n.n(x),v=n(15187),y=n(78227),b=n(31744),j=n(78729),N=(n(65337),n(6359)),g=n(55971),w=n(70579);const f=function(){const{register:e,setValue:a,control:n,formState:{errors:r}}=(0,m.mN)(),x=(0,t.Zp)(),f=(0,i.wA)(),D=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),{companyList:I}=(0,i.d4)(e=>e.company),{branchList:C}=(0,i.d4)(e=>e.branch),{digitalSignList:S,totalDigitalSignCount:A,loading:T}=(0,i.d4)(e=>e.digitalSign),P=(0,m.FH)({control:n,name:"PDCompanyId",defaultValue:""}),_=(0,m.FH)({control:n,name:"PDBranchId",defaultValue:""}),[B,k]=(0,o.useState)(1);(0,o.useEffect)(()=>{Y()},[B,_,P]);const Y=()=>{const e={page:B,limit:10,reqPayload:{companyId:"admin"===(null===D||void 0===D?void 0:D.userType)?P:"company"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.companyId,branchId:"company"===(null===D||void 0===D?void 0:D.userType)||"admin"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType)?_:"companyBranch"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.branchId,directorId:"",text:"",sort:!0,status:"",isPagination:!0}};f((0,N.Si)(e))};return(0,o.useEffect)(()=>{(P||"company"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType))&&f((0,b.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===D||void 0===D?void 0:D.userType)?P:"company"===(null===D||void 0===D?void 0:D.userType)?null===D||void 0===D?void 0:D._id:null===D||void 0===D?void 0:D.companyId}))},[P]),(0,o.useEffect)(()=>{"admin"===(null===D||void 0===D?void 0:D.userType)&&f((0,j.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,w.jsx)(d.A,{children:(0,w.jsxs)("section",{children:[(0,w.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:["admin"===(null===D||void 0===D?void 0:D.userType)&&(0,w.jsxs)("div",{className:"",children:[(0,w.jsxs)("select",(0,s.A)((0,s.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(v.OJ," ").concat(r.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,w.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===I||void 0===I?void 0:I.map(e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),r.PDCompanyId&&(0,w.jsx)("p",{className:"text-red-500 text-sm",children:r.PDCompanyId.message})]}),("admin"===(null===D||void 0===D?void 0:D.userType)||"company"===(null===D||void 0===D?void 0:D.userType)||"companyDirector"===(null===D||void 0===D?void 0:D.userType))&&(0,w.jsxs)("div",{className:"",children:[(0,w.jsxs)("select",(0,s.A)((0,s.A)({},e("PDBranchId",{required:"Branch is required"})),{},{className:" ".concat(v.OJ," ").concat(r.PDBranchId?"border-[1px] ":"border-gray-300"),children:[(0,w.jsx)("option",{className:"",value:"",children:"Select Branch"}),null===C||void 0===C?void 0:C.map(e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),r.PDBranchId&&(0,w.jsx)("p",{className:"text-red-500 text-sm",children:r.PDBranchId.message})]})]}),(0,w.jsx)("div",{className:"flex justify-end items-end",children:(0,w.jsxs)("button",{onClick:()=>{x("/admin/digital-sign/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,w.jsx)(p.OiG,{}),(0,w.jsx)("span",{className:"text-[12px]",children:"Add Digital Signature"})]})})]}),(0,w.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,w.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,w.jsx)("thead",{className:"",children:(0,w.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"S.No."}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Name"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Start Date"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Expiry Date"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Action"})]})}),T?(0,w.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,w.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,w.jsx)(g.A,{})})}):(0,w.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.length)>0?null===S||void 0===S?void 0:S.map((e,a)=>{var n,s;return(0,w.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:a+1+10*(B-1)}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:h()(null===e||void 0===e?void 0:e.startDate).format("DD-MM-YYYY")}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:h()(null===e||void 0===e?void 0:e.expiryDate).format("DD-MM-YYYY")}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,w.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(s="Inactive")?s:"-"})}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,w.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[(0,w.jsx)("button",{onClick:()=>{x("/admin/digital-sign/edit/".concat((0,c.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,w.jsx)(p.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})}),(0,w.jsx)("button",{onClick:()=>(e=>{let a={_id:e};l().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&f((0,N.Nv)(a)).then(e=>{Y()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,w.jsx)(u.tqC,{className:"text-red-600 hover:text-red-500",size:16})})]})})]})}):(0,w.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,w.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),A>10&&(0,w.jsx)(y.A,{totalCount:A,pageSize:10,currentPage:B,onChange:e=>{k(e)}})]})})}},65337:(e,a,n)=>{n.d(a,{A:()=>d});var s=n(91686),t=n(70579);const d=function(){return(0,t.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,t.jsx)(s.A,{size:"large"})})}}}]);
//# sourceMappingURL=1279.032f0700.chunk.js.map