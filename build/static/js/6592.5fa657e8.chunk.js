"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6592],{16592:(e,d,l)=>{l.r(d),l.d(d,{default:()=>g});var i=l(89379),a=l(65043),s=l(24858),n=l(39160),o=l(83003),r=l(73216),t=l(735),c=l(15187),u=l(78729),m=l(31744),v=l(14118),p=l(12362),x=l(65512),h=l(94084),y=l(86178),j=l.n(y),f=l(17995),N=l(70579);const g=function(){var e;const{loading:d}=(0,o.d4)(e=>e.event),{register:l,handleSubmit:y,setValue:g,control:b,formState:{errors:A}}=(0,s.mN)(),{userCompanyId:I,userDirectorId:T,userBranchId:C,userType:D}=(0,t.A)(),_=(0,o.wA)(),S=(0,r.Zp)(),O=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),{companyList:P,companyListLoading:w}=(0,o.d4)(e=>e.company),{branchList:B,branchListloading:L}=(0,o.d4)(e=>e.branch),q=(0,s.FH)({control:b,name:"PDCompanyId",defaultValue:I}),H=((0,s.FH)({control:b,name:"directorId",defaultValue:T}),(0,s.FH)({control:b,name:"PDBranchId",defaultValue:C}));return(0,a.useEffect)(()=>{"admin"===(null===O||void 0===O?void 0:O.userType)&&_((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,a.useEffect)(()=>{(q||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&_((0,m.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?q:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId}))},[q]),(0,a.useEffect)(()=>{(q&&"company"===D||"admin"===D)&&_((0,v.HX)({text:"",sort:!0,status:!0,isPagination:!1,companyId:q}))},[q]),(0,N.jsx)(n.A,{children:(0,N.jsx)("div",{className:"gap-4",children:(0,N.jsxs)("form",{autoComplete:"off",className:"mt-5",onSubmit:y(e=>{const d={companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?q:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:"company"===(null===O||void 0===O?void 0:O.userType)||"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)?H:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,directorId:"",title:null===e||void 0===e?void 0:e.title,date:(0,c.Tk)(null===e||void 0===e?void 0:e.date)};_((0,p.ZA)(d)).then(e=>{e.error||S(-1)})}),children:[(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===O||void 0===O?void 0:O.userType)&&(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(c.Q0),children:["Company ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{control:b,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{var d;let{field:l}=e;return(0,N.jsxs)(x.A,(0,i.A)((0,i.A)({},l),{},{defaultValue:"",className:"".concat(c.Hy," "),showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,N.jsx)(x.A.Option,{value:"",children:"Select Company"}),w?(0,N.jsx)(x.A.Option,{disabled:!0,children:(0,N.jsx)(f.A,{})}):null===(d=(0,c._o)(P,"fullName"))||void 0===d?void 0:d.map(e=>(0,N.jsx)(x.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.PDCompanyId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:A.PDCompanyId.message})]}),("admin"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&(0,N.jsxs)("div",{children:[(0,N.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{control:b,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var d;let{field:l}=e;return(0,N.jsxs)(x.A,(0,i.A)((0,i.A)({},l),{},{defaultValue:"",className:"".concat(c.Hy," "),showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,N.jsx)(x.A.Option,{value:"",children:"Select Branch"}),L?(0,N.jsx)(x.A.Option,{disabled:!0,children:(0,N.jsx)(f.A,{})}):null===(d=(0,c._o)(B,"fullName"))||void 0===d?void 0:d.map(e=>(0,N.jsx)(x.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.PDBranchId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:A.PDBranchId.message})]})]}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:[(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(c.Q0),children:["Title ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)("input",(0,i.A)((0,i.A)({type:"text"},l("title",{required:"Title is required"})),{},{className:"placeholder: ".concat(c.Ol," ").concat(A.title?"border-[1px] ":"border-gray-300"),placeholder:"Enter Name"})),A.title&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:A.title.message})]}),(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{className:"".concat(c.Q0),children:["Date ",(0,N.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,N.jsx)(s.xI,{name:"date",control:b,render:e=>{let{field:d}=e;return(0,N.jsx)(h.A,{field:d,errors:A,disabledDate:e=>e&&e.isBefore(j()().endOf("day"),"day")})}}),(null===(e=A.recurrence)||void 0===e?void 0:e.date)&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:A.date.message})]})]}),(0,N.jsx)("div",{className:"flex justify-end ",children:(0,N.jsx)("button",{type:"submit",disabled:d,className:"".concat(d?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:d?(0,N.jsx)(f.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=6592.5fa657e8.chunk.js.map