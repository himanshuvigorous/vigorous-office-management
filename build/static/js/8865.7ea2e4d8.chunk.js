"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8865],{18865:(e,s,a)=>{a.r(s),a.d(s,{default:()=>U});var t=a(89379),n=a(65043),l=a(39160),i=a(73216),o=a(83003),r=a(30064),d=a.n(r),c=a(23156),m=a(60184),p=a(78729),h=a(15187),u=a(47196),x=a(31174),v=a(78227),j=a(67353),b=a(55971),y=a(22019),f=a(65512),g=a(96651),N=a(12624),w=a(30326),C=a(53913),A=a(91686),D=a(60446),S=a.n(D),k=a(27980),P=a(49804),_=a(86178),z=a.n(_),T=a(53790),R=(a(54555),a(4938)),I=a(6720),M=a(12745),E=a(92823),L=a.n(E),O=(a(25884),a(88967)),Y=a(70579);const H=e=>{let{isOpen:s,onClose:a,onSubmit:l,proposalData:i,setProposalId:r}=e;const[d,c]=(0,n.useState)({to:"",cc:[],subject:"Regarding Proposal",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),[p,h]=(0,n.useState)(!1),[u,x]=(0,n.useState)(""),v=(0,o.wA)();(0,n.useEffect)(()=>{c({to:"",cc:[],subject:"Regarding Proposal",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),i&&c(e=>(0,t.A)((0,t.A)({},e),{},{to:null===i||void 0===i?void 0:i.email}))},[i]);const j=e=>{const{name:s,value:a}=e.target;c(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a}))},b=()=>{c({to:"",cc:[],subject:"",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),h(!1),x(""),r([]),a()};return s?(0,Y.jsxs)(C.A,{open:!0,onCancel:b,footer:null,closable:!0,width:800,style:{maxHeight:"70vh"},centered:!0,zIndex:1501,children:[(0,Y.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,Y.jsx)("h2",{className:"text-sm font-semibold text-gray-800",children:p?"Email Preview":"Email Template"})}),(0,Y.jsxs)("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault(),l({content:u,to:null===d||void 0===d?void 0:d.to,cc:"string"===typeof(null===d||void 0===d?void 0:d.cc)?d.cc.split(",").map(e=>e.trim()):[],subject:null===d||void 0===d?void 0:d.subject,attachments:null===d||void 0===d?void 0:d.attachments})},className:"space-y-4 ",children:[(0,Y.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 h-[50vh] overflow-y-auto",children:[(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsxs)("div",{className:"font-semibold text-sm",children:["To:",(0,Y.jsx)("input",{name:"to",value:d.to,onChange:j,placeholder:"Recipient Email",className:"border p-2 w-full"})]}),(0,Y.jsxs)("div",{className:"font-semibold text-sm",children:["CC:",(0,Y.jsx)("input",{name:"cc",value:d.cc,onChange:j,placeholder:"CC Emails",className:"border p-2 w-full"})]}),(0,Y.jsxs)("div",{className:"font-semibold text-sm",children:["Subject:",(0,Y.jsx)("input",{name:"subject",value:d.subject,onChange:j,placeholder:"Email Subject",className:"border p-2 w-full"})]})]}),(0,Y.jsx)("div",{className:"mt-4",children:(0,Y.jsx)(L(),{value:u,onChange:e=>{x(e)},placeholder:"Write the email body here",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike"],[{align:[]}],["link","image","video"],["blockquote","code-block"],["clean"]]},formats:["header","font","list","bold","italic","underline","link","align","clean"]})}),(0,Y.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,Y.jsx)("div",{className:"font-medium mb-2",children:"Attachments:"}),p?(0,Y.jsx)("div",{className:"space-y-2"}):(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsx)("input",{type:"file",onChange:e=>{const s={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};v((0,O.Sg)(s)).then(e=>{var s;null!==e&&void 0!==e&&null!==(s=e.payload)&&void 0!==s&&s.data&&c(s=>{var a;return(0,t.A)((0,t.A)({},s),{},{attachments:[...s.attachments,null===(a=e.payload)||void 0===a?void 0:a.data]})})})},className:"hidden",id:"file-upload"}),(0,Y.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,Y.jsx)(m.chT,{className:"mr-2"})," Add Attachments"]}),(0,Y.jsx)("div",{className:"space-y-2",children:d.attachments.map((e,s)=>(0,Y.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,Y.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,Y.jsx)(m.chT,{className:"text-gray-500"}),(0,Y.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,Y.jsx)("button",{type:"button",onClick:()=>(e=>{c(s=>{const a=s.attachments.filter((s,a)=>a!==e);return(0,t.A)((0,t.A)({},s),{},{attachments:a})})})(s),className:"text-red-500 hover:text-red-700",children:(0,Y.jsx)(m.QCr,{})})]},s))})]})]})]}),(0,Y.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,Y.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Y.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Generate Email"})]})]})]}):null};var B=a(83002);const U=function(){var e,s,a,r;const[D,_]=(0,n.useState)(1),[E,L]=(0,n.useState)(!1),O=e=>{e&&(navigator.clipboard.writeText(e),y.Ay.success("Copied to clipboard!"))},U=(0,i.Zp)(),J=(0,o.wA)(),{companyList:V,totalCompanyCount:X,companyPlanHistoryData:Q,subscriptionData:K,companyInvoiceDetailsdata:Z}=(0,o.d4)(e=>e.company),{canCreate:$,canRead:ee,canUpdate:se,canDelete:ae}=(0,R.A)(),[te,ne]=(0,n.useState)(!1),[le,ie]=(0,n.useState)(!1),[oe,re]=(0,n.useState)([]),[de,ce]=(0,n.useState)(),[me,pe]=(0,n.useState)({data:null,status:!1,loading:!1}),[he,ue]=(0,n.useState)({data:null,status:!1,loading:!1}),[xe,ve]=(0,n.useState)(""),[je,be]=(0,n.useState)(""),[ye,fe]=(0,n.useState)(!1),{planListData:ge}=(0,o.d4)(e=>e.plan),[Ne,we]=(0,n.useState)(1),[Ce,Ae]=(0,n.useState)(""),[De,Se]=(0,n.useState)(""),[ke,Pe]=(0,n.useState)(""),[_e,ze]=(0,n.useState)(!1),[Te,Re]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{ze(!0),await Ie(),ze(!1)})()},[Ne,Ce,ke,De]),(0,n.useEffect)(()=>{var e,s;Z&&ve(((null!==(e=null===Z||void 0===Z?void 0:Z.amount)&&void 0!==e?e:0)/100-(null!==(s=null===Z||void 0===Z?void 0:Z.amount_refunded)&&void 0!==s?s:0)/100).toFixed(0))},[Z]);const Ie=async()=>{let e={page:Ne,limit:10,reqPayload:{text:Ce,status:De,planId:ke,isPagination:!0}};try{await J((0,p.YA)(e))}catch(je){console.error("Error fetching company list:",je),ze(!1)}};(0,n.useEffect)(()=>{J((0,j.EG)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,n.useEffect)(()=>{V&&Me()},[V]);const Me=(e,s)=>{const a=(0,h.Hc)(e,s,V);re(a)};return(0,Y.jsx)(l.A,{onChange:e=>{Ae(e)},children:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(H,{isOpen:E,onClose:()=>L(!1),onSubmit:e=>{J((0,M.TI)(e)).then(e=>{e.error||(L(!1),_([]),d().fire({icon:"success",title:"Proposal Email",html:"\n                <p>Proposal Email has been send successfully!</p>\n              ",confirmButtonColor:"#3085d6"}))})},proposalData:D,setProposalId:_}),(0,Y.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,Y.jsx)("div",{className:"w-full",children:(0,Y.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2",children:[(0,Y.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 md:gap-3 gap-1",children:[(0,Y.jsxs)(f.A,{className:" ".concat(h.Lp," "),onChange:e=>{Pe(e)},value:ke,placeholder:"Select Plan",showSearch:!0,children:[(0,Y.jsx)(f.A.Option,{value:"",children:"Select Plan"}),null===ge||void 0===ge?void 0:ge.map((e,s)=>(0,Y.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.title},s))]}),(0,Y.jsxs)(f.A,{className:" ".concat(h.Lp," "),value:De,onChange:e=>{Se(e)},placeholder:"Select Plan",showSearch:!0,children:[(0,Y.jsx)(f.A.Option,{value:"",children:"Select Status"}),(0,Y.jsx)(f.A.Option,{value:!0,children:"Active"}),(0,Y.jsx)(f.A.Option,{value:!1,children:"InActive"})]}),(0,Y.jsx)("button",{onClick:()=>{Pe(""),Se("")},className:"bg-header mt-1 rounded-md md:flex hidden justify-center items-center text-white",children:(0,Y.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),(0,Y.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,Y.jsx)("button",{onClick:()=>{Pe(""),Se("")},className:"bg-header px-4 py-1.5 rounded-md flex md:hidden justify-center items-center  text-white",children:(0,Y.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,Y.jsx)(g.A,{placement:"topLeft",title:"Add Company",children:(0,Y.jsxs)("button",{onClick:()=>{U("/admin/company/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,Y.jsx)(c.OiG,{}),(0,Y.jsx)("span",{className:"text-[12px]",children:"Add Company"})]})})]})]})}),(0,Y.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,Y.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,Y.jsx)("thead",{className:"",children:(0,Y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap min-w-[120px] w-[120px]",children:"S.No."}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap  ",children:(0,Y.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,Y.jsx)("span",{children:"Company Name"}),(0,Y.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,Y.jsx)(m.Odn,{onClick:()=>Me("fullName","asc")}),(0,Y.jsx)(m.BNo,{onClick:()=>Me("fullName","desc")})]})]})}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap  ",children:(0,Y.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,Y.jsx)("span",{children:"userName"}),(0,Y.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,Y.jsx)(m.Odn,{onClick:()=>Me("userName","asc")}),(0,Y.jsx)(m.BNo,{onClick:()=>Me("userName","desc")})]})]})}),(0,Y.jsxs)("th",{className:"border-none p-2 whitespace-nowrap ",children:[(0,Y.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,Y.jsx)("span",{children:"E-mail"}),(0,Y.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,Y.jsx)(m.Odn,{onClick:()=>Me("email","asc")}),(0,Y.jsx)(m.BNo,{onClick:()=>Me("email","desc")})]})]})," "]}),(0,Y.jsxs)("th",{className:"border-none p-2 whitespace-nowrap ",children:[(0,Y.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,Y.jsx)("span",{children:"Phone Number"}),(0,Y.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,Y.jsx)(m.Odn,{onClick:()=>Me("mobile.number","asc")}),(0,Y.jsx)(m.BNo,{onClick:()=>Me("mobile.number","desc")})]})]})," "]}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:(0,Y.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,Y.jsx)("span",{children:"Plan"}),(0,Y.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,Y.jsx)(m.Odn,{onClick:()=>Me("planData.title","asc")}),(0,Y.jsx)(m.BNo,{onClick:()=>Me("planData.title","desc")})]})]})}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:(0,Y.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,Y.jsx)("span",{children:"Address"}),(0,Y.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,Y.jsx)(m.Odn,{onClick:()=>Me("addresses.primary.street","asc")}),(0,Y.jsx)(m.BNo,{onClick:()=>Me("addresses.primary.street","desc")})]})]})}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:(0,Y.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,Y.jsx)("span",{children:"createdAt"})})}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:(0,Y.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,Y.jsx)("span",{children:"createdBy"})})}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:(0,Y.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,Y.jsx)("span",{children:"Status"})})}),(0,Y.jsx)("th",{className:"border-none text-center p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),_e?(0,Y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,Y.jsx)("td",{colSpan:9,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,Y.jsx)(b.A,{})})}):(0,Y.jsx)("tbody",{children:oe&&oe.length>0?oe.map((e,s)=>{var a,t,n,l;return(0,Y.jsxs)("tr",{className:"border-b-[1px] ".concat(s%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:s+1+10*(Ne-1)}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:null===e||void 0===e?void 0:e.userName}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e?void 0:e.email}),(0,Y.jsxs)("td",{className:"whitespace-nowrap border-none p-2 ",children:[(null===e||void 0===e||null===(a=e.mobile)||void 0===a?void 0:a.code)+(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.number)," "]}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e||null===(n=e.planData)||void 0===n?void 0:n.title}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 overflow-hidden text-ellipsis max-w-[200px]",children:(0,h.M0)(null===e||void 0===e||null===(l=e.addresses)||void 0===l?void 0:l.primary)}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:S()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e?void 0:e.createdBy}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,Y.jsx)(N.A,{size:"small",checked:null===e||void 0===e?void 0:e.status,onChange:()=>{J((0,p.oU)({_id:null===e||void 0===e?void 0:e._id})).then(e=>{null!==e&&void 0!==e&&e.error||Ie()})},style:{backgroundColor:null!==e&&void 0!==e&&e.status?"#4caf50":"#f44336",transition:"background-color 0.3s ease"},height:20,width:40})}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,Y.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[(0,Y.jsx)(g.A,{placement:"topLeft",title:"view company",children:(0,Y.jsx)("button",{onClick:()=>{U("/admin/company/view/".concat((0,x.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,Y.jsx)(m.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,Y.jsx)(w.A,{menu:{items:[...$?[{key:"send-email",label:(0,Y.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>{_(e),L(!0)},children:[(0,Y.jsx)(I.mm2,{className:"mr-2 text-green-600",size:16}),"Send Email"]})}]:[],{key:"edit",label:(0,Y.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>U("/admin/company/edit/".concat((0,x.w)(null===e||void 0===e?void 0:e._id))),children:[(0,Y.jsx)(P.u6n,{className:"mr-2 text-[#3c8dbc] hover:text-[#337ab7]",size:16}),"Edit Company"]})},{key:"delete",label:(0,Y.jsxs)("span",{className:"flex justify-start items-center text-red-500",onClick:()=>(e=>{let s={_id:e};d().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&J((0,p.RC)(s)).then(e=>{Ie()})})})(null===e||void 0===e?void 0:e._id),children:[(0,Y.jsx)(u.tqC,{className:"mr-2 text-red-600 hover:text-red-500",size:16}),"Delete Company"]})},{key:"regenerate-password",label:(0,Y.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>(e=>{d().fire({title:"Regenerate Password",text:"Are you sure to change password of ".concat(null===e||void 0===e?void 0:e.fullName,"?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(s=>{s.isConfirmed&&J((0,p.g5)({_id:null===e||void 0===e?void 0:e._id})).then(e=>{null!==e&&void 0!==e&&e.error?d().fire("Error!","Failed to Password Regenerated Successfully.","error"):d().fire("Password Regenerated!","Password has been Regenerated.","success")})})})(e),children:[(0,Y.jsx)(k.rw_,{className:"mr-2 text-header",size:14}),"Regenerate Password"]})},{key:"plan-history",label:(0,Y.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>(async e=>{_(null===e||void 0===e?void 0:e._id),ne(!0),ce(null===e||void 0===e?void 0:e.email),Re(!0),null!==e&&void 0!==e&&e._id&&await J((0,p.$n)({companyId:e._id})),Re(!1)})(e),children:[(0,Y.jsx)(m.OKX,{className:"mr-2 text-header",size:14}),"Plan History"]})}]},trigger:["click"],children:(0,Y.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,Y.jsx)(B.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})]})})]},s)}):(0,Y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,Y.jsx)("td",{colSpan:12,className:"px-6 py-2 text-center whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,Y.jsxs)(C.A,{title:"Company Plan History",open:te,onCancel:()=>{ne(!1)},footer:null,width:1200,className:"antmodalclassName",children:[(0,Y.jsx)("div",{children:"Plan History Data"}),_e?(0,Y.jsx)("div",{className:"text-center my-8",children:(0,Y.jsx)(A.A,{})}):(0,Y.jsxs)("div",{className:"bg-[#ffffff] text-[13px] text-[#676a6c] w-full overflow-x-auto mt-1",children:[(0,Y.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-hidden ",children:[(0,Y.jsx)("thead",{className:"",children:(0,Y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500]  h-[40px]",children:[(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:" S.no."}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:" Plan Name "}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:" Description"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:" Duration"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Price / Month"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Total Price"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(0,Y.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Action"})]})}),Te?(0,Y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,Y.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,Y.jsx)(b.A,{})})}):(0,Y.jsx)("tbody",{children:Q&&null!==Q&&void 0!==Q&&Q.planHistory&&(null===Q||void 0===Q||null===(e=Q.planHistory)||void 0===e?void 0:e.length)>0?null===Q||void 0===Q||null===(s=Q.planHistory)||void 0===s?void 0:s.map((e,s)=>{var a,n,l,i,o,r,d,c,h,u;return(0,Y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px] ".concat(s%2===0?"bg-[#e9ecef]/80":"bg-white"),children:[(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:s+1+10*(Ne-1)}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a="".concat(null===e||void 0===e?void 0:e.title," "))&&void 0!==a?a:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e||null===(l=e.planData)||void 0===l?void 0:l.description)&&void 0!==n?n:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(i="".concat(null===e||void 0===e?void 0:e.days," days"))&&void 0!==i?i:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(o="\u20b9 ".concat(null===e||void 0===e?void 0:e.price," "))&&void 0!==o?o:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(r="\u20b9 ".concat((null===e||void 0===e?void 0:e.price)*(null===e||void 0===e||null===(d=e.planData)||void 0===d?void 0:d.billingCycle)," "))&&void 0!==r?r:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(c="".concat(S()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY")," "))&&void 0!==c?c:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(h=null===e||void 0===e?void 0:e.createdBy)&&void 0!==h?h:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 capitalize",children:null!==(u=null===e||void 0===e?void 0:e.status)&&void 0!==u?u:"-"}),(0,Y.jsx)("td",{className:"whitespace-nowrap border-none p-2 capitalize",children:(0,Y.jsx)(g.A,{placement:"topLeft",title:"Subscription",children:(0,Y.jsx)("button",{onClick:()=>{(async e=>{pe({data:e,status:!0,loading:!0});try{await J((0,p.GX)({subscriptionId:null===e||void 0===e?void 0:e.subscriptionId}))}catch(je){console.error("Error fetching subscription:",je)}finally{pe(e=>(0,t.A)((0,t.A)({},e),{},{loading:!1}))}})(e)},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,Y.jsx)(m.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})}):(0,Y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,Y.jsx)("td",{colSpan:10,className:"px-6 text-center py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,Y.jsx)(C.A,{className:"antmodalclassName",title:"Subscription Details",open:me.status,onCancel:()=>pe(e=>(0,t.A)((0,t.A)({},e),{},{status:!1})),footer:null,width:1100,wrapClassName:"overflow-hidden",children:null!==me&&void 0!==me&&me.loading?(0,Y.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Y.jsx)(A.A,{})}):(0,Y.jsxs)("div",{className:"",children:[(0,Y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4  bg-gray-50 rounded-lg p-1",children:[(0,Y.jsxs)("div",{className:"space-y-3",children:[(0,Y.jsx)(F,{label:"Subscription ID",value:null===K||void 0===K?void 0:K.id}),(0,Y.jsx)(F,{label:"Payment Method",value:null===K||void 0===K?void 0:K.payment_method}),(0,Y.jsx)(F,{label:"Plan ID",value:null===K||void 0===K?void 0:K.plan_id}),(0,Y.jsxs)("div",{className:"flex gap-2 ",children:[(0,Y.jsx)(F,{label:"Short URL",value:null===K||void 0===K?void 0:K.short_url,copyable:!0,onCopy:()=>O(null===K||void 0===K?void 0:K.short_url)}),(0,Y.jsx)("button",{children:(0,Y.jsx)(I.mm2,{size:16,color:"#325EDB",onClick:()=>{(e=>{const s={content:'Hey, your Plan Details are here. <a href="'.concat(e,'" target="_blank">Click here to view</a>.'),to:de,cc:[de],subject:"CompanyMail",attachments:[]};J((0,M.TI)(s))})(null===K||void 0===K?void 0:K.short_url)}})})]}),(0,Y.jsx)(F,{label:"Total Count",value:null===K||void 0===K?void 0:K.total_count})]}),(0,Y.jsxs)("div",{className:"space-y-3",children:[(0,Y.jsx)(F,{label:"Paid Count",value:null===K||void 0===K?void 0:K.paid_count}),(0,Y.jsx)(F,{label:"Remaining Count",value:null===K||void 0===K?void 0:K.remaining_count}),(0,Y.jsx)(F,{label:"Status",value:(0,Y.jsxs)("div",{onClick:()=>{},className:"flex justify-between items-center gap-2 text-xs",children:[(0,Y.jsx)("span",{children:null!==(a=null===K||void 0===K?void 0:K.status)&&void 0!==a?a:"-"}),(0,Y.jsx)("span",{children:("active"==(null===K||void 0===K?void 0:K.status)||"paused"==(null===K||void 0===K?void 0:K.status))&&(0,Y.jsx)(T.A,{subscriptionId:null===K||void 0===K?void 0:K.id})})]}),capitalize:!0}),(0,Y.jsx)(F,{label:"Period",value:null!==K&&void 0!==K&&K.current_start&&null!==K&&void 0!==K&&K.current_end?"".concat(z()(K.current_start).format("DD-MM-YYYY")," to ").concat(z()(K.current_end).format("DD-MM-YYYY")):"-"})]})]}),(0,Y.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:(0,Y.jsx)("div",{className:"overflow-x-auto",children:(0,Y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Y.jsx)("thead",{className:"bg-gray-800",children:(0,Y.jsxs)("tr",{children:[(0,Y.jsx)(W,{children:"#"}),(0,Y.jsx)(W,{children:"Order ID"}),(0,Y.jsx)(W,{children:"Short URL"}),(0,Y.jsx)(W,{children:"Amount"}),(0,Y.jsx)(W,{children:"Amount Due"}),(0,Y.jsx)(W,{children:"Gross Amount"}),(0,Y.jsx)(W,{children:"Status"}),(0,Y.jsx)(W,{children:"Action"})]})}),(0,Y.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Te?(0,Y.jsx)("tr",{children:(0,Y.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:(0,Y.jsx)("div",{className:"flex justify-center",children:(0,Y.jsx)(b.A,{})})})}):(null===K||void 0===K||null===(r=K.invoiceList)||void 0===r?void 0:r.length)>0?K.invoiceList.map((e,s)=>{var a;return(0,Y.jsxs)("tr",{className:s%2===0?"bg-gray-50":"bg-white",children:[(0,Y.jsx)(G,{children:s+1+10*(Ne-1)}),(0,Y.jsx)(G,{className:"max-w-[120px] truncate",children:(null===e||void 0===e?void 0:e.order_id)||"-"}),(0,Y.jsx)(G,{children:null!==e&&void 0!==e&&e.short_url?(0,Y.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Y.jsx)("span",{className:"truncate max-w-[100px] md:max-w-[180px]",children:null===e||void 0===e?void 0:e.short_url}),(0,Y.jsx)(q,{onCopy:()=>O(null===e||void 0===e?void 0:e.short_url)})]}):"-"}),(0,Y.jsx)(G,{children:null!==e&&void 0!==e&&e.amount?(e.amount/100).toFixed(2):"-"}),(0,Y.jsx)(G,{children:null!==e&&void 0!==e&&e.amount_due?(e.amount_due/100).toFixed(2):"-"}),(0,Y.jsx)(G,{children:null!==e&&void 0!==e&&e.gross_amount?(e.gross_amount/100).toFixed(2):"-"}),(0,Y.jsx)(G,{className:"capitalize",children:(null===e||void 0===e?void 0:e.status)||"-"}),(0,Y.jsx)(G,{className:"capitalize",children:(0,Y.jsx)(g.A,{placement:"topLeft",title:"Payment Summary",children:(0,Y.jsx)("button",{className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",disabled:"issued"===e.status,children:(0,Y.jsx)(P.LhG,{onClick:()=>(async e=>{ue({data:e,status:!0,loading:!0});try{await J((0,p.zY)({paymentId:null===e||void 0===e?void 0:e.payment_id}))}catch(je){console.error("Error fetching subscription:",je)}finally{ue(e=>(0,t.A)((0,t.A)({},e),{},{loading:!1}))}})(e),className:"issued"===e.status?"text-gray-500 ":"text-cyan-600 hover:text-cyan-500",size:16})})})}),(0,Y.jsx)(C.A,{className:"antmodalclassName",title:"Payment Summary",open:he.status,onCancel:()=>ue(e=>(0,t.A)((0,t.A)({},e),{},{status:!1})),footer:null,width:800,wrapClassName:"overflow-hidden",style:{borderRadius:"12px"},bodyStyle:{padding:"0"},children:null!==he&&void 0!==he&&he.loading?(0,Y.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Y.jsx)(A.A,{})}):(0,Y.jsxs)("div",{className:"p-6",children:[(0,Y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Y.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[(0,Y.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Y.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Payment Status"}),(0,Y.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("captured"===(null===Z||void 0===Z?void 0:Z.status)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),style:{textTransform:"uppercase"},children:null===Z||void 0===Z?void 0:Z.status})]}),(0,Y.jsxs)("div",{className:"space-y-3",children:[(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Amount"}),(0,Y.jsxs)("span",{className:"font-medium",children:["\u20b9",((null===Z||void 0===Z?void 0:Z.amount)/100).toFixed(2)]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Payment Method"}),(0,Y.jsx)("span",{className:"font-medium",style:{textTransform:"uppercase"},children:null===Z||void 0===Z?void 0:Z.method})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Date"}),(0,Y.jsx)("span",{className:"font-medium",children:new Date(null===Z||void 0===Z?void 0:Z.created_at).toLocaleString()})]})]})]}),(0,Y.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[(0,Y.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Customer Details"}),(0,Y.jsxs)("div",{className:"space-y-3",children:[(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Email"}),(0,Y.jsx)("span",{className:"font-medium",children:null===Z||void 0===Z?void 0:Z.email})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Contact"}),(0,Y.jsx)("span",{className:"font-medium",children:null===Z||void 0===Z?void 0:Z.contact})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Description"}),(0,Y.jsx)("span",{className:"font-medium text-right",children:null===Z||void 0===Z?void 0:Z.description})]})]})]}),"cancelled"===(null===K||void 0===K?void 0:K.status)&&(0,Y.jsxs)("div",{className:"bg-white p-2 rounded-lg shadow-sm border border-gray-100 md:col-span-2",children:[(0,Y.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Refund Amount"}),(0,Y.jsxs)("form",{onSubmit:e=>(async(e,s)=>{e.preventDefault(),xe?(be(""),fe(!0),await J((0,p.hG)({paymentId:s,amount:Number(xe),companyId:D})).then(e=>{null!==e&&void 0!==e&&e.error||(J((0,p.zY)({paymentId:s})),ve(""))}),fe(!1)):be("Amount is required.")})(e,null===Z||void 0===Z?void 0:Z.id),className:"max-w-md mx-auto",children:[(0,Y.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",(0,Y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,Y.jsxs)("div",{className:"flex rounded-md shadow-sm overflow-hidden border border-gray-300 focus-within:ring-2 focus-within:ring-rose-500",children:[(0,Y.jsx)("input",{type:"number",value:xe,disabled:"refunded"==(null===K||void 0===K?void 0:K.status),onChange:e=>ve(+e.target.value),placeholder:"Enter Amount",className:"flex-1 px-4 py-2 text-sm focus:outline-none"}),(0,Y.jsx)("button",{type:"submit",disabled:!xe||"0"===xe,className:" ".concat(xe&&"0"!==xe?"bg-rose-600 hover:bg-rose-700":" bg-gray-500"," text-white px-5 py-2 text-sm font-medium transition-colors    "),children:ye?(0,Y.jsx)(A.A,{size:"small"}):"Submit"})]}),je&&(0,Y.jsx)("p",{className:"mt-2 text-sm text-red-600",children:je})]})]}),(0,Y.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 md:col-span-2",children:[(0,Y.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Transaction Details"}),(0,Y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)("p",{className:"text-gray-500",children:"Transaction ID"}),(0,Y.jsx)("p",{className:"font-medium break-all",children:null===Z||void 0===Z?void 0:Z.id})]}),(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)("p",{className:"text-gray-500",children:"Order ID"}),(0,Y.jsx)("p",{className:"font-medium break-all",children:null===Z||void 0===Z?void 0:Z.order_id})]}),(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)("p",{className:"text-gray-500",children:"Invoice ID"}),(0,Y.jsx)("p",{className:"font-medium break-all",children:null===Z||void 0===Z?void 0:Z.invoice_id})]})]})]}),(null===Z||void 0===Z?void 0:Z.refund_status)&&(0,Y.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 md:col-span-2",children:[(0,Y.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Refund Status"}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-gray-500",children:"Amount Refunded"}),(0,Y.jsxs)("span",{className:"font-medium",children:["\u20b9",((null===Z||void 0===Z?void 0:Z.amount_refunded)/100).toFixed(2)]})]})]})]}),(null===Z||void 0===Z||null===(a=Z.notes)||void 0===a?void 0:a.length)>0&&(0,Y.jsxs)("div",{className:"mt-6 bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[(0,Y.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Notes"}),(0,Y.jsx)("ul",{className:"list-disc pl-5 space-y-2",children:Z.notes.map((e,s)=>(0,Y.jsx)("li",{className:"text-gray-700",children:e},s))})]})]})})]},s)}):(0,Y.jsx)("tr",{children:(0,Y.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No records found"})})})]})})})]})})]})]})]}),(0,Y.jsx)(v.A,{totalCount:X,pageSize:10,currentPage:Ne,onChange:e=>{we(e)}})]})]})})},F=e=>{let{label:s,value:a,copyable:t=!1,capitalize:n=!1,onCopy:l}=e;return(0,Y.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,Y.jsxs)("span",{className:"w-32 md:w-40 text-sm font-medium text-gray-600",children:[s,":"]}),(0,Y.jsxs)("span",{className:"flex-1 text-sm text-gray-800 ".concat(n?"capitalize":""),children:[a||"-",t&&a&&(0,Y.jsx)("button",{onClick:l,className:"ml-2 text-blue-500 hover:text-blue-700 focus:outline-none","aria-label":"Copy to clipboard",children:(0,Y.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]})},W=e=>{let{children:s}=e;return(0,Y.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:s})},G=e=>{let{children:s,className:a=""}=e;return(0,Y.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 ".concat(a),children:s})},q=e=>{let{onCopy:s}=e;return(0,Y.jsx)("button",{onClick:s,className:"text-blue-500 hover:text-blue-700 focus:outline-none",title:"Copy to clipboard",children:(0,Y.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})}},53790:(e,s,a)=>{a.d(s,{A:()=>j});var t=a(65043),n=a(22019),l=a(53913),i=a(65512),o=a(15187),r=a(83003),d=a(78729),c=a(70579);const{Option:m}=i.A,p="cancel",h="pause_resume",u=[p,h],x={[p]:["immidate"],[h]:["pause","resume"]},v={cancel:"Cancel",pause_resume:"Pause / Resume",immidate:"Immediate",pause:"Pause",resume:"Resume"},j=e=>{let{subscriptionId:s}=e;const[a,p]=(0,t.useState)(!1),[h,j]=(0,t.useState)(""),[b,y]=(0,t.useState)(""),[f,g]=(0,t.useState)(!1),N=(0,r.wA)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>p(!0),className:"px-2 py-1 bg-cyan-800 text-white rounded font-semibold",children:"Change"}),(0,c.jsxs)(l.A,{title:"Update Subscription",className:"antmodalclassName",open:a,onOk:async()=>{if(h&&b){g(!0);try{await N((0,d.f8)({subscriptionId:s,status:h,type:b})).then(e=>{null!==e&&void 0!==e&&e.error||(N((0,d.GX)({subscriptionId:s})),p(!1),j(""),y(""))})}catch(e){console.error(e)}finally{g(!1)}}else n.Ay.warning("Please select both status and type.")},onCancel:()=>{p(!1),j(""),y("")},confirmLoading:f,okText:"Submit",children:[(0,c.jsxs)("div",{style:{marginBottom:16},children:[(0,c.jsx)("label",{children:"Status:"}),(0,c.jsx)(i.A,{value:h||void 0,onChange:e=>{j(e),y("")},placeholder:"Select subscription status",getPopupContainer:e=>e.parentNode,className:"".concat(o.Hy," border-2"),style:{width:"100%"},children:u.map(e=>(0,c.jsx)(m,{value:e,children:v[e]||e},e))})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Type:"}),(0,c.jsx)(i.A,{value:b||void 0,onChange:y,placeholder:"Select subscription type",getPopupContainer:e=>e.parentNode,className:"".concat(o.Hy," border-2"),style:{width:"100%"},disabled:!h,children:(x[h]||[]).map(e=>(0,c.jsx)(m,{value:e,children:v[e]||e},e))})]})]})]})}},54555:(e,s,a)=>{a.d(s,{A:()=>x});var t=a(89379),n=a(65043),l=a(92823),i=a.n(l),o=(a(25884),a(60184)),r=a(83003),d=a(88967),c=a(86178),m=a.n(c),p=a(15187),h=a(53913),u=a(70579);const x=e=>{let{isOpen:s,onClose:a,onSubmit:l,proposalData:c,setProposalId:x}=e;const[v,j]=(0,n.useState)({to:"",cc:[],subject:"Regarding Proposal",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),[b,y]=(0,n.useState)(!1),[f,g]=(0,n.useState)(""),N=(0,r.wA)();(0,n.useEffect)(()=>{if(j({to:"",cc:[],subject:"Regarding Proposal",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),c){var e,s,a,n;j(e=>(0,t.A)((0,t.A)({},e),{},{to:null===c||void 0===c?void 0:c.email}));const l='<div class="space-y-4 '.concat("text-gray-600",'">\n         <div style="width: 80%; margin: 0 auto; padding: 20px; background-color: #ffffff; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">\n        <h1 style="font-size: 24px; color: #0073e6;">Welcome to ',null===(e=c.companyData)||void 0===e?void 0:e.fullName,'!</h1>\n        <p style="font-size: 16px; line-height: 1.5;">We are excited to have you join our team and begin this new chapter together.</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">As part of your onboarding process, we would like to ensure that you have access to all the necessary tools and resources. Below are the details to get started:</p>\n\n        <h3 style="font-size: 18px; color: #0073e6;">Your First Day Information:</h3>\n        <ul style="font-size: 16px; line-height: 1.5;">\n            <li><span style="font-weight: bold;">Date:</span> ').concat(m()(null===c||void 0===c?void 0:c.dateOfJoining).format("YYYY-MM-DD"),'</li>\n            <li><span style="font-weight: bold;">Reporting Time:</span> ').concat(m()(null===c||void 0===c?void 0:c.dateOfJoining).format("HH:MM"),'</li>\n            <li><span style="font-weight: bold;">Location:</span> [Office Address / Virtual Meeting Link]</li>\n            <li><span style="font-weight: bold;">Reporting To:</span> [Name and Designation of Reporting Manager/HR Contact]</li>\n        </ul>\n\n        <h3 style="font-size: 18px; color: #0073e6;">Login Credentials:</h3>\n        <p style="font-size: 16px; line-height: 1.5;">To facilitate a smooth onboarding process, we have set up your account in our HRMS (Human Resource Management System). Please use the credentials below to log in:</p>\n        <ul style="font-size: 16px; line-height: 1.5;">\n            <li><span style="font-weight: bold;">HRMS Portal Link:</span> [Insert HRMS URL]</li>\n            <li><span style="font-weight: bold;">Username:</span> [Candidate\'s Email ID or Assigned Username]</li>\n            <li><span style="font-weight: bold;">Temporary Password:</span> [Insert Temporary Password]</li>\n        </ul>\n        <p style="font-size: 16px; line-height: 1.5;"><span style="font-weight: bold;">Note:</span> For security purposes, please log in at your earliest convenience and update your password upon first login.</p>\n\n        <h3 style="font-size: 18px; color: #0073e6;">Next Steps:</h3>\n        <ul style="font-size: 16px; line-height: 1.5;">\n            <li><span style="font-weight: bold;">Complete Your Profile:</span> Update your details (e.g., contact information, bank details, and personal information) in the HRMS portal.</li>\n            <li><span style="font-weight: bold;">Access Onboarding Materials:</span> You will find important documents, policies, and onboarding checklists available in the system.</li>\n            <li><span style="font-weight: bold;">Attend Orientation:</span> [Provide timing/details if applicable].</li>\n        </ul>\n\n        <p style="font-size: 16px; line-height: 1.5;">If you face any issues accessing the portal or require assistance, please do not hesitate to reach out to me.</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">We are thrilled to have you on board and are confident you will have a wonderful journey with [Company Name]. Wishing you a fantastic start!</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">Once again, welcome aboard!</p>\n\n        <p style="font-size: 16px; line-height: 1.5;">Best Regards,</p>\n        <p style="font-size: 16px; line-height: 1.5;">').concat(null===(s=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))))||void 0===s?void 0:s.fullName,'</p>\n        <p style="font-size: 16px; line-height: 1.5;">[Your Designation]</p>\n        <p style="font-size: 16px; line-height: 1.5;">').concat(null===(a=c.companyData)||void 0===a?void 0:a.fullName,'</p>\n        <p style="font-size: 16px; line-height: 1.5;">[Contact Number]</p>\n        <p style="font-size: 16px; line-height: 1.5;">').concat(null===(n=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))))||void 0===n?void 0:n.email,'</p>\n        <p style="font-size: 16px; line-height: 1.5;">[Company Website]</p>');g(l)}},[c]);const w=e=>{const{name:s,value:a}=e.target;j(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a}))},C=()=>{j({to:"",cc:[],subject:"",employeeName:"",jobTitle:"",companyName:"",joiningDate:"",joiningTime:"",officeAddress:"",salary:"",salaryDuration:"year",confirmationDeadline:"",hrContact:"",senderName:"",senderTitle:"",portalURL:"",portalUsername:"",portalPassword:"",attachments:[]}),y(!1),g(""),x([]),a()};return s?(0,u.jsxs)(h.A,{open:!0,onCancel:C,footer:null,closable:!0,width:800,bodyStyle:{maxHeight:"70vh"},centered:!0,zIndex:1501,children:[(0,u.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,u.jsx)("h2",{className:"text-sm font-semibold text-gray-800",children:b?"Email Preview":"Proposal Email Template"})}),(0,u.jsxs)("form",{autoComplete:"off",onSubmit:e=>{e.preventDefault(),l({content:f,to:null===v||void 0===v?void 0:v.to,cc:"string"===typeof(null===v||void 0===v?void 0:v.cc)?v.cc.split(",").map(e=>e.trim()):[],subject:null===v||void 0===v?void 0:v.subject,attachments:null===v||void 0===v?void 0:v.attachments})},className:"space-y-4 ",children:[(0,u.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 h-[50vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"font-semibold text-sm",children:["To:",(0,u.jsx)("input",{name:"to",value:v.to,onChange:w,placeholder:"Recipient Email",className:"border p-2 w-full"})]}),(0,u.jsxs)("div",{className:"font-semibold text-sm",children:["CC:",(0,u.jsx)("input",{name:"cc",value:v.cc,onChange:w,placeholder:"CC Emails",className:"border p-2 w-full"})]}),(0,u.jsxs)("div",{className:"font-semibold text-sm",children:["Subject:",(0,u.jsx)("input",{name:"subject",value:v.subject,onChange:w,placeholder:"Email Subject",className:"border p-2 w-full"})]})]}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)(i(),{value:f,onChange:e=>{g(e)},placeholder:"Write the email body here",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike"],[{align:[]}],["link","image","video"],["blockquote","code-block"],["clean"]]},formats:["header","font","list","bold","italic","underline","link","align","clean"]})}),(0,u.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,u.jsx)("div",{className:"font-medium mb-2",children:"Attachments:"}),b?(0,u.jsx)("div",{className:"space-y-2"}):(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("input",{type:"file",onChange:e=>{const s={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};N((0,d.Sg)(s)).then(e=>{var s;null!==e&&void 0!==e&&null!==(s=e.payload)&&void 0!==s&&s.data&&j(s=>{var a;return(0,t.A)((0,t.A)({},s),{},{attachments:[...s.attachments,null===(a=e.payload)||void 0===a?void 0:a.data]})})})},className:"hidden",id:"file-upload"}),(0,u.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,u.jsx)(o.chT,{className:"mr-2"})," Add Attachments"]}),(0,u.jsx)("div",{className:"space-y-2",children:v.attachments.map((e,s)=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,u.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,u.jsx)(o.chT,{className:"text-gray-500"}),(0,u.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,u.jsx)("button",{type:"button",onClick:()=>(e=>{j(s=>{const a=s.attachments.filter((s,a)=>a!==e);return(0,t.A)((0,t.A)({},s),{},{attachments:a})})})(s),className:"text-red-500 hover:text-red-700",children:(0,u.jsx)(o.QCr,{})})]},s))})]})]})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,u.jsx)("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Generate Email"})]})]})]}):null}}}]);
//# sourceMappingURL=8865.7ea2e4d8.chunk.js.map