"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9778],{29778:(e,s,a)=>{a.r(s),a.d(s,{default:()=>A});var t=a(89379),l=a(24858),d=a(83003),n=a(73216),r=a(39160),i=a(15187),c=a(65043),o=a(64510),m=a(735),u=(a(14118),a(31744)),x=a(78729),p=(a(33007),a(94084)),h=(a(86178),a(65512)),v=a(60446),j=a.n(v),y=a(17995),N=a(89427),b=a(70579);const A=()=>{const{loading:e}=(0,d.d4)(e=>e.eventCalander),{register:s,handleSubmit:a,control:v,setValue:A,formState:{errors:f}}=(0,l.mN)({defaultValues:{attendees:[{name:"",email:"",status:""}],startTime:"",endTime:"",isAllDay:!1,recurrence:{frequency:"",interval:1,endDate:""}}}),{userCompanyId:g,userType:T}=(0,m.A)(),{fields:D,append:q,remove:I}=(0,l.jz)({control:v,name:"attendees"}),S=(0,d.wA)(),C=(0,n.Zp)(),O=(0,l.FH)({control:v,name:"PDCompanyId",defaultValue:""}),P=(0,l.FH)({control:v,name:"PDBranchId",defaultValue:""}),{companyList:w,companyListLoading:Y}=(0,d.d4)(e=>e.company),{branchList:B,branchListloading:L}=(0,d.d4)(e=>e.branch),Q=JSON.parse(localStorage.getItem("user_info_".concat(i.AU)));return(0,c.useEffect)(()=>{(O||"company"===(null===Q||void 0===Q?void 0:Q.userType)||"companyDirector"===(null===Q||void 0===Q?void 0:Q.userType))&&S((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===Q||void 0===Q?void 0:Q.userType)?O:"company"===(null===Q||void 0===Q?void 0:Q.userType)?null===Q||void 0===Q?void 0:Q._id:null===Q||void 0===Q?void 0:Q.companyId}))},[O]),(0,c.useEffect)(()=>{"admin"===(null===Q||void 0===Q?void 0:Q.userType)&&S((0,x.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,b.jsx)(r.A,{children:(0,b.jsx)("div",{className:"gap-4",children:(0,b.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:a((e,s)=>{const a={companyId:"admin"===(null===Q||void 0===Q?void 0:Q.userType)?O:"company"===(null===Q||void 0===Q?void 0:Q.userType)?null===Q||void 0===Q?void 0:Q._id:null===Q||void 0===Q?void 0:Q.companyId,branchId:"company"===(null===Q||void 0===Q?void 0:Q.userType)||"admin"===(null===Q||void 0===Q?void 0:Q.userType)||"companyDirector"===(null===Q||void 0===Q?void 0:Q.userType)?P:"companyBranch"===(null===Q||void 0===Q?void 0:Q.userType)?null===Q||void 0===Q?void 0:Q._id:null===Q||void 0===Q?void 0:Q.branchId,title:e.title,description:e.title,location:e.location,startDate:j()(e.startTime),endDate:j()(e.endTime),attendees:e.attendees};S((0,o.$R)(a)).then(e=>{e.error||C(-1)})}),children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:my-2",children:["admin"===(null===Q||void 0===Q?void 0:Q.userType)&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Company ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(l.xI,{name:"PDCompanyId",control:v,rules:{required:"Company is required"},render:e=>{let{field:s}=e;return(0,b.jsxs)(h.A,(0,t.A)((0,t.A)({},s),{},{className:" ".concat(i.Hy," ").concat(f.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,children:[(0,b.jsx)(h.A.Option,{value:"",children:"Select Company"}),Y?(0,b.jsx)(h.A.Option,{disabled:!0,children:(0,b.jsx)(N.A,{})}):null===w||void 0===w?void 0:w.map(e=>(0,b.jsxs)(h.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),f.PDCompanyId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.PDCompanyId.message})]}),("admin"===(null===Q||void 0===Q?void 0:Q.userType)||"company"===(null===Q||void 0===Q?void 0:Q.userType)||"companyDirector"===(null===Q||void 0===Q?void 0:Q.userType))&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Branch ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(l.xI,{name:"PDBranchId",control:v,rules:{required:"Branch is required"},render:e=>{var s;let{field:a}=e;return(0,b.jsxs)(h.A,(0,t.A)((0,t.A)({},a),{},{className:" ".concat(i.Hy," ").concat(f.PDPlan?"border-[1px] ":"border-gray-300"," z-[99999]"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,s)=>String(null===s||void 0===s?void 0:s.children).toLowerCase().includes(e.toLowerCase()),getPopupContainer:e=>e.parentNode,children:[(0,b.jsx)(h.A.Option,{value:"",children:"Select Branch"}),L?(0,b.jsx)(h.A.Option,{disabled:!0,children:(0,b.jsx)(N.A,{})}):null===(s=(0,i._o)(B,"fullName"))||void 0===s?void 0:s.map(e=>(0,b.jsxs)(h.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),f.PDBranchId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.PDBranchId.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Title ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,t.A)((0,t.A)({placeholder:"Title"},s("title",{required:"Title is required"})),{},{type:"text",className:"".concat(i.Ol," ").concat(f.title?"border-[1px] ":"border-gray-300")})),f.title&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.title.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Description ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,t.A)((0,t.A)({placeholder:"Description"},s("description",{required:"Description is required"})),{},{className:"".concat(i.Ol," ").concat(f.description?"border-[1px] ":"border-gray-300")})),f.description&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.description.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Location ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,t.A)((0,t.A)({placeholder:"Location"},s("location",{required:"Location is required"})),{},{type:"text",className:"".concat(i.Ol," ").concat(f.location?"border-[1px] ":"border-gray-300")})),f.location&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.location.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Start Time ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(l.xI,{name:"startTime",control:v,showTime:!0,rules:{required:"Start Time  is required"},render:e=>{let{field:s}=e;return(0,b.jsx)(p.A,{field:s,showTime:!0,format:"DD/MM/YYYY hh:mm",errors:f,disabledDate:e=>e&&e.isBefore(j()().endOf("day"),"day")})}}),f.startTime&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.startTime.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["End Time ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(l.xI,{name:"endTime",control:v,showTime:!0,rules:{required:"End Time  is required"},format:"DD/MM/YYYY hh:mm",render:e=>{let{field:s}=e;return(0,b.jsx)(p.A,{field:s,showTime:!0,format:"DD/MM/YYYY hh:mm",errors:f,disabledDate:e=>e&&e.isBefore(j()().endOf("day"),"day")})}}),f.endTime&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.endTime.message})]})]}),null===D||void 0===D?void 0:D.map((e,a)=>{var d,n,r,c,o,m,u,x,p,j;return(0,b.jsxs)("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Attendee Name ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,t.A)((0,t.A)({},s("attendees[".concat(a,"].name"),{required:"Attendee name is required"})),{},{type:"text",placeholder:"Attendee Name",className:"".concat(i.Ol," ").concat(null!==(d=f.attendees)&&void 0!==d&&null!==(n=d[a])&&void 0!==n&&n.name?"border-[1px] ":"border-gray-300")})),(null===(r=f.attendees)||void 0===r||null===(c=r[a])||void 0===c?void 0:c.name)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.attendees[a].name.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(i.Q0),children:["Attendee Email ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,t.A)((0,t.A)({},s("attendees[".concat(a,"].email"),{required:"Attendee email is required"})),{},{type:"email",className:"".concat(i.Ol," ").concat(null!==(o=f.attendees)&&void 0!==o&&null!==(m=o[a])&&void 0!==m&&m.email?"border-[1px] ":"border-gray-300"),placeholder:"Attendee Email"})),(null===(u=f.attendees)||void 0===u||null===(x=u[a])||void 0===x?void 0:x.email)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.attendees[a].email.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("label",{className:"".concat(i.Q0),children:"Attendee Status"}),(0,b.jsx)(l.xI,{name:"attendees[".concat(a,"].status"),control:v,rules:{required:"status  is required"},render:e=>{let{field:s}=e;return(0,b.jsxs)(h.A,(0,t.A)((0,t.A)({},s),{},{className:" ".concat(i.Hy," ").concat(f.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select status",showSearch:!0,children:[(0,b.jsx)(h.A.Option,{value:"",children:"Select status"}),(0,b.jsx)(h.A.Option,{value:"accepted",children:"Accepted"}),(0,b.jsx)(h.A.Option,{value:"declined",children:"Declined"})]}))}}),(null===(p=f.attendees)||void 0===p||null===(j=p[a])||void 0===j?void 0:j.status)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.attendees[a].status.message})]}),(0,b.jsx)("div",{className:"flex md:justify-center justify-end items-end",children:(0,b.jsx)("button",{type:"button",onClick:()=>I(a),className:"text-gray-600 hover:text-gray-800 flex items-center justify-center border-2 border-gray-500 p-1 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-trash-alt flex items-center justify-center w-[25px] h-[25px]"})})})]})}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)("button",{type:"button",onClick:()=>q({name:"",email:"",status:"accepted"}),className:"bg-header text-white py-1.5 px-3 text-nowrap text-sm rounded ",children:"Add More"})}),(0,b.jsx)("div",{className:"flex justify-end mt-4",children:(0,b.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:e?(0,b.jsx)(y.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=9778.199fb55d.chunk.js.map