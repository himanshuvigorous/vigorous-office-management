"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[510],{90510:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var n=l(89379),d=l(24858),s=l(39160),i=l(83003),r=l(73216),o=l(65043),t=l(15187),c=l(31744),u=l(66015),m=l(42837),x=l(31536),p=l(71262),v=l(70337),h=l(12208),j=l(735),N=l(47196),y=l(96603),A=l(65512),f=l(89427),g=l(94084),b=(l(86178),l(70579));const I=()=>{const{register:e,handleSubmit:a,control:l,watch:I,formState:{errors:q},setValue:w}=(0,d.mN)({defaultValues:{expenceHead:[{financialYear:(0,t.Yz)(),isPeriod:"",monthName:"",quarterName:""}]}}),{userCompanyId:H,userDirectorId:S,userBranchId:O,userType:C}=(0,j.A)(),T=(0,i.wA)(),L=(0,r.Zp)(),P=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),{companyList:k}=(0,i.d4)(e=>e.company),{branchList:Q,branchListloading:D}=(0,i.d4)(e=>e.branch),{clientList:_}=(0,i.d4)(e=>e.client),{branchDetailsData:M}=(0,i.d4)(e=>e.branch),{employeList:V}=(0,i.d4)(e=>e.employe),{clientGroupList:Y}=(0,i.d4)(e=>e.clientGroup),{expenseTypeList:B}=(0,i.d4)(e=>e.expenceHead),{fields:F,append:E,remove:G}=(0,d.jz)({control:l,name:"expenceHead"}),z=(0,d.FH)({control:l,name:"PDCompanyId",defaultValue:H}),Z=(0,d.FH)({control:l,name:"PDBranchId",defaultValue:O}),J=(0,d.FH)({control:l,name:"PDDirectorId",defaultValue:S}),R=(0,d.FH)({control:l,name:"clientId",defaultValue:""});console.log(R,"ssafsad");(0,o.useEffect)(()=>{(z||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&T((0,c.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?z:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId}))},[z]),(0,o.useEffect)(()=>{!z&&"admin"===C||!Z&&"companBranch"===C&&"employee"!==C||(U(),T((0,x.dV)({directorId:"",companyId:z,branchId:Z,text:"",sort:!0,status:"",isPagination:!1})))},[z,Z]);const U=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:z,branchId:Z};T((0,m.qV)(e))},$=()=>{T((0,h.J_)({isPagination:!1,companyId:z,branchId:Z,text:"",sort:!0,status:!0,groupId:""}))};return(0,b.jsx)(s.A,{children:(0,b.jsx)("div",{className:"gap-4",children:(0,b.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:a(e=>{var a,l;const n=null===e||void 0===e||null===(a=e.expenceHead)||void 0===a?void 0:a.map(e=>({headId:null===e||void 0===e?void 0:e.expenseTypeId,type:null===e||void 0===e?void 0:e.isPeriod,financialYear:null===e||void 0===e?void 0:e.financialYear,monthName:"Monthly"===(null===e||void 0===e?void 0:e.isPeriod)?null===e||void 0===e?void 0:e.monthName:"",monthQuaters:"Quaterly"===(null===e||void 0===e?void 0:e.isPeriod)?null===e||void 0===e?void 0:e.quarterName:"",headType:"head",description:"",amount:0})),d={companyId:z,directorId:J,branchId:Z,clientGroupId:null===e||void 0===e?void 0:e.groupName,employeId:"cash"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(l=e.employeeId)||void 0===l?void 0:l.value:null,bankAccId:"cash"!==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.bankId:null,paymentMode:null===e||void 0===e?void 0:e.paymentMode,chequeNo:"cheque"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.chequeNo:null,transactionNo:"bank"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.transactionNo:null,totalAmount:+(null===e||void 0===e?void 0:e.amount),naration:null===e||void 0===e?void 0:e.naration,date:(0,t.Tk)(null===e||void 0===e?void 0:e.date),expenseTypeId:null,clientId:null===e||void 0===e?void 0:e.clientId,heads:n};T((0,p.ZN)(d)).then(e=>{e.error||L(-1)})}),children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-8 md:my-1 px-3 md:mt-4",children:[("admin"===C||"company"===C||"companyDirector"===C)&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Branch ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var a;let{field:l}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},l),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Branch"}),D?(0,b.jsx)(A.A.Option,{disabled:!0,children:(0,b.jsx)(f.A,{})}):null===(a=(0,t._o)(Q,"fullName"))||void 0===a?void 0:a.map(e=>(0,b.jsx)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),q.PDBranchId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.PDBranchId.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Group Type ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"groupName",rules:{required:"Group Name is required"},render:e=>{var a;let{field:l}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},l),{},{onFocus:$,defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Group Type"}),D?(0,b.jsx)(A.A.Option,{disabled:!0,children:(0,b.jsx)(f.A,{})}):null===(a=(0,t._o)(Y,"fullName"))||void 0===a?void 0:a.map(e=>(0,b.jsx)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),q.groupName&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.groupName.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Client",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"clientId",rules:{required:"client  is required"},render:e=>{var a;let{field:l}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},l),{},{onFocus:()=>{const e={directorId:"",companyId:z,branchId:Z,userType:"client",groupId:I("groupName"),text:"",sort:!0,status:"",isPagination:!1};T((0,v.Aq)(e))},defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Client "}),null===(a=(0,t._o)(_,"fullName"))||void 0===a?void 0:a.map(e=>(0,b.jsx)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),q.clientId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.clientId.message})]}),F.map((e,a)=>{var s,i,r,o,c,u,m,x,p,v,h,j,y,f,g,w,H,S,O,C;return(0,b.jsxs)("div",{className:"border border-gray-300 rounded-md",children:[(0,b.jsx)("div",{className:"flex flex-col items-end",children:(0,b.jsx)("div",{className:"w-full bg-header flex justify-end items-center rounded-tl-md rounded-tr-md p-1 min-h-5",children:0!==a&&(0,b.jsx)("button",{type:"button",onClick:()=>G(a),children:(0,b.jsx)(N.tqC,{className:"text-white w-12 hover:text-white",size:20})})})}),(0,b.jsxs)("div",{className:"grid ".concat("Yearly"===I("expenceHead[".concat(a,"].isPeriod"))?"grid-cols-1 md:grid-cols-3":I("expenceHead[".concat(a,"].isPeriod"))?"grid-cols-1 md:grid-cols-4":"grid-cols-1 md:grid-cols-3"," md:gap-4 md:my-1 px-3 md:mt-4"),children:[(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Department ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,placeholder:"Select Department ",name:"expenceHead[".concat(a,"].expenseTypeId"),rules:{required:"Department is required"},render:e=>{var a,l;let{field:d}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},d),{},{placeholder:"Select Department ",className:" ".concat(t.Hy," ").concat(q.expenseTypeId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{className:"",value:"",children:"Select Department"}),null===_||void 0===_||null===(a=_.find(e=>(null===e||void 0===e?void 0:e._id)==R))||void 0===a||null===(l=a.departmentIdList)||void 0===l?void 0:l.map(e=>(0,b.jsx)(A.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]}))}}),(null===(s=q.expenceHead)||void 0===s||null===(i=s[a])||void 0===i?void 0:i.expenseTypeId)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:null===(r=q.expenceHead)||void 0===r||null===(o=r[a])||void 0===o?void 0:o.expenseTypeId.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Financial Year ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"expenceHead[".concat(a,"].financialYear"),rules:{required:"Financial year is required"},render:e=>{let{field:a}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},a),{},{value:a.value||(0,t.Yz)(),placeholder:"Select Financial year",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Financial year"}),(0,t.vr)().map((e,a)=>(0,b.jsx)(A.A.Option,{value:e,children:e},a))]}))}}),(null===(c=q.expenceHead)||void 0===c||null===(u=c[a])||void 0===u?void 0:u.financialYear)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:null===(m=q.expenceHead)||void 0===m||null===(x=m[a])||void 0===x?void 0:x.financialYear.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Type ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"expenceHead[".concat(a,"].isPeriod"),rules:{required:"Type is required"},render:e=>{let{field:a}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},a),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Type"}),(0,b.jsx)(A.A.Option,{value:"Quaterly",children:" Quaterly"}),(0,b.jsx)(A.A.Option,{value:"Monthly",children:"Monthly"}),(0,b.jsx)(A.A.Option,{value:"Yearly",children:"Yearly"})]}))}}),(null===(p=q.expenceHead)||void 0===p||null===(v=p[a])||void 0===v?void 0:v.isPeriod)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:null===(h=q.expenceHead)||void 0===h||null===(j=h[a])||void 0===j?void 0:j.isPeriod.message})]}),"Quaterly"===I("expenceHead[".concat(a,"].isPeriod"))&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Quarter ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"expenceHead[".concat(a,"].quarterName"),rules:{required:"Reset Month is required"},render:e=>{let{field:a}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},a),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Quarter"}),t.$G.map(e=>(0,b.jsx)(A.A.Option,{value:e,children:e},e))]}))}}),(null===(y=q.expenceHead)||void 0===y||null===(f=y[a])||void 0===f?void 0:f.quarterName)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:null===(g=q.expenceHead)||void 0===g||null===(w=g[a])||void 0===w?void 0:w.quarterName.message})]}),"Monthly"===I("expenceHead[".concat(a,"].isPeriod"))&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Month ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"expenceHead[".concat(a,"].monthName"),rules:{required:"Month is required"},render:e=>{let{field:a}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},a),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Month"}),t.US.map(e=>(0,b.jsx)(A.A.Option,{value:e,children:e},e))]}))}}),(null===(H=q.expenceHead)||void 0===H||null===(S=H[a])||void 0===S?void 0:S.monthName)&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:null===(O=q.expenceHead)||void 0===O||null===(C=O[a])||void 0===C?void 0:C.monthName.message})]})]})]})}),(0,b.jsx)("button",{type:"button",onClick:()=>E({taskType:"",amount:"",financialYear:(0,t.Yz)()}),className:I("isAlltask")?"hidden":"bg-header text-white p-2 px-4 rounded mt-4",children:"Add Expense Head"}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"py-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-2 md:my-1  md:mt-2",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("label",{className:"your-input-label-class",children:(0,b.jsx)(d.xI,{name:"paymentMode",control:l,defaultValue:"cash",rules:{required:"Type is required"},render:e=>{let{field:a}=e;return(0,b.jsxs)(y.Ay.Group,(0,n.A)((0,n.A)({defaultValue:"cash"},a),{},{children:[(0,b.jsx)(y.Ay,{className:"".concat(t.Q0),value:"cash",children:"Cash"}),(0,b.jsx)(y.Ay,{className:"".concat(t.Q0),value:"bank",children:"Bank"})]}))}})}),q.type&&(0,b.jsx)("span",{className:"error-message",children:q.type.message})]}),q.type&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.type.message})]}),"cash"!==I("paymentMode")&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Sender Bank",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(d.xI,{control:l,name:"bankId",rules:{required:"bankId is required"},render:e=>{var a,l;let{field:d}=e;return(0,b.jsxs)(A.A,(0,n.A)((0,n.A)({},d),{},{defaultValue:"",className:"".concat(t.Hy," "),onFocus:()=>{T((0,c.ZN)({_id:"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)?Z:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId}))},children:[(0,b.jsx)(A.A.Option,{value:"",children:"Select Bank"}),(null===M||void 0===M||null===(a=M.data)||void 0===a?void 0:a.bankData)&&(null===M||void 0===M||null===(l=M.data)||void 0===l?void 0:l.bankData.length)>0&&M.data.bankData.map(e=>(0,b.jsx)(A.A.Option,{value:e._id,children:(0,t.ig)(e)},e._id)),"         "]}))}}),q.bankId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.bankId.message})]}),"cash"===I("paymentMode")&&(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,b.jsx)(d.xI,{name:"employeeId",control:l,rules:{required:"Employee is required"},render:e=>{let{field:a}=e;return(0,b.jsx)(u.Ay,(0,n.A)((0,n.A)({},a),{},{options:null===V||void 0===V?void 0:V.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(q.employeeId?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),q.employeeId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.employeeId.message})]}),"cheque"===I("paymentMode")&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Cheque No",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,n.A)((0,n.A)({type:""},e("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(t.Ol," ").concat(q.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),q.chequeNo&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.chequeNo.message})]}),"bank"===I("paymentMode")&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Transaction No",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,n.A)((0,n.A)({type:"text"},e("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(t.Ol," ").concat(q.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter transaction no"})),q.transactionNo&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.transactionNo.message})]})]}),(0,b.jsx)("div",{className:"",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"".concat(t.Q0),children:"Payment Date"}),(0,b.jsx)(d.xI,{name:"date",control:l,render:e=>{let{field:a}=e;return(0,b.jsx)(g.A,{field:a,errors:q})}}),q.date&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:"Date is required"})]})})]})}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Naration",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("textarea",(0,n.A)((0,n.A)({},e("naration",{required:"Naration is required"})),{},{className:" ".concat(t.Ol," ").concat(q.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),q.naration&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.naration.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(t.Q0),children:["Amount",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,n.A)((0,n.A)({type:"number",step:"0.01"},e("amount",{required:"Amount is required"})),{},{className:" ".concat(t.Ol," ").concat(q.amount?"border-[1px] ":"border-gray-300"),placeholder:"Enter Amount"})),q.amount&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:q.amount.message})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{paymentMode:"submit",className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Submit"})})]})})})}}}]);
//# sourceMappingURL=510.180748af.chunk.js.map