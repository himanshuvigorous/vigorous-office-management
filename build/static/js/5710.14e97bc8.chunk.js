"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5710],{25710:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var a=t(89379),d=t(65043),s=t(39160),i=t(73216),o=t(83003),l=t(23156),c=t(47196),r=t(30064),p=t.n(r),u=t(31174),m=t(65337),x=t(78227),v=t(15187),h=t(24858),y=t(31744),b=t(78729),f=t(97893),j=t(60184),N=t(70579);const g=function(){const{register:e,control:n,formState:{errors:t},setValue:r}=(0,h.mN)(),g=(0,i.Zp)(),w=(0,o.wA)(),{clientExpenceListData:D,totalclientExpenceListCount:C,loading:I}=(0,o.d4)(e=>e.clientExpence),P=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),[A,T]=(0,d.useState)(1),{companyList:E}=(0,o.d4)(e=>e.company),{branchList:_}=(0,o.d4)(e=>e.branch),B=(0,h.FH)({control:n,name:"PDCompanyId",defaultValue:""}),k=(0,h.FH)({control:n,name:"PDBranchId",defaultValue:""});(0,d.useEffect)(()=>{B&&r("PDBranchId","")},[B]),(0,d.useEffect)(()=>{S()},[A,k,B]);const S=()=>{const e={currentPage:A,pageSize:10,reqData:{directorId:"",companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?B:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?k:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,text:"",sort:!0,status:"",isPagination:!0,clientId:"",groupId:"",startDate:"",endDate:"",paymentmode:""}};w((0,f.m)(e))};return(0,d.useEffect)(()=>{(B||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&w((0,y.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?B:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId}))},[B]),(0,d.useEffect)(()=>{"admin"===(null===P||void 0===P?void 0:P.userType)&&w((0,b.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,N.jsx)(s.A,{children:I?(0,N.jsx)(m.A,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"",children:(0,N.jsxs)("div",{className:"flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,N.jsxs)("div",{className:"flex items-center space-x-2",children:["admin"===(null===P||void 0===P?void 0:P.userType)&&(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("select",(0,a.A)((0,a.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(v.OJ," ").concat(t.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,N.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===E||void 0===E?void 0:E.map(e=>(0,N.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),t.PDCompanyId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:t.PDCompanyId.message})]}),("admin"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("select",(0,a.A)((0,a.A)({},e("PDBranchId",{required:"Branch is required"})),{},{className:" ".concat(v.OJ," ").concat(t.PDBranchId?"border-[1px] ":"border-gray-300"),children:[(0,N.jsx)("option",{className:"",value:"",children:"Select Branch"}),null===_||void 0===_?void 0:_.map(e=>(0,N.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),t.PDBranchId&&(0,N.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]})]}),(0,N.jsxs)("button",{onClick:()=>{g("/admin/clientExpence/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,N.jsx)(l.OiG,{}),(0,N.jsx)("span",{className:"text-[12px]",children:"Add clientExpence"})]})]})}),(0,N.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,N.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,N.jsx)("thead",{className:"",children:(0,N.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,N.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,N.jsx)("th",{className:"p-2 whitespace-nowrap",children:"client"}),(0,N.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Amount"}),(0,N.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),(0,N.jsx)("tbody",{children:D&&(null===D||void 0===D?void 0:D.length)>0?null===D||void 0===D?void 0:D.map((e,n)=>(0,N.jsxs)("tr",{className:"text-black ".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,N.jsx)("td",{className:"whitespace-nowrap p-2",children:n+1+10*(A-1)}),(0,N.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.clientName}),(0,N.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.grandTotalAmount}),(0,N.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,N.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[(0,N.jsx)("button",{onClick:()=>{if(null!==e&&void 0!==e&&e.clientExpencePDFPath){const n="".concat("https://vigapi.vigorousit.com","/public").concat(null===e||void 0===e?void 0:e.clientExpencePDFPath),t=document.createElement("a");t.href=n,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,N.jsx)(j.WCW,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})}),(0,N.jsx)("button",{onClick:()=>{g("/admin/clientExpence/edit/".concat((0,u.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,N.jsx)(l.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})}),(0,N.jsx)("button",{onClick:()=>(e=>{let n={_id:e};p().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&w((0,f.Bv)(n)).then(e=>{S()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,N.jsx)(c.tqC,{className:"text-red-600 hover:text-red-500",size:16})})]})})]})):(0,N.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,N.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===D||void 0===D?void 0:D.length)>0&&(0,N.jsx)(x.A,{totalCount:C,pageSize:10,currentPage:A,onChange:e=>{T(e)}})]})})}},65337:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(91686),d=t(70579);const s=function(){return(0,d.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,d.jsx)(a.A,{size:"large"})})}}}]);
//# sourceMappingURL=5710.14e97bc8.chunk.js.map