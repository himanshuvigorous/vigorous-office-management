"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6014],{29882:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(487),d=a(15187),i=a(70579);const n=function(e){let{value:t,onChange:a,picker:n="date",format:s="DD/MM/YYYY",size:o="large",disabledDate:c,disabled:r,defaultValue:u,report:m=!1,showTime:p=!1}=e;return(0,i.jsx)(l.A,{defaultValue:u,showTime:p,size:o,disabled:r,picker:n,format:s,disabledDate:c,value:t,onChange:a,getPopupContainer:()=>document.body,className:" ".concat(m?"inputCalanderClassNameReport":d.ot," "),popupClassName:"!z-[1580]"})}},96014:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var l=a(65043),d=a(39160),i=a(73216),n=a(35475),s=a(83003),o=a(47196),c=a(30064),r=a.n(c),u=a(31174),m=a(23156),p=a(78227),v=a(15187),x=a(31744),h=a(72211),b=a(60184),y=a(4938),j=a(30326),f=a(65512),g=a(96651),N=a(55971),D=a(60446),w=a.n(D),A=a(78973),C=a(83002),k=a(89427),I=a(60397),S=a(29882),T=a(8928),L=a(70579);const P=function(){var e;const t=(0,i.Zp)(),a=(0,s.wA)(),{receiptListData:c,totalreceiptListCount:D,loading:P}=(0,s.d4)(e=>e.receipt),{branchList:_,branchListloading:z}=(0,s.d4)(e=>e.branch),O=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),{officeAddressListData:Y,loading:B}=(0,s.d4)(e=>e.officeAddress),[E,F]=(0,l.useState)(""),[R,H]=(0,n.ok)(),M=parseInt(R.get("page"))||1,V=parseInt(R.get("limit"))||10,q=R.get("startDate")||null,W=R.get("endDate")||null,U=R.get("branchId")||"",X=R.get("layoutId")||"",[G,J]=(0,l.useState)(q?w()(q):null),[Z,K]=(0,l.useState)(W?w()(W):null),[Q,$]=(0,l.useState)(V),[ee,te]=(0,l.useState)(M),[ae,le]=(0,l.useState)(U),[de,ie]=(0,l.useState)(X);(0,l.useEffect)(()=>{const e=new URLSearchParams;ee>1&&e.set("page",ee),10!==Q&&e.set("limit",Q),ae&&e.set("branchId",ae),G&&e.set("startDate",G),Z&&e.set("endDate",Z),de&&e.set("layoutId",de),H(e)},[ee,ae,Q,G,de,Z]),(0,l.useEffect)(()=>{ne()},[ee,ae,Q,G,de,Z,E]);const ne=()=>{const e={currentPage:ee,pageSize:Q,reqData:{directorId:"",companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)?ae:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,receiptLayoutId:de,text:E,sort:!0,status:"",isPagination:!0,clientId:"",groupId:"",startDate:(0,v.Tk)(G),endDate:(0,v.Tk)(Z),paymentmode:""}};a((0,h.PX)(e))};(0,l.useEffect)(()=>{"company"!==(null===O||void 0===O?void 0:O.userType)&&"companyDirector"!==(null===O||void 0===O?void 0:O.userType)||a((0,x.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId}))},[]),(0,l.useEffect)(()=>{se()},[ae]);const se=()=>{a((0,T.XY)({companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:"company"===(null===O||void 0===O?void 0:O.userType)||"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)?ae:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,directorId:"",text:"",sort:!0,status:!0,type:"invoice",isPagination:!1,bankAccountId:"",isGSTEnabled:""}))},{canCreate:oe,canRead:ce,canUpdate:re,canDelete:ue}=(0,y.A)();return(0,L.jsx)(d.A,{onChange:e=>{F(e)},children:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:"",children:(0,L.jsxs)("div",{className:"md:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,L.jsxs)("div",{className:"grid md:grid-cols-3 xl:grid-cols-4 sm:grid-cols-2 grid-cols-1 items-center md:gap-3 gap-1.5",children:[("company"==(null===O||void 0===O?void 0:O.userType)||"companyDirector"==(null===O||void 0===O?void 0:O.userType))&&(0,L.jsx)("div",{children:(0,L.jsxs)(f.A,{value:ae,onChange:e=>{le(e),te(1)},defaultValue:"",disabled:P,className:"".concat(v.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(f.A.Option,{value:"",children:"Select Branch"}),z?(0,L.jsx)(f.A.Option,{disabled:!0,children:(0,L.jsx)(k.A,{})}):null===_||void 0===_?void 0:_.map(e=>(0,L.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,L.jsx)("div",{className:"",children:(0,L.jsxs)(f.A,{value:de,onChange:e=>{ie(e),te(1)},disabled:P,showSearch:!0,filterOption:(e,t)=>{var a;return null===t||void 0===t||null===(a=t.label)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase())},className:"".concat(v.Lp," "),placeholder:"Select Layout",onFocus:()=>{},children:[(0,L.jsx)(f.A.Option,{className:"",value:"",children:"Select Layout"}),B?(0,L.jsx)(f.A.Option,{disabled:!0,children:(0,L.jsx)(k.A,{})}):null===(e=(0,v._o)(Y,"firmName"))||void 0===e?void 0:e.map(e=>(0,L.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.firmName}))]})}),(0,L.jsx)("div",{children:(0,L.jsx)(S.A,{value:G,onChange:e=>{J(e),te(1)},disabled:P,report:!0,size:"middle"})}),(0,L.jsx)("div",{children:(0,L.jsx)(S.A,{value:Z,onChange:e=>{K(e),te(1)},disabled:P,report:!0,size:"middle"})})]}),(0,L.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,L.jsx)("button",{onClick:()=>{J(null),K(null),le(""),ie("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Reset"})}),oe&&(0,L.jsx)(g.A,{placement:"topLeft",title:"Add Receipt",children:(0,L.jsxs)("button",{onClick:()=>{t("/admin/receipt/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white whitespace-nowrap",children:[(0,L.jsx)(m.OiG,{}),(0,L.jsx)("span",{className:"text-[12px]",children:"Add Receipt"})]})})]})]})}),(0,L.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:ce&&(0,L.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,L.jsx)("thead",{className:"",children:(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,L.jsx)("th",{className:"tableHead",children:"Client Name"}),(0,L.jsx)("th",{className:"tableHead text-right",children:"Amount"}),(0,L.jsx)("th",{className:"tableHead",children:"Payment Mode"}),(0,L.jsx)("th",{className:"tableHead",children:"Employee Name / Bank Name"}),(0,L.jsx)("th",{className:"tableHead",children:"Date of Receipts"}),oe&&(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),P?(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,L.jsx)(N.A,{})})}):(0,L.jsx)("tbody",{children:c&&(null===c||void 0===c?void 0:c.length)>0?null===c||void 0===c?void 0:c.map((e,l)=>{var d,i;return(0,L.jsxs)("tr",{className:"text-black ".concat(l%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,L.jsx)("td",{className:"tableData",children:l+1+(ee-1)*Q}),(0,L.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.clientName}),(0,L.jsx)("td",{className:"tableData text-right",children:(0,v.w2)((null===e||void 0===e?void 0:e.grandTotalAmount)||"-")}),(0,L.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.paymentmode)||"-"}),(0,L.jsx)("td",{className:"tableData",children:"cash"===(null===e||void 0===e?void 0:e.paymentmode)?(null===e||void 0===e?void 0:e.employeName)||"-":"".concat((null===e||void 0===e||null===(d=e.bankData)||void 0===d?void 0:d.bankName)||"-","/").concat((null===e||void 0===e||null===(i=e.bankData)||void 0===i?void 0:i.bankholderName)||"-")}),(0,L.jsx)("td",{className:"tableData",children:e.createdAt&&w()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),oe&&(0,L.jsx)("td",{className:"tableData",children:(0,L.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(g.A,{placement:"topLeft",title:"View",children:(0,L.jsx)("button",{onClick:()=>{if(null!==e&&void 0!==e&&e.receiptPDFPath){const t="".concat("https://vigapi.vigorousit.com","/public").concat(null===e||void 0===e?void 0:e.receiptPDFPath),a=document.createElement("a");a.href=t,a.target="_blank",a.rel="noopener noreferrer",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(b.WCW,{className:"hover:text-rose-700 text-rose-600",size:15})})}),(0,L.jsx)(g.A,{placement:"topLeft",title:"Download Invoice",children:ce&&(0,L.jsx)("button",{onClick:()=>t("/admin/viewInvoice?invoiceId=".concat((0,u.w)(null===e||void 0===e?void 0:e._id),"&type=receipt&downloadPdfPath=").concat(null!==e&&void 0!==e&&e.receiptPDFPath?(0,u.w)(null===e||void 0===e?void 0:e.receiptPDFPath):"")),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(b.Ny1,{className:"hover:text-header text-header",size:15})})})]}),(0,L.jsx)(j.A,{menu:{items:[{key:"created-by",label:(0,L.jsxs)("span",{onClick:()=>(0,v.v2)((null===e||void 0===e?void 0:e.createdBy)||"Data not available"),className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,L.jsx)(I.cCX,{className:"mr-2",size:16}),"Created By"]})},ue&&{key:"delete",label:ue?(0,L.jsxs)("span",{onClick:()=>(e=>{let t={_id:e};r().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&a((0,h.ES)(t)).then(e=>{ne()})})})(null===e||void 0===e?void 0:e._id),className:"flex items-center text-red-600 hover:text-red-500",children:[(0,L.jsx)(o.tqC,{className:"mr-2",size:16}),"Delete"]}):(0,L.jsxs)("span",{className:"flex items-center text-gray-500 cursor-not-allowed",children:[(0,L.jsx)(o.tqC,{className:"mr-2",size:16}),"Delete (No Actions)"]})},{key:"view-desc",label:(0,L.jsxs)("span",{onClick:()=>(0,v.v2)((null===e||void 0===e?void 0:e.naration)||"Data not available"),className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,L.jsx)(A.qSe,{className:"mr-2",size:16}),"View Naration"]})}]},trigger:["click"],children:(0,L.jsx)(g.A,{placement:"topLeft",title:"More Actions",children:(0,L.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,L.jsx)(C.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})})]})}):(0,L.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,L.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===c||void 0===c?void 0:c.length)>0&&(0,L.jsx)(p.A,{totalCount:D,pageSize:Q,currentPage:ee,onChange:e=>{te(e)}})]})})}}}]);
//# sourceMappingURL=6014.91ca9990.chunk.js.map