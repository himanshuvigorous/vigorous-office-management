"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6309],{6309:(e,d,l)=>{l.r(d),l.d(d,{default:()=>j});var i=l(89379),a=l(24858),n=l(39160),s=l(83003),o=l(73216),r=l(31174),t=l(65043),c=l(15187),u=(l(42837),l(31744)),v=l(78729),m=l(60245),p=l(65512),h=l(17995),x=l(89427),y=l(70579);const j=()=>{const{loading:e}=(0,s.d4)(e=>e.workType),{register:d,handleSubmit:l,control:j,setValue:N,formState:{errors:b}}=(0,a.mN)(),f=(0,s.wA)(),A=(0,o.Zp)(),{workTypeEnc:g}=(0,o.g)(),I=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),T=(0,r.Yc)(g),{workTypeDetails:S}=(0,s.d4)(e=>e.workType),{companyList:D,companyListLoading:C}=(0,s.d4)(e=>e.company),{branchList:w,branchListloading:O}=(0,s.d4)(e=>e.branch);(0,t.useEffect)(()=>{let e={_id:T};f((0,m.Qb)(e))},[]);const P=(0,a.FH)({control:j,name:"PDCompanyId",defaultValue:""});(0,t.useEffect)(()=>{S&&(N("PDCompanyId",null===S||void 0===S?void 0:S.companyId),N("PDBranchId",null===S||void 0===S?void 0:S.branchId),N("name",null===S||void 0===S?void 0:S.name),N("status",null===S||void 0===S?void 0:S.status))},[S]);return(0,t.useEffect)(()=>{(P||"company"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType))&&f((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===I||void 0===I?void 0:I.userType)?P:"company"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.companyId}))},[P]),(0,t.useEffect)(()=>{"admin"===(null===I||void 0===I?void 0:I.userType)&&f((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,y.jsx)(n.A,{children:(0,y.jsx)("div",{className:"gap-4",children:(0,y.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:l(e=>{const d={_id:T,companyId:"admin"===(null===I||void 0===I?void 0:I.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.companyId,directorId:"companyDirector"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.directorId,branchId:"admin"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType)||"company"===(null===I||void 0===I?void 0:I.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.branchId,name:null===e||void 0===e?void 0:e.name,status:"string"===typeof(null===e||void 0===e?void 0:e.status)?JSON.parse(null===e||void 0===e?void 0:e.status):null===e||void 0===e?void 0:e.status,isDeleted:!1};f((0,m.$z)(d)).then(e=>{e.error||A(-1)})}),children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===I||void 0===I?void 0:I.userType)&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Company Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(a.xI,{control:j,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:d}=e;return(0,y.jsxs)(p.A,(0,i.A)((0,i.A)({},d),{},{defaultValue:"",className:"".concat(c.Hy," "),children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Company"}),C?(0,y.jsx)(p.A.Option,{disabled:!0,children:(0,y.jsx)(x.A,{})}):null===D||void 0===D?void 0:D.map(e=>(0,y.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDCompanyId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDCompanyId.message})]}),("admin"===(null===I||void 0===I?void 0:I.userType)||"company"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType))&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Branch Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(a.xI,{name:"PDBranchId",control:j,rules:{required:"Branch is required"},render:e=>{let{field:d}=e;return(0,y.jsxs)(p.A,(0,i.A)((0,i.A)({},d),{},{className:"".concat(c.Hy," ").concat(b.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Branch"}),O?(0,y.jsx)(p.A.Option,{disabled:!0,children:(0,y.jsx)(x.A,{})}):null===w||void 0===w?void 0:w.map(e=>(0,y.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),b.PDBranchId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.PDBranchId.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Work Type Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,i.A)((0,i.A)({type:"text"},d("name",{required:"Work Type is required"})),{},{className:"".concat(c.Ol," ").concat(b.name?"border-[1px] ":"border-gray-300"),placeholder:"Enter Work Type"})),b.name&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.name.message})]}),(0,y.jsxs)("div",{className:"w-full",children:[(0,y.jsxs)("label",{className:"".concat(c.Q0),children:["Status ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(a.xI,{name:"status",control:j,render:e=>{let{field:d}=e;return(0,y.jsxs)(p.A,(0,i.A)((0,i.A)({},d),{},{className:"".concat(c.Hy," ").concat(b.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,d)=>String(null===d||void 0===d?void 0:d.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(p.A.Option,{value:"",children:"Select Status"}),(0,y.jsx)(p.A.Option,{value:!0,children:"Active"}),(0,y.jsx)(p.A.Option,{value:!1,children:"In Active"})]}))}}),b.status&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:b.status.message})]})]}),(0,y.jsx)("div",{className:"flex justify-end",children:(0,y.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 mt-3 rounded"),children:e?(0,y.jsx)(h.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=6309.aef3d020.chunk.js.map