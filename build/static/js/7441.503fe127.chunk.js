"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7441],{57441:(e,t,l)=>{l.r(t),l.d(t,{default:()=>P});var a=l(89379),n=l(24858),o=l(83003),d=l(15187),i=l(65043),r=l(31744),s=l(39160),c=l(97326),u=l(65512),m=l(96651),p=(l(86178),l(60446)),v=l.n(p),h=l(78227),x=l(12106),y=l(42837),f=l(94084),N=l(69223),w=l(55971),j=l(50822),b=(l(57916),l(6720)),g=l(37762),D=l(64857),A=l(33007),I=l(97230),S=l(89427),C=l(70579);const P=function(){const{control:e,formState:{errors:t},setValue:l}=(0,n.mN)(),p=(0,o.wA)(),{employePenaltyReportList:P,employePenaltyReportFunc_loading:T,totalpenaltyReportCount:F}=(0,o.d4)(e=>e.reports),{penaltyListData:R,loading:Y}=(0,o.d4)(e=>e.penalty),{employeList:_}=(0,o.d4)(e=>e.employe),[k,E]=(0,i.useState)(""),z=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),[B,O]=(0,i.useState)(1),[M,L]=(0,i.useState)(""),{branchList:V}=(0,o.d4)(e=>e.branch),H=(0,n.FH)({control:e,name:"PDCompanyId",defaultValue:""}),K=(0,n.FH)({control:e,name:"PDBranchId",defaultValue:""}),U=(0,n.FH)({control:e,name:"status",defaultValue:""}),W=(0,n.FH)({control:e,name:"penaltyId",defaultValue:""}),q=(0,n.FH)({control:e,name:"employeeId",defaultValue:""}),J=(0,n.FH)({control:e,name:"startDate",defaultValue:v()().subtract(1,"month")}),G=(0,n.FH)({control:e,name:"endDate",defaultValue:v()()}),[Q,X]=(0,i.useState)(10);(0,i.useEffect)(()=>{"company"!==(null===z||void 0===z?void 0:z.userType)&&"companyDirector"!==(null===z||void 0===z?void 0:z.userType)||p((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===z||void 0===z?void 0:z.userType)?H:"company"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.companyId})),p((0,A.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.companyId})),l("startDate",v()().subtract(1,"month")),l("endDate",v()())},[]),(0,i.useEffect)(()=>{ee()},[B,M,Q]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{L(k)},500);return()=>{clearTimeout(e)}},[k]);const Z=function(){return{currentPage:B,pageSize:Q,reqPayload:{text:M,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===z||void 0===z?void 0:z.userType)?H:"company"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.companyId,branchId:"company"===(null===z||void 0===z?void 0:z.userType)||"admin"===(null===z||void 0===z?void 0:z.userType)||"companyDirector"===(null===z||void 0===z?void 0:z.userType)?K:"companyBranch"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.branchId,employeId:q,employeIds:[],penaltyId:W,penaltyIds:[],status:U?[U]:[],startDate:J?v()(J).format("YYYY-MM-DD"):"",endDate:G?v()(G).format("YYYY-MM-DD"):""}}},$=()=>{p((0,y.qV)({companyId:"admin"===(null===z||void 0===z?void 0:z.userType)?H:"company"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.companyId,branchId:["admin","company","companyDirector"].includes(null===z||void 0===z?void 0:z.userType)?K:"companyBranch"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.branchId,directorId:"",text:"",sort:!0,status:!0,isPagination:!1,isBranch:!1,isDirector:!1}))},ee=()=>{p((0,x.JN)(Z(!0)))},te=async()=>{ee()},le=[{key:"1",label:(0,C.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,C.jsxs)("div",{className:"bg-[#ececec] space-y-1 2xl:flex justify-between items-center",children:[(0,C.jsxs)("div",{className:"sm:flex  grid grid-cols-1 gap-1.5 sm:flex-wrap text-[14px]",children:[("admin"===(null===z||void 0===z?void 0:z.userType)||"company"===(null===z||void 0===z?void 0:z.userType)||"companyDirector"===(null===z||void 0===z?void 0:z.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(n.xI,{name:"PDBranchId",control:e,render:e=>{let{field:t}=e;return(0,C.jsxs)(u.A,(0,a.A)((0,a.A)({},t),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(u.A.Option,{value:"",children:"Select Branch"}),null===V||void 0===V?void 0:V.map(e=>(0,C.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,C.jsx)("div",{className:"",children:(0,C.jsx)(n.xI,{name:"employeeId",control:e,render:e=>{let{field:t}=e;return(0,C.jsx)(u.A,{allowClear:!0,showSearch:!0,filterOption:(e,t)=>{var l;return null===t||void 0===t||null===(l=t.label)||void 0===l?void 0:l.toLowerCase().includes(e.toLowerCase())},className:"inputAntdMultiSelectClassNameFilterReport ",placeholder:"Select Employee",onFocus:$,options:null===_||void 0===_?void 0:_.map(e=>({label:e.fullName,value:e._id})),value:t.value||[],onChange:e=>t.onChange(e)})}})}),(0,C.jsx)("div",{children:(0,C.jsx)(n.xI,{name:"penaltyId",control:e,render:e=>{var t;let{field:l}=e;return(0,C.jsxs)(u.A,(0,a.A)((0,a.A)({},l),{},{className:"inputAntdMultiSelectClassNameFilterReport ",onFocus:()=>(()=>{const e={currentPage:"",pageSize:"",reqData:{directorId:"",companyId:"admin"===(null===z||void 0===z?void 0:z.userType)?H:"company"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.companyId,branchId:"company"===(null===z||void 0===z?void 0:z.userType)||"admin"===(null===z||void 0===z?void 0:z.userType)||"companyDirector"===(null===z||void 0===z?void 0:z.userType)?K:"companyBranch"===(null===z||void 0===z?void 0:z.userType)?null===z||void 0===z?void 0:z._id:null===z||void 0===z?void 0:z.branchId,text:"",sort:!0,status:"",isPagination:!1}};p((0,I.ON)(e))})(),placeholder:"Select penalty Name ",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(u.A.Option,{value:"",children:"Select Penalty Name "}),Y?(0,C.jsx)(u.A.Option,{disabled:!0,children:(0,C.jsx)(S.A,{})}):null===(t=(0,d._o)(R))||void 0===t?void 0:t.map((e,t)=>(0,C.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},t))]}))}})}),(0,C.jsx)("div",{children:(0,C.jsx)(n.xI,{name:"status",control:e,rules:{},render:e=>{let{field:t}=e;return(0,C.jsx)(u.A,(0,a.A)((0,a.A)({},t),{},{allowClear:!0,className:"inputAntdMultiSelectClassNameFilterReport",placeholder:"Select Status",options:[{label:"Select Status",value:""},{label:"Pending",value:"Pending"},{value:"Resolved",label:"Resolved"},{value:"WaivedOff",label:"WaivedOff"}],value:t.value||[],onChange:e=>t.onChange(e)}))}})}),(0,C.jsx)("div",{children:(0,C.jsx)(n.xI,{name:"startDate",control:e,render:e=>{let{field:l}=e;return(0,C.jsx)(f.A,{report:!0,size:"middle",defaultValue:v()().subtract(1,"month"),field:l,errors:t})}})}),(0,C.jsx)("div",{children:(0,C.jsx)(n.xI,{name:"endDate",control:e,render:e=>{let{field:l}=e;return(0,C.jsx)(f.A,{report:!0,size:"middle",defaultValue:v()(),field:l,errors:t})}})})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{l("PDBranchId",""),l("PdCompanyId",""),l("penaltyId",""),l("status",""),l("employeeId",""),l("startDate",v()().subtract(1,"month")),l("endDate",v()()),te()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,C.jsx)("button",{onClick:()=>{te()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,C.jsx)(s.A,{onChange:e=>{E(e)},children:(0,C.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(c.A,{className:"custom-collapse",items:le,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,C.jsx)(b.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,C.jsxs)("div",{className:"space-y-1.5 sm:flex justify-between items-center ",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 sm:pt-0 pt-1",children:[(0,C.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,C.jsx)(u.A,{id:"pageSize",value:Q,onChange:e=>{X(Number(e)),O(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:d.qc.map(e=>(0,C.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{(async()=>{var e,t;const l=new g.uE({orientation:"landscape",unit:"pt"});l.setFontSize(16);const a=await(null===j.K||void 0===j.K?void 0:j.K.employePenaltyReportFunc(Z(!1)));if(!P&&!a)return;const n=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var l,a;return[t+1,null!==e&&void 0!==e&&e.issueDate?v()(e.issueDate).format("DD-MM-YYYY hh:mm a"):"-",(null===e||void 0===e||null===(l=e.employeData)||void 0===l?void 0:l.departmentName)||"NA",(null===e||void 0===e||null===(a=e.employeData)||void 0===a?void 0:a.fullName)||"-",(null===e||void 0===e?void 0:e.penaltyName)||"-",(null===e||void 0===e?void 0:e.amount)||"-"]});(0,D.Ay)(l,{startY:40,head:[["S.No.","date","Department Name","Employee Name","Penalty Name","Penalty Amount"]],body:n,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),l.save("Employee_Penalty_Report.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,C.jsx)("button",{onClick:()=>{(async()=>{var e,t;const l=new N.Workbook,a=l.addWorksheet("Employee Attendance");a.columns=[{header:"S.No.",key:"sno",width:10},{header:"Date",key:"date",width:25},{header:"Department Name",key:"departmentName",width:25},{header:"Employee Name",key:"employeeName",width:25},{header:"Penalty Name",key:"penaltyName",width:25},{header:"Penalty Amount",key:"penaltyAmount",width:15}],a.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const n=await(null===j.K||void 0===j.K?void 0:j.K.employePenaltyReportFunc(Z(!1)));if(!P&&!n)return;const o=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var l,a;return{sno:t+1,date:null!==e&&void 0!==e&&e.issueDate?v()(e.issueDate).format("DD-MM-YYYY hh:mm a"):"-",departmentName:(null===e||void 0===e||null===(l=e.employeData)||void 0===l?void 0:l.departmentName)||"NA",employeeName:(null===e||void 0===e||null===(a=e.employeData)||void 0===a?void 0:a.fullName)||"-",penaltyName:(null===e||void 0===e?void 0:e.penaltyName)||"-",penaltyAmount:(null===e||void 0===e?void 0:e.amount)||"-"}});null===o||void 0===o||o.forEach(e=>{a.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),a.autoFilter={from:"A1",to:"I1"},l.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download="Employee_Penalty_Report.xlsx",l.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,C.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto table-fixed",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[60px]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[180px]",children:"Date"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[200px]",children:"Department Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[200px]",children:"Employee Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[200px]",children:"Penalty Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-left w-[120px]",children:"Penalty Amount"})]})}),T?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:(0,C.jsx)(w.A,{})})}):(0,C.jsx)("tbody",{children:P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,t)=>{var l,a,n,o;return(0,C.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:t+1+(B-1)*Q}),(0,C.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:(0,C.jsx)("div",{className:"max-w-[180px] truncate",children:null!==e&&void 0!==e&&e.issueDate?v()(e.issueDate).format("DD-MM-YYYY hh:mm a"):"-"})}),(0,C.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:(0,C.jsx)(m.A,{title:(null===(l=e.employeData)||void 0===l?void 0:l.departmentName)||"NA",children:(0,C.jsx)("div",{className:"max-w-[200px] truncate",children:(null===(a=e.employeData)||void 0===a?void 0:a.departmentName)||"NA"})})}),(0,C.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:(0,C.jsx)(m.A,{title:(null===(n=e.employeData)||void 0===n?void 0:n.fullName)||"-",children:(0,C.jsx)("div",{className:"max-w-[200px] truncate",children:(null===(o=e.employeData)||void 0===o?void 0:o.fullName)||"-"})})}),(0,C.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:(0,C.jsx)(m.A,{title:(null===e||void 0===e?void 0:e.penaltyName)||"-",children:(0,C.jsx)("div",{className:"max-w-[200px] truncate",children:(null===e||void 0===e?void 0:e.penaltyName)||"-"})})}),(0,C.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:(0,C.jsx)("div",{className:"max-w-[120px] truncate",children:Number(e.amount).toFixed(2)||"-"})})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,C.jsx)(h.A,{totalCount:F,pageSize:Q,currentPage:B,onChange:e=>{O(e)}})]})})}}}]);
//# sourceMappingURL=7441.503fe127.chunk.js.map