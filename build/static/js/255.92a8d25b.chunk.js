"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[255],{40255:(e,d,i)=>{i.r(d),i.d(d,{default:()=>w});var l=i(89379),n=i(65043),o=i(24858),a=i(83003),t=i(73216),s=i(15187),r=i(32513),c=i(85157),u=i(39160),v=i(31174),A=i(99974),p=i(67353),f=i(89427),h=i(70579);const w=function(){const{handleSubmit:e,control:d,formState:{errors:i}}=(0,o.mN)(),w=(0,a.wA)(),m=(0,t.Zp)(),[x,g]=(0,n.useState)(!1),{planManagerIdEnc:_}=(0,t.g)(),b=(0,v.Yc)(_),[k,j]=(0,n.useState)([]),[y,I]=(0,n.useState)([]),{sidebarListData:S}=(0,a.d4)(e=>e.dynamicSidebar),{sidebarViewData:E}=(0,a.d4)(e=>e.dynamicSidebar),{planSidbarpermissionDetailsData:C,loading:N}=(0,a.d4)(e=>e.plan);(0,n.useEffect)(()=>{w((0,A.kM)({isPagination:!1})),w((0,p.ok)({planId:b}))},[]),(0,n.useEffect)(()=>{I((0,s.tZ)(E))},[E]),(0,n.useEffect)(()=>{if(S&&C){const e=C,d=null===S||void 0===S?void 0:S.map(d=>{const i=null===e||void 0===e?void 0:e.find(e=>(null===e||void 0===e?void 0:e.pageId)===(null===d||void 0===d?void 0:d._id));return(0,l.A)((0,l.A)({},d),{},{isAllowed:(null===i||void 0===i?void 0:i.isAllowed)||!1})});if(j(d),d){const e=d.every(e=>e.isAllowed);g(e)}}else if(S){const e=null===S||void 0===S?void 0:S.map(e=>(0,l.A)((0,l.A)({},e),{},{isAllowed:!1}));j(e)}},[S,C]);const D=e=>{var d;return null===k||void 0===k||null===(d=k.find(d=>d._id===e))||void 0===d?void 0:d.isAllowed},P=[{title:"Title",dataIndex:"title",width:300,key:"_id",render:(e,d)=>(0,h.jsx)("div",{className:"text-nowrap",children:e})},{title:(0,h.jsx)("div",{children:(0,h.jsx)(r.A,{checked:x,onChange:e=>{const d=e.target.checked;g(d);const i=null===k||void 0===k?void 0:k.map(e=>(0,l.A)((0,l.A)({},e),{},{isAllowed:d}));j(i)}})}),key:"_id",width:100,render:(e,d)=>(0,h.jsx)("div",{children:(0,h.jsx)(r.A,{checked:D(d._id),onChange:e=>((e,d)=>{const i=e.target.checked,n=null===k||void 0===k?void 0:k.map(e=>e._id===d?(0,l.A)((0,l.A)({},e),{},{isAllowed:i}):e);if(!i){const e=d=>{n.forEach(i=>{i.parentPageId===d&&(i.isAllowed=!1,e(i._id))})};e(d)}if(i){var o;let e=d,i=null===(o=n.find(d=>d._id===e))||void 0===o?void 0:o.parentPageId;for(;i;){const e=n.findIndex(e=>e._id===i);-1!==e?(n[e].isAllowed=!0,i=n[e].parentPageId):i=null}}j(n);const a=n.every(e=>e.isAllowed);g(a)})(e,d._id)})})}];return(0,h.jsx)(u.A,{children:(0,h.jsxs)("div",{className:"",children:[(0,h.jsx)(c.A,{columns:P,pagination:!1,dataSource:y,scroll:{x:!0},rowKey:"_id"}),(0,h.jsx)("div",{className:"flex justify-end my-2 mx-2",children:(0,h.jsx)("button",{type:"button",disabled:N,onClick:e(e=>{const d=null===k||void 0===k?void 0:k.map(e=>null!==e&&void 0!==e&&e.isAllowed?{pageId:null===e||void 0===e?void 0:e._id,isAllowed:null===e||void 0===e?void 0:e.isAllowed}:null).filter(Boolean),i={planId:b,pageArr:d};w((0,p.E3)(i)).then(e=>{e.error||m(-1)})}),className:"".concat(N?"bg-gray-400":"bg-header"," text-white py-1.5 px-3 text-nowrap text-sm rounded "),children:N?(0,h.jsx)(f.A,{}):"Save"})})]})})}}}]);
//# sourceMappingURL=255.92a8d25b.chunk.js.map