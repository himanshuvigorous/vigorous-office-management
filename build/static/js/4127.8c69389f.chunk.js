"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4127],{34127:(e,n,o)=>{o.r(n),o.d(n,{default:()=>S});var l=o(89379),i=o(24858),a=o(83003),d=o(15187),t=o(65043),s=o(31744),r=o(39160),c=o(97326),u=o(65512),m=(o(86178),o(60446)),p=o.n(m),v=o(78227),h=(o(12106),o(42837),o(94084)),x=o(69223),y=o(55971),f=o(6720),N=o(37762),w=o(64857),g=o(33007),j=(o(97230),o(89427)),b=o(13198),A=o(66122),C=o(16210),D=o(70579);const S=function(){const{control:e,formState:{errors:n},setValue:o}=(0,i.mN)(),m=(0,a.wA)(),{employeeAttendanceSummaryReportList:S,employeeAttendanceSummaryReport_loading:I,employeeAttendanceSummaryReportCount:T}=(0,a.d4)(e=>e.report2),{penaltyListData:k,loading:H}=(0,a.d4)(e=>e.penalty),{employeList:F}=(0,a.d4)(e=>e.employe),[_,R]=(0,t.useState)(""),O=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),[P,E]=(0,t.useState)(1),[B,U]=(0,t.useState)(""),{branchList:Y}=(0,a.d4)(e=>e.branch),L=(0,i.FH)({control:e,name:"PDCompanyId",defaultValue:""}),z=(0,i.FH)({control:e,name:"PDBranchId",defaultValue:""}),V=((0,i.FH)({control:e,name:"employeeId",defaultValue:""}),(0,i.FH)({control:e,name:"startDate",defaultValue:null})),M=(0,i.FH)({control:e,name:"endDate",defaultValue:null}),W=(0,i.FH)({control:e,name:"PdDesignationId",defaultValue:null}),q=(0,i.FH)({control:e,name:"departmentId",defaultValue:""}),K=(0,i.FH)({control:e,name:"isResigned",defaultValue:""}),J=(0,i.FH)({control:e,name:"isTerminated",defaultValue:""}),[G,Q]=(0,t.useState)(10),{designationList:X,loading:Z}=(0,a.d4)(e=>e.designation),{departmentListData:$,loading:ee}=(0,a.d4)(e=>e.department);(0,t.useEffect)(()=>{"company"!==(null===O||void 0===O?void 0:O.userType)&&"companyDirector"!==(null===O||void 0===O?void 0:O.userType)||m((0,s.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?L:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId})),m((0,g.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId})),o("startDate",""),o("endDate","")},[]),(0,t.useEffect)(()=>{oe()},[P,B,G]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{U(_)},500);return()=>{clearTimeout(e)}},[_]);const ne=function(){return{currentPage:P,pageSize:G,reqPayload:{text:B,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?L:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:"company"===(null===O||void 0===O?void 0:O.userType)||"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)?z:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,employeIds:[],departmentId:q,departmentIds:[],designationId:W,designationIds:[],roleKey:"",isTerminated:"true"==J||"false"!=J&&"",isResigned:"true"==K||"false"!=K&&"",startDate:(0,d.Tk)(V),endDate:(0,d.Tk)(M)}}},oe=()=>{m((0,A._5)(ne(!0)))},le=async()=>{oe()},ie=[{key:"1",label:(0,D.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,D.jsxs)("div",{className:"bg-[#ececec] space-y-1",children:[(0,D.jsxs)("div",{className:"sm:flex grid grid-cols-1 gap-1.5 sm:flex-wrap text-[14px]",children:[("admin"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(i.xI,{name:"PDBranchId",control:e,render:e=>{let{field:n}=e;return(0,D.jsxs)(u.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(u.A.Option,{value:"",children:"Select Branch"}),null===Y||void 0===Y?void 0:Y.map(e=>(0,D.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),n.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:n.PDBranchId.message})]}),(0,D.jsx)("div",{children:(0,D.jsx)(i.xI,{name:"departmentId",control:e,render:e=>{var n;let{field:o}=e;return(0,D.jsxs)(u.A,(0,l.A)((0,l.A)({},o),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{m((0,g.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?L:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:["admin","company","companyDirector"].includes(null===O||void 0===O?void 0:O.userType)?z:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId}))},onChange:e=>{o.onChange(e)},placeholder:"Select Department",children:[(0,D.jsx)(u.A.Option,{value:"",children:"Select Department"}),ee?(0,D.jsx)(u.A.Option,{disabled:!0,children:(0,D.jsx)(j.A,{})}):null===(n=(0,d._o)($))||void 0===n?void 0:n.map(e=>(0,D.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,D.jsx)("div",{className:"",children:(0,D.jsx)(i.xI,{name:"PdDesignationId",control:e,render:e=>{var n;let{field:o}=e;return(0,D.jsxs)(u.A,(0,l.A)((0,l.A)({},o),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,placeholder:"Select Designation",onFocus:()=>{m((0,C.EF)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?L:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,branchId:["admin","company","companyDirector"].includes(null===O||void 0===O?void 0:O.userType)?z:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId}))},onChange:e=>o.onChange(e),filterOption:(e,n)=>{var o;return null===(o=String(null===n||void 0===n?void 0:n.children))||void 0===o?void 0:o.toLowerCase().includes(e.toLowerCase())},children:[(0,D.jsx)(u.A.Option,{value:"",children:"Select Designation"}),Z?(0,D.jsx)(u.A.Option,{disabled:!0,children:(0,D.jsx)(j.A,{})}):null===(n=(0,d._o)(X))||void 0===n?void 0:n.map(e=>(0,D.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,D.jsx)("div",{children:(0,D.jsx)(i.xI,{name:"startDate",control:e,render:e=>{let{field:o}=e;return(0,D.jsx)(h.A,{report:!0,errors:n,field:(0,l.A)((0,l.A)({},o),{},{value:o.value,onChange:e=>{const n=e?p()(e).startOf("month"):null;o.onChange(n)}})})}})}),(0,D.jsx)("div",{children:(0,D.jsx)(i.xI,{name:"endDate",control:e,render:e=>{let{field:o}=e;return(0,D.jsx)(h.A,{field:(0,l.A)((0,l.A)({},o),{},{value:o.value,onChange:e=>{const n=e?p()(e).endOf("month"):null;o.onChange(n)}}),report:!0,errors:n})}})})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{o("PDBranchId",""),o("PdCompanyId",""),o("departmentId",""),o("PdDesignationId",""),o("status",""),o("employeeId",""),o("daterange",""),o("shift",""),o("workType",""),o("startDate",""),o("endDate",""),o("issueDate",p()()),le()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,D.jsx)("button",{onClick:()=>{le()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,D.jsx)(r.A,{onChange:e=>{R(e)},children:(0,D.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(c.A,{className:"custom-collapse",items:ie,defaultActiveKey:[1],expandIcon:e=>{let{isActive:n}=e;return(0,D.jsx)(f.WnU,{size:20,style:{color:"white",transform:n?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,D.jsxs)("div",{className:"space-y-1.5 sm:flex justify-between items-center ",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 sm:pt-0 pt-1",children:[(0,D.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,D.jsx)(u.A,{id:"pageSize",value:G,onChange:e=>{Q(Number(e)),E(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:d.qc.map(e=>(0,D.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{(async()=>{var e,n;const o=new N.uE({orientation:"landscape",unit:"pt"});o.setFontSize(16);const l=await(null===b.U||void 0===b.U?void 0:b.U.employeeAttendanceSummaryReportFunc(ne(!1)));if(!S&&!l)return;const i=null===l||void 0===l||null===(e=l.data)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.map((e,n)=>{var o,l,i,a,d;return[n+1,(null===e||void 0===e?void 0:e.userName)||"N/A",(null===e||void 0===e?void 0:e.fullName)||"N/A",(null===e||void 0===e?void 0:e.email)||"N/A",(null===e||void 0===e||null===(o=e.mobile)||void 0===o?void 0:o.code)+(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.number)||"N/A",(null===e||void 0===e||null===(i=e.departmentData)||void 0===i?void 0:i.name)||"N/A",(null===e||void 0===e||null===(a=e.designationData)||void 0===a?void 0:a.name)||"N/A",(null===e||void 0===e||null===(d=e.designationData)||void 0===d?void 0:d.name)||"N/A",(null===e||void 0===e?void 0:e.holidayCount)||0,(null===e||void 0===e?void 0:e.offCount)||0,(null===e||void 0===e?void 0:e.presentCount)||0,(null===e||void 0===e?void 0:e.firstHalfCount)||0,(null===e||void 0===e?void 0:e.secondHalfCount)||0,null!==e&&void 0!==e&&e.isHR?"Yes":"NO",null!==e&&void 0!==e&&e.isTl?"Yes":"NO",null!==e&&void 0!==e&&e.isResigned?"Yes":"NO",null!==e&&void 0!==e&&e.isTerminated?"Yes":"NO",p()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY"),(null===e||void 0===e?void 0:e.createdBy)||"N/A",null===e||void 0===e?void 0:e.status]});(0,w.Ay)(o,{startY:40,head:[["S.No.","Employee UserName","Employee Name","Email","Mobile","Department Name","Designation Name","Holiday","Off","Present","First Half","Second Half","isHr","isTl","CreatedAt","CreatedBy","Status"]],body:i,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),o.save("Employee_Attendance_Summary_Report.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,D.jsx)("button",{onClick:()=>{(async()=>{var e,n;const o=new x.Workbook,l=o.addWorksheet("Employee_Attendance_Summary_Report");l.columns=[{header:"S.No",key:"sno",width:10},{header:"Employee UserName",key:"empUserName",width:30},{header:"Employee Name",key:"empName",width:30},{header:"Email",key:"email",width:20},{header:"Mobile",key:"mobile",width:20},{header:"Department Name",key:"deptName",width:20},{header:"Designation Name",key:"desName",width:20},{header:"Holiday",key:"holidayCount",width:15},{header:"OFF",key:"offCount",width:15},{header:"Present",key:"presentCount",width:15},{header:"First Half",key:"FirstHalfCount",width:15},{header:"Second Half",key:"SecondHalfCount",width:15},{header:"isHr",key:"isHr",width:15},{header:"isTL",key:"isTl",width:15},{header:"isTerminated",key:"isTerminated",width:15},{header:"isResigned",key:"isResigned",width:15},{header:"Created At",key:"createdAt",width:15},{header:"Created By",key:"createdBy",width:15}],l.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const i=await(null===b.U||void 0===b.U?void 0:b.U.employeeAttendanceSummaryReportFunc(ne(!1)));if(!S&&!i)return;const a=null===i||void 0===i||null===(e=i.data)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.map((e,n)=>{var o,l,i,a,d;return{sno:n+1,empUserName:(null===e||void 0===e?void 0:e.userName)||"N/A",empName:(null===e||void 0===e?void 0:e.fullName)||"N/A",email:(null===e||void 0===e?void 0:e.email)||"N/A",mobile:(null===e||void 0===e||null===(o=e.mobile)||void 0===o?void 0:o.code)+(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.number)||"N/A",deptName:(null===e||void 0===e||null===(i=e.departmentData)||void 0===i?void 0:i.name)||"N/A",desName:(null===e||void 0===e||null===(a=e.designationData)||void 0===a?void 0:a.name)||"N/A",desName:(null===e||void 0===e||null===(d=e.designationData)||void 0===d?void 0:d.name)||"N/A",holidayCount:(null===e||void 0===e?void 0:e.holidayCount)||0,offCount:(null===e||void 0===e?void 0:e.offCount)||0,presentCount:(null===e||void 0===e?void 0:e.presentCount)||0,FirstHalfCount:(null===e||void 0===e?void 0:e.firstHalfCount)||0,SecondHalfCount:(null===e||void 0===e?void 0:e.secondHalfCount)||0,isHr:null!==e&&void 0!==e&&e.isHR?"Yes":"NO",isTl:null!==e&&void 0!==e&&e.isTl?"Yes":"NO",isResigned:null!==e&&void 0!==e&&e.isResigned?"Yes":"NO",isTerminated:null!==e&&void 0!==e&&e.isTerminated?"Yes":"NO",createdAt:p()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY"),createdBy:(null===e||void 0===e?void 0:e.createdBy)||"N/A",status:null===e||void 0===e?void 0:e.status}});null===a||void 0===a||a.forEach(e=>{l.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),l.autoFilter={from:"A1",to:"I1"},o.xlsx.writeBuffer().then(e=>{const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download="Employee_Attendance_Summary_Report.xlsx",o.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,D.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[10%]",children:(0,D.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,D.jsx)("span",{children:"Profile"})})}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Employee userName"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Employee Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Email"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mobile"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Department Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Designation Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Holiday"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"off"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Present"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"FirstHalf"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"SecondHalf"})]})}),I?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,D.jsx)(y.A,{})})}):(0,D.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.length)>0?null===S||void 0===S?void 0:S.map((e,n)=>{var o,l,i,a;return(0,D.jsxs)("tr",{className:"border-b-[1px] ".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:n+1+(P-1)*G}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:e.profileImage?(0,D.jsx)("img",{alt:"",src:"".concat("https://vigapi.vigorousit.com","/public/").concat(e.profileImage),className:"rounded-full min-w-10 min-h-10 w-10 h-10 ring-1 ring-amber-300"}):(0,D.jsx)("img",{alt:"",src:"/images/avatar.jpg",className:"rounded-full min-w-10 min-h-10 w-10 h-10 ring-1 ring-amber-300"})}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.userName}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.email}),(0,D.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[null===e||void 0===e||null===(o=e.mobile)||void 0===o?void 0:o.code," "," ",null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.number]}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e||null===(i=e.departmentData)||void 0===i?void 0:i.name)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e||null===(a=e.designationData)||void 0===a?void 0:a.name)||"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.holidayCount}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.offCount}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.presentCount}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.firstHalfCount}),(0,D.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.secondHalfCount})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,D.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,D.jsx)(v.A,{totalCount:T,pageSize:G,currentPage:P,onChange:e=>{E(e)}})]})})}}}]);
//# sourceMappingURL=4127.8c69389f.chunk.js.map