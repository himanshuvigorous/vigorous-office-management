"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[2283],{32283:(e,l,d)=>{d.r(l),d.d(l,{default:()=>g});var a=d(89379),i=d(65043),o=d(39160),s=d(83003),n=d(73216),r=d(24858),c=d(31174),t=d(735),m=d(15187),u=(d(36105),d(65512)),v=d(78729),p=d(31744),x=(d(14118),d(12745)),h=d(56659),y=d(17995),N=d(42837),j=d(66015),b=d(70579);const g=function(){const{register:e,handleSubmit:l,setValue:d,control:g,formState:{errors:f}}=(0,r.mN)(),{userCompanyId:I,userDirectorId:A,userBranchId:D,userType:P}=(0,t.A)(),T=(0,s.wA)(),_=(0,n.Zp)(),{proposalIdEnc:C}=(0,n.g)(),q=(0,c.Yc)(C),{employeList:E}=(0,s.d4)(e=>e.employe),L=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),{proposalDetails:w}=(0,s.d4)(e=>e.proposal),{companyList:O,companyListLoading:k}=(0,s.d4)(e=>e.company),{countryListData:S}=(0,s.d4)(e=>e.country),{branchList:B,branchListloading:Q}=(0,s.d4)(e=>e.branch),H=(0,r.FH)({control:g,name:"PDCompanyId",defaultValue:I}),V=((0,r.FH)({control:g,name:"directorId",defaultValue:A}),(0,r.FH)({control:g,name:"PDBranchId",defaultValue:D}));return(0,i.useEffect)(()=>{(H||"company"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType))&&T((0,p.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?H:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId}))},[H]),(0,i.useEffect)(()=>{"admin"===(null===L||void 0===L?void 0:L.userType)&&T((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,i.useEffect)(()=>{(async()=>{await T((0,x.Dz)({_id:q}))})()},[q]),(0,i.useEffect)(()=>{if(w){var e,l;d("PDCompanyId",null===w||void 0===w?void 0:w.companyId),d("PDBranchId",null===w||void 0===w?void 0:w.branchId),d("name",null===w||void 0===w?void 0:w.name),d("email",null===w||void 0===w?void 0:w.email),d("PDCode",null===w||void 0===w||null===(e=w.mobile)||void 0===e?void 0:e.code),d("PDNumber",null===w||void 0===w||null===(l=w.mobile)||void 0===l?void 0:l.number);const a={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?H:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,branchId:"company"===(null===L||void 0===L?void 0:L.userType)||"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)?V:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId};T((0,N.qV)(a)).then(e=>{var l,a,i,o,s,n,r,c,t,m,u;null!==e&&void 0!==e&&e.error||d("employee",null!==e&&void 0!==e&&null!==(l=e.payload)&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&null!==(i=a.docs)&&void 0!==i&&i.find(e=>e._id===(null===w||void 0===w?void 0:w.employeId))?{label:null===e||void 0===e||null===(o=e.payload)||void 0===o||null===(s=o.data)||void 0===s||null===(n=s.docs)||void 0===n||null===(r=n.find(e=>e._id===(null===w||void 0===w?void 0:w.employeId)))||void 0===r?void 0:r.fullName,value:null===e||void 0===e||null===(c=e.payload)||void 0===c||null===(t=c.data)||void 0===t||null===(m=t.docs)||void 0===m||null===(u=m.find(e=>e._id===(null===w||void 0===w?void 0:w.employeId)))||void 0===u?void 0:u._id}:null)}),d("remark",null===w||void 0===w?void 0:w.description),d("amount",null===w||void 0===w?void 0:w.fee)}},[w]),(0,b.jsx)(o.A,{children:(0,b.jsx)("div",{className:"gap-4",children:(0,b.jsxs)("form",{autoComplete:"off",className:"mt-5",onSubmit:l(e=>{var l;const d={_id:q,companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?H:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,directorId:"",branchId:"company"===(null===L||void 0===L?void 0:L.userType)||"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)?V:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId,name:null===e||void 0===e?void 0:e.name,email:null===e||void 0===e?void 0:e.email,mobile:{code:null===e||void 0===e?void 0:e.PDCode,number:null===e||void 0===e?void 0:e.PDNumber},employeId:null===e||void 0===e||null===(l=e.employee)||void 0===l?void 0:l.value,description:null===e||void 0===e?void 0:e.remark,fee:null===e||void 0===e?void 0:e.amount};T((0,x.C3)(d)).then(e=>{e.error||_(-1)})}),children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===L||void 0===L?void 0:L.userType)&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Company ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(r.xI,{control:g,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,b.jsxs)(u.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(m.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(u.A.Option,{value:"",children:"Select Company"}),k?(0,b.jsx)(u.A.Option,{disabled:!0,children:(0,b.jsx)(y.A,{})}):null===O||void 0===O?void 0:O.map(e=>(0,b.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),f.PDCompanyId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.PDCompanyId.message})]}),("admin"===(null===L||void 0===L?void 0:L.userType)||"company"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType))&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Branch ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(r.xI,{control:g,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var l;let{field:d}=e;return(0,b.jsxs)(u.A,(0,a.A)((0,a.A)({},d),{},{defaultValue:"",className:"".concat(m.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,b.jsx)(u.A.Option,{value:"",children:"Select Branch"}),Q?(0,b.jsx)(u.A.Option,{disabled:!0,children:(0,b.jsx)(y.A,{})}):null===(l=(0,m._o)(B,"fullName"))||void 0===l?void 0:l.map(e=>(0,b.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),f.PDBranchId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.PDBranchId.message})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:my-2",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Name ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("name",{required:"Name is required"})),{},{className:"placeholder: ".concat(m.Ol," ").concat(f.name?"border-[1px] ":"border-gray-300"),placeholder:"Enter Name"})),f.name&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.name.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Handling Employee ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(r.xI,{name:"employee",control:g,rules:{required:"Employee is required"},render:e=>{var l;let{field:d}=e;return(0,b.jsx)(j.Ay,(0,a.A)((0,a.A)({},d),{},{options:null===(l=(0,m._o)(E,"fullName"))||void 0===l?void 0:l.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(m.Ph," ").concat(f.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),f.employee&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.employee.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Email ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("email",{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:" ".concat(m.Ol," ").concat(f.email?"border-[1px] ":"border-gray-300"),placeholder:"Enter Email"})),f.email&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.email.message})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"w-[150px]",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["code",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)(r.xI,{control:g,name:"PDCode",rules:{required:"code is required"},render:e=>{let{field:l}=e;return(0,b.jsx)(h.A,{field:l,errors:f})}}),f.PDCode&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-2",children:f.PDCode.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Mobile No",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,a.A)((0,a.A)({type:"number"},e("PDNumber",{required:"Mobile No is required",minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:" ".concat(m.Ol," ").concat(f.PDNumber?"border-[1px] ":"border-gray-300"),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))}})),f.PDNumber&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.PDNumber.message})]})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Remark ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("remark",{required:"Remark is required"})),{},{className:"placeholder: ".concat(m.Ol," ").concat(f.remark?"border-[1px] ":"border-gray-300"),placeholder:"Enter Remark"})),f.remark&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.remark.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(m.Q0),children:["Amount ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("amount",{required:"Amount is required"})),{},{className:"placeholder: ".concat(m.Ol," ").concat(f.amount?"border-[1px] ":"border-gray-300"),placeholder:"Enter Amount"})),f.amount&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:f.amount.message})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"submit",className:"bg-header text-white p-2 px-4 rounded mt-3",children:"Submit"})})]})})})}}}]);
//# sourceMappingURL=2283.8c3432ae.chunk.js.map