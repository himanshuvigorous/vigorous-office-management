"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[885],{20885:(e,a,l)=>{l.r(a),l.d(a,{default:()=>y});var s=l(89379),i=l(24858),r=l(39160),d=l(83003),n=l(73216),o=l(65043),c=(l(42837),l(42044)),t=l(15187),m=l(31744),u=l(78729),p=l(65512),v=l(17995),x=l(89427),h=l(70579);const y=()=>{const{loading:e}=(0,d.d4)(e=>e.leaveType),{register:a,handleSubmit:l,control:y,formState:{errors:j},setValue:N}=(0,i.mN)(),A=(0,d.wA)(),b=(0,n.Zp)(),{companyList:g,companyListLoading:w}=(0,d.d4)(e=>e.company),{branchList:T,branchListloading:f}=(0,d.d4)(e=>e.branch),[C,L]=(0,o.useState)(!1),I=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),O=(0,i.FH)({control:y,name:"PDCompanyId",defaultValue:""}),D=(0,i.FH)({control:y,name:"isPaid",defaultValue:""}),S=(0,i.FH)({control:y,name:"totalLeaves",defaultValue:""}),P=e=>{L("true"===e),N("maxDays","")};return(0,o.useEffect)(()=>{(O||"company"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType))&&A((0,m.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===I||void 0===I?void 0:I.userType)?O:"company"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.companyId}))},[O]),(0,o.useEffect)(()=>{"admin"===(null===I||void 0===I?void 0:I.userType)&&A((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,h.jsx)(r.A,{children:(0,h.jsx)("div",{className:"gap-4",children:(0,h.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:l(e=>{const a={employeId:"",companyId:"admin"===(null===I||void 0===I?void 0:I.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.companyId,directorId:"companyDirector"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.directorId,branchId:"admin"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType)||"company"===(null===I||void 0===I?void 0:I.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===I||void 0===I?void 0:I.userType)?null===I||void 0===I?void 0:I._id:null===I||void 0===I?void 0:I.branchId,name:null===e||void 0===e?void 0:e.leaveTypeName,maxDays:Number(null===e||void 0===e?void 0:e.maxDays),totalLeaves:Number(null===e||void 0===e?void 0:e.totalLeaves),duration:C,isPaid:null===e||void 0===e?void 0:e.isPaid,isCarryForword:!(!D||!C)&&(null===e||void 0===e?void 0:e.isCarryForward)};A((0,c.mo)(a)).then(e=>{e.error||b(-1)})}),children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===I||void 0===I?void 0:I.userType)&&(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Company Name ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsxs)("select",(0,s.A)((0,s.A)({},a("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(t.Ol," ").concat(j.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,h.jsx)("option",{className:"",value:"",children:"Select Comapany"}),w?(0,h.jsx)(p.A.Option,{disabled:!0,children:(0,h.jsx)(x.A,{})}):null===g||void 0===g?void 0:g.map(e=>(0,h.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),j.PDCompanyId&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.PDCompanyId.message})]}),("admin"===(null===I||void 0===I?void 0:I.userType)||"company"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType))&&(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Branch Name ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)(i.xI,{name:"PDBranchId",control:y,rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,h.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(t.Hy," ").concat(j.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,h.jsx)(p.A.Option,{value:"",children:"Select Branch"}),f?(0,h.jsx)(p.A.Option,{disabled:!0,children:(0,h.jsx)(x.A,{})}):null===T||void 0===T?void 0:T.map(e=>(0,h.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.PDBranchId&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.PDBranchId.message})]}),(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Leave Type Name ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)("input",(0,s.A)((0,s.A)({type:"text"},a("leaveTypeName",{required:"Leave Type Name is required"})),{},{className:"".concat(t.Ol," ").concat(j.leaveTypeName?"border-[1px] ":"border-gray-300"),placeholder:"Enter Leave Type Name"})),j.leaveTypeName&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.leaveTypeName.message})]}),(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Total Annual Allowance ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)("input",(0,s.A)((0,s.A)({type:"number"},a("totalLeaves",{required:"Total Annual Allowance is required"})),{},{className:"".concat(t.Ol," ").concat(j.totalLeaves?"border-[1px] ":"border-gray-300"),placeholder:"Enter Total Annual Allowance"})),j.totalLeaves&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.totalLeaves.message})]}),(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Application Limit ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)(i.xI,{name:"duration",control:y,render:e=>{let{field:a}=e;return(0,h.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(t.Hy," ").concat(j.duration?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Application Limit",onChange:P,children:[(0,h.jsx)(p.A.Option,{value:"",children:"Select Application Limit"}),(0,h.jsx)(p.A.Option,{value:"true",children:"Active"}),(0,h.jsx)(p.A.Option,{value:"false",children:"Inactive"})]}))}}),j.duration&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.duration.message})]}),(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Is This a Paid Leave? ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)(i.xI,{name:"isPaid",control:y,render:e=>{let{field:a}=e;return(0,h.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(t.Hy," ").concat(j.isPaid?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Option",children:[(0,h.jsx)(p.A.Option,{value:"",children:"Select Option"}),(0,h.jsx)(p.A.Option,{value:!0,children:"Yes"}),(0,h.jsx)(p.A.Option,{value:!1,children:"No"})]}))}}),j.isPaid&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.isPaid.message})]}),C&&(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Maximum Days Per Application ( In Month ) ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)("input",(0,s.A)((0,s.A)({type:"number"},a("maxDays",{required:"Maximum Days Per Application is required",validate:e=>!(e>S)||"Maximum Days Per Application cannot be greater than Total Annual Allowance"})),{},{className:"".concat(t.Ol," ").concat(j.maxDays?"border-[1px] ":"border-gray-300"),placeholder:"Enter Maximum Days Per Application"})),j.maxDays&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.maxDays.message})]}),D&&C&&(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("label",{className:"".concat(t.Q0),children:["Allow Carry Forward? ",(0,h.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,h.jsx)(i.xI,{name:"isCarryForward",control:y,render:e=>{let{field:a}=e;return(0,h.jsxs)(p.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(t.Hy," ").concat(j.isCarryForward?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Option",children:[(0,h.jsx)(p.A.Option,{value:"",children:"Select Option"}),(0,h.jsx)(p.A.Option,{value:!0,children:"Yes"}),(0,h.jsx)(p.A.Option,{value:!1,children:"No"})]}))}}),j.isCarryForward&&(0,h.jsx)("p",{className:"text-red-500 text-sm",children:j.isCarryForward.message})]})]}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 mt-3 rounded"),children:e?(0,h.jsx)(v.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=885.0d275346.chunk.js.map