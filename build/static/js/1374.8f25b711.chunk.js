"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1374],{61374:(e,a,d)=>{d.r(a),d.d(a,{default:()=>f});var l=d(89379),n=d(24858),i=d(39160),o=d(83003),s=d(73216),c=d(65043),t=d(15187),r=d(31744),u=(d(78729),d(66015)),v=d(42837),m=(d(31536),d(88967),d(72211)),h=d(70337),p=d(12208),x=d(8928),y=d(47989),N=d(33007),b=d(6720),j=d(31174),I=d(86178),g=d.n(I),A=d(70579);const f=()=>{var e,a;const{register:d,handleSubmit:I,control:f,watch:T,formState:{errors:q},setValue:D}=(0,n.mN)({defaultValues:{}}),{receiptDetails:Q}=(0,o.d4)(e=>e.receipt),{receiptIdEnc:S}=(0,s.g)(),k=(0,j.Yc)(S),O=(0,o.wA)(),_=(0,s.Zp)(),{companyList:Y}=(0,o.d4)(e=>e.company),{branchList:C}=(0,o.d4)(e=>e.branch),H=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),{clientList:L}=(0,o.d4)(e=>e.client),F=(0,n.FH)({control:f,name:"PDCompanyId",defaultValue:""}),w=(0,n.FH)({control:f,name:"PDBranchId",defaultValue:""}),{officeAddressListData:P}=(0,o.d4)(e=>e.officeAddress),{branchDetailsData:E}=(0,o.d4)(e=>e.branch),{employeList:M}=(0,o.d4)(e=>e.employe),{clientGroupList:G}=(0,o.d4)(e=>e.clientGroup),{invoiceListData:J}=(0,o.d4)(e=>e.invoice),{departmentListData:V}=(0,o.d4)(e=>e.department),{fields:B,append:z,remove:U}=(0,n.jz)({control:f,name:"heads"});(0,c.useEffect)(()=>{(async()=>{if(k){D("heads",[]);try{var e;const b=await O((0,m.Z)({_id:k}));if(!b.error&&null!==b&&void 0!==b&&null!==(e=b.payload)&&void 0!==e&&e.data){var a,d;const e=null===b||void 0===b||null===(a=b.payload)||void 0===a?void 0:a.data;D("naration",e.naration),D("date",g()(e.date).format("YYYY-MM-DD")),D("isTDS",e.isTDS),D("tds",+e.TDSAmount),D("isDiscountApplicable",e.isDiscount),D("discount",+e.discountAmount),D("isAdvance",e.isAdvanced),D("maxAdvance",+e.advancedAvailable),D("advance",+e.advancedAdjust),D("totalAmount",e.subTotalAmount),D("type",e.paymentmode),D("chequeNo",e.chequeNumber),D("transactionNo",e.transectionNumber);const m=await O((0,p.J_)({companyId:e.companyId,branchId:e.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}));null!==m&&void 0!==m&&m.error||D("groupName",e.groupId);const j=await O((0,h.Aq)({companyId:e.companyId,branchId:e.branchId,groupId:e.groupId,isPagination:!1,sort:!0,status:!0}));var l;if(null===j||void 0===j||!j.error)D("client",null===(l=e.clientId)||void 0===l?void 0:l._id);const I=await O((0,x.XY)({directorId:"",companyId:e.companyId,branchId:e.branchId,text:"",sort:!0,status:!0,type:"invoice",isPagination:!1}));if(null!==I&&void 0!==I&&I.error||D("invoiceLayout",e.receiptLayoutId),"cash"!==e.paymentmode){const a=await O((0,r.ZN)({_id:e.branchId}));null!==a&&void 0!==a&&a.error||D("bankId",e.bankAccId)}if("cash"===e.paymentmode){var n,i,o;const a=await O((0,v.qV)({text:"",status:!0,sort:!0,isPagination:!1,companyId:e.companyId,branchId:e.branchId})),d=null===a||void 0===a||null===(n=a.payload)||void 0===n||null===(i=n.data)||void 0===i||null===(o=i.docs)||void 0===o?void 0:o.find(a=>(null===a||void 0===a?void 0:a._id)===e.employeId);null!==a&&void 0!==a&&a.error||D("employeeId",{value:null===d||void 0===d?void 0:d._id,label:null===d||void 0===d?void 0:d.fullName})}const A=await O((0,y.W2)({directorId:"",companyId:e.companyId,branchId:e.branchId,clientId:null===(d=e.clientId)||void 0===d?void 0:d._id,text:"",sort:!0,status:"Paid",isPagination:!0}));if(null===A||void 0===A||!A.error){var s,c;const a=null===e||void 0===e||null===(s=e.heads)||void 0===s||null===(c=s.filter(e=>"invoice"===(null===e||void 0===e?void 0:e.headType)))||void 0===c?void 0:c.map(e=>({headType:"invoice",invoiceId:null===e||void 0===e?void 0:e.invoiceId,subHeadId:null,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:"-",type:"",monthName:"",monthQuaters:""}));a&&z(a)}const f=await O((0,N.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:e.companyId,branchId:e.branchId}));if(null===f||void 0===f||!f.error){var t,u;const a=null===e||void 0===e||null===(t=e.heads)||void 0===t||null===(u=t.filter(e=>"client"===(null===e||void 0===e?void 0:e.headType)))||void 0===u?void 0:u.map(e=>({headType:"client",invoiceId:null,subHeadId:null===e||void 0===e?void 0:e.subHeadId,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:null===e||void 0===e?void 0:e.financialYear,type:null===e||void 0===e?void 0:e.type,monthName:null===e||void 0===e?void 0:e.monthName,monthQuaters:null===e||void 0===e?void 0:e.monthQuaters}));a&&z(a)}}}catch(b){console.error("Error fetching data",b)}}})()},[k]);const Z=(()=>{const e=[];for(let a=2005;a<=2034;a++)e.push("".concat(a,"-").concat(a+1));return e})(),R=["January","February","March","April","May","June","July","August","September","October","November","December"],W=["Jan-Mar","Apr-Jun","Jul-Sept","Oct-Dec"],X=T("totalAmount")||0,K=T("discount")||0,$=T("tds")||0,ee=T("advance")||0,ae=T("isDiscountApplicable"),de=T("isTDS"),le=T("isAdvance"),ne=T("maxAdvance")||0;return(0,c.useEffect)(()=>{let e=X;ae&&(e-=K),de&&(e-=$),D("totalBeforeGrand",e),le&&(e-=ee),D("grandTotal",e)},[X,K,$,ee,ae,de,le,ne,D]),(0,A.jsx)(i.A,{children:(0,A.jsx)("div",{className:"gap-4",children:(0,A.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:I(e=>{var a,d,l,n,i;const o=null===e||void 0===e||null===(a=e.heads)||void 0===a||null===(d=a.filter(e=>"invoice"===(null===e||void 0===e?void 0:e.headType)))||void 0===d?void 0:d.map(e=>({headType:"invoice",invoiceId:null===e||void 0===e?void 0:e.invoiceId,subHeadId:null,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:"-",type:"",monthName:"",monthQuaters:""})),s=null===e||void 0===e||null===(l=e.heads)||void 0===l||null===(n=l.filter(e=>"client"===(null===e||void 0===e?void 0:e.headType)))||void 0===n?void 0:n.map(e=>({headType:"client",invoiceId:null,subHeadId:null===e||void 0===e?void 0:e.subHeadId,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:null===e||void 0===e?void 0:e.financialYear,type:null===e||void 0===e?void 0:e.type,monthName:null===e||void 0===e?void 0:e.monthName,monthQuaters:null===e||void 0===e?void 0:e.monthQuaters})),c={_id:k,companyId:null===Q||void 0===Q?void 0:Q.companyId,directorId:null===Q||void 0===Q?void 0:Q.directorId,branchId:null===Q||void 0===Q?void 0:Q.branchId,receiptLayoutId:null===e||void 0===e?void 0:e.invoiceLayout,clientId:null===e||void 0===e?void 0:e.client,groupId:null===e||void 0===e?void 0:e.groupName,employeId:"cash"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e||null===(i=e.employeeId)||void 0===i?void 0:i.value:"",bankAccId:"cash"!==(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.bankId:"",advancedAvailableId:"",heads:[...s,...o],naration:null===e||void 0===e?void 0:e.naration,date:null===e||void 0===e?void 0:e.date,subTotalAmount:null===e||void 0===e?void 0:e.totalAmount,isTDS:null===e||void 0===e?void 0:e.isTDS,TDSAmount:+(null===e||void 0===e?void 0:e.tds),isDiscount:null===e||void 0===e?void 0:e.isDiscountApplicable,discountAmount:+(null===e||void 0===e?void 0:e.discount),advancedAvailable:null===e||void 0===e?void 0:e.maxAdvance,isAdvanced:null===e||void 0===e?void 0:e.isAdvance,advancedAdjust:+(null===e||void 0===e?void 0:e.advance),totalAmount:null===e||void 0===e?void 0:e.totalBeforeGrand,grandTotalAmount:null===e||void 0===e?void 0:e.grandTotal,paymentmode:null===e||void 0===e?void 0:e.type,chequeNumber:"cheque"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.chequeNo:"",transectionNumber:"bank"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.transactionNo:""};O((0,m.gR)(c)).then(e=>{e.error||_(-1)})}),children:[(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Group Type ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("groupName",{required:"Organization type is required"})),{},{className:" ".concat(t.Ol," ").concat(q.groupName?"border-[1px] ":"border-gray-300"),onFocus:()=>{O((0,p.J_)({companyId:null===Q||void 0===Q?void 0:Q.companyId,branchId:null===Q||void 0===Q?void 0:Q.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}))},onChange:e=>{var a;D("maxAdvance",null===G||void 0===G||null===(a=G.find(a=>(null===a||void 0===a?void 0:a._id)===e.target.value))||void 0===a?void 0:a.advancedBalance)},children:[(0,A.jsx)("option",{className:"text-xs",value:"",children:"Select Group Type"}),null===G||void 0===G?void 0:G.map((e,a)=>(0,A.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName,"(",null===e||void 0===e?void 0:e.groupName,")"]}))]})),q.groupName&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.groupName.message})]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Client ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("client",{required:"Client is required"})),{},{onFocus:()=>{O((0,h.Aq)({companyId:null===Q||void 0===Q?void 0:Q.companyId,branchId:null===Q||void 0===Q?void 0:Q.branchId,directorId:"",organizationId:"",industryId:"",groupId:T("groupName"),text:"",sort:!0,status:!0,isPagination:!1}))},className:" ".concat(t.Ol," ").concat(q.client?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{className:"text-xs",value:"",children:"Select Client"}),null===L||void 0===L?void 0:L.map((e,a)=>(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),q.client&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.client.message})]}),(0,A.jsxs)("div",{className:"col-span-2",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Firm Layout Name",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("invoiceLayout",{required:"Invoice layout  is required"})),{},{className:" ".concat(t.Ol," ").concat(q.invoiceLayout?"border-[1px] ":"border-gray-300"),onFocus:()=>{O((0,x.XY)({companyId:null===Q||void 0===Q?void 0:Q.companyId,branchId:null===Q||void 0===Q?void 0:Q.branchId,directorId:"",text:"",sort:!0,status:!0,type:"invoice",isPagination:!1,bankAccountId:"",isGSTEnabled:""}))},children:[(0,A.jsx)("option",{className:"",value:"",children:"Select Layout"}),null===P||void 0===P?void 0:P.map(e=>(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.firmName}))]})),q.invoiceLayout&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.invoiceLayout.message})]})]}),(0,A.jsx)("div",{children:B.map((e,a)=>{var n,i,o,s,c,r,u,v,m,h,p,x,j,I,g,f,S,k,_,Y,C,L,P,E,M,G,z,X,K,$,ee,ae,de,le,ne,ie,oe,se,ce,te,re,ue,ve,me,he,pe,xe,ye,Ne,be,je,Ie;return(0,A.jsxs)("div",{className:"border border-gray-300 rounded-md my-2",children:[(0,A.jsx)("div",{className:"flex justify-end bg-header rounded-t-md p-2",children:(0,A.jsx)("button",{className:"text-white",size:20,type:"button",onClick:()=>U(a),children:(0,A.jsx)(b.b6i,{})})}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Head Type"}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("heads[".concat(a,"].headType"),{required:"Head type is required"})),{},{defaultValue:e.headType,className:" ".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(n=q.heads)&&void 0!==n&&null!==(i=n[a])&&void 0!==i&&i.headType?"border-[1px] ":"border-gray-300"),onChange:e=>{D("heads[".concat(a,"].headType"),e.target.value),D("heads[".concat(a,"].amount"),0),D("heads[".concat(a,"].subHeadId"),""),D("heads[".concat(a,"].invoiceId"),"")},children:[(0,A.jsx)("option",{value:"invoice",children:"Invoice"}),(0,A.jsx)("option",{value:"client",children:"Client Expense"})]})),(null===q||void 0===q||null===(o=q.heads)||void 0===o||null===(s=o[a])||void 0===s?void 0:s.headType)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(c=q.heads)||void 0===c||null===(r=c[a])||void 0===r||null===(u=r.headType)||void 0===u?void 0:u.message})]}),"client"===T("heads[".concat(a,"].headType"))&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Sub Head ID"}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({onFocus:()=>{O((0,N.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:null===Q||void 0===Q?void 0:Q.companyId,branchId:null===Q||void 0===Q?void 0:Q.branchId}))}},d("heads[".concat(a,"].subHeadId"),{required:"Sub Head ID is required"})),{},{defaultValue:e.subHeadId,className:" ".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(v=q.heads)&&void 0!==v&&null!==(m=v[a])&&void 0!==m&&m.subHeadId?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{className:"text-xs",value:"",children:"Select Sub Head"}),null===V||void 0===V?void 0:V.map((e,a)=>(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]})),(null===q||void 0===q||null===(h=q.heads)||void 0===h||null===(p=h[a])||void 0===p?void 0:p.subHeadId)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(x=q.heads)||void 0===x||null===(j=x[a])||void 0===j||null===(I=j.subHeadId)||void 0===I?void 0:I.message})]}),(0,A.jsx)("div",{className:"col-span-2 my-2",children:(0,A.jsxs)("div",{className:"grid ".concat("Yearly"===T("heads[".concat(a,"].type"))?"grid-cols-1 md:grid-cols-2":T("heads[".concat(a,"].type"))?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"," space-x-4"),children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Financial Year ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({defaultValue:(0,t.Yz)()},d("heads[".concat(a,"].financialYear"),{required:"Financial year is required"})),{},{className:"".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(g=q.heads)&&void 0!==g&&null!==(f=g[a])&&void 0!==f&&f.financialYear?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{value:"",children:"Select Financial Year"}),Z.map((e,a)=>(0,A.jsx)("option",{value:e,children:e},a))]})),(null===q||void 0===q||null===(S=q.heads)||void 0===S||null===(k=S[a])||void 0===k?void 0:k.financialYear)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(_=q.heads)||void 0===_||null===(Y=_[a])||void 0===Y?void 0:Y.financialYear.message})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Type ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("heads[".concat(a,"].type"),{required:"Type is required"})),{},{className:"".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(C=q.heads)&&void 0!==C&&null!==(L=C[a])&&void 0!==L&&L.type?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{value:"",children:"Select Type"}),(0,A.jsx)("option",{value:"Quaterly",children:"Quaterly"}),(0,A.jsx)("option",{value:"Monthly",children:"Monthly"}),(0,A.jsx)("option",{value:"Yearly",children:"Yearly"})]})),(null===q||void 0===q||null===(P=q.heads)||void 0===P||null===(E=P[a])||void 0===E?void 0:E.type)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(M=q.heads)||void 0===M||null===(G=M[a])||void 0===G?void 0:G.type.message})]}),"Quaterly"===T("heads[".concat(a,"].type"))&&(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Quarter ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("heads[".concat(a,"].monthQuaters"),{required:"Reset Month is required"})),{},{className:"".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(z=q.heads)&&void 0!==z&&null!==(X=z[a])&&void 0!==X&&X.monthQuaters?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{value:"",children:"Select Quarter"}),W.map(e=>(0,A.jsx)("option",{value:e,children:e},e))]})),(null===q||void 0===q||null===(K=q.heads)||void 0===K||null===($=K[a])||void 0===$?void 0:$.monthQuaters)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(ee=q.heads)||void 0===ee||null===(ae=ee[a])||void 0===ae?void 0:ae.monthQuaters.message})]}),"Monthly"===T("heads[".concat(a,"].type"))&&(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Month ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("heads[".concat(a,"].monthName"),{required:"Month is required"})),{},{className:"".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(de=q.heads)&&void 0!==de&&null!==(le=de[a])&&void 0!==le&&le.monthName?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{value:"",children:"Select Month"}),R.map(e=>(0,A.jsx)("option",{value:e,children:e},e))]})),(null===q||void 0===q||null===(ne=q.heads)||void 0===ne||null===(ie=ne[a])||void 0===ie?void 0:ie.monthName)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(oe=q.heads)||void 0===oe||null===(se=oe[a])||void 0===se?void 0:se.monthName.message})]})]})})]}),"invoice"===T("heads[".concat(a,"].headType"))&&(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Invoice ID"}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("heads[".concat(a,"].invoiceId"),{required:"Invoice ID is required"})),{},{onFocus:()=>{(()=>{const e={directorId:"",companyId:"admin"===(null===H||void 0===H?void 0:H.userType)?F:"company"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.companyId,branchId:"company"===(null===H||void 0===H?void 0:H.userType)||"admin"===(null===H||void 0===H?void 0:H.userType)||"companyDirector"===(null===H||void 0===H?void 0:H.userType)?w:"companyBranch"===(null===H||void 0===H?void 0:H.userType)?null===H||void 0===H?void 0:H._id:null===H||void 0===H?void 0:H.branchId,clientId:T("client"),text:"",sort:!0,status:"Paid",isPagination:!0};O((0,y.W2)(e))})()},onChange:e=>{if("invoice"===T("heads[".concat(a,"].headType"))){var d;D("heads[".concat(a,"].amount"),null===J||void 0===J||null===(d=J.find(a=>(null===a||void 0===a?void 0:a._id)===e.target.value))||void 0===d?void 0:d.grandTotal);const l=B.reduce((e,a,d)=>e+(parseFloat(T("heads[".concat(d,"].amount")))||0),0);D("totalAmount",l)}},className:" ".concat(t.Ol," ").concat(null!==q&&void 0!==q&&null!==(ce=q.heads)&&void 0!==ce&&null!==(te=ce[a])&&void 0!==te&&te.invoiceId?"border-[1px] ":"border-gray-300"),children:[(0,A.jsx)("option",{className:"text-xs",value:"",children:"Select Client"}),null===J||void 0===J?void 0:J.map((e,a)=>(0,A.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.clientName,"(",null===e||void 0===e?void 0:e.invoiceNumber,")"]}))]})),(null===q||void 0===q||null===(re=q.heads)||void 0===re||null===(ue=re[a])||void 0===ue?void 0:ue.invoiceId)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(ve=q.heads)||void 0===ve||null===(me=ve[a])||void 0===me||null===(he=me.invoiceId)||void 0===he?void 0:he.message})]})]}),(0,A.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Amount"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"number",step:"0.01",disabled:"invoice"===T("heads[".concat(a,"].headType"))},d("heads[".concat(a,"].amount"),{required:"Amount is required"})),{},{onChange:e=>{const d=parseFloat(e.target.value)||0;D("heads[".concat(a,"].amount"),d);const l=B.reduce((e,a,d)=>e+(parseFloat(T("heads[".concat(d,"].amount")))||0),0);D("totalAmount",l)},className:" ".concat("invoice"===T("heads[".concat(a,"].headType"))?t.id:t.Ol," ").concat(null!==q&&void 0!==q&&null!==(pe=q.heads)&&void 0!==pe&&null!==(xe=pe[a])&&void 0!==xe&&xe.amount?"border-[1px] ":"border-gray-300")})),(null===q||void 0===q||null===(ye=q.heads)||void 0===ye||null===(Ne=ye[a])||void 0===Ne?void 0:Ne.amount)&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:null===q||void 0===q||null===(be=q.heads)||void 0===be||null===(je=be[a])||void 0===je||null===(Ie=je.amount)||void 0===Ie?void 0:Ie.message})]})})]},e.id)})}),(0,A.jsx)("button",{type:"button",onClick:()=>z({headType:"invoice"}),className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Add more"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-8 md:my-1 px-3 md:mt-4",children:[T("grandTotal")>0&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("div",{className:" flex items-center gap-4",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:[(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"radio",value:"cash"},d("type",{required:"Type is required"})),{},{className:"mr-2"})),"Cash"]}),(0,A.jsxs)("label",{className:"".concat(t.Q0),children:[(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"radio",value:"cheque"},d("type",{required:"Type is required"})),{},{className:"mr-2"})),"Cheque"]}),(0,A.jsxs)("label",{className:"".concat(t.Q0),children:[(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"radio",value:"bank"},d("type",{required:"Type is required"})),{},{className:"mr-2"})),"Bank"]})]}),q.type&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.type.message})]}),T("grandTotal")>0&&"cash"!==T("type")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Sender Bank",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsxs)("select",(0,l.A)((0,l.A)({},d("bankId")),{},{className:"".concat(t.Ol,"  ").concat(q.bankId?"border-[1px] ":"border-gray-300"," "),onFocus:()=>{O((0,r.ZN)({_id:null===Q||void 0===Q?void 0:Q.branchId}))},children:[(0,A.jsx)("option",{value:"",children:"select bank"}),(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.bankData)&&(null===E||void 0===E||null===(a=E.data)||void 0===a?void 0:a.bankData.length)>0&&E.data.bankData.map(e=>(0,A.jsx)("option",{value:e._id,children:"".concat(e.bankName," (").concat(e.branchName,")")},e._id))]})),q.bankId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.bankId.message})]}),T("grandTotal")>0&&"cash"===T("type")&&(0,A.jsxs)("div",{className:"w-full",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,A.jsx)(n.xI,{name:"employeeId",control:f,rules:{required:"Employee is required"},render:e=>{let{field:a}=e;return(0,A.jsx)(u.Ay,(0,l.A)((0,l.A)({},a),{},{onFocus:()=>O((0,v.qV)({text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:null===Q||void 0===Q?void 0:Q.companyId,branchId:null===Q||void 0===Q?void 0:Q.branchId})),options:null===M||void 0===M?void 0:M.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(q.employeeId?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),q.employeeId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.employeeId.message})]}),T("grandTotal")>0&&"cheque"===T("type")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Cheque No",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"text"},d("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(t.Ol," ").concat(q.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),q.chequeNo&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.chequeNo.message})]}),T("grandTotal")>0&&"bank"===T("type")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Transaction No",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"text"},d("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(t.Ol," ").concat(q.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),q.transactionNo&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.transactionNo.message})]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Naration",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("textarea",(0,l.A)((0,l.A)({},d("naration",{required:"Naration is required"})),{},{className:" ".concat(t.Ol," ").concat(q.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),q.naration&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.naration.message})]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(t.Q0),children:["Date",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"date"},d("date",{required:"Date is required"})),{},{className:" ".concat(t.Ol," ").concat(q.date?"border-[1px] ":"border-gray-300"),placeholder:"Enter Date"})),q.date&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.date.message})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{className:"".concat(t.Q0," flex items-center"),children:[(0,A.jsx)("input",(0,l.A)({type:"checkbox"},d("isDiscountApplicable"))),(0,A.jsx)("span",{className:"mx-2 text-[15px]",children:"Is Discount"})]}),(0,A.jsxs)("label",{className:"".concat(t.Q0," flex items-center"),children:[(0,A.jsx)("input",(0,l.A)({type:"checkbox"},d("isTDS"))),(0,A.jsx)("span",{className:"mx-2 text-[15px]",children:"Is TDS"})]}),(0,A.jsxs)("label",{className:"".concat(t.Q0," flex items-center"),children:[(0,A.jsx)("input",(0,l.A)({type:"checkbox"},d("isAdvance"))),(0,A.jsx)("span",{className:"mx-2 text-[15px]",children:"Is Advance"})]})]}),(0,A.jsx)("div",{className:"w-full flex flex-row items-end justify-end",children:(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Sub Total Amount"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"text"},d("totalAmount",{})),{},{className:"".concat(t.Ol),placeholder:"totalAmount",disabled:!0})),q.designationName&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:q.amount.message})]}),T("isDiscountApplicable")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Discount"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"number",step:"0.01"},d("discount",{})),{},{className:"".concat(t.Ol),placeholder:"Discount"}))]}),T("isTDS")&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"TDS"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"number",step:"0.01"},d("tds",{})),{},{className:"".concat(t.Ol),placeholder:"TDS"}))]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Total Amount"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"text"},d("totalBeforeGrand",{})),{},{className:"".concat(t.Ol),placeholder:"total",disabled:!0}))]}),T("isAdvance")&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Advance"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"number",step:"0.01"},d("advance",{maxLength:T("maxAdvance")?T("maxAdvance"):null})),{},{max:T("maxAdvance")?T("maxAdvance"):null,className:"".concat(t.Ol),placeholder:"Advance"}))]}),(0,A.jsxs)("div",{className:"text-red-800 ",children:[" ",T("maxAdvance")&&"max available : "+T("maxAdvance")]})]}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(t.Q0),children:"Grand Total"}),(0,A.jsx)("input",(0,l.A)((0,l.A)({type:"text"},d("grandTotal",{})),{},{className:"".concat(t.Ol),placeholder:"grandTotal",disabled:!0}))]})]})}),(0,A.jsx)("div",{className:"flex justify-end",children:(0,A.jsx)("button",{type:"submit",className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Submit"})})]})})})}}}]);
//# sourceMappingURL=1374.8f25b711.chunk.js.map