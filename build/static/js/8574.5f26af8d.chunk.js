"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8574],{65337:(e,a,s)=>{s.d(a,{A:()=>d});var l=s(91686),t=s(70579);const d=function(){return(0,t.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,t.jsx)(l.A,{size:"large"})})}},68574:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(89379),t=s(65043),d=s(24858),n=s(83003),i=s(73216),o=s(65512),c=s(91686),r=s(39160),m=s(33007),u=s(31174),x=s(15187),p=s(735),v=s(78729),N=s(65337),h=s(56659),b=s(70579);const j=t.memo(h.A);function g(){const e=(0,n.d4)(e=>e.department.loading),a=(0,n.d4)(e=>e.department.departmentByIdData),s=(0,n.d4)(e=>e.company.companyList),{register:h,handleSubmit:g,setValue:y,control:f,formState:{errors:A}}=(0,d.mN)({mode:"onChange",defaultValues:{status:!0}}),[M,C]=t.useState(!0),D=(0,n.wA)(),I=(0,i.Zp)(),{userCompanyId:P,userType:w}=(0,p.A)(),{departmentIdEnc:E}=(0,i.g)(),S=(0,t.useMemo)(()=>(0,u.Yc)(E),[E]),_=(0,t.useMemo)(()=>null===s||void 0===s?void 0:s.map(e=>(0,b.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName,"(",null===e||void 0===e?void 0:e.userName,")"]},null===e||void 0===e?void 0:e._id)),[s]),k=(0,t.useCallback)(async()=>{try{"admin"===w&&await D((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}));const e={_id:S};await D((0,m.P5)(e)),C(!1)}catch(e){console.error("Error fetching data:",e),C(!1)}},[S,D,w]);(0,t.useEffect)(()=>{k()},[k]),(0,t.useEffect)(()=>{if(null!==a&&void 0!==a&&a.data){var e,s;const{data:l}=a;y("companyId",null===l||void 0===l?void 0:l.companyId),y("departmentName",null===l||void 0===l?void 0:l.name),y("status",null===l||void 0===l?void 0:l.status),y("email",null===l||void 0===l?void 0:l.email),y("PDMobileCode",null===l||void 0===l||null===(e=l.mobile)||void 0===e?void 0:e.code),y("PDMobileNo",null===l||void 0===l||null===(s=l.mobile)||void 0===s?void 0:s.number)}},[a,y]);const z=(0,t.useCallback)(e=>{const a={_id:S,name:e.departmentName,status:null===e||void 0===e?void 0:e.status,email:null===e||void 0===e?void 0:e.email,companyId:null===e||void 0===e?void 0:e.companyId,mobile:{code:null===e||void 0===e?void 0:e.PDMobileCode,number:null===e||void 0===e?void 0:e.PDMobileNo}};D((0,m.Mj)(a)).then(e=>{let{error:a}=e;a||I(-1)})},[S,D,I]),Q=(0,t.useMemo)(()=>[{value:!0,label:"Active"},{value:!1,label:"In Active"}],[]);return M?(0,b.jsx)(N.A,{}):(0,b.jsx)(r.A,{children:(0,b.jsx)("div",{className:"gap-4",children:(0,b.jsxs)("form",{autoComplete:"off",className:"mt-5",onSubmit:g(z),noValidate:!0,children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===w&&(0,b.jsxs)("div",{className:"",children:[(0,b.jsxs)("label",{className:"".concat(x.Q0),children:["Company",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsxs)("select",(0,l.A)((0,l.A)({},h("companyId",{required:"Company is required"})),{},{className:"".concat(x.Ol," ").concat(A.companyId?"border-[1px]":"border-gray-300"),children:[(0,b.jsx)("option",{value:"",children:"Select Company"}),_]})),A.companyId&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.companyId.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"".concat(x.Q0),children:["Department Name ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",(0,l.A)((0,l.A)({type:"text"},h("departmentName",{required:"Department Name is required"})),{},{className:"placeholder: ".concat(x.Ol," ").concat(A.departmentName?"border-[1px]":"border-gray-300"),placeholder:"Enter Department Name"})),A.departmentName&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.departmentName.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("label",{className:"".concat(x.Q0),children:"Status"}),(0,b.jsx)(d.xI,{name:"status",control:f,render:e=>{let{field:a}=e;return(0,b.jsx)(o.A,(0,l.A)((0,l.A)({},a),{},{className:"".concat(x.Hy," ").concat(A.status?"border-[1px]":"border-gray-300"),options:Q,placeholder:"Select Status"}))}}),A.status&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.status.message})]}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("label",{className:"".concat(x.Q0),children:"Email"}),(0,b.jsx)("input",(0,l.A)((0,l.A)({type:"email"},h("email",{pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:"".concat(x.Ol," ").concat(A.email?"border-[1px]":"border-gray-300"),placeholder:"Enter Email"})),A.email&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.email.message})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"w-[100px] grid",children:[(0,b.jsx)("label",{className:"!text-[#5e6366] !text-sm !font-normal !font-[Poppins] !mb-0",children:"code"}),(0,b.jsx)(d.xI,{control:f,name:"PDMobileCode",render:e=>{let{field:a}=e;return(0,b.jsx)(j,{field:a,errors:A})}}),A.PDMobileCode&&(0,b.jsx)("p",{className:"".concat(x.ci),children:A.PDMobileCode.message})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("label",{className:"".concat(x.Q0),children:"Mobile No"}),(0,b.jsx)("input",(0,l.A)((0,l.A)({type:"tel"},h("PDMobileNo",{minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:"".concat(x.Ol," ").concat(A.PDMobileNo?"border-[1px]":"border-gray-300"),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value=e.target.value.slice(0,10)}})),A.PDMobileNo&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:A.PDMobileNo.message})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 mt-3 rounded"),children:e?(0,b.jsx)("div",{className:"text-center flex justify-center items-center",children:(0,b.jsx)(c.A,{size:"small"})}):"Submit"})})]})})})}const y=t.memo(g)}}]);
//# sourceMappingURL=8574.5f26af8d.chunk.js.map