"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1461],{91461:(e,l,a)=>{a.r(l),a.d(l,{default:()=>D});var s=a(89379),t=a(65043),i=a(24858),r=a(39160),o=a(83003),d=a(15187),n=a(735),c=a(60184),u=a(8873),m=a(14118),x=a(73216),v=a(36105),p=a(30575),h=a(78729),g=a(84480),N=(a(27971),a(31174)),f=a(88967),j=a(51957),y=a(56659),b=a(17995),P=a(70579);const D=()=>{var e;const l=(0,x.Zp)(),[a,D]=(0,t.useState)(1),[C,w]=(0,t.useState)(null),[A,S]=(0,t.useState)(""),[E,F]=(0,t.useState)(!1),{companyDetailsData:q,loading:M}=(0,o.d4)(e=>e.company),{loading:O}=(0,o.d4)(e=>e.director),{countryListData:I}=(0,o.d4)(e=>e.country),{stateListData:k}=(0,o.d4)(e=>e.states),{cityListData:_}=(0,o.d4)(e=>e.city),{userCompanyId:Q}=(0,n.A)(),{register:V,handleSubmit:z,setValue:H,control:L,formState:{errors:T}}=(0,i.mN)(),Z=(0,o.wA)(),U=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))),B=(null===(e=JSON.parse(localStorage.getItem("user_info_".concat(d.AU))))||void 0===e||e.userType,(0,i.FH)({control:L,name:"PDCompanyId",defaultValue:Q})),J=(0,i.FH)({control:L,name:"PDAddress",defaultValue:""}),R=(0,i.FH)({control:L,name:"PDCity",defaultValue:""}),K=(0,i.FH)({control:L,name:"PDState",defaultValue:""}),W=(0,i.FH)({control:L,name:"PDCountry",defaultValue:""}),Y=(0,i.FH)({control:L,name:"PDPin",defaultValue:""}),$=(0,i.FH)({control:L,name:"PDEmail",defaultValue:""}),G=(0,i.FH)({control:L,name:"PDMobileNo",defaultValue:""}),X=(0,i.FH)({control:L,name:"PDMobileCode",defaultValue:""}),ee=(0,i.FH)({control:L,name:"PDDirectorName",defaultValue:""});(0,t.useEffect)(()=>{Y&&Y.length>=4&&Y.length<=6&&(0,d.jh)(Y).then(e=>{e&&(H("PDCity",e.city),H("PDState",e.state),H("PDCountry",e.country))}).catch(e=>{console.error("Error fetching data:",e)})},[Y]),(0,t.useEffect)(()=>{H("PDMobileCode","+91")},[I]);const le=e=>{1!==e&&(0,u.D)({message:"First submit Primary Details",type:"error"})};return(0,P.jsx)(r.A,{children:(0,P.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,P.jsx)("div",{className:" md:col-span-3 col-span-12 w-full h-auto rounded-lg  ",children:(0,P.jsxs)("div",{className:"shadow bg-white rounded-xl py-2",children:[(0,P.jsxs)("div",{className:"relative w-[50px] h-[50px] mx-auto rounded-full border-2 border-slate-600 mt-3 flex items-center justify-center",children:[(0,P.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",style:{backgroundImage:"url(".concat(C||"",")"),backgroundSize:"cover",backgroundPosition:"center"},children:!C&&(0,P.jsx)(c.K9B,{className:"text-slate-500 w-[30px] h-[25px] cursor-pointer"})}),(0,P.jsx)("div",{className:"absolute bottom-0 right-0 bg-white p-[2px] rounded-full",children:(0,P.jsx)(c.p5B,{className:"text-header w-[16px] h-[16px] "})}),(0,P.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const l=e.target.files[0];if(Z((0,f.Sg)({filePath:l,isVideo:!1,isMultiple:!1})).then(e=>{var l;S(null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.data)}),l){const e=new FileReader;e.onloadend=()=>{w(e.result)},e.readAsDataURL(l)}},className:"absolute inset-0 opacity-0 cursor-pointer"})]}),(0,P.jsx)("div",{className:"text-base font-medium overflow-auto mx-2 text-center mt-2 text-header capitalize",children:ee||"Owner Name"}),(0,P.jsxs)("div",{className:"border mx-2 px-2 my-2 py-3 rounded-lg ",children:[(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("label",{className:"".concat(d.Q0),children:"Address"}),(0,P.jsxs)("div",{className:"mt-1 block w-full overflow-auto px-2 py-[9px] shadow-sm rounded-lg text-xs capitalize bg-[#f4f6f9] focus:outline-none cursor-default min-h-8",children:[J&&(0,P.jsxs)(P.Fragment,{children:[J,", "," "]}),R&&(0,P.jsxs)(P.Fragment,{children:[R," , "," "]}),K&&(0,P.jsxs)(P.Fragment,{children:[K," , "," "]}),W&&(0,P.jsxs)(P.Fragment,{children:[W," , "," "]}),Y&&(0,P.jsx)(P.Fragment,{children:Y})]})]}),(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("label",{className:"".concat(d.Q0),children:"Mail"}),(0,P.jsx)("div",{className:"mt-1 block w-full overflow-auto px-2 py-[9px] shadow-sm rounded-lg text-xs capitalize bg-[#f4f6f9] focus:outline-none cursor-default min-h-8",children:$})]}),(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)("label",{className:"".concat(d.Q0),children:"Phone number"}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)("div",{className:"mt-1 block overflow-auto   py-[9px] shadow-sm rounded-lg text-xs capitalize bg-[#f4f6f9] focus:outline-none cursor-default min-h-8 min-w-6",children:X||91}),(0,P.jsx)("div",{className:"mt-1 block overflow-auto w-full px-2 py-[9px] shadow-sm rounded-lg text-xs capitalize bg-[#f4f6f9] focus:outline-none cursor-default min-h-8",children:G})]})]})]})]})}),(0,P.jsxs)("form",{autoComplete:"off",onSubmit:z(e=>{if(1===a){var s,t,i,r,o,d;const a={companyId:B,firstName:"",lastName:"",profileImage:A,fullName:null===e||void 0===e?void 0:e.PDDirectorName,email:null===e||void 0===e?void 0:e.PDEmail,status:null===e||void 0===e?void 0:e.PDStatus,userType:"companyDirector",mobile:{code:null===e||void 0===e?void 0:e.PDMobileCode,number:null===e||void 0===e?void 0:e.PDMobileNo},directorProfile:{tagline:null!==(s=null===e||void 0===e?void 0:e.PDTagline)&&void 0!==s?s:"",secondaryEmail:"test@gmail.com"},addresses:{primary:{street:null!==(t=null===e||void 0===e?void 0:e.PDAddress)&&void 0!==t?t:"",city:null!==(i=null===e||void 0===e?void 0:e.PDCity)&&void 0!==i?i:"",state:null!==(r=null===e||void 0===e?void 0:e.PDState)&&void 0!==r?r:"",country:null!==(o=null===e||void 0===e?void 0:e.PDCountry)&&void 0!==o?o:"",pinCode:null!==(d=null===e||void 0===e?void 0:e.PDPin)&&void 0!==d?d:""},secondary:{street:"",city:"",state:"",country:"",pinCode:""}}};Z((0,m.Ns)(a)).then(e=>{var a,s;!e.error&&l("/admin/director/edit/".concat((0,N.w)(null===e||void 0===e||null===(a=e.payload)||void 0===a||null===(s=a.data)||void 0===s?void 0:s._id)))})}}),className:"space-y-2 md:col-span-9 col-span-12",children:[(0,P.jsxs)("div",{className:"flex bg-header justify-start items-center rounded-lg gap-5 px-3 pt-2 overflow-x-auto text-nowrap overflow-y-hidden",children:[(0,P.jsxs)("button",{type:"button",onClick:()=>le(1),className:"flex relative flex-col items-center  pb-2 ".concat(1===a?"text-white ]":"text-gray-500"," cursor-pointer"),children:[1===a&&(0,P.jsx)("div",{className:"w-full h-3 bg-[#f4f6f9] absolute bottom-0 translate-y-1/2 rounded-2xl"}),(0,P.jsx)("span",{className:"text-sm font-semibold text-nowrap",children:"Primary Details"})]}),(0,P.jsxs)("button",{type:"button",onClick:()=>le(2),className:"flex flex-col items-center relative pb-2 ".concat(2===a?"text-white ]":"text-gray-500"," cursor-pointer"),children:[2===a&&(0,P.jsx)("div",{className:"w-full h-3 bg-[#f4f6f9] absolute bottom-0 translate-y-1/2 rounded-2xl"}),(0,P.jsx)("span",{className:"text-sm font-semibold",children:"Documents"})]})]}),1===a&&(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("div",{className:" ",children:[(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3",children:(0,P.jsxs)("div",{className:"",children:[(0,P.jsxs)("label",{className:"".concat(d.Q0),children:["Owner Name ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(i.xI,{control:L,name:"PDDirectorName",rules:{required:"Owner Name is required"},render:e=>{var l,a,t;let{field:i}=e;return(0,P.jsx)(j.A,(0,s.A)((0,s.A)({className:"w-full"},i),{},{onFocus:()=>{Z((0,h.S4)({_id:null===U||void 0===U?void 0:U._id}))},onChange:e=>i.onChange(e),onSelect:e=>{var l,a,s,t,i,r,o,d,n,c,u,m,x,v;const p=null===q||void 0===q||null===(l=q.data)||void 0===l||null===(a=l.comapnyOwnerData)||void 0===a?void 0:a.find(l=>(null===l||void 0===l?void 0:l._id)===e);H("PDDirectorName",null===p||void 0===p?void 0:p.fullName),H("PDEmail",null===p||void 0===p?void 0:p.email),H("PDAddress",null===p||void 0===p||null===(s=p.addresses)||void 0===s||null===(t=s.primary)||void 0===t?void 0:t.street),H("PDCountry",null===p||void 0===p||null===(i=p.addresses)||void 0===i||null===(r=i.primary)||void 0===r?void 0:r.country),H("PDState",null===p||void 0===p||null===(o=p.addresses)||void 0===o||null===(d=o.primary)||void 0===d?void 0:d.state),H("PDCity",null===p||void 0===p||null===(n=p.addresses)||void 0===n||null===(c=n.primary)||void 0===c?void 0:c.city),H("PDPin",null===p||void 0===p||null===(u=p.addresses)||void 0===u||null===(m=u.primary)||void 0===m?void 0:m.pinCode),H("PDmobileCode",null===p||void 0===p||null===(x=p.mobile)||void 0===x?void 0:x.code),H("PDMobileNo",null===p||void 0===p||null===(v=p.mobile)||void 0===v?void 0:v.number)},options:null===(l=(0,d._o)(null===q||void 0===q||null===(t=q.data)||void 0===t?void 0:t.comapnyOwnerData,"fullName"))||void 0===l||null===(a=l.filter(e=>!0!==(null===e||void 0===e?void 0:e.onwerToDirector)))||void 0===a?void 0:a.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),children:(0,P.jsx)("input",{placeholder:"Enter Owner Name",value:i.label,className:"".concat(d.Ol," ").concat(T.PDCountry?"border-[1px] ":"border-gray-300")})}))}}),T.PDDirectorName&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:T.PDDirectorName.message})]})}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:(0,P.jsxs)("div",{className:"col-span-2",children:[(0,P.jsxs)("label",{className:"".concat(d.Q0),children:["Primary Address",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)("input",(0,s.A)((0,s.A)({type:"text"},V("PDAddress",{required:"Address  is required"})),{},{className:"".concat(d.Ol," ").concat(T.PDAddress?"border-[1px] ":"border-gray-300"),placeholder:"Enter Address "})),T.PDAddress&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:T.PDAddress.message})]})}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 md:gap-8 gap-3 md:my-1 px-3",children:[(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"".concat(d.Q0),children:["Country ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(i.xI,{control:L,name:"PDCountry",rules:{required:"Country is required"},render:e=>{var l;let{field:a}=e;return(0,P.jsx)(j.A,(0,s.A)((0,s.A)({className:"w-full"},a),{},{onChange:e=>{a.onChange(e)},options:null===I||void 0===I||null===(l=I.docs)||void 0===l?void 0:l.map(e=>({value:null===e||void 0===e?void 0:e.name})),children:(0,P.jsx)("input",{placeholder:"Enter Country",onFocus:()=>{Z((0,v.dw)({isPagination:!1,text:"",sort:!0,status:!0}))},className:"".concat(d.Ol," ").concat(T.PDCountry?"border-[1px] ":"border-gray-300")})}))}}),T.PDCountry&&(0,P.jsx)("p",{className:"".concat(d.ci),children:T.PDCountry.message})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"".concat(d.Q0),children:["State ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(i.xI,{control:L,name:"PDState",rules:{required:"State is required"},render:e=>{var l;let{field:a}=e;return(0,P.jsx)(j.A,(0,s.A)((0,s.A)({className:"w-full"},a),{},{onChange:e=>a.onChange(e),options:null===k||void 0===k||null===(l=k.docs)||void 0===l?void 0:l.map(e=>({value:null===e||void 0===e?void 0:e.name})),children:(0,P.jsx)("input",{placeholder:"Enter State",onFocus:()=>{Z((0,p.mz)({isPagination:!1,text:"",countryName:W,sort:!0,status:!0}))},className:"".concat(d.Ol," ").concat(T.PDState?"border-[1px] ":"border-gray-300")})}))}}),T.PDState&&(0,P.jsx)("p",{className:"".concat(d.ci),children:T.PDState.message})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"".concat(d.Q0),children:["City ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(i.xI,{control:L,name:"PDCity",rules:{required:"City is required"},render:e=>{var l;let{field:a}=e;return(0,P.jsx)(j.A,(0,s.A)((0,s.A)({className:"w-full"},a),{},{onChange:e=>a.onChange(e),options:null===_||void 0===_||null===(l=_.docs)||void 0===l?void 0:l.map(e=>({value:null===e||void 0===e?void 0:e.name})),children:(0,P.jsx)("input",{onFocus:()=>{Z((0,g.cY)({isPagination:!1,text:"",sort:!0,status:!0,stateName:K}))},placeholder:"Enter City",className:"".concat(d.Ol," ").concat(T.PDCity?"border-[1px] ":"border-gray-300")})}))}}),T.PDCity&&(0,P.jsx)("p",{className:"".concat(d.ci),children:T.PDCity.message})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("label",{className:"".concat(d.Q0),children:["Pin Code ",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(i.xI,{control:L,name:"PDPin",rules:{required:"Pin Code is required"},render:e=>{let{field:l}=e;return(0,P.jsx)("input",(0,s.A)((0,s.A)({},l),{},{type:"number",placeholder:"Enter Pin Code",maxLength:6,onInput:e=>{e.target.value.length>6&&(e.target.value=e.target.value.slice(0,6))},className:"".concat(d.Ol," ").concat(T.PDPin?"border-[1px] ":"border-gray-300")}))}}),T.PDPin&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:T.PDPin.message})]})]}),(0,P.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,P.jsxs)("div",{className:"",children:[(0,P.jsxs)("label",{className:"".concat(d.Q0),children:["Email",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)("input",(0,s.A)((0,s.A)({type:"email"},V("PDEmail",{required:"Email is required",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:" ".concat(d.Ol," ").concat(T.PDEmail?"border-[1px] ":"border-gray-300"),placeholder:"Enter Email"})),T.PDEmail&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:T.PDEmail.message})]}),(0,P.jsxs)("div",{className:"flex gap-3",children:[(0,P.jsxs)("div",{className:"w-[150px]",children:[(0,P.jsxs)("label",{className:"".concat(d.Q0),children:["code",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)(i.xI,{control:L,name:"PDmobileCode",rules:{required:"code is required"},render:e=>{let{field:l}=e;return(0,P.jsx)(y.A,{field:l,errors:T})}}),T.PDmobileCode&&(0,P.jsx)("p",{className:"".concat(d.ci),children:T.PDmobileCode.message})]}),(0,P.jsxs)("div",{className:"w-full",children:[(0,P.jsxs)("label",{className:"".concat(d.Q0),children:["Mobile No",(0,P.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,P.jsx)("input",(0,s.A)((0,s.A)({type:"number"},V("PDMobileNo",{required:"Mobile No is required",minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:" ".concat(d.Ol," ").concat(T.PDMobileNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))}})),T.PDMobileNo&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:T.PDMobileNo.message})]})]})]})]}),(0,P.jsx)("div",{className:"flex justify-between px-3 pb-2",children:(0,P.jsx)("button",{type:"Submit",className:"".concat(d.Wb),children:O?(0,P.jsx)(b.A,{}):"Submit"})})]})]})]})})}}}]);
//# sourceMappingURL=1461.94c3765d.chunk.js.map