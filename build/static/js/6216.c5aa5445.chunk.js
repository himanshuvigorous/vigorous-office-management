"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6216],{26216:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(89379),n=s(65043),l=s(13382),d=s(89073),i=s(20691),o=s(22019),c=s(53913),r=s(10898),u=s(85157),p=s(76399),m=s(46237),A=s(89967),v=s(76191),h=s(60446),x=s.n(h),f=s(39160),g=s(70579);const j=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):[]},k=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},y=e=>{var t,s;let{currentUser:h}=e;const[y,C]=(0,n.useState)(j("employees")),[Y,b]=(0,n.useState)(j("tasks")),[M,w]=(0,n.useState)(!1),[D,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=j("employees"),t=j("tasks");C(e),b(t)},[]);const S=e=>{const t=Y.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{approved:!0,status:"Approved"}):t);b(t),k("tasks",t),o.Ay.success("Task approved successfully!"),w(!1)},T=e=>{const t=Y.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{approved:!1,status:"Rejected"}):t),s=Y.find(t=>t.id===e);if(s){const e={id:Date.now(),title:"Revision: ".concat(s.title),description:s.description,assignedTo:s.assignedTo,assignedBy:s.assignedBy,dueDate:x()().add(1,"day").format("YYYY-MM-DD"),status:"Pending",createdAt:x()().format("YYYY-MM-DD HH:mm:ss"),completedAt:null,approved:null};t.push(e),o.Ay.warning("New revision task created!")}b(t),k("tasks",t),o.Ay.success("Task rejected!"),w(!1)},B=[{title:"Title",dataIndex:"title",key:"title"},{title:"Assigned To",dataIndex:"assignedTo",key:"assignedTo",render:e=>{const t=y.find(t=>t.id===e);return t?t.name:"Unknown"}},{title:"Assigned By",dataIndex:"assignedBy",key:"assignedBy",render:e=>{const t=y.find(t=>t.id===e);return t?t.name:"Unknown"}},{title:"Status",dataIndex:"status",key:"status",render:e=>{let t="Completed"===e?"purple":"orange";return(0,g.jsx)(p.A,{color:t,children:e})}},{title:"Completed At",dataIndex:"completedAt",key:"completedAt",render:e=>e?x()(e).format("MMM D, YYYY HH:mm"):"-"},{title:"Actions",key:"actions",render:(e,t)=>(0,g.jsxs)(r.A,{children:[(0,g.jsx)(l.Ay,{icon:(0,g.jsx)(v.A,{}),onClick:()=>(I(t),void w(!0)),children:"View"}),(0,g.jsx)(l.Ay,{type:"primary",icon:(0,g.jsx)(m.A,{}),onClick:()=>S(t.id),disabled:"Completed"!==t.status,children:"Approve"}),(0,g.jsx)(l.Ay,{danger:!0,icon:(0,g.jsx)(A.A,{}),onClick:()=>T(t.id),disabled:"Completed"!==t.status,children:"Reject"})]})}];return(0,g.jsx)(f.A,{children:(0,g.jsxs)("div",{className:"task-approval",children:[(0,g.jsx)(d.A,{title:"Task Approval",children:(0,g.jsx)(u.A,{dataSource:Y.filter(e=>"Completed"===e.status),columns:B,rowKey:"id",pagination:{pageSize:10}})}),(0,g.jsx)(c.A,{title:"Task Details",visible:M,onCancel:()=>w(!1),footer:[(0,g.jsx)(l.Ay,{onClick:()=>w(!1),children:"Close"},"back"),(0,g.jsx)(l.Ay,{type:"primary",icon:(0,g.jsx)(m.A,{}),onClick:()=>S(null===D||void 0===D?void 0:D.id),disabled:"Completed"!==(null===D||void 0===D?void 0:D.status),children:"Approve"},"approve"),(0,g.jsx)(l.Ay,{danger:!0,icon:(0,g.jsx)(A.A,{}),onClick:()=>T(null===D||void 0===D?void 0:D.id),disabled:"Completed"!==(null===D||void 0===D?void 0:D.status),children:"Reject"},"reject")],children:D&&(0,g.jsxs)(i.A,{bordered:!0,column:1,children:[(0,g.jsx)(i.A.Item,{label:"Title",children:D.title}),(0,g.jsx)(i.A.Item,{label:"Description",children:D.description}),(0,g.jsx)(i.A.Item,{label:"Assigned To",children:(null===(t=y.find(e=>e.id===D.assignedTo))||void 0===t?void 0:t.name)||"Unknown"}),(0,g.jsx)(i.A.Item,{label:"Assigned By",children:(null===(s=y.find(e=>e.id===D.assignedBy))||void 0===s?void 0:s.name)||"Unknown"}),(0,g.jsx)(i.A.Item,{label:"Due Date",children:x()(D.dueDate).format("MMM D, YYYY")}),(0,g.jsx)(i.A.Item,{label:"Status",children:(0,g.jsx)(p.A,{color:"Completed"===D.status?"purple":"orange",children:D.status})}),(0,g.jsx)(i.A.Item,{label:"Completed At",children:D.completedAt?x()(D.completedAt).format("MMM D, YYYY HH:mm"):"-"})]})})]})})}},46237:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(58168),n=s(65043);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var d=s(22172),i=function(e,t){return n.createElement(d.A,(0,a.A)({},e,{ref:t,icon:l}))};const o=n.forwardRef(i)},89967:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(58168),n=s(65043);const l={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var d=s(22172),i=function(e,t){return n.createElement(d.A,(0,a.A)({},e,{ref:t,icon:l}))};const o=n.forwardRef(i)}}]);
//# sourceMappingURL=6216.c5aa5445.chunk.js.map