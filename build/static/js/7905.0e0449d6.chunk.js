"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7905],{67905:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var l=n(89379),a=n(24858),o=n(83003),i=n(15187),r=n(65043),d=n(31744),s=n(39160),c=n(65512),u=n(97326),p=n(56597),v=n(58168);const m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};var h=n(22172),x=function(e,t){return r.createElement(h.A,(0,v.A)({},e,{ref:t,icon:m}))};const f=r.forwardRef(x);var y=n(98139),g=n.n(y),b=n(64467),w=n(5544),j=n(53986),N=n(28678),A=n(25001),D=n(48060);function C(e,t){var n=e.disabled,l=e.prefixCls,a=e.character,o=e.characterRender,i=e.index,d=e.count,s=e.value,c=e.allowHalf,u=e.focused,p=e.onHover,v=e.onClick,m=i+1,h=new Set([l]);0===s&&0===i&&u?h.add("".concat(l,"-focused")):c&&s+.5>=m&&s<m?(h.add("".concat(l,"-half")),h.add("".concat(l,"-active")),u&&h.add("".concat(l,"-focused"))):(m<=s?h.add("".concat(l,"-full")):h.add("".concat(l,"-zero")),m===s&&u&&h.add("".concat(l,"-focused")));var x="function"===typeof a?a(e):a,f=r.createElement("li",{className:g()(Array.from(h)),ref:t},r.createElement("div",{onClick:n?null:function(e){v(e,i)},onKeyDown:n?null:function(e){e.keyCode===A.A.ENTER&&v(e,i)},onMouseMove:n?null:function(e){p(e,i)},role:"radio","aria-checked":s>i?"true":"false","aria-posinset":i+1,"aria-setsize":d,tabIndex:n?-1:0},r.createElement("div",{className:"".concat(l,"-first")},x),r.createElement("div",{className:"".concat(l,"-second")},x)));return o&&(f=o(f,e)),f}const S=r.forwardRef(C);var I=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","keyboard","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function k(e,t){var n=e.prefixCls,l=void 0===n?"rc-rate":n,a=e.className,o=e.defaultValue,i=e.value,d=e.count,s=void 0===d?5:d,c=e.allowHalf,u=void 0!==c&&c,p=e.allowClear,m=void 0===p||p,h=e.keyboard,x=void 0===h||h,f=e.character,y=void 0===f?"\u2605":f,C=e.characterRender,k=e.disabled,F=e.direction,T=void 0===F?"ltr":F,R=e.tabIndex,O=void 0===R?0:R,L=e.autoFocus,E=e.onHoverChange,_=e.onChange,H=e.onFocus,P=e.onBlur,B=e.onKeyDown,Y=e.onMouseLeave,M=(0,j.A)(e,I),V=function(){var e=r.useRef({});return[function(t){return e.current[t]},function(t){return function(n){e.current[t]=n}}]}(),z=(0,w.A)(V,2),K=z[0],J=z[1],G=r.useRef(null),q=function(){var e;k||(null===(e=G.current)||void 0===e||e.focus())};r.useImperativeHandle(t,function(){return{focus:q,blur:function(){var e;k||(null===(e=G.current)||void 0===e||e.blur())}}});var U=(0,N.A)(o||0,{value:i}),W=(0,w.A)(U,2),Q=W[0],X=W[1],Z=(0,N.A)(null),$=(0,w.A)(Z,2),ee=$[0],te=$[1],ne=function(e,t){var n="rtl"===T,l=e+1;if(u){var a=K(e),o=function(e){var t=function(e){var t,n,l=e.ownerDocument,a=l.body,o=l&&l.documentElement,i=e.getBoundingClientRect();return t=i.left,n=i.top,{left:t-=o.clientLeft||a.clientLeft||0,top:n-=o.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,l=n.defaultView||n.parentWindow;return t.left+=function(e){var t=e.pageXOffset,n="scrollLeft";if("number"!==typeof t){var l=e.document;"number"!==typeof(t=l.documentElement[n])&&(t=l.body[n])}return t}(l),t.left}(a),i=a.clientWidth;(n&&t-o>i/2||!n&&t-o<i/2)&&(l-=.5)}return l},le=function(e){X(e),null===_||void 0===_||_(e)},ae=r.useState(!1),oe=(0,w.A)(ae,2),ie=oe[0],re=oe[1],de=r.useState(null),se=(0,w.A)(de,2),ce=se[0],ue=se[1],pe=function(e,t){var n=ne(t,e.pageX);n!==ee&&(ue(n),te(null)),null===E||void 0===E||E(n)},ve=function(e){k||(ue(null),te(null),null===E||void 0===E||E(void 0)),e&&(null===Y||void 0===Y||Y(e))},me=function(e,t){var n=ne(t,e.pageX),l=!1;m&&(l=n===Q),ve(),le(l?0:n),te(l?n:null)};r.useEffect(function(){L&&!k&&q()},[]);var he=new Array(s).fill(0).map(function(e,t){return r.createElement(S,{ref:J(t),index:t,count:s,disabled:k,prefixCls:"".concat(l,"-star"),allowHalf:u,value:null===ce?Q:ce,onClick:me,onHover:pe,key:e||t,character:y,characterRender:C,focused:ie})}),xe=g()(l,a,(0,b.A)((0,b.A)({},"".concat(l,"-disabled"),k),"".concat(l,"-rtl"),"rtl"===T));return r.createElement("ul",(0,v.A)({className:xe,onMouseLeave:ve,tabIndex:k?-1:O,onFocus:k?null:function(){re(!0),null===H||void 0===H||H()},onBlur:k?null:function(){re(!1),null===P||void 0===P||P()},onKeyDown:k?null:function(e){var t=e.keyCode,n="rtl"===T,l=u?.5:1;x&&(t===A.A.RIGHT&&Q<s&&!n?(le(Q+l),e.preventDefault()):t===A.A.LEFT&&Q>0&&!n||t===A.A.RIGHT&&Q>0&&n?(le(Q-l),e.preventDefault()):t===A.A.LEFT&&Q<s&&n&&(le(Q+l),e.preventDefault())),null===B||void 0===B||B(e)},ref:G},(0,D.A)(M,{aria:!0,data:!0,attr:!0})),he)}const F=r.forwardRef(k);var T=n(35296),R=n(96651),O=n(43944),L=n(94414),E=n(78855),_=n(78446);const H=e=>{const{componentCls:t}=e;return{["".concat(t,"-star")]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:"all ".concat(e.motionDurationMid,", outline 0s"),"&:hover":{transform:e.starHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:"".concat((0,O.zA)(e.lineWidth)," dashed ").concat(e.starColor),transform:e.starHoverScale}},"&-first, &-second":{color:e.starBg,transition:"all ".concat(e.motionDurationMid),userSelect:"none"},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},["&-half ".concat(t,"-star-first, &-half ").concat(t,"-star-second")]:{opacity:1},["&-half ".concat(t,"-star-first, &-full ").concat(t,"-star-second")]:{color:"inherit"}}}},P=e=>({["&-rtl".concat(e.componentCls)]:{direction:"rtl"}}),B=(0,E.OF)("Rate",e=>(e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,L.dF)(e)),{display:"inline-block",margin:0,padding:0,color:e.starColor,fontSize:e.starSize,lineHeight:1,listStyle:"none",outline:"none",["&-disabled".concat(t," ").concat(t,"-star")]:{cursor:"default","> div:hover":{transform:"scale(1)"}}}),H(e)),P(e))}})((0,_.oX)(e,{})),e=>({starColor:e.yellow6,starSize:.5*e.controlHeightLG,starHoverScale:"scale(1.1)",starBg:e.colorFillContent}));var Y=n(78440),M=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n};const V=r.forwardRef((e,t)=>{const{prefixCls:n,className:l,rootClassName:a,style:o,tooltips:i,character:d=r.createElement(f,null),disabled:s}=e,c=M(e,["prefixCls","className","rootClassName","style","tooltips","character","disabled"]),{getPrefixCls:u,direction:p,rate:v}=r.useContext(T.QO),m=u("rate",n),[h,x,y]=B(m),b=Object.assign(Object.assign({},null===v||void 0===v?void 0:v.style),o),w=r.useContext(Y.A),j=null!==s&&void 0!==s?s:w;return h(r.createElement(F,Object.assign({ref:t,character:d,characterRender:(e,t)=>{let{index:n}=t;return i?r.createElement(R.A,{title:i[n]},e):e},disabled:j},c,{className:g()(l,a,x,y,null===v||void 0===v?void 0:v.className),style:b,prefixCls:m,direction:p})))});const z=V;var K=n(53913),J=(n(86178),n(60446)),G=n.n(J),q=n(78227),U=n(12106),W=n(42837),Q=n(94084),X=n(69223),Z=n(55971),$=n(50822),ee=n(6720),te=n(37762),ne=n(64857),le=n(11906),ae=n(33007),oe=n(89427),ie=n(70337),re=n(40088),de=n(12208),se=n(70579);const ce=function(){const{control:e,formState:{errors:t},setValue:n,watch:v}=(0,a.mN)(),[m,h]=(0,r.useState)(10),x=(0,o.wA)(),{taskRatingReportList:f,taskRatingReportFunc_loading:y,totalRatingTaskTaskCount:g}=(0,o.d4)(e=>e.reports),{departmentListData:b,loading:w}=(0,o.d4)(e=>e.department),[j,N]=(0,r.useState)([]),[A,D]=(0,r.useState)(!1),{taskTypeList:C,loading:S}=(0,o.d4)(e=>e.taskType),{clientGroupList:I,groupSearchLoading:k}=(0,o.d4)(e=>e.clientGroup),{clientList:F,loading:T}=(0,o.d4)(e=>e.client),{employeList:R}=(0,o.d4)(e=>e.employe),[O,L]=(0,r.useState)(""),E=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),[_,H]=(0,r.useState)(1),[P,B]=(0,r.useState)(""),{branchList:Y}=(0,o.d4)(e=>e.branch),M=(0,a.FH)({control:e,name:"PDCompanyId",defaultValue:""}),V=(0,a.FH)({control:e,name:"PDBranchId",defaultValue:""}),J=(0,a.FH)({control:e,name:"status",defaultValue:""}),ce=(0,a.FH)({control:e,name:"daterange",defaultValue:""}),ue=(0,a.FH)({control:e,name:"employeeId",defaultValue:""}),pe=(0,a.FH)({control:e,name:"startDate",defaultValue:G()().subtract(1,"month")}),ve=(0,a.FH)({control:e,name:"endDate",defaultValue:G()()}),me=(0,a.FH)({control:e,name:"priority",defaultValue:""}),he=(0,a.FH)({control:e,name:"financialYear",defaultValue:""}),xe=(0,a.FH)({control:e,name:"month",defaultValue:""}),fe=(0,a.FH)({control:e,name:"department",defaultValue:""}),ye=(0,a.FH)({control:e,name:"client",defaultValue:""}),ge=(0,a.FH)({control:e,name:"task",defaultValue:""}),be=(0,a.FH)({control:e,name:"groupName",defaultValue:""});(0,r.useEffect)(()=>{const e=setTimeout(()=>{B(O)},500);return()=>{clearTimeout(e)}},[O]);const we=(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1));return e})(),je=["January","February","March","April","May","June","July","August","September","October","November","December"],Ne=["Jan-Mar","Apr-Jun","Jul-Sep","Oct-Dec"],Ae=[...je,...Ne],De=function(){return{currentPage:_,pageSize:m,reqPayload:{text:P,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?M:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,directorId:"",branchId:"company"===(null===E||void 0===E?void 0:E.userType)||"admin"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType)?V:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,departmentIds:[],clientIds:[],employeIds:[],taskTypeIds:[],groupIds:[],startDate:pe?G()(pe).format("YYYY-MM-DD"):"",endDate:ve?G()(ve).format("YYYY-MM-DD"):"",dateRange:ce,status:J,priority:me,monthName:je.find(e=>e==xe)?xe:"",monthQuaters:Ne.find(e=>e==xe)?xe:"",financialYear:he,departmentId:fe,clientId:ye,employeId:ue,taskTypeId:ge,groupId:be}}};(0,r.useEffect)(()=>{Se(P)},[_,P,m]);const Ce=()=>{x((0,W.qV)({companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?M:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:["admin","company","companyDirector"].includes(null===E||void 0===E?void 0:E.userType)?V:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,departmentId:"",directorId:"",text:"",sort:!0,status:!0,isPagination:!1,isBranch:!0,isDirector:!1}))},Se=()=>{x((0,U.nR)(De(!0)))};(0,r.useEffect)(()=>{},[]),(0,r.useEffect)(()=>{"company"!==(null===E||void 0===E?void 0:E.userType)&&"companyDirector"!==(null===E||void 0===E?void 0:E.userType)||x((0,d.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?M:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId})),n("startDate",G()().subtract(1,"month")),n("endDate",G()())},[]);const Ie=async()=>{Se()},ke=[{key:"1",label:(0,se.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,se.jsxs)("div",{className:"bg-[#ececec] space-y-1",children:[(0,se.jsxs)("div",{className:"sm:flex  grid grid-cols-1  gap-2 sm:flex-wrap text-[14px]",children:[("admin"===(null===E||void 0===E?void 0:E.userType)||"company"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType))&&(0,se.jsxs)("div",{className:"",children:[(0,se.jsx)(a.xI,{name:"PDBranchId",control:e,render:e=>{let{field:t}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},t),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,se.jsx)(c.A.Option,{value:"",children:"Select Branch"}),null===Y||void 0===Y?void 0:Y.map(e=>(0,se.jsxs)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDBranchId&&(0,se.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,se.jsxs)("div",{className:"",children:[(0,se.jsx)(a.xI,{name:"employeeId",control:e,render:e=>{let{field:t}=e;return(0,se.jsx)(c.A,{allowClear:!0,className:"inputAntdMultiSelectClassNameFilterReport ",placeholder:"Please select employee",onFocus:Ce,options:null===R||void 0===R?void 0:R.map(e=>({value:e._id,label:e.fullName})),value:t.value||[],onChange:e=>t.onChange(e)})}}),t.employeeId&&(0,se.jsx)("p",{className:"text-red-500 text-sm",children:t.employeeId.message})]}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{name:"status",control:e,rules:{},render:e=>{let{field:t}=e;return(0,se.jsx)(c.A,(0,l.A)((0,l.A)({},t),{},{mode:"multiple",allowClear:!0,className:"inputAntdMultiSelectClassNameFilterReport",placeholder:"Please select Task Status",options:null===le.l0||void 0===le.l0?void 0:le.l0.map(e=>({value:e,label:e})),value:t.value||[],onChange:e=>t.onChange(e)}))}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{name:"priority",control:e,rules:{},render:e=>{let{field:t}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},t),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Priority",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,se.jsx)(c.A.Option,{value:"",children:"Select Priority"}),null===le.FQ||void 0===le.FQ?void 0:le.FQ.map(e=>(0,se.jsx)(c.A.Option,{value:e,children:e}))]}))}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{control:e,name:"financialYear",rules:{required:"Financial year is required"},render:e=>{let{field:t}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},t),{},{placeholder:"Select Financial year",className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,se.jsx)(c.A.Option,{value:"",children:"Select Financial year"}),we.map((e,t)=>(0,se.jsx)(c.A.Option,{value:e,children:e},t))]}))}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{control:e,name:"month",render:e=>{let{field:t}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},t),{},{placeholder:"Select month ",className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,se.jsx)(c.A.Option,{value:"",children:"Select month "}),Ae.map((e,t)=>(0,se.jsx)(c.A.Option,{value:e,children:e},t))]}))}})}),(0,se.jsx)("div",{className:"",children:(0,se.jsx)(a.xI,{name:"department",control:e,render:e=>{var t;let{field:n}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{x((0,ae.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?M:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:["admin","company","companyDirector"].includes(null===E||void 0===E?void 0:E.userType)?V:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId}))},onChange:e=>{n.onChange(e)},placeholder:"Select Department",children:[(0,se.jsx)(c.A.Option,{value:"",children:"Select Department"}),w?(0,se.jsx)(c.A.Option,{disabled:!0,children:(0,se.jsx)(oe.A,{})}):null===(t=(0,i._o)(b))||void 0===t?void 0:t.map(e=>(0,se.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{name:"client",control:e,render:e=>{var t;let{field:n}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{x((0,ie.Aq)({companyId:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:"company"===(null===E||void 0===E?void 0:E.userType)||"admin"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType)?v("PDBranchId"):"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,groupId:"",directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1}))},onChange:e=>{n.onChange(e)},placeholder:"Select client",children:[(0,se.jsx)(c.A.Option,{value:"",children:" Select Client"}),T?(0,se.jsx)(c.A.Option,{disabled:!0,children:(0,se.jsx)(oe.A,{})}):null===(t=(0,i._o)(F))||void 0===t?void 0:t.map((e,t)=>(0,se.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{control:e,name:"task",render:e=>{var t;let{field:n}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},n),{},{defaultValue:"",onFocus:()=>{x((0,re.mY)({companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?v("PDCompanyId"):"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:"company"===(null===E||void 0===E?void 0:E.userType)||"admin"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType)?v("PDBranchId"):"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,departmentId:"",directorId:"",text:"",sort:!0,status:!0,isPagination:!1}))},className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,se.jsx)(c.A.Option,{value:"",children:" Select Task Name"}),S?(0,se.jsx)(c.A.Option,{disabled:!0,children:(0,se.jsx)(oe.A,{})}):null===(t=(0,i._o)(C))||void 0===t?void 0:t.map((e,t)=>(0,se.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]}))}})}),(0,se.jsx)("div",{className:"",children:(0,se.jsx)(a.xI,{name:"groupName",control:e,render:e=>{var t;let{field:n}=e;return(0,se.jsxs)(c.A,(0,l.A)((0,l.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,placeholder:"Select Group",onFocus:()=>{x((0,de.J_)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?M:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:["admin","company","companyDirector"].includes(null===E||void 0===E?void 0:E.userType)?V:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,groupId:""}))},onChange:e=>n.onChange(e),filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,se.jsx)(c.A.Option,{value:"",children:"Select Group"}),k?(0,se.jsx)(c.A.Option,{disabled:!0,children:(0,se.jsx)(oe.A,{})}):null===(t=(0,i._o)(I))||void 0===t?void 0:t.map(e=>(0,se.jsxs)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName," (",null===e||void 0===e?void 0:e.groupName,")"]},null===e||void 0===e?void 0:e._id))]}))}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{name:"startDate",control:e,render:e=>{let{field:n}=e;return(0,se.jsx)(Q.A,{report:!0,defaultValue:G()().subtract(1,"month"),size:"middle",field:n,errors:t})}})}),(0,se.jsx)("div",{children:(0,se.jsx)(a.xI,{name:"endDate",control:e,render:e=>{let{field:n}=e;return(0,se.jsx)(Q.A,{report:!0,defaultValue:G()(),size:"middle",field:n,errors:t})}})})]}),(0,se.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,se.jsx)("button",{onClick:()=>{n("PdCompanyId",""),n("PDBranchId",""),n("status",""),n("employeeId",""),n("daterange",""),n("shift",""),n("workType",""),n("startDate",G()().subtract(1,"month")),n("endDate",G()()),n("priority",""),n("financialYear",""),n("month",""),n("department",""),n("client",""),n("task",""),n("groupName",""),Ie()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,se.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,se.jsx)("button",{onClick:()=>{Ie()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,se.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,se.jsx)(s.A,{onChange:e=>{L(e)},children:(0,se.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,se.jsxs)("div",{className:"",children:[(0,se.jsx)(u.A,{className:"custom-collapse",items:ke,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,se.jsx)(ee.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,se.jsxs)("div",{className:"space-y-1.5  sm:flex grid grid-cols-1 justify-between items-center",children:[(0,se.jsxs)("div",{className:"flex py-1 items-center gap-2",children:[(0,se.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,se.jsx)(c.A,{id:"pageSize",value:m,onChange:e=>{h(Number(e)),H(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,se.jsx)(c.A.Option,{value:e,children:e},e))})]}),(0,se.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,se.jsx)("button",{onClick:()=>{(async()=>{var e,t;const n=new te.uE({orientation:"landscape",unit:"pt"});n.setFontSize(16);const l=await(null===$.K||void 0===$.K?void 0:$.K.taskRatingReportFunc(De(!1)));if(!f&&!l)return;const a=null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var n,l,a,o;return[t+1,(null===e||void 0===e||null===(n=e.clientData)||void 0===n?void 0:n.fullName)||"-",(null===e||void 0===e?void 0:e.taskName)||"-",null!==e&&void 0!==e&&e.createdAt?G()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm A"):"-",(null===e||void 0===e||null===(l=e.ratingData)||void 0===l?void 0:l.rating)||"-",null===e||void 0===e||null===(a=e.ratingData)||void 0===a?void 0:a.feedback,(null===e||void 0===e||null===(o=e.departmentData)||void 0===o?void 0:o.name)||"-",Array.isArray(null===e||void 0===e?void 0:e.employeData)?e.employeData.map(e=>(null===e||void 0===e?void 0:e.fullName)||"-").join(", "):[]||0]});(0,ne.Ay)(n,{startY:40,head:[["S.No."," Client Name","Task Name","FeedBack date","Rating","Client Comments","Department","Employee Name"]],body:a,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),n.save("TaskRatingReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,se.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,se.jsx)("button",{onClick:()=>{(async()=>{var e,t;const n=new X.Workbook,l=n.addWorksheet("TaskRatingReport");l.columns=[{header:"S.No.",key:"sno",width:10},{header:"Client Name",key:"clientName",width:30},{header:"Task Name",key:"taskName",width:30},{header:"FeedBack Date",key:"feedbackDate",width:30},{header:"Rating",key:"rating",width:15},{header:"Client Comment",key:"feedback",width:30},{header:"Department",key:"department",width:25},{header:"Employee Name",key:"name",width:30}],l.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const a=await(null===$.K||void 0===$.K?void 0:$.K.taskRatingReportFunc(De(!1)));if(!f&&!a)return;const o=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var n,l,a,o;return{sno:t+1,clientName:(null===e||void 0===e||null===(n=e.clientData)||void 0===n?void 0:n.fullName)||"-",taskName:(null===e||void 0===e?void 0:e.taskName)||"-",feedbackDate:null!==e&&void 0!==e&&e.createdAt?G()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm A"):"-",rating:(null===e||void 0===e||null===(l=e.ratingData)||void 0===l?void 0:l.rating)||"-",feedback:null===e||void 0===e||null===(a=e.ratingData)||void 0===a?void 0:a.feedback,department:(null===e||void 0===e||null===(o=e.departmentData)||void 0===o?void 0:o.name)||"-",name:Array.isArray(null===e||void 0===e?void 0:e.employeData)?e.employeData.map(e=>(null===e||void 0===e?void 0:e.fullName)||"-").join(", "):[]||0}});null===o||void 0===o||o.forEach(e=>{l.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),l.autoFilter={from:"A1",to:"I1"},n.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="TaskRatingReport.xlsx",n.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,se.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,se.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,se.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,se.jsx)("thead",{children:(0,se.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center w-[5%]",children:"S.No."}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Client Name"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Task Name"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"FeedBack Date"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Rating"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Client Comments"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Department"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center",children:"Employee Name"})]})}),y?(0,se.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,se.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:(0,se.jsx)(Z.A,{})})}):(0,se.jsx)("tbody",{children:f&&(null===f||void 0===f?void 0:f.length)>0?null===f||void 0===f?void 0:f.map((e,t)=>{var n,l,a,o,i,r,d;return(0,se.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:t+1+(_-1)*m}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(null===e||void 0===e||null===(n=e.clientData)||void 0===n?void 0:n.fullName)||"-"}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(null===e||void 0===e?void 0:e.taskName)||"-"}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:G()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(0,se.jsx)(p.A,{gap:"middle",vertical:!0,children:(0,se.jsx)(z,{disabled:!0,defaultValue:(null===e||void 0===e||null===(l=e.ratingData)||void 0===l?void 0:l.rating)||0})})}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(null===e||void 0===e||null===(a=e.ratingData)||void 0===a?void 0:a.feedback)||"-"}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(null===e||void 0===e||null===(o=e.departmentData)||void 0===o?void 0:o.name)||"-"}),(0,se.jsx)("td",{className:"whitespace-nowrap text-center border-none p-2",children:(0,se.jsxs)("div",{className:"flex gap-2",children:[(0,se.jsxs)("div",{children:[" ",null===e||void 0===e||null===(i=e.employeData[0])||void 0===i?void 0:i.fullName]})," ",(null===e||void 0===e||null===(r=e.employeData)||void 0===r?void 0:r.length)>1?(0,se.jsxs)("div",{className:"text-header flex justify-center items-center gap-1 rounded-full  text-semibold text-sm",children:[" ","+"," ",(0,se.jsxs)("div",{onClick:()=>{(e=>{N(e||[]),D(!0)})(null===e||void 0===e?void 0:e.employeData)},className:"border justify-center items-center flex h-7 w-7 bg-header  text-white text-[12px] rounded-full ",children:[(null===e||void 0===e||null===(d=e.employeData)||void 0===d?void 0:d.length)-1," "]})]}):""]})})]})}):(0,se.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,se.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,se.jsx)(K.A,{className:"antmodalclassName !w-[60%] !h-[50%]",title:"Employees",open:A,onCancel:()=>D(!1),footer:null,children:(0,se.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,se.jsx)("thead",{children:(0,se.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Employee Name"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Email"}),(0,se.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mobile"})]})}),0==j.length?(0,se.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,se.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,se.jsx)(Z.A,{})})}):(0,se.jsx)("tbody",{children:j&&(null===j||void 0===j?void 0:j.length)>0?null===j||void 0===j?void 0:j.map((e,t)=>{var n,l;return(0,se.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,se.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1}),(0,se.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,se.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,se.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.code)||"-"," ",(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.number)||"-"]})]})}):(0,se.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,se.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})]}),(0,se.jsx)(q.A,{totalCount:g,pageSize:m,currentPage:_,onChange:e=>{H(e)}})]})})}}}]);
//# sourceMappingURL=7905.0e0449d6.chunk.js.map