"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6544],{66544:(e,l,a)=>{a.r(l),a.d(l,{default:()=>N});var d=a(89379),i=a(24858),s=a(83003),o=a(73216),n=a(15187),r=a(65043),c=a(65512),t=a(39160),u=a(17995),m=a(89427),v=a(31744),x=a(56659),h=a(42837),p=(a(94084),a(10405)),y=a(27759),j=(a(86178),a(70579));const{Option:g}=c.A;const N=function(){const{loading:e}=(0,s.d4)(e=>e.LeadmanagementFeature),{LeadCategoryListData:l}=(0,s.d4)(e=>e.leadCategory),{register:a,handleSubmit:N,control:b,formState:{errors:I}}=(0,i.mN)(),A=(0,s.wA)(),C=(0,o.Zp)(),f=JSON.parse(localStorage.getItem("user_info_".concat(n.AU))),{loading:S,employeList:D}=(0,s.d4)(e=>e.employe),{branchList:L,branchListloading:T}=(0,s.d4)(e=>e.branch),w=(0,i.FH)({control:b,name:"PDBranchId",defaultValue:""}),_=(0,i.FH)({control:b,name:"CategoryId",defaultValue:""});return(0,r.useEffect)(()=>{"company"!==(null===f||void 0===f?void 0:f.userType)&&"companyDirector"!==(null===f||void 0===f?void 0:f.userType)||A((0,v.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.companyId}))},[]),(0,r.useEffect)(()=>{(()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isManager:"",isPagination:!1,departmentId:"",designationId:"",companyId:"company"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.companyId,branchId:"company"===(null===f||void 0===f?void 0:f.userType)||"admin"===(null===f||void 0===f?void 0:f.userType)||"companyDirector"===(null===f||void 0===f?void 0:f.userType)?w:"companyBranch"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.branchId,isBranch:!0,isDirector:!0};A((0,h.qV)(e))})(),(()=>{const e={text:"",sort:!0,isPagination:!1,status:"",companyId:"company"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.companyId,branchId:"company"===(null===f||void 0===f?void 0:f.userType)||"admin"===(null===f||void 0===f?void 0:f.userType)||"companyDirector"===(null===f||void 0===f?void 0:f.userType)?w:"companyBranch"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.branchId};A((0,p.jN)(e))})()},[w]),(0,j.jsx)(t.A,{children:(0,j.jsx)("div",{className:"gap-4",children:(0,j.jsxs)("form",{autoComplete:"off",className:"mt-5 md:px-1",onSubmit:N(e=>{const l={companyId:"company"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.companyId,directorId:"companyDirector"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.directorId,branchId:"admin"===(null===f||void 0===f?void 0:f.userType)||"companyDirector"===(null===f||void 0===f?void 0:f.userType)||"company"===(null===f||void 0===f?void 0:f.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===f||void 0===f?void 0:f.userType)?null===f||void 0===f?void 0:f._id:null===f||void 0===f?void 0:f.branchId,mobile:{code:null===e||void 0===e?void 0:e.PDmobileCode,number:null===e||void 0===e?void 0:e.PDmobileno},assignedToId:null===e||void 0===e?void 0:e.employee,leadCategoryId:null===e||void 0===e?void 0:e.CategoryId,leadSubCategoryId:null===e||void 0===e?void 0:e.subcategory,name:null===e||void 0===e?void 0:e.leadName,email:null===e||void 0===e?void 0:e.email,location:null===e||void 0===e?void 0:e.location,remark:null===e||void 0===e?void 0:e.remarks,intrested:null===e||void 0===e?void 0:e.interstedin,source:null===e||void 0===e?void 0:e.source,leadValue:0};A((0,y.K4)(l)).then(e=>{null!==e&&void 0!==e&&e.error||C(-1)})}),children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:[("admin"===(null===f||void 0===f?void 0:f.userType)||"company"===(null===f||void 0===f?void 0:f.userType)||"companyDirector"===(null===f||void 0===f?void 0:f.userType))&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Branch ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(i.xI,{name:"PDBranchId",control:b,rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(c.A,(0,d.A)((0,d.A)({},l),{},{className:"".concat(n.Hy," ").concat(I.PDBranchId?" ":""),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,j.jsx)(c.A.Option,{value:"",children:"Select Branch"}),T?(0,j.jsx)(c.A.Option,{disabled:!0,children:(0,j.jsx)(m.A,{})}):null===L||void 0===L?void 0:L.map(e=>(0,j.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),I.PDBranchId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.PDBranchId.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Lead Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"text"},a("leadName",{required:"Lead Name is required"})),{},{className:" ".concat(n.Ol," ").concat(I.leadName?" ":""," "),placeholder:"Enter Lead Name"})),I.leadName&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.leadName.message})]}),(0,j.jsxs)("div",{className:"flex gap-3 mt-1",children:[(0,j.jsxs)("div",{className:"w-[150px]",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Code"}),(0,j.jsx)(i.xI,{control:b,name:"PDmobileCode",render:e=>{let{field:l}=e;return(0,j.jsx)(x.A,{field:l,errors:I})}}),I.PDmobileCode&&(0,j.jsx)("p",{className:"".concat(n.ci),children:I.PDmobileCode.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Mobile No"}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"number"},a("PDmobileno",{minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:" ".concat(n.Ol," ").concat(I.PDmobileno?" ":""),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))}})),I.PDmobileno&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.PDmobileno.message})]})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Email"}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"text"},a("email",{pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:" ".concat(n.Ol," ").concat(I.email?" ":""),placeholder:"Enter Email"})),I.email&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.email.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Category ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(i.xI,{name:"CategoryId",control:b,rules:{required:"Category is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(c.A,(0,d.A)((0,d.A)({},a),{},{className:"mt-0 ".concat(n.Hy," ").concat((I.CategoryId,"")),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Category",children:[(0,j.jsx)(g,{value:"",children:"Select Category"}),l&&l.length>0&&l.map((e,l)=>(0,j.jsx)(g,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},l))]}))}}),I.CategoryId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.CategoryId.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Sub Category"}),(0,j.jsx)(i.xI,{name:"subcategory",control:b,render:e=>{var a,i,s;let{field:o}=e;return(0,j.jsxs)(c.A,(0,d.A)((0,d.A)({},o),{},{className:"mt-0 ".concat(n.Hy," ").concat((I.subcategory,"")),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Sub Category",children:[(0,j.jsx)(g,{value:"",children:"Select Sub Category"}),((null===l||void 0===l||null===(a=l.find(e=>(null===e||void 0===e?void 0:e._id)==_))||void 0===a?void 0:a.leadSubCategoryData)||[])&&((null===l||void 0===l||null===(i=l.find(e=>(null===e||void 0===e?void 0:e._id)==_))||void 0===i?void 0:i.leadSubCategoryData)||[]).length>0&&((null===l||void 0===l||null===(s=l.find(e=>(null===e||void 0===e?void 0:e._id)==_))||void 0===s?void 0:s.leadSubCategoryData)||[]).map((e,l)=>(0,j.jsx)(g,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},l))]}))}}),I.subcategory&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.subcategory.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Location ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"text"},a("location",{required:"location  is required"})),{},{className:" ".concat(n.Ol," ").concat(I.location?" ":""," "),placeholder:"Enter Location"})),I.location&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.location.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Intersted In ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,d.A)((0,d.A)({type:"text"},a("interstedin",{required:"Intersted In is required"})),{},{className:" ".concat(n.Ol," ").concat(I.interstedin?" ":""," "),placeholder:"Enter Intersted In"})),I.interstedin&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.interstedin.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Source ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(i.xI,{name:"source",control:b,rules:{required:"Source is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(c.A,(0,d.A)((0,d.A)({},l),{},{className:"mt-0 ".concat(n.Hy," ").concat((I.source,"")),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select source",children:[(0,j.jsx)(g,{value:"",children:"Select Source"}),(0,j.jsx)(g,{value:"Call",children:"Call"}),(0,j.jsx)(g,{value:"Organic",children:"Organic"}),(0,j.jsx)(g,{value:"Social Media",children:"Social Media"}),(0,j.jsx)(g,{value:"Compaign",children:"Compaign"})]}))}}),I.source&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.source.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Select employee ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(i.xI,{control:b,name:"employee",rules:{required:"employee is required"},render:e=>{var l;let{field:a}=e;return(0,j.jsxs)(c.A,(0,d.A)((0,d.A)({},a),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(n.Hy," mt-2"),children:[(0,j.jsxs)(c.A.Option,{value:"",selected:!0,children:[" ","Select Employee"]}),S?(0,j.jsx)(c.A.Option,{disabled:!0,children:(0,j.jsx)(m.A,{})}):null===(l=(0,n._o)(D,"fullName"))||void 0===l?void 0:l.map((e,l)=>(0,j.jsx)(c.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),I.employee&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.employee.message})]})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Remark"}),(0,j.jsx)("textarea",(0,d.A)((0,d.A)({rows:4},a("remarks")),{},{className:"".concat(n.Ol," ").concat(I.remarks?"border-red-500":""),placeholder:"Enter Remarks"})),I.remarks&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:I.remarks.message})]}),(0,j.jsx)("div",{className:"flex justify-end ",children:(0,j.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 mt-3 px-4 rounded"),children:e?(0,j.jsx)(u.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=6544.01e2bb9c.chunk.js.map