"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[5270],{45270:(e,s,a)=>{a.r(s),a.d(s,{default:()=>B});var l=a(89379),t=a(65043),c=a(39160),i=a(73216),r=a(83003),n=a(30064),d=a.n(n),o=a(23156),x=a(60184),m=(a(34857),a(24858)),u=a(14118),h=a(47196),p=a(31174),j=a(78227),v=(a(65337),a(15187)),f=a(78729),N=a(86178),b=a.n(N),y=a(55971),g=a(30326),w=a(65512),C=a(12624),A=a(96651),D=a(27980),k=a(83002),S=a(70579);const B=function(){var e,s;const a=(0,i.Zp)(),n=(0,r.wA)(),{register:N,control:B,formState:{errors:O},setValue:_}=(0,m.mN)(),[P,I]=(0,t.useState)([]),[H,z]=(0,t.useState)(""),E=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))),L=null===(e=JSON.parse(localStorage.getItem("user_info_".concat(v.AU))))||void 0===e?void 0:e.userType,{companyList:T}=(0,r.d4)(e=>e.company),{directorLists:R,totalDirectorCount:M}=(0,r.d4)(e=>e.director),[q,F]=(0,t.useState)(1),[U,V]=(0,t.useState)(""),Y=(0,m.FH)({control:B,name:"PDCompanyId",defaultValue:""}),[J,W]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{W(!0),await G(),W(!1)})()},[q,Y,H,U]);const G=async()=>{let e={currentPage:q,pageSize:10,reqPayload:{companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?Y:"company"===L?null===E||void 0===E?void 0:E._id:(null===E||void 0===E?void 0:E.companyId)||"",text:U,status:"true"===H||"false"!==H&&"",sort:!0,isPagination:!0}};try{await n((0,u.Pn)(e))}catch(s){console.error("Error fetching director list:",s),W(!1)}};(0,t.useEffect)(()=>{"admin"===(null===E||void 0===E?void 0:E.userType)&&n((0,f.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,t.useEffect)(()=>{null!==R&&void 0!==R&&R.docs?K():I(null===R||void 0===R?void 0:R.docs)},[null===R||void 0===R?void 0:R.docs]);const K=(e,s)=>{const a=(0,v.Hc)(e,s,null===R||void 0===R?void 0:R.docs);I(a)};return(0,S.jsx)(c.A,{onChange:e=>{V(e)},children:(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,S.jsx)("div",{className:"w-full",children:(0,S.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:["admin"===(null===E||void 0===E?void 0:E.userType)&&(0,S.jsxs)("div",{className:"",children:[(0,S.jsx)(m.xI,{name:"PDCompanyId",control:B,render:e=>{let{field:s}=e;return(0,S.jsxs)(w.A,(0,l.A)((0,l.A)({},s),{},{className:" ".concat(v.Lp),placeholder:"Select Company ",showSearch:!0,children:[(0,S.jsx)(w.A.Option,{value:"",children:"Select Company "}),null===T||void 0===T?void 0:T.map((e,s)=>(0,S.jsx)(w.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},s))]}))}}),O.PDCompanyId&&(0,S.jsx)("p",{className:"text-red-500 text-sm",children:O.PDCompanyId.message})]}),(0,S.jsx)(m.xI,{name:"status",control:B,rules:{required:"status is required"},value:H,render:e=>{let{field:s}=e;return(0,S.jsxs)(w.A,(0,l.A)((0,l.A)({},s),{},{className:" ".concat(v.Lp," \n                         ").concat(O.PDCompanyId?"border-[1px] ":"border-gray-300","\n                          "),placeholder:"Status ",onChange:e=>z(e),showSearch:!0,children:[(0,S.jsx)(w.A.Option,{value:"",children:"All "}),(0,S.jsxs)(w.A.Option,{value:"true",children:["Active"," "]}),(0,S.jsxs)(w.A.Option,{value:"false",children:["InActive"," "]})]}))}})]}),(0,S.jsx)("div",{className:"flex justify-end items-center",children:(0,S.jsx)(A.A,{placement:"topLeft",title:"Create Director",children:(0,S.jsxs)("button",{onClick:()=>{a("/admin/director/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,S.jsx)(o.OiG,{}),(0,S.jsx)("span",{className:"text-[12px]",children:"Add Owner"})]})})})]})}),(0,S.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,S.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,S.jsx)("thead",{className:"",children:(0,S.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize bg-header text-white font-[500] h-[40px]",children:[(0,S.jsx)("th",{className:"tableHead  min-w-[120px] w-[120px]",children:"S.No."}),(0,S.jsx)("th",{className:"tableHead ",children:(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"Owner Name"}),(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("userName","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("userName","desc")})]})]})}),(0,S.jsx)("th",{className:"tableHead ",children:(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"User Name"}),(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("userName","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("userName","desc")})]})]})}),(0,S.jsxs)("th",{className:"tableHead",children:[(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"E-mail"}),(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("email","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("email","desc")})]})]})," "]}),(0,S.jsxs)("th",{className:"tableHead",children:[(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"Mobile"}),(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("mobile.number","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("mobile.number","desc")})]})]})," "]}),(0,S.jsx)("th",{className:"tableHead",children:(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"Address"}),(0,S.jsx)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("addresses.primary.street","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("addresses.primary.street","desc")})]})})]})}),(0,S.jsx)("th",{className:"tableHead",children:(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"Created At"}),(0,S.jsx)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("createdAt","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("createdAt","desc")})]})})]})}),(0,S.jsx)("th",{className:"tableHead",children:(0,S.jsxs)("div",{className:"flex justify-start items-center space-x-1",children:[(0,S.jsx)("span",{children:"Created By"}),(0,S.jsx)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:(0,S.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,S.jsx)(x.Odn,{onClick:()=>K("createdBy","asc")}),(0,S.jsx)(x.BNo,{onClick:()=>K("createdBy","desc")})]})})]})}),(0,S.jsx)("th",{className:"tableHead",children:(0,S.jsx)("div",{className:"flex justify-start items-center space-x-1",children:(0,S.jsx)("span",{children:"Status"})})}),(0,S.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),J?(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:9,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,S.jsx)(y.A,{})})}):(0,S.jsx)("tbody",{children:P&&P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,s)=>{var l,t,c;return(0,S.jsxs)("tr",{className:"border-b-[1px] ".concat(s%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151]"),children:[(0,S.jsx)("td",{className:"tableData",children:s+1+10*(q-1)}),(0,S.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.fullName}),(0,S.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.userName}),(0,S.jsx)("td",{className:"tableData ",children:null===e||void 0===e?void 0:e.email}),(0,S.jsxs)("td",{className:"tableData ",children:[(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)+(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.number)," "]}),(0,S.jsx)("td",{className:"tableData overflow-hidden text-ellipsis max-w-[200px] min-w-[200px]",children:(0,v.M0)(null===e||void 0===e||null===(c=e.addresses)||void 0===c?void 0:c.primary)}),(0,S.jsx)("td",{className:"tableData ",children:null!==e&&void 0!==e&&e.createdAt?b()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"):"-"}),(0,S.jsx)("td",{className:"tableData ",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(0,S.jsx)("td",{className:"tableData",children:(0,S.jsx)(A.A,{placement:"topLeft",title:"".concat(null!==e&&void 0!==e&&e.status?"Click to Inactive":"Click to Active"),children:(0,S.jsx)(C.A,{checked:null===e||void 0===e?void 0:e.status,onChange:()=>{n((0,u.UE)({_id:null===e||void 0===e?void 0:e._id})).then(e=>{null!==e&&void 0!==e&&e.error||G()})},style:{backgroundColor:null!==e&&void 0!==e&&e.status?"#4caf50":"#f44336",transition:"background-color 0.3s ease"},height:20,width:40})})}),(0,S.jsx)("td",{className:"tableData",children:(0,S.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[(0,S.jsx)(A.A,{placement:"topLeft",title:"View Details",children:(0,S.jsx)("button",{onClick:()=>{a("/admin/director/directorView/".concat((0,p.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(x.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),(0,S.jsx)(g.A,{menu:{items:[{key:"edit",label:(0,S.jsxs)("span",{onClick:()=>a("/admin/director/edit/".concat((0,p.w)(null===e||void 0===e?void 0:e._id))),className:"flex items-center text-[#3c8dbc] hover:text-[#337ab7]",children:[(0,S.jsx)(o.Jcp,{className:"mr-2",size:16}),"Edit"]})},{key:"regenerate-password",label:(0,S.jsxs)("span",{onClick:()=>(e=>{d().fire({title:"Regenerate Password",text:"Are you sure to change password of ".concat(null===e||void 0===e?void 0:e.fullName,"?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(s=>{s.isConfirmed&&n((0,f.g5)({_id:null===e||void 0===e?void 0:e._id})).then(e=>{null!==e&&void 0!==e&&e.error?d().fire("Error!","Failed to Password Regenerated Successfully.","error"):d().fire("Password Regenerated!","Password has been Regenerated.","success")})})})(e),className:"flex items-center text-blue-700 hover:text-blue-600",children:[(0,S.jsx)(D.rw_,{className:"mr-2",size:14}),"Regenerate Password"]})},{key:"delete",label:(0,S.jsxs)("span",{onClick:()=>(e=>{let s={_id:e};d().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&n((0,u.Kp)(s)).then(e=>{var s;q>1&&1==(null===R||void 0===R||null===(s=R.docs)||void 0===s?void 0:s.length)?F(Number(q-1)):!e.error&&G()})})})(null===e||void 0===e?void 0:e._id),className:"flex items-center text-red-600 hover:text-red-500",children:[(0,S.jsx)(h.tqC,{className:"mr-2",size:16}),"Delete"]})}]},trigger:["click"],children:(0,S.jsx)(A.A,{placement:"topLeft",title:"More Actions",children:(0,S.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,S.jsx)(k.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})})]},s)}):(0,S.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,S.jsx)("td",{colSpan:9,className:"px-6 py-2 text-center whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===R||void 0===R||null===(s=R.docs)||void 0===s?void 0:s.length)>0&&(0,S.jsx)(j.A,{totalCount:M,pageSize:10,currentPage:q,onChange:e=>{F(e)}})]})})})}},65337:(e,s,a)=>{a.d(s,{A:()=>c});var l=a(91686),t=a(70579);const c=function(){return(0,t.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,t.jsx)(l.A,{size:"large"})})}}}]);
//# sourceMappingURL=5270.4609ebe0.chunk.js.map