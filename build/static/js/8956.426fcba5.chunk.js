"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8956],{98956:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var l=s(89379),i=s(65043),d=s(24858),n=s(83003),t=s(73216),c=s(31174),r=s(15187),o=s(735),u=s(39160),m=s(78729),p=s(16210),h=s(31744),v=s(14118),x=s(57916),f=s(66015),y=s(17995),N=s(65512),g=s(89427),j=s(70579);const b=function(){const{loading:e}=(0,n.d4)(e=>e.timeSlots),{register:a,handleSubmit:s,control:b,setValue:S,getValues:w,formState:{errors:A}}=(0,d.mN)(),I=(0,n.wA)(),k=(0,t.Zp)(),[O,M]=(0,i.useState)([]),[C,T]=(0,i.useState)(""),{userCompanyId:q,userDirectorId:L,userBranchId:E,userEmployeId:H,userDepartmentId:Q,userDesignationId:R,userType:D}=(0,o.A)(),[V,F]=(0,i.useState)(!0),{companyList:_}=(0,n.d4)(e=>e.company),{designationList:Y}=(0,n.d4)(e=>e.designation),{timeSlotsIdEnc:P}=(0,t.g)(),B=(0,c.Yc)(P),{timeSlotsByIdData:W}=(0,n.d4)(e=>e.timeSlots),{departmentListData:X}=(0,n.d4)(e=>e.department),{branchList:Z,branchListloading:z}=(0,n.d4)(e=>e.branch),{directorLists:G}=(0,n.d4)(e=>e.director),[J,K]=(0,i.useState)([]),[U,$]=(0,i.useState)([]),[ee,ae]=(0,i.useState)([]),[se,le]=(0,i.useState)([]),ie=(0,d.FH)({control:b,name:"companyId",defaultValue:q}),de=(0,d.FH)({control:b,name:"directorId",defaultValue:L}),ne=(0,d.FH)({control:b,name:"branchId",defaultValue:E}),te=(0,d.FH)({control:b,name:"departmentId",defaultValue:Q});return(0,d.FH)({control:b,name:"designationId",defaultValue:R}),(0,d.FH)({control:b,name:"employeId",defaultValue:H}),(0,i.useEffect)(()=>{(async()=>{try{"admin"===D&&await I((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}));const e={_id:B};await I((0,x.R9)(e)).then(e=>{F(!1)})}catch(e){console.error("Error fetching data:",e)}})()},[]),(0,i.useEffect)(()=>{(async()=>{const e=(await(async()=>[{dayName:"Monday",label:"Monday"},{dayName:"Tuesday",label:"Tuesday"},{dayName:"Wednesday",label:"Wednesday"},{dayName:"Thursday",label:"Thursday"},{dayName:"Friday",label:"Friday"},{dayName:"Saturday",label:"Saturday"}])()).map(e=>({value:e.dayName,label:e.dayName}));K(e)})()},[]),(0,i.useEffect)(()=>{var e;if(null!==W&&void 0!==W&&null!==(e=W.data)&&void 0!==e&&e.workingDays){var a;const e=Object.values(null===W||void 0===W||null===(a=W.data)||void 0===a?void 0:a.workingDays).map(e=>({value:e,label:e}));$(e)}},[W]),(0,i.useEffect)(()=>{(async()=>{const e=(await(async()=>[{weekCount:1},{weekCount:2},{weekCount:3},{weekCount:4},{weekCount:5}])()).map(e=>({value:e.weekCount,label:"Week ".concat(e.weekCount)}));ae(e)})()},[]),(0,i.useEffect)(()=>{var e,a;const s=null===W||void 0===W||null===(e=W.data)||void 0===e||null===(a=e.weekOffRules)||void 0===a?void 0:a.saturdaysOff,l=null===s||void 0===s?void 0:s.map(e=>({value:e,label:"Week ".concat(e)}));le(l)},[W]),(0,i.useEffect)(()=>{"admin"===D&&I((0,m.Ar)({userType:"company",text:"",status:!0}))},[]),(0,i.useEffect)(()=>{(ie&&"company"===D||ie&&"admin"===D)&&I((0,h.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:ie}))},[ie]),(0,i.useEffect)(()=>{(ie&&"company"===D||"admin"===D)&&I((0,v.HX)({text:"",sort:!0,status:!0,isPagination:!1,companyId:ie}))},[ie]),(0,i.useEffect)(()=>{te&&I((0,p.EF)({departmentId:te,text:"",sort:!0,status:!0,isPagination:!1}))},[te]),(0,i.useEffect)(()=>{var e,a,s,l,i,d,n,t,c,r,o,u,m,p,h;W&&null!==W&&void 0!==W&&W.data&&(S("companyId",null===W||void 0===W||null===(e=W.data)||void 0===e?void 0:e.companyId),S("departmentName",null===W||void 0===W||null===(a=W.data)||void 0===a?void 0:a.name),S("directorId",null===W||void 0===W||null===(s=W.data)||void 0===s?void 0:s.directorId),S("branchId",null===W||void 0===W||null===(l=W.data)||void 0===l?void 0:l.branchId),S("shiftName",null===W||void 0===W||null===(i=W.data)||void 0===i?void 0:i.shiftName),S("lateMIN",null===W||void 0===W||null===(d=W.data)||void 0===d?void 0:d.lateMIN),S("lunchMin",null===W||void 0===W||null===(n=W.data)||void 0===n?void 0:n.lunchMin),S("skipHRS",null===W||void 0===W||null===(t=W.data)||void 0===t?void 0:t.skipHRS),S("openingTime",null===W||void 0===W||null===(c=W.data)||void 0===c?void 0:c.openingTime),S("closingTime",null===W||void 0===W||null===(r=W.data)||void 0===r?void 0:r.closingTime),S("workingDaysvalue",null===W||void 0===W||null===(o=W.data)||void 0===o?void 0:o.workingDaysvalue),S("weekoffvalue",null===W||void 0===W||null===(u=W.data)||void 0===u?void 0:u.weekoffvalue),S("sundaysOff",null!==W&&void 0!==W&&null!==(m=W.data)&&void 0!==m&&null!==(p=m.weekOffRules)&&void 0!==p&&p.sundaysOff?"Yes":"No"),S("isApplySandwich",null!==W&&void 0!==W&&null!==(h=W.data)&&void 0!==h&&h.isApplySandwich?"Yes":"No"))},[W]),(0,j.jsx)(u.A,{children:(0,j.jsx)("div",{className:"gap-4",children:(0,j.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:s(e=>{const a=U.map(e=>e.value),s=se.map(e=>e.value),l={_id:B,companyId:ie,directorId:de,branchId:ne,shiftName:null===e||void 0===e?void 0:e.shiftName,skipHRS:+(null===e||void 0===e?void 0:e.skipHRS),lunchMin:+(null===e||void 0===e?void 0:e.lunchMin),lateMIN:+(null===e||void 0===e?void 0:e.lateMIN),workingDays:a,weekOffRules:{sundaysOff:"Yes"==(null===e||void 0===e?void 0:e.sundaysOff),saturdaysOff:s},openingTime:String(null===e||void 0===e?void 0:e.openingTime),closingTime:String(null===e||void 0===e?void 0:e.closingTime),isApplySandwich:"true"==(null===e||void 0===e?void 0:e.isApplySandwich)};I((0,x.gp)(l)).then(e=>{e.error||k(-1)})}),children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-2 md:my-2",children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 ",children:["admin"===D&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Company",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsxs)("select",(0,l.A)((0,l.A)({},a("companyId",{required:"Company is required"})),{},{className:" ".concat(r.Ol," ").concat(A.companyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)("option",{className:"",value:"",children:"Select Company"}),null===_||void 0===_?void 0:_.map(e=>(0,j.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName,"(",null===e||void 0===e?void 0:e.userName,")"]}))]})),A.companyId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.companyId.message})]}),("admin"===D||"company"===D)&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Branch",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(d.xI,{control:b,name:"branchId",rules:{required:"Branch is required"},render:e=>{var a;let{field:s}=e;return(0,j.jsxs)(N.A,(0,l.A)((0,l.A)({},s),{},{defaultValue:"",className:"".concat(r.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(N.A.Option,{value:"",children:"Select Branch"}),z?(0,j.jsx)(N.A.Option,{disabled:!0,children:(0,j.jsx)(g.A,{})}):null===(a=(0,r._o)(Z,"fullName"))||void 0===a?void 0:a.map(e=>(0,j.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.branchId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.branchId.message})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-2",children:[(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Shift Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,l.A)((0,l.A)({type:"text"},a("shiftName",{required:"Shift Name is required"})),{},{className:"placeholder: ".concat(r.Ol," ").concat(A.shiftName?"border-[1px] ":"border-gray-300"),placeholder:"Enter Shift Name"})),A.shiftName&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.shiftName.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Late Minutes ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,l.A)((0,l.A)({type:"number"},a("lateMIN",{required:"Late Minutes is required"})),{},{className:"placeholder: ".concat(r.Ol," ").concat(A.lateMIN?"border-[1px] ":"border-gray-300"),placeholder:"Enter Late Minutes"})),A.lateMIN&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.lateMIN.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Lunch Minutes ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,l.A)((0,l.A)({type:"number"},a("lunchMin",{required:"Lunch Minutes is required"})),{},{className:"placeholder: ".concat(r.Ol," ").concat(A.lunchMin?"border-[1px] ":"border-gray-300"),placeholder:"Enter Lunch Minutes"})),A.lunchMin&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.lunchMin.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Skip Minutes ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,l.A)((0,l.A)({type:"number"},a("skipHRS",{required:"Skip Minutes is required"})),{},{className:"placeholder: ".concat(r.Ol," ").concat(A.skipHRS?"border-[1px] ":"border-gray-300"),placeholder:"Enter Skip Minutes"})),A.skipHRS&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.skipHRS.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Opening Time ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,l.A)((0,l.A)({type:"time",typeof:"time"},a("openingTime",{required:"Opening Time is required"})),{},{className:"mt-1 block w-full border ".concat(A.openingTime?"border-[1px] ":"border-gray-300"," p-2 rounded")})),A.openingTime&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.openingTime.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Closing Time ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,l.A)((0,l.A)({type:"time",typeof:"time"},a("closingTime",{required:"Closing Time is required"})),{},{className:"mt-1 block w-full border ".concat(A.closingTime?"border-[1px] ":"border-gray-300"," p-2 rounded")})),A.closingTime&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.closingTime.message})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-2",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Working Days  ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(f.Ay,{isMulti:!0,options:J,value:U,onChange:e=>{$(e||[])},className:"basic-multi-select",classNamePrefix:"select"})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Saturday Off ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(f.Ay,{isMulti:!0,options:ee,value:se,onChange:e=>{le(e||[])},className:"basic-multi-select",classNamePrefix:"select"})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Sundays Off ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(d.xI,{control:b,name:"sundaysOff",rules:{required:"sundaysOff is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(N.A,(0,l.A)((0,l.A)({},a),{},{defaultValue:"",className:"".concat(r.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(N.A.Option,{value:"",children:"Select Sundays Off"}),(0,j.jsx)(N.A.Option,{value:"Yes",children:"Yes"}),(0,j.jsx)(N.A.Option,{value:"No",children:"No"})]}))}}),A.sundaysOff&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.sundaysOff.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(r.Q0),children:["Select Sandwich ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(d.xI,{control:b,name:"isApplySandwich",rules:{required:"Select Sandwich is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(N.A,(0,l.A)((0,l.A)({},a),{},{defaultValue:"",className:"".concat(r.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(N.A.Option,{value:"",children:"Select Sandwich"}),(0,j.jsx)(N.A.Option,{value:"true",children:"Yes"}),(0,j.jsx)(N.A.Option,{value:"false",children:"No"})]}))}}),A.isApplySandwich&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.isApplySandwich.message})]})]})]}),(0,j.jsx)("div",{className:"flex justify-end",children:(0,j.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:e?(0,j.jsx)(y.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=8956.426fcba5.chunk.js.map