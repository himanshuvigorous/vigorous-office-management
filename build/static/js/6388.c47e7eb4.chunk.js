"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6388],{16388:(e,l,a)=>{a.r(l),a.d(l,{default:()=>S});var n=a(89379),t=a(24858),o=a(83003),i=a(15187),d=a(65043),r=a(31744),s=a(39160),c=a(97326),u=a(65512),p=(a(86178),a(60446)),m=a.n(p),v=a(78227),h=a(12106),x=a(42837),y=(a(94084),a(69223)),g=a(55971),f=a(50822),b=(a(57916),a(6720)),j=a(37762),w=a(64857),N=a(33007),A=a(16210),I=a(89427),C=a(70579);const S=function(){const{control:e,formState:{errors:l},setValue:a}=(0,t.mN)(),p=(0,o.wA)(),{employeePerformanceList:S,employeePerformance_loading:D,totalemployeePerformanceReportCount:T}=(0,o.d4)(e=>e.reports),{employeList:k}=(0,o.d4)(e=>e.employe),{designationList:R,loading:P}=(0,o.d4)(e=>e.designation),[F,_]=(0,d.useState)(""),E=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),[L,B]=(0,d.useState)(1),[O,z]=(0,d.useState)(""),{branchList:H}=(0,o.d4)(e=>e.branch),{departmentListData:V,loading:K}=(0,o.d4)(e=>e.department),U=(0,t.FH)({control:e,name:"PDCompanyId",defaultValue:""}),M=(0,t.FH)({control:e,name:"PDBranchId",defaultValue:""}),q=(0,t.FH)({control:e,name:"PdDesignationId",defaultValue:""}),W=(0,t.FH)({control:e,name:"employeeId",defaultValue:[]}),J=(0,t.FH)({control:e,name:"status",defaultValue:""}),Y=(0,t.FH)({control:e,name:"averageTaskRating",defaultValue:""}),G=(0,t.FH)({control:e,name:"departmentId"}),[Q,X]=((0,t.FH)({control:e,name:"PDDirectorId",defaultValue:""}),(0,d.useState)(10));(0,d.useEffect)(()=>{"company"!==(null===E||void 0===E?void 0:E.userType)&&"companyDirector"!==(null===E||void 0===E?void 0:E.userType)||p((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?U:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId})),p((0,N.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId})),a("startDate",m()().subtract(1,"month")),a("endDate",m()())},[]),(0,d.useEffect)(()=>{ee()},[L,O,Q]),(0,d.useEffect)(()=>{const e=setTimeout(()=>{z(F)},500);return()=>{clearTimeout(e)}},[F]);const Z=function(){return{currentPage:L,pageSize:Q,reqPayload:{text:O,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?U:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:"company"===(null===E||void 0===E?void 0:E.userType)||"admin"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType)?M:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,departmentIds:[],departmentId:G,isTL:"",isManager:"",isReceptionist:"",isHR:"",employeIds:W,status:"true"==J||"false"!=J&&"",directorId:"67b30b81551ce7595c5c2d88",designationId:q,departmentIds:[],roleKey:"",averageTaskRating:Y}}},$=()=>{p((0,x.qV)({companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?U:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:["admin","company","companyDirector"].includes(null===E||void 0===E?void 0:E.userType)?M:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,departmentId:G||"",directorId:"",text:"",sort:!0,status:!0,isPagination:!1,isBranch:!1,isDirector:!1}))},ee=()=>{p((0,h.rS)(Z(!0)))},le=async()=>{ee()},ae=[{key:"1",label:(0,C.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,C.jsxs)("div",{className:"bg-[#ececec] space-y-1 2xl:flex justify-between items-center",children:[(0,C.jsxs)("div",{className:"sm:flex grid grid-cols-1 gap-1.5 sm:flex-wrap text-[14px]",children:[("admin"===(null===E||void 0===E?void 0:E.userType)||"company"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(t.xI,{name:"PDBranchId",control:e,render:e=>{let{field:l}=e;return(0,C.jsxs)(u.A,(0,n.A)((0,n.A)({},l),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(u.A.Option,{value:"",children:"Select Branch"}),null===H||void 0===H?void 0:H.map(e=>(0,C.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),l.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:l.PDBranchId.message})]}),(0,C.jsx)("div",{children:(0,C.jsx)(t.xI,{name:"departmentId",control:e,render:e=>{var l;let{field:a}=e;return(0,C.jsxs)(u.A,(0,n.A)((0,n.A)({},a),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{p((0,N.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?U:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:["admin","company","companyDirector"].includes(null===E||void 0===E?void 0:E.userType)?M:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId}))},onChange:e=>{a.onChange(e)},placeholder:"Select Department",children:[(0,C.jsx)(u.A.Option,{value:"",children:"Select Department"}),K?(0,C.jsx)(u.A.Option,{disabled:!0,children:(0,C.jsx)(I.A,{})}):null===(l=(0,i._o)(V))||void 0===l?void 0:l.map(e=>(0,C.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,C.jsx)("div",{className:"",children:(0,C.jsx)(t.xI,{name:"PdDesignationId",control:e,render:e=>{var l;let{field:a}=e;return(0,C.jsxs)(u.A,(0,n.A)((0,n.A)({},a),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,placeholder:"Select Designation",onFocus:()=>{p((0,A.EF)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?U:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:["admin","company","companyDirector"].includes(null===E||void 0===E?void 0:E.userType)?M:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId}))},onChange:e=>a.onChange(e),filterOption:(e,l)=>{var a;return null===(a=String(null===l||void 0===l?void 0:l.children))||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase())},children:[(0,C.jsx)(u.A.Option,{value:"",children:"Select Designation"}),P?(0,C.jsx)(u.A.Option,{disabled:!0,children:(0,C.jsx)(I.A,{})}):null===(l=(0,i._o)(R))||void 0===l?void 0:l.map(e=>(0,C.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,C.jsx)("div",{className:"",children:(0,C.jsx)(t.xI,{name:"employeeId",control:e,render:e=>{let{field:l}=e;return(0,C.jsx)(u.A,{mode:"multiple",allowClear:!0,showSearch:!0,filterOption:(e,l)=>{var a;return null===l||void 0===l||null===(a=l.label)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase())},className:"inputAntdMultiSelectClassNameFilterReport ",placeholder:"Select Employee",onFocus:$,options:null===k||void 0===k?void 0:k.map(e=>({label:e.fullName,value:e._id})),value:l.value||[],onChange:e=>l.onChange(e)})}})}),(0,C.jsx)("div",{children:(0,C.jsx)(t.xI,{name:"status",control:e,render:e=>{let{field:l}=e;return(0,C.jsx)(u.A,(0,n.A)((0,n.A)({},l),{},{allowClear:!0,className:"inputAntdMultiSelectClassNameFilterReport",placeholder:"Select Status",options:[{value:"",label:"Select Status"},{value:"true",label:"Active"},{value:"false",label:"Inactive"}],value:l.value,onChange:e=>l.onChange(e)}))}})}),(0,C.jsx)("div",{children:(0,C.jsx)(t.xI,{name:"averageTaskRating",control:e,rules:{},render:e=>{let{field:l}=e;return(0,C.jsx)(u.A,(0,n.A)((0,n.A)({},l),{},{allowClear:!0,className:"inputAntdMultiSelectClassNameFilterReport",placeholder:"Select Rating",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],value:l.value||[],onChange:e=>l.onChange(e)}))}})})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{a("PDBranchId",""),a("PdCompanyId",""),a("departmentId",""),a("PdDesignationId",""),a("employeeId",""),a("status",""),a("averageTaskRating",""),le()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,C.jsx)("button",{onClick:()=>{le()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,C.jsx)(s.A,{onChange:e=>{_(e)},children:(0,C.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(c.A,{className:"custom-collapse",items:ae,defaultActiveKey:[1],expandIcon:e=>{let{isActive:l}=e;return(0,C.jsx)(b.WnU,{size:20,style:{color:"white",transform:l?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,C.jsxs)("div",{className:"space-y-1.5 sm:flex justify-between items-center ",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 sm:pt-0 pt-1",children:[(0,C.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,C.jsx)(u.A,{id:"pageSize",value:Q,onChange:e=>{X(Number(e)),B(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,C.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{(async()=>{var e,l;const a=new j.uE({orientation:"landscape",unit:"pt"});a.setFontSize(16);const n=await(null===f.K||void 0===f.K?void 0:f.K.employeePerformanceFunc(Z(!1)));if(!S&&!n)return;const t=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(l=e.docs)||void 0===l?void 0:l.map((e,l)=>{var a;return[l+1,(null===e||void 0===e?void 0:e.fullName)||"N/A",(null===e||void 0===e||null===(a=e.departmentData)||void 0===a?void 0:a.name)||"N/A",null===e||void 0===e?void 0:e.taskCompleted,null===e||void 0===e?void 0:e.averageTaskRating]});(0,w.Ay)(a,{startY:40,head:[["S.No.","Employee Name","Department Name","Total Task Completed","Average Task Rating"]],body:t,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("Employe_Performance_Report.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,C.jsx)("button",{onClick:()=>{(async()=>{var e,l;const a=new y.Workbook,n=a.addWorksheet("Employee Attendance");n.columns=[{header:"S.No",key:"sno",width:10},{header:"Employee Name",key:"name",width:30},{header:"Department",key:"departmentName",width:20},{header:"Task Completed",key:"taskCompleted",width:20},{header:"Average Rating",key:"avRating",width:20}],n.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const t=await(null===f.K||void 0===f.K?void 0:f.K.employeePerformanceFunc(Z(!1)));if(!S&&!t)return;const o=null===t||void 0===t||null===(e=t.data)||void 0===e||null===(l=e.docs)||void 0===l?void 0:l.map((e,l)=>{var a;return{sno:l+1,name:(null===e||void 0===e?void 0:e.fullName)||"N/A",departmentName:(null===e||void 0===e||null===(a=e.departmentData)||void 0===a?void 0:a.name)||"N/A",taskCompleted:null===e||void 0===e?void 0:e.taskCompleted,avRating:null===e||void 0===e?void 0:e.averageTaskRating}});null===o||void 0===o||o.forEach(e=>{n.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),n.autoFilter={from:"A1",to:"I1"},a.xlsx.writeBuffer().then(e=>{const l=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=URL.createObjectURL(l),a.download="Employe_Performance_Report.xlsx",a.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,C.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-center w-[5%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Employee Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Department Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Total Task Complete "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Average Task Rating"})]})}),D?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,C.jsx)(g.A,{})})}):(0,C.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.length)>0?null===S||void 0===S?void 0:S.map((e,l)=>{var a;return(0,C.jsxs)("tr",{className:"border-b-[1px] ".concat(l%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap  border-none px-2 py-3",children:l+1+(L-1)*Q}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none px-2 py-3",children:(null===e||void 0===e?void 0:e.fullName)||"N/A"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none px-2 py-3",children:(null===e||void 0===e||null===(a=e.departmentData)||void 0===a?void 0:a.name)||"N/A"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none px-2 py-3",children:null===e||void 0===e?void 0:e.taskCompleted}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none px-2 py-3",children:null===e||void 0===e?void 0:e.averageTaskRating})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,C.jsx)(v.A,{totalCount:T,pageSize:Q,currentPage:L,onChange:e=>{B(e)}})]})})}}}]);
//# sourceMappingURL=6388.c47e7eb4.chunk.js.map