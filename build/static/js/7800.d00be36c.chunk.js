"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7800],{47800:(e,l,t)=>{t.r(l),t.d(l,{default:()=>C});var n=t(89379),o=t(24858),a=t(83003),i=t(15187),d=t(65043),r=t(31744),s=t(39160),c=t(97326),u=t(53913),m=t(65512),p=(t(86178),t(60446)),h=t.n(p),v=t(78227),x=t(12106),y=(t(42837),t(94084),t(69223)),b=t(55971),f=t(50822),w=t(6720),N=t(37762),g=t(64857),j=(t(11906),t(33007),t(89427),t(70337)),D=(t(40088),t(12208),t(60184)),A=(t(27744),t(17995),t(76932),t(70579));const C=function(){var e,l,t,p,C;const{control:I,formState:{errors:S},setValue:T,watch:k}=(0,o.mN)(),[B,F]=(0,d.useState)({}),[P,z]=(0,d.useState)(10),Y=(0,a.wA)(),{clientIndexReportList:R,clientIndexReportFunc_loading:E,totalClientIndexCount:L}=(0,a.d4)(e=>e.reports),{departmentListData:_,loading:M}=(0,a.d4)(e=>e.department),{clientList:O,totalEmployeCount:V,loading:H}=(0,a.d4)(e=>e.client),{taskTypeList:G}=(0,a.d4)(e=>e.taskType),{clientGroupList:K}=(0,a.d4)(e=>e.clientGroup),{employeList:U}=(0,a.d4)(e=>e.employe),[q,W]=(0,d.useState)(""),J=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),{industryListData:Q,indusSearchloading:X}=(0,a.d4)(e=>e.industry),{orgTypeList:Z,orgSearchloading:$}=(0,a.d4)(e=>e.orgType),[ee,le]=(0,d.useState)(1),[te,ne]=(0,d.useState)(""),{branchList:oe}=(0,a.d4)(e=>e.branch),ae=(0,o.FH)({control:I,name:"PDCompanyId",defaultValue:""}),ie=(0,o.FH)({control:I,name:"PDBranchId",defaultValue:""}),de=(0,o.FH)({control:I,name:"status",defaultValue:""}),re=(0,o.FH)({control:I,name:"PDOrganizationType",defaultValue:""}),se=(0,o.FH)({control:I,name:"PDindustrytype",defaultValue:""}),ce=(0,o.FH)({control:I,name:"department",defaultValue:""}),ue=(0,o.FH)({control:I,name:"groupName",defaultValue:""});(0,d.useEffect)(()=>{const e=setTimeout(()=>{ne(q)},500);return()=>{clearTimeout(e)}},[q]),(()=>{const e=[];for(let l=2005;l<=2034;l++)e.push("".concat(l,"-").concat(l+1))})();const me=function(){return{currentPage:ee,pageSize:P,reqPayload:{text:te,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?ae:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,directorId:"",branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?ie:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,status:"true"==de||"false"!=de&&"",organizationId:re,organizationIds:[],departmentId:ce,departmentIds:[],industryId:se,industryIds:[],groupId:ue,groupIds:[]}}};(0,d.useEffect)(()=>{pe(te)},[ee,te,P]);const pe=()=>{Y((0,x.Ec)(me(!0)))},[he,ve]=(0,d.useState)(!1);(0,d.useEffect)(()=>{"company"!==(null===J||void 0===J?void 0:J.userType)&&"companyDirector"!==(null===J||void 0===J?void 0:J.userType)||Y((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?ae:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId})),T("startDate",h()().subtract(1,"month")),T("endDate",h()())},[]);const xe=async()=>{pe()},ye=[{key:"1",label:(0,A.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,A.jsxs)("div",{className:"bg-[#ececec] sm:flex justify-between items-center space-y-1",children:[(0,A.jsx)("div",{className:"sm:flex  grid grid-cols-1  gap-2 sm:flex-wrap text-[14px]",children:("admin"===(null===J||void 0===J?void 0:J.userType)||"company"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType))&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)(o.xI,{name:"PDBranchId",control:I,render:e=>{let{field:l}=e;return(0,A.jsxs)(m.A,(0,n.A)((0,n.A)({},l),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(m.A.Option,{value:"",children:"Select Branch"}),null===oe||void 0===oe?void 0:oe.map(e=>(0,A.jsxs)(m.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),S.PDBranchId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:S.PDBranchId.message})]})}),(0,A.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,A.jsx)("button",{onClick:()=>{T("PDCompanyId",""),T("PDBranchId",""),T("status",""),T("PDOrganizationType",""),T("PDindustrytype",""),T("department",""),T("groupName",""),xe()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,A.jsx)("button",{onClick:()=>{xe()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,A.jsx)(s.A,{onChange:e=>{W(e)},children:(0,A.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)(c.A,{className:"custom-collapse",items:ye,defaultActiveKey:[1],expandIcon:e=>{let{isActive:l}=e;return(0,A.jsx)(w.WnU,{size:20,style:{color:"white",transform:l?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,A.jsx)("div",{className:"space-y-1.5 flex justify-between items-center pt-1",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,A.jsx)(m.A,{id:"pageSize",value:P,onChange:e=>{z(Number(e)),le(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,A.jsx)(m.A.Option,{value:e,children:e},e))})]})})]}),(0,A.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,A.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Department"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created At"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created By"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Clients"})]})}),E?(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,A.jsx)(b.A,{})})}):(0,A.jsx)("tbody",{children:R&&(null===R||void 0===R?void 0:R.length)>0?null===R||void 0===R?void 0:R.map((e,l)=>(0,A.jsxs)("tr",{className:"border-b-[1px] ".concat(l%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:l+1+(ee-1)*P}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.name}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.createdBy}),(0,A.jsx)("td",{className:"tableData ",children:(0,A.jsxs)("div",{className:"flex justify-center items-center gap-1",children:[(0,A.jsx)("span",{children:null===e||void 0===e?void 0:e.clientCount}),(0,A.jsx)("span",{className:"flex justify-center items-center cursor-pointer",children:(0,A.jsx)(D.Ny1,{onClick:()=>(e=>{F(e),ve(!0);let l={companyId:"admin"===(null===J||void 0===J?void 0:J.userType)?ae:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"company"===(null===J||void 0===J?void 0:J.userType)||"admin"===(null===J||void 0===J?void 0:J.userType)||"companyDirector"===(null===J||void 0===J?void 0:J.userType)?ie:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,departmentId:null===e||void 0===e?void 0:e._id,isPagination:!1};Y((0,j.Aq)(l))})(e),className:" hover:text-[#337ab7] text-[#3c8dbc]",size:14})})]})||"-"})]})):(0,A.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,A.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,A.jsxs)(u.A,{className:"antmodalclassName !w-[60%] !h-[50%]",title:"Department / ".concat(null===B||void 0===B?void 0:B.name," "),open:he,onCancel:()=>ve(!1),footer:null,children:[(0,A.jsxs)("div",{children:[null!==(e=null===B||void 0===B?void 0:B.email)&&void 0!==e?e:""," ",null!==B&&void 0!==B&&B.email&&null!==B&&void 0!==B&&null!==(l=B.mobile)&&void 0!==l&&l.number&&null!==B&&void 0!==B&&null!==(t=B.mobile)&&void 0!==t&&t.code?"/":""," ",((null===B||void 0===B||null===(p=B.mobile)||void 0===p?void 0:p.code)||"")+((null===B||void 0===B||null===(C=B.mobile)||void 0===C?void 0:C.number)||"")]}),(0,A.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,A.jsx)("button",{onClick:()=>{(async()=>{var e,l,t,n,o;const a=new N.uE({orientation:"landscape",unit:"pt"});a.setFontSize(16),a.text("Department - ".concat(null===B||void 0===B?void 0:B.name),40,40),a.text("".concat(null!==(e=null===B||void 0===B?void 0:B.email)&&void 0!==e?e:""," ").concat(null!==B&&void 0!==B&&B.email&&null!==B&&void 0!==B&&null!==(l=B.mobile)&&void 0!==l&&l.number&&null!==B&&void 0!==B&&null!==(t=B.mobile)&&void 0!==t&&t.code?"/":""," ").concat(((null===B||void 0===B||null===(n=B.mobile)||void 0===n?void 0:n.code)||"")+((null===B||void 0===B||null===(o=B.mobile)||void 0===o?void 0:o.number)||"")),40,60);const i=await(null===f.K||void 0===f.K?void 0:f.K.clientIndexReportFunc(me(!1)));if(!O&&!i)return;const d=null===O||void 0===O?void 0:O.map((e,l)=>{var t,n;return[l+1,(null===e||void 0===e?void 0:e.groupName)||"N/A",(null===e||void 0===e?void 0:e.fullName)||"N/A",(null===e||void 0===e?void 0:e.email)||"N/A",(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.code)+" "+(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.number)||"N/A",h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm")||"N/A",(null===e||void 0===e?void 0:e.createdBy)||"N/A"]});(0,g.Ay)(a,{startY:70,head:[["S.No.","Group Name","Client Name","Email","Mobile","Created At","Created By"]],body:d,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("ClientIndexReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,A.jsx)("button",{onClick:()=>{(async()=>{const e=new y.Workbook,l=e.addWorksheet("Clie");if(l.columns=[{header:"S.No.",key:"sno",width:10},{header:"Group Name",key:"groupName",width:30},{header:"Client Name",key:"clientName",width:30},{header:"Email",key:"email",width:30},{header:"Mobile",key:"mobile",width:30},{header:"Created At",key:"createdAt",width:25},{header:"Created By",key:"createdBy",width:25}],l.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),!O&&!O)return;const t=null===O||void 0===O?void 0:O.map((e,l)=>{var t,n;return{sno:l+1,groupName:(null===e||void 0===e?void 0:e.groupName)||"-",clientName:(null===e||void 0===e?void 0:e.fullName)||"-",email:(null===e||void 0===e?void 0:e.email)||"N/A",mobile:(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.code)+" "+(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.number)||"N/A",createdAt:null!==e&&void 0!==e&&e.createdAt?h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm A"):"-",createdBy:(null===e||void 0===e?void 0:e.createdBy)||"-"}});null===t||void 0===t||t.forEach(e=>{l.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),l.autoFilter={from:"A1",to:"I1"},e.xlsx.writeBuffer().then(e=>{const l=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=document.createElement("a");t.href=URL.createObjectURL(l),t.download="ClientIndexReport.xlsx",t.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,A.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]}),(0,A.jsx)("div",{className:"w-full overflow-auto",children:(0,A.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Group Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Name"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Email"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mobile"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created At"}),(0,A.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created By"})]})}),E?(0,A.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,A.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,A.jsx)(b.A,{})})}):(0,A.jsx)("tbody",{children:O&&(null===O||void 0===O?void 0:O.length)>0?null===O||void 0===O?void 0:O.map((e,l)=>{var t,n;return(0,A.jsxs)("tr",{className:"border-b-[1px] ".concat(l%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:l+1}),(0,A.jsx)("td",{className:"w-[150px]  border-none p-2",children:null===e||void 0===e?void 0:e.groupName}),(0,A.jsx)("td",{className:" w-[150px]  border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,A.jsx)("td",{className:" w-[140px]  border-none p-2",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,A.jsxs)("td",{className:" w-[150px]  border-none p-2",children:[(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.code)||"-"," ",(null===e||void 0===e||null===(n=e.mobile)||void 0===n?void 0:n.number)||"-"]}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,A.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.createdBy})]})}):(0,A.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,A.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})]})]}),(0,A.jsx)(v.A,{totalCount:L,pageSize:P,currentPage:ee,onChange:e=>{le(e)}})]})})}}}]);
//# sourceMappingURL=7800.d00be36c.chunk.js.map