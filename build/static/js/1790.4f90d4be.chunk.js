"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[1790],{65337:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(91686),s=n(70579);const d=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,s.jsx)(a.A,{size:"large"})})}},81790:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(89379),s=n(73216),d=n(83003),i=n(65043),l=n(30064),r=n.n(l),o=n(23156),c=n(47196),p=n(24858),u=n(15187),x=n(4938),h=(n(16520),n(31744)),m=n(78729),v=(n(65337),n(65512)),y=n(96651),j=n(78227),g=n(39160),b=n(31174),w=n(55640),f=n(55971),N=n(60446),A=n.n(N),D=n(89427),C=n(70579);const S=function(){var e,t;const{register:n,setValue:l,control:N,formState:{errors:S}}=(0,p.mN)(),I=(0,s.Zp)(),T=(0,d.wA)(),{DigitalSignatureTypeList:P,loading:B,totalDigitalSignatureTypeCount:L}=(0,d.d4)(e=>e.digitalSignatureType),{companyList:_}=(0,d.d4)(e=>e.company),{branchList:O,loading:k}=(0,d.d4)(e=>e.branch),E=JSON.parse(localStorage.getItem("user_info_".concat(u.AU))),[q,F]=(0,i.useState)(1),[z,V]=(0,i.useState)(""),Y=(0,p.FH)({control:N,name:"PDCompanyId",defaultValue:""}),H=(0,p.FH)({control:N,name:"PDBranchId",defaultValue:""}),J=(0,p.FH)({control:N,name:"status",defaultValue:""}),R=[Y,H,J,z].join("-"),[M,U]=(0,i.useState)(!1);(0,i.useEffect)(()=>{M?1===q?K():F(1):U(e=>!0)},[R]),(0,i.useEffect)(()=>{K()},[q]);const{canCreate:G,canRead:W,canUpdate:Z,canDelete:$}=(0,x.A)(),K=()=>{const e={page:q,limit:10,reqPayload:{companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?Y:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId,branchId:"company"===(null===E||void 0===E?void 0:E.userType)||"admin"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType)?H:"companyBranch"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.branchId,directorId:"",text:z,sort:!0,status:"true"===J||"false"!==J&&"",isPagination:!0}};T((0,w.$r)(e))};return(0,i.useEffect)(()=>{(Y||"company"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType))&&T((0,h.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===E||void 0===E?void 0:E.userType)?Y:"company"===(null===E||void 0===E?void 0:E.userType)?null===E||void 0===E?void 0:E._id:null===E||void 0===E?void 0:E.companyId}))},[Y]),(0,i.useEffect)(()=>{"admin"===(null===E||void 0===E?void 0:E.userType)&&T((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,C.jsx)(g.A,{onChange:e=>{V(e)},children:(0,C.jsxs)("section",{children:[(0,C.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,C.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1.5",children:["admin"===(null===E||void 0===E?void 0:E.userType)&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsxs)("select",(0,a.A)((0,a.A)({},n("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(u.OJ," ").concat(S.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===_||void 0===_?void 0:_.map(e=>(0,C.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),S.PDCompanyId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:S.PDCompanyId.message})]}),("admin"===(null===E||void 0===E?void 0:E.userType)||"company"===(null===E||void 0===E?void 0:E.userType)||"companyDirector"===(null===E||void 0===E?void 0:E.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(p.xI,{name:"PDBranchId",control:N,rules:{required:"Branch is required"},render:e=>{var t;let{field:n}=e;return(0,C.jsxs)(v.A,(0,a.A)((0,a.A)({},n),{},{className:"w-full ".concat(u.Lp," ").concat(S.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(v.A.Option,{value:"",children:"Select Branch"}),k?(0,C.jsx)(v.A.Option,{disabled:!0,children:(0,C.jsx)(D.A,{})}):null===(t=(0,u._o)(O))||void 0===t?void 0:t.map(e=>(0,C.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),S.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:S.PDBranchId.message})]}),(0,C.jsx)(p.xI,{name:"status",control:N,rules:{},render:e=>{let{field:t}=e;return(0,C.jsxs)(v.A,(0,a.A)((0,a.A)({},t),{},{className:" w-32 ".concat(u.Lp," ").concat(S.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(v.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(v.A.Option,{value:"true",children:" Active "}),(0,C.jsx)(v.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,C.jsx)("button",{onClick:()=>{l("status",""),l("PDBranchId",""),l("PdDepartmentId",""),l("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),W&&G&&(0,C.jsx)(y.A,{placement:"topLeft",title:"DigitalSignatue Type",children:(0,C.jsxs)("button",{onClick:()=>{I("/admin/digital-sign-type/create")},className:"bg-header px-2 py-1.5 rounded-md whitespace-nowrap flex justify-center items-center space-x-2 text-white",children:[(0,C.jsx)(o.OiG,{}),(0,C.jsx)("span",{className:"text-[12px] whitespace-nowrap",children:"Add DigitalSignatue Type"})]})})]})]}),(0,C.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:W&&(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[20%]",children:"Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(Z||$)&&(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[20%]",children:"Action"})]})}),B?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(f.A,{})})}):(0,C.jsx)("tbody",{children:P&&(null===P||void 0===P||null===(e=P.docs)||void 0===e?void 0:e.length)>0?null===P||void 0===P||null===(t=P.docs)||void 0===t?void 0:t.map((e,t)=>{var n,a,s,d;return(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(q-1)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY"))&&void 0!==a?a:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.createdBy)&&void 0!==s?s:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,C.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(d="Inactive")?d:"-"})}),(Z||$)&&(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[Z&&(0,C.jsx)(y.A,{placement:"topLeft",title:"Edit",children:(0,C.jsx)("button",{onClick:()=>{I("/admin/digital-sign-type/edit/".concat((0,b.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(o.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),$&&(0,C.jsx)(y.A,{placement:"topLeft",title:"Delete",children:(0,C.jsx)("button",{onClick:()=>(e=>{let t={_id:e};r().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&T((0,w.a0)(t)).then(e=>{var t;q>1&&1==(null===P||void 0===P||null===(t=P.docs)||void 0===t?void 0:t.length)?F(Number(q-1)):K()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(c.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:6,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,C.jsx)(j.A,{totalCount:L,pageSize:10,currentPage:q,onChange:e=>{F(e)}})]})})}}}]);
//# sourceMappingURL=1790.4f90d4be.chunk.js.map