"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[763],{30763:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var s=n(89379),a=n(73216),r=n(39160),l=n(83003),c=n(65043),o=n(30064),d=n.n(o),i=n(31174),p=n(23156),x=(n(65337),n(24858)),h=n(47196),u=n(36105),m=n(78227),w=n(65512),b=n(96651),j=n(15187),v=n(4938),f=n(55971),N=n(60446),g=n.n(N),y=n(70579);const C=function(){var e,t;const{register:n,setValue:o,control:N,formState:{errors:C}}=(0,x.mN)(),A=(0,a.Zp)(),D=(0,l.wA)(),{countryListData:S,totalCountryCount:k,loading:L}=(0,l.d4)(e=>e.country),[z,E]=(0,c.useState)(1),[F,M]=(0,c.useState)(""),O=(0,x.FH)({control:N,name:"status",defaultValue:""}),_=[O,F].join("-"),[R,Y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{R?1===z?B():E(1):Y(e=>!0)},[_]),(0,c.useEffect)(()=>{B()},[z]);const B=()=>{const e={page:z,limit:10,reqPayload:{text:F,sort:!0,status:O,isPagination:!0}};D((0,u.VS)(e))},{canCreate:I,canRead:P,canUpdate:V,canDelete:q}=(0,v.A)();return(0,y.jsx)(r.A,{onChange:e=>{M(e)},children:(0,y.jsxs)("section",{children:[(0,y.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-3",children:[(0,y.jsx)(x.xI,{name:"status",control:N,rules:{},render:e=>{let{field:t}=e;return(0,y.jsxs)(w.A,(0,s.A)((0,s.A)({},t),{},{className:" w-32 ".concat(j.Lp," ").concat(C.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(w.A.Option,{value:"",children:"Select Status"}),(0,y.jsx)(w.A.Option,{value:!0,children:" Active "}),(0,y.jsx)(w.A.Option,{value:!1,children:" InActive "})]}))}}),(0,y.jsx)("button",{onClick:()=>{o("status","")},className:"bg-header  py-1 w-24 mt-1 rounded-md sm:flex hidden justify-center items-center  text-white",children:(0,y.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),(0,y.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,y.jsx)("button",{onClick:()=>{o("status","")},className:"bg-header  py-1.5 rounded-md sm:hidden flex px-10 justify-center items-center  text-white",children:(0,y.jsx)("span",{className:"text-[12px]",children:"Reset"})}),I&&(0,y.jsx)(b.A,{placement:"topLeft",title:"Add Country",children:(0,y.jsxs)("button",{onClick:()=>{A("/admin/country/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center whitespace-nowrap items-center space-x-2 text-white",children:[(0,y.jsx)(p.OiG,{}),(0,y.jsx)("span",{className:"text-[12px]",children:"Add Country"})]})})]})]}),(0,y.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:P&&(0,y.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,y.jsx)("thead",{className:"",children:(0,y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-[#074173] text-white font-[500] h-[40px]",children:[(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Flag"}),(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Country"}),(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Country Code "}),(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Country Mob. Code"}),(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(V||q)&&(0,y.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),L?(0,y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,y.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,y.jsx)(f.A,{})})}):(0,y.jsx)("tbody",{children:S&&null!==S&&void 0!==S&&S.docs&&(null===S||void 0===S||null===(e=S.docs)||void 0===e?void 0:e.length)>0?null===S||void 0===S||null===(t=S.docs)||void 0===t?void 0:t.map((e,t)=>{var n,s,a,r;return(0,y.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[#374151] text-[14px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"),children:[(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(z-1)}),(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,y.jsx)("img",{alt:"country flag",src:e.flag,className:"rounded min-w-12 min-h-8 w-12 h-8 ring-1 ring-black-300"})}),(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n="".concat(null===e||void 0===e?void 0:e.name," "))&&void 0!==n?n:"-"}),(0,y.jsxs)("td",{className:"whitespace-nowrap border-none p-2 ",children:[" ","".concat(null===e||void 0===e?void 0:e.countryCode)]}),(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s="".concat(null===e||void 0===e?void 0:e.countryMobileNumberCode))&&void 0!==s?s:"-"}),(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a="".concat(g()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")," "))&&void 0!==a?a:"-"}),(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,y.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(r="Inactive")?r:"-"})}),(V||q)&&(0,y.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,y.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[V&&(0,y.jsx)(b.A,{placement:"topLeft",title:"Edit",children:(0,y.jsx)("button",{onClick:()=>{A("/admin/country/edit/".concat((0,i.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,y.jsx)(p.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),q&&(0,y.jsx)(b.A,{placement:"topLeft",title:"Delete",children:(0,y.jsx)("button",{onClick:()=>(e=>{let t={_id:e};d().fire({title:"Warning",text:"Are you sure you want to delete! This will delete all states and cities as well",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&D((0,u.MA)(t)).then(e=>{var t;null!==e&&void 0!==e&&e.error||(z>1&&1==(null===S||void 0===S||null===(t=S.docs)||void 0===t?void 0:t.length)?E(Number(z-1)):B())})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,y.jsx)(h.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]},t)}):(0,y.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,y.jsx)("td",{colSpan:6,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),k>10&&(0,y.jsx)(m.A,{totalCount:k,pageSize:10,currentPage:z,onChange:e=>{E(e)}})]})})}},65337:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(91686),a=n(70579);const r=function(){return(0,a.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,a.jsx)(s.A,{size:"large"})})}}}]);
//# sourceMappingURL=763.7529f9b1.chunk.js.map