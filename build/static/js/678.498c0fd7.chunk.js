"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[678],{20678:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(89379),o=a(24858),l=a(83003),d=a(73216),i=a(15187),r=a(65043),s=(a(30064),a(31744)),c=a(78729),p=a(39160),u=a(65512),m=(a(86178),a(60446)),h=a.n(m),v=a(78227),x=a(12106),y=(a(42837),a(94084),a(16210),a(33007),a(70337)),f=a(69223),g=(a(37762),a(55971)),w=a(70579);const b=function(){const{control:e,formState:{errors:t},setValue:a}=(0,o.mN)(),m=((0,d.Zp)(),(0,l.wA)()),{digitalSignReportList:b,totalDigitalSignReportCount:j,digitalSignReportFunc_loading:D}=(0,l.d4)(e=>e.reports),{clientList:N,totalCompanyCount:I,loading:A}=(0,l.d4)(e=>e.client),{employeList:S}=(0,l.d4)(e=>e.employe),[P,C]=(0,r.useState)(""),T=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),[L,F]=(0,r.useState)(1),[Y,k]=(0,r.useState)(""),{companyList:B}=(0,l.d4)(e=>e.company),{branchList:H}=(0,l.d4)(e=>e.branch),{designationList:_}=(0,l.d4)(e=>e.designation),{departmentListData:E}=(0,l.d4)(e=>e.department),O=(0,o.FH)({control:e,name:"PDCompanyId",defaultValue:""}),M=(0,o.FH)({control:e,name:"clientList",defaultValue:""}),R=(0,o.FH)({control:e,name:"PDBranchId",defaultValue:""}),V=(0,o.FH)({control:e,name:"status",defaultValue:""}),z=(0,o.FH)({control:e,name:"workType",defaultValue:""}),U=(0,o.FH)({control:e,name:"shift",defaultValue:""}),q=(0,o.FH)({control:e,name:"daterange",defaultValue:""}),W=(0,o.FH)({control:e,name:"employeeId",defaultValue:""}),J=(0,o.FH)({control:e,name:"startDate"}),Z=(0,o.FH)({control:e,name:"isTL"}),G=(0,o.FH)({control:e,name:"isHR"}),K=(0,o.FH)({control:e,name:"PDDepartmentId"}),Q=(0,o.FH)({control:e,name:"designation"});(0,r.useEffect)(()=>{const e=setTimeout(()=>{k(P)},500);return()=>{clearTimeout(e)}},[P]),(0,r.useEffect)(()=>{O&&a("PDBranchId","")},[O]),(0,r.useEffect)(()=>{X(Y)},[L,Y,O,R,P,V,z,U,q,W,J,Z,G,Q,K,M]);const X=e=>{let t={currentPage:L,pageSize:10,reqPayload:{text:"",status:"Active"===V||"InActive"!==V&&"",sort:!0,isPagination:!0,directorId:"",departmentId:K,designationId:Q,clientId:M,companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?O:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId,branchId:"company"===(null===T||void 0===T?void 0:T.userType)||"admin"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType)?R:"companyBranch"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.branchId}};m((0,x.IM)(t))};(0,r.useEffect)(()=>{(O||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&m((0,s.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?O:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId}))},[O]),(0,r.useEffect)(()=>{"admin"===(null===T||void 0===T?void 0:T.userType)&&m((0,c.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,r.useEffect)(()=>{$()},[]);const $=()=>{let e={companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?O:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId,branchId:"company"===(null===T||void 0===T?void 0:T.userType)||"admin"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType)?R:"companyBranch"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.branchId,directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1};m((0,y.Aq)(e))};return(0,w.jsx)(p.A,{onChange:e=>{C(e)},children:(0,w.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,w.jsx)("div",{className:"",children:(0,w.jsxs)("div",{className:"grid grid-cols-1 justify-between items-center space-y-1.5",children:[(0,w.jsxs)("div",{className:"grid 2xl:grid-cols-5 lg:grid-cols-4 sm:grid-cols-3 grid-cols-1 gap-2 flex-wrap text-[14px] rounded-md",children:["admin"===(null===T||void 0===T?void 0:T.userType)&&(0,w.jsxs)("div",{className:"",children:[(0,w.jsx)(o.xI,{name:"PDCompanyId",control:e,render:e=>{let{field:a}=e;return(0,w.jsxs)(u.A,(0,n.A)((0,n.A)({},a),{},{className:" ".concat(i.Lp," ").concat(t.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,children:[(0,w.jsx)(u.A.Option,{value:"",children:"Select Company"}),null===B||void 0===B?void 0:B.map(e=>(0,w.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDCompanyId&&(0,w.jsx)("p",{className:"text-red-500 text-sm",children:t.PDCompanyId.message})]}),("admin"===(null===T||void 0===T?void 0:T.userType)||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&(0,w.jsxs)("div",{className:"",children:[(0,w.jsx)(o.xI,{name:"PDBranchId",control:e,render:e=>{let{field:a}=e;return(0,w.jsxs)(u.A,(0,n.A)((0,n.A)({},a),{},{className:" ".concat(i.Lp," ").concat(t.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,w.jsx)(u.A.Option,{value:"",children:"Select Branch"}),null===H||void 0===H?void 0:H.map(e=>(0,w.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),t.PDBranchId&&(0,w.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,w.jsx)("div",{className:"",children:(0,w.jsx)(o.xI,{name:"clientList",control:e,render:e=>{let{field:a}=e;return(0,w.jsxs)(u.A,(0,n.A)((0,n.A)({},a),{},{className:" ".concat(i.Lp," ").concat(t.PDPlan?"border-[1px] ":"border-gray-300"),placeholder:"Select client",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,w.jsx)(u.A.Option,{value:"",children:"Select Client "}),null===N||void 0===N?void 0:N.map(e=>(0,w.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}})}),(0,w.jsx)("div",{children:(0,w.jsx)(o.xI,{name:"status",control:e,render:e=>{var a;let{field:o}=e;return(0,w.jsxs)(u.A,(0,n.A)((0,n.A)({},o),{},{className:"".concat(i.Lp," ").concat(t.shift?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",children:[(0,w.jsx)(u.A.Option,{value:"",children:"Select Status"}),null===(a=["Active","InActive"])||void 0===a?void 0:a.map(e=>(0,w.jsx)(u.A.Option,{value:e,children:e},e))]}))}})}),(0,w.jsx)("div",{})]}),(0,w.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,w.jsx)("button",{onClick:()=>{a("PDBranchId",""),a("PdCompanyId",""),a("isTL",""),a("isHR",""),a("designation",""),a("PDDepartment",""),a("clientList",""),a("status","")},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,w.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,w.jsx)("button",{onClick:()=>{(async()=>{const e=new f.Workbook,t=e.addWorksheet("API Data"),a=null===b||void 0===b?void 0:b.map(e=>{var t;return{name:null===e||void 0===e?void 0:e.name,startDate:h()(null===e||void 0===e?void 0:e.startDate).format("YYYY-MM-DD"),expiryDate:h()(null===e||void 0===e?void 0:e.expiryDate).format("YYYY-MM-DD"),status:null!==e&&void 0!==e&&e.status?"Active":null!==(t="Inactive")?t:"-"}});t.columns=[{header:"Client Name",key:"name",width:50},{header:"Start Date",key:"startDate",width:50},{header:"Expiry Date",key:"expiryDate",width:30},{header:"status",key:"status",width:50}],t.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),t.autoFilter={from:"A1",to:"I1"},a.forEach(e=>{t.addRow(e)}),e.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="api_data.xlsx",a.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,w.jsx)("span",{className:"text-[12px]",children:"Export"})})]})]})}),(0,w.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,w.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Client Name"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Start Date"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Expiry Date"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"createdAt"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"createdBy"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"})]})}),D?(0,w.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,w.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,w.jsx)(g.A,{})})}):(0,w.jsx)("tbody",{children:b&&(null===b||void 0===b?void 0:b.length)>0?null===b||void 0===b?void 0:b.map((e,t)=>{var a;return(0,w.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:t+1}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:(null===e||void 0===e?void 0:e.name)||"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:h()(null===e||void 0===e?void 0:e.startDate).format("DD-MM-YYYY")||"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:h()(null===e||void 0===e?void 0:e.expiryDate).format("DD-MM-YYYY")||"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:h()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:(null===e||void 0===e?void 0:e.createdBy)||"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none px-2 py-3",children:(0,w.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(a="Inactive")?a:"-"})})]})}):(0,w.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,w.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,w.jsx)(v.A,{totalCount:j,pageSize:10,currentPage:L,onChange:e=>{F(e)}})]})})}}}]);
//# sourceMappingURL=678.498c0fd7.chunk.js.map