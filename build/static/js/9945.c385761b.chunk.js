"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9945],{9945:(e,l,d)=>{d.r(l),d.d(l,{default:()=>I});var i=d(89379),a=d(24858),s=d(39160),n=d(83003),o=d(73216),r=d(65043),t=d(42837),c=d(15187),m=d(31744),u=d(78729),p=d(65512),v=d(94084),y=d(86178),x=d.n(y),h=d(60446),j=d.n(h),g=d(96717),N=d(17995),f=d(88967),b=d(60184),A=d(70579);const I=()=>{const{loading:e}=(0,n.d4)(e=>e.Termination),{register:l,handleSubmit:d,control:y,setValue:h,formState:{errors:I}}=(0,a.mN)(),[D,T]=(0,r.useState)({attachments:[]}),C=(0,n.wA)(),S=(0,o.Zp)(),{companyList:_}=(0,n.d4)(e=>e.company),{branchList:P}=(0,n.d4)(e=>e.branch),{employeList:w}=(0,n.d4)(e=>e.employe),[q,B]=(0,r.useState)(!1),O=JSON.parse(localStorage.getItem("user_info_".concat(c.AU))),L=(0,a.FH)({control:y,name:"PDCompanyId",defaultValue:""}),E=(0,a.FH)({control:y,name:"PDBranchId",defaultValue:""});return(0,r.useEffect)(()=>{(L||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&C((0,m.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?L:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId}))},[L]),(0,r.useEffect)(()=>{"admin"===(null===O||void 0===O?void 0:O.userType)&&C((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,A.jsx)(s.A,{children:(0,A.jsx)("div",{className:"gap-4",children:(0,A.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:d(e=>{const l={companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,directorId:"",branchId:"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,employeId:null===e||void 0===e?void 0:e.employee,title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,applyDate:j()(null===e||void 0===e?void 0:e.applyDate).format("YYYY-MM-DD"),type:"termination",attachment:null===D||void 0===D?void 0:D.attachments};C((0,g.Z1)(l)).then(e=>{e.error||S(-1)})}),children:[(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 md:my-2",children:["admin"===(null===O||void 0===O?void 0:O.userType)&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(c.Q0),children:["Company ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(a.xI,{control:y,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,A.jsxs)(p.A,(0,i.A)((0,i.A)({},l),{},{defaultValue:"",className:"".concat(c.Hy," "),children:[(0,A.jsx)(p.A.Option,{value:"",children:"Select Company"}),null===_||void 0===_?void 0:_.map(e=>(0,A.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),I.PDCompanyId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:I.PDCompanyId.message})]}),("admin"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(c.Q0),children:["Branch ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(a.xI,{control:y,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,A.jsxs)(p.A,(0,i.A)((0,i.A)({},l),{},{onChange:e=>{h("employee",""),l.onChange(e)},defaultValue:"",className:"".concat(c.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,A.jsx)(p.A.Option,{value:"",children:"Select Branch"}),null===P||void 0===P?void 0:P.map(e=>(0,A.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),I.PDBranchId&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:I.PDBranchId.message})]}),(0,A.jsxs)("div",{className:"w-full",children:[(0,A.jsxs)("label",{className:"".concat(c.Q0),children:["Employee Name ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(a.xI,{name:"employee",control:y,rules:{required:"Employee is required"},render:e=>{let{field:l}=e;return(0,A.jsxs)(p.A,(0,i.A)((0,i.A)({},l),{},{className:"".concat(c.Hy," ").concat(I.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!0,departmentId:"",designationId:"",companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O.PDCompanyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,directorId:"",branchId:"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)?E:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId};C((0,t.qV)(e))},children:[(0,A.jsx)(p.A.Option,{value:"",children:"Select Employee"}),null===w||void 0===w?void 0:w.map(e=>(0,A.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),I.employee&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:I.employee.message})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2",children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)("label",{className:"".concat(c.Q0),children:["Description ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)("input",(0,i.A)((0,i.A)({type:"text"},l("description",{required:"Description is required"})),{},{className:"".concat(c.Ol," ").concat(I.description?"border-[1px] ":"border-gray-300"),placeholder:"Enter Description"})),I.description&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:I.description.message})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{className:"".concat(c.Q0),children:["Apply Date ",(0,A.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,A.jsx)(a.xI,{name:"applyDate",control:y,rules:{required:"Apply Date is Required"},render:e=>{let{field:l}=e;return(0,A.jsx)(v.A,{field:l,errors:I,disabledDate:e=>e&&e.isBefore(x()().endOf("day"),"day")})}}),I.applyDate&&(0,A.jsx)("p",{className:"text-red-500 text-sm",children:"Apply Date is required"})]})]}),(0,A.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 gap-3 my-2"}),(0,A.jsxs)("div",{className:"",children:[(0,A.jsx)("label",{className:"".concat(c.Q0),children:"Documents"}),q?(0,A.jsx)("div",{className:"space-y-2"}):(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsx)("input",{type:"file",onChange:e=>{const l={filePath:e.target.files[0],isVideo:!1,isMultiple:!1};C((0,f.Sg)(l)).then(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.payload)&&void 0!==l&&l.data&&T(l=>{var d;return(0,i.A)((0,i.A)({},l),{},{attachments:[...l.attachments,null===(d=e.payload)||void 0===d?void 0:d.data]})})})},className:"hidden",id:"file-upload"}),(0,A.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-600 bg-white cursor-pointer",children:[(0,A.jsx)(b.chT,{className:"mr-2"})," Add Documents"]}),(0,A.jsx)("div",{className:"space-y-2",children:D.attachments.map((e,l)=>(0,A.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,A.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,A.jsx)(b.chT,{className:"text-gray-500"}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,A.jsx)("button",{type:"button",onClick:()=>(e=>{T(l=>{const d=l.attachments.filter((l,d)=>d!==e);return(0,i.A)((0,i.A)({},l),{},{attachments:d})})})(l),className:"text-red-500 hover:text-red-700",children:(0,A.jsx)(b.QCr,{})})]},l))})]})]}),(0,A.jsx)("div",{className:"flex justify-end",children:(0,A.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:e?(0,A.jsx)(N.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=9945.c385761b.chunk.js.map