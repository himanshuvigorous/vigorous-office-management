"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[68],{68:(e,i,d)=>{d.r(i),d.d(i,{default:()=>D});var o=d(89379),l=d(65043),a=d(24858),n=d(86178),s=d.n(n),r=d(42837),c=d(83003),t=d(15187),m=d(78729),u=d(33007),p=d(31744),v=d(16210),h=d(32256),y=(d(30064),d(39160)),x=d(73216),j=d(70579);const D=()=>{var e,i;const{register:d,handleSubmit:n,control:D,setValue:b,formState:{errors:N}}=(0,a.mN)({defaultValues:{employeeName:"",date:s()().format("YYYY-MM-DD"),checkInTime:"",checkOutTime:"",reason:"",errors:{}}}),T=(0,x.Zp)(),g=(0,a.FH)({control:D,name:"PDBranchId",defaultValue:""}),I=(0,a.FH)({control:D,name:"PDCompanyId",defaultValue:""}),f=(0,a.FH)({control:D,name:"PDDepartmentId",defaultValue:""}),k=(0,a.FH)({control:D,name:"PDDesignationId",defaultValue:""}),P=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),A=(0,c.wA)(),{branchList:_}=(0,c.d4)(e=>e.branch),{companyList:S}=(0,c.d4)(e=>e.company),{designationList:O}=(0,c.d4)(e=>e.designation),{departmentListData:w}=(0,c.d4)(e=>e.department),{employeList:q}=(0,c.d4)(e=>e.employe);(0,l.useEffect)(()=>{"admin"===(null===P||void 0===P?void 0:P.userType)&&A((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,l.useEffect)(()=>{("admin"!==(null===P||void 0===P?void 0:P.userType)||I)&&(b("PDDepartmentId",""),b("PDDesignationId",""),b("PDBranchId",""),A((0,u.UU)({companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?I:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,text:"",sort:!0,status:!0,isPagination:!1})),A((0,p.d0)({companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?I:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,text:"",sort:!0,status:!0,isPagination:!1})))},[I]),(0,l.useEffect)(()=>{f&&A((0,v.EF)({departmentId:f,text:"",sort:!0,status:!0,isPagination:!1}))},[f]),(0,l.useEffect)(()=>{(I||"admin"!==(null===P||void 0===P?void 0:P.userType))&&(g||"companBranch"!==(null===P||void 0===P?void 0:P.userType)||"employee"===(null===P||void 0===P?void 0:P.userType))&&f&&k&&C()},[I,g,f,k]);const C=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:f,designationId:k,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?I:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?g:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId};A((0,r.qV)(e))};return(0,j.jsx)(y.A,{children:(0,j.jsx)("div",{className:"",children:(0,j.jsxs)("form",{autoComplete:"off",onSubmit:n(e=>{const i={employeId:e.employee,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?I:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?g:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,directorId:"companyDirector"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.directorId,attendanceDate:e.date,checkInTime:e.checkOutTime?new Date(new Date(e.date).setHours(...e.checkInTime.split(":").map(Number),0,0)).toISOString():null,checkOutTime:e.checkOutTime?new Date(new Date(e.date).setHours(...e.checkOutTime.split(":").map(Number),0,0)).toISOString():null,shift:e.shift,workType:null===e||void 0===e?void 0:e.workType,method:"hr_portal",reason:e.reason,employeeName:e.employeeName};A((0,h.xn)(i)).then(e=>{e.error||T("/admin/all-employee-attendance")})}),className:"grid grid-col-1 md:grid-cols-2 gap-4",children:["admin"===(null===P||void 0===P?void 0:P.userType)&&(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Company"}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("PDCompanyId",{required:"Company is required"})),{},{className:"".concat(t.Ol," ").concat(N.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{value:"",children:"Select Company"}),null===S||void 0===S?void 0:S.map(e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})),N.PDCompanyId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.PDCompanyId.message})]}),("admin"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Branch"}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("PDBranchId",{required:"Branch is required"})),{},{className:"".concat(t.Ol," ").concat(N.PDBranchId?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{value:"",children:"Select Branch"}),null===_||void 0===_?void 0:_.map(e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})),N.PDBranchId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.PDBranchId.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(t.Q0),children:["Department",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("PDDepartmentId",{required:"Department is required"})),{},{className:"".concat(t.Ol," ").concat(N.PDDepartmentId?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{value:"",children:"Select Department"}),null===w||void 0===w?void 0:w.map(e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]})),N.PDDepartmentId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.PDDepartmentId.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Designation"}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("PDDesignationId",{required:"Designation is required"})),{},{className:"".concat(t.Ol," ").concat(N.PDDesignationId?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{value:"",children:"Select Designation"}),null===O||void 0===O?void 0:O.map(e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]})),N.PDDesignationId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.PDDesignationId.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("employee")),{},{className:"".concat(t.Ol," ").concat(N.employee?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{value:"",children:"Select Employee"}),null===q||void 0===q?void 0:q.map(e=>(0,j.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})),N.employee&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.employee.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(t.Q0),children:["Select Shift"," "]}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("shift",{required:"Shift is required"})),{},{className:" ".concat(t.Ol," ").concat(N.shift?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{className:"",value:"",children:"Select Shift"}),null===(e=["regular","night","morning"])||void 0===e?void 0:e.map(e=>(0,j.jsx)("option",{value:e,children:e}))]})),N.shift&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.shift.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Select Work Type"}),(0,j.jsxs)("select",(0,o.A)((0,o.A)({},d("workType",{required:"Work Type is required"})),{},{className:" ".concat(t.Ol," ").concat(N.workType?"border-[1px] ":"border-gray-300"),children:[(0,j.jsx)("option",{className:"",value:"",children:"Select Work Type"}),null===(i=["work_from_office","work_from_home","hybrid","remote"])||void 0===i?void 0:i.map(e=>(0,j.jsx)("option",{value:e,children:e}))]})),N.workType&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.workType.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Date"}),(0,j.jsx)("input",(0,o.A)((0,o.A)({type:"date"},d("date",{required:!0})),{},{className:"".concat(t.Ol," ").concat(N.date?"border-[1px] ":"border-gray-300")}))]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Check-in Time"}),(0,j.jsx)("input",(0,o.A)((0,o.A)({type:"time"},d("checkInTime",{required:!0})),{},{className:"".concat(t.Ol," ").concat(N.checkInTime?"border-[1px] ":"border-gray-300")}))]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Check-out Time"}),(0,j.jsx)("input",(0,o.A)((0,o.A)({type:"time"},d("checkOutTime",{required:!0})),{},{className:"".concat(t.Ol," ").concat(N.checkOutTime?"border-[1px] ":"border-gray-300")}))]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(t.Q0),children:"Reason"}),(0,j.jsx)("textarea",(0,o.A)((0,o.A)({},d("reason",{required:!0})),{},{className:"".concat(t.Ol," ").concat(N.reason?"border-[1px] ":"border-gray-300"),rows:"3"}))]}),(0,j.jsx)("div",{className:"flex justify-end space-x-2 mt-4",children:(0,j.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-header rounded-md hover:bg-[#063156]",children:"Submit"})})]})})})}}}]);
//# sourceMappingURL=68.8f8bb43e.chunk.js.map