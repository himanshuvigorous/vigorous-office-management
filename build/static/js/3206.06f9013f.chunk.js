"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3206],{23206:(e,l,d)=>{d.r(l),d.d(l,{default:()=>q});var a=d(89379),n=d(24858),o=d(39160),i=d(83003),s=d(73216),r=d(65043),t=d(15187),c=d(31744),u=d(78729),m=d(66015),v=d(42837),p=d(88967),x=d(60184),y=d(94084),h=d(96603),j=d(65512),N=d(20126),b=(d(66497),d(7448)),g=d(60446),f=d.n(g),I=d(17995),A=d(89427),T=d(70579);const q=()=>{const{loading:e}=(0,i.d4)(e=>e.vendoremployeeAdvance),{register:l,handleSubmit:d,control:g,watch:q,formState:{errors:D},setValue:_}=(0,n.mN)({defaultValues:{typeSelection:"Vendor"}}),S=(0,i.wA)(),C=(0,s.Zp)(),{employeList:P,loading:k}=(0,i.d4)(e=>e.employe),{companyList:O,companyListLoading:V}=(0,i.d4)(e=>e.company),{branchList:w,branchListloading:B,branchDetailsData:E}=(0,i.d4)(e=>e.branch),L=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),Q=(0,n.FH)({control:g,name:"PDCompanyId",defaultValue:""}),H=(0,n.FH)({control:g,name:"PDBranchId",defaultValue:""}),{vendorDataList:F,loading:M}=(0,i.d4)(e=>e.vendor),[R,Z]=(0,r.useState)(!1),[G,J]=(0,r.useState)([]);(0,r.useEffect)(()=>{(Q||"company"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType))&&S((0,c.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?Q:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId}))},[Q]),(0,r.useEffect)(()=>{"admin"===(null===L||void 0===L?void 0:L.userType)&&S((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const U=(0,n.FH)({name:"PDCompanyId",control:g,defaultValue:""}),z=(0,n.FH)({name:"PDBranchId",control:g,defaultValue:""});return(0,r.useEffect)(()=>{S((0,v.qV)({text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?U:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,branchId:"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)||"company"===(null===L||void 0===L?void 0:L.userType)?z:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId}))},[z]),(0,T.jsx)(o.A,{children:(0,T.jsx)("div",{className:"gap-4",children:(0,T.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:d(e=>{var l,d;const a={companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,directorId:"companyDirector"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.directorId,branchId:"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)||"company"===(null===L||void 0===L?void 0:L.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId,employeId:null===e||void 0===e||null===(l=e.employee)||void 0===l?void 0:l.value,vendorId:null===e||void 0===e?void 0:e.vendorId,advanceType:"Vendor",amount:+(null===e||void 0===e?void 0:e.amount),date:(0,t.Tk)(null===e||void 0===e?void 0:e.paymentDate),naration:null===e||void 0===e?void 0:e.naration,attachment:G,paidToEmployeId:"cash"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(d=e.employeeId)||void 0===d?void 0:d.value:null,bankAccId:"cash"!==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.bankId:null,type:null===e||void 0===e?void 0:e.paymentMode,chequeNo:"cheque"!==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.chequeNo:null,transactionNo:"bank"===(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.transactionNo:null};S((0,b.nA)(a)).then(e=>{e.error||C(-1)})}),children:[(0,T.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-8 md:my-1 px-3 md:mt-4",children:["admin"===(null===L||void 0===L?void 0:L.userType)&&(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Company ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(n.xI,{control:g,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(j.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,T.jsx)(j.A.Option,{value:"",children:"Select Company"}),V?(0,T.jsx)(j.A.Option,{disabled:!0,children:(0,T.jsx)(A.A,{})}):null===O||void 0===O?void 0:O.map(e=>(0,T.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),D.PDCompanyId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.PDCompanyId.message})]}),("admin"===(null===L||void 0===L?void 0:L.userType)||"company"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType))&&(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Branch ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(n.xI,{control:g,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(j.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,T.jsx)(j.A.Option,{value:"",children:"Select Branch"}),B?(0,T.jsx)(j.A.Option,{disabled:!0,children:(0,T.jsx)(A.A,{})}):null===w||void 0===w?void 0:w.map(e=>(0,T.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),D.PDBranchId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.PDBranchId.message})]}),"Vendor"===(0,n.FH)({control:g,name:"typeSelection"})&&(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Vendor ",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(n.xI,{control:g,name:"vendorId",rules:{required:"vendor is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(j.A,(0,a.A)((0,a.A)({},l),{},{onFocus:()=>{S((0,N.Pe)({companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?Q:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,branchId:"company"===(null===L||void 0===L?void 0:L.userType)||"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)?H:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}))},defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,T.jsx)(j.A.Option,{value:"",children:"Select Vendor"}),M?(0,T.jsx)(j.A.Option,{disabled:!0,children:(0,T.jsx)(A.A,{})}):null===F||void 0===F?void 0:F.map((e,l)=>(0,T.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]}))}}),D.vendorId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.vendorId.message})]})}),"Employe"===(0,n.FH)({control:g,name:"typeSelection"})&&(0,T.jsxs)("div",{className:"w-full",children:[(0,T.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,T.jsx)(n.xI,{name:"employee",control:g,rules:{required:"Employee is required"},render:e=>{let{field:l}=e;return(0,T.jsx)(m.Ay,(0,a.A)((0,a.A)({},l),{},{onFocus:()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?Q:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,branchId:"company"===(null===L||void 0===L?void 0:L.userType)||"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)?H:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId};S((0,v.qV)(e))},options:null===P||void 0===P?void 0:P.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(D.employee?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),D.employee&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.employee.message})]}),(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Amount",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01"},l("amount",{required:"Amount is required"})),{},{className:" ".concat(t.Ol," ").concat(D.amount?"border-[1px] ":"border-gray-300"),placeholder:"Enter Amount"})),D.amount&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.amount.message})]}),(0,T.jsxs)("div",{className:"py-2",children:[(0,T.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-2 md:my-1 px-3 md:mt-2",children:[(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("div",{className:"flex items-center gap-4",children:[(0,T.jsx)("label",{className:"your-input-label-class",children:(0,T.jsx)(n.xI,{name:"paymentMode",control:g,defaultValue:"cash",rules:{required:"Type is required"},render:e=>{let{field:l}=e;return(0,T.jsxs)(h.Ay.Group,(0,a.A)((0,a.A)({defaultValue:"cash"},l),{},{children:[(0,T.jsx)(h.Ay,{className:"".concat(t.Q0),value:"cash",children:"Cash"}),(0,T.jsx)(h.Ay,{className:"".concat(t.Q0),value:"bank",children:"Bank"})]}))}})}),D.type&&(0,T.jsx)("span",{className:"error-message",children:D.type.message})]}),D.type&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.type.message})]}),"cash"!==q("paymentMode")&&(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Sender Bank",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)(n.xI,{control:g,name:"bankId",rules:{required:"bankId is required"},render:e=>{var l,d;let{field:n}=e;return(0,T.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",className:"".concat(t.Hy," "),onFocus:()=>{S((0,c.ZN)({_id:"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)||"company"===(null===L||void 0===L?void 0:L.userType)?z:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId}))},children:[(0,T.jsx)(j.A.Option,{value:"",children:"Select Bank"}),(null===E||void 0===E||null===(l=E.data)||void 0===l?void 0:l.bankData)&&(null===E||void 0===E||null===(d=E.data)||void 0===d?void 0:d.bankData.length)>0&&E.data.bankData.map(e=>(0,T.jsx)(j.A.Option,{value:e._id,children:(0,t.ig)(e)},e._id)),"         "]}))}}),D.bankId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.bankId.message})]}),"cash"===q("paymentMode")&&(0,T.jsxs)("div",{className:"w-full",children:[(0,T.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,T.jsx)(n.xI,{name:"employeeId",control:g,rules:{required:"Employee is required"},render:e=>{let{field:l}=e;return(0,T.jsx)(m.Ay,(0,a.A)((0,a.A)({},l),{},{options:null===P||void 0===P?void 0:P.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(D.employeeId?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),D.employeeId&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.employeeId.message})]}),"cheque"===q("paymentMode")&&(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Cheque No",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)("input",(0,a.A)((0,a.A)({type:""},l("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(t.Ol," ").concat(D.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),D.chequeNo&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.chequeNo.message})]}),"bank"===q("paymentMode")&&(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Transaction No",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)("input",(0,a.A)((0,a.A)({type:"text"},l("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(t.Ol," ").concat(D.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter transaction no"})),D.transactionNo&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.transactionNo.message})]})]}),(0,T.jsx)("div",{className:"px-3",children:(0,T.jsxs)("div",{children:[(0,T.jsx)("label",{className:"".concat(t.Q0),children:"Payment Date"}),(0,T.jsx)(n.xI,{name:"paymentDate",control:g,render:e=>{let{field:l}=e;return(0,T.jsx)(y.A,{field:l,disabledDate:e=>e&&e>f()().endOf("day"),errors:D})}}),D.date&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:"Date is required"})]})})]}),(0,T.jsxs)("div",{className:"",children:[(0,T.jsxs)("label",{className:"".concat(t.Q0),children:["Naration",(0,T.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,T.jsx)("textarea",(0,a.A)((0,a.A)({},l("naration",{required:"Naration is required"})),{},{className:" ".concat(t.Ol," ").concat(D.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),D.naration&&(0,T.jsx)("p",{className:"text-red-500 text-sm",children:D.naration.message})]}),(0,T.jsxs)("div",{className:"border-t pt-4 mt-6",children:[(0,T.jsx)("div",{className:"font-medium mb-2",children:"Attachments:"}),R?(0,T.jsx)("div",{className:"space-y-2"}):(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsx)("input",{type:"file",onChange:e=>{const l=e.target.files[0];if(l){e.target.value=null;const d={filePath:l,isVideo:!1,isMultiple:!1};S((0,p.Sg)(d)).then(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.payload)&&void 0!==l&&l.data&&J(l=>{var d;return[...l,null===(d=e.payload)||void 0===d?void 0:d.data]})})}},className:"hidden",id:"file-upload"}),(0,T.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white cursor-pointer",children:[(0,T.jsx)(x.chT,{className:"mr-2"})," Add Attachments"]}),(0,T.jsx)("div",{className:"space-y-2",children:null===G||void 0===G?void 0:G.map((e,l)=>(0,T.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[(0,T.jsxs)("a",{href:"".concat("https://vigapi.vigorousit.com","/public/").concat(e),className:"flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[(0,T.jsx)(x.chT,{className:"text-gray-500"}),(0,T.jsx)("span",{className:"text-sm text-gray-600",children:e})]}),(0,T.jsx)("button",{type:"button",onClick:()=>(e=>{J(l=>l.filter((l,d)=>d!==e))})(l),className:"text-red-500 hover:text-red-700",children:(0,T.jsx)(x.QCr,{})})]},l))})]})]})]}),(0,T.jsx)("div",{className:"flex justify-end",children:(0,T.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:e?(0,T.jsx)(I.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=3206.06f9013f.chunk.js.map