"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[78],{90078:(e,d,l)=>{l.r(d),l.d(d,{default:()=>T});var a=l(89379),i=l(24858),o=l(39160),n=l(83003),s=l(73216),c=l(65043),r=l(15187),t=l(31744),u=l(78729),v=l(66015),m=l(42837),p=l(31536),h=(l(88967),l(97893)),x=l(70337),y=l(12208),N=(l(8928),l(47989)),j=(l(33007),l(6720)),b=l(94084),g=l(70579);const T=()=>{var e,d;const{register:l,handleSubmit:T,control:I,watch:A,formState:{errors:f},setValue:q}=(0,i.mN)({defaultValues:{heads:[{headType:"head"}]}}),D=(0,n.wA)(),_=(0,s.Zp)(),{companyList:Q}=(0,n.d4)(e=>e.company),{branchList:P}=(0,n.d4)(e=>e.branch),C=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),{clientList:B}=(0,n.d4)(e=>e.client),O=(0,i.FH)({control:I,name:"PDCompanyId",defaultValue:""}),k=(0,i.FH)({control:I,name:"PDBranchId",defaultValue:""}),{officeAddressListData:S}=(0,n.d4)(e=>e.officeAddress),{branchDetailsData:H}=(0,n.d4)(e=>e.branch),{employeList:E}=(0,n.d4)(e=>e.employe),{clientGroupList:F}=(0,n.d4)(e=>e.clientGroup),{invoiceListData:Y}=(0,n.d4)(e=>e.invoice),{expenseTypeList:M}=(0,n.d4)(e=>e.expenceHead),{fields:w,append:V,remove:L}=(0,i.jz)({control:I,name:"heads"});(0,c.useEffect)(()=>{(O||"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType))&&D((0,t.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?O:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId}))},[O]),(0,c.useEffect)(()=>{"admin"===(null===C||void 0===C?void 0:C.userType)&&D((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);(0,c.useEffect)(()=>{(k||"company"!==(null===C||void 0===C?void 0:C.userType)&&"companyDirector"!==(null===C||void 0===C?void 0:C.userType)&&"admin"!==(null===C||void 0===C?void 0:C.userType))&&D((0,t.ZN)({_id:"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)?k:"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId}))},[k]),(0,c.useEffect)(()=>{!O&&"admin"===(null===C||void 0===C?void 0:C.userType)||!k&&"companBranch"===(null===C||void 0===C?void 0:C.userType)&&"employee"!==(null===C||void 0===C?void 0:C.userType)||J()},[O,k]);const J=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?O:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,branchId:"company"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)?k:"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId};D((0,m.qV)(e))};(0,c.useEffect)(()=>{A("groupName")&&D((0,x.Aq)({companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?A("PDCompanyId"):"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,branchId:"company"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)?A("PDBranchId"):"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,groupId:"",directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1}))},[A("groupName")]);const z=(()=>{const e=[];for(let d=2005;d<=2034;d++)e.push("".concat(d,"-").concat(d+1));return e})(),G=["January","February","March","April","May","June","July","August","September","October","November","December"],R=["Jan-Mar","Apr-Jun","Jul-Sept","Oct-Dec"],Z=(0,i.FH)({control:I,name:"heads"});return(0,c.useEffect)(()=>{const e=Z.reduce((e,d)=>e+Number(d.amount||0),0);q("grandTotal",e)},[Z,q]),(0,g.jsx)(o.A,{children:(0,g.jsx)("div",{className:"gap-4",children:(0,g.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:T(e=>{var d,l,a,i,o;const n=null===e||void 0===e||null===(d=e.heads)||void 0===d||null===(l=d.filter(e=>"other"===(null===e||void 0===e?void 0:e.headType)))||void 0===l?void 0:l.map(e=>({headType:null===e||void 0===e?void 0:e.headType,description:null===e||void 0===e?void 0:e.description,amount:+(null===e||void 0===e?void 0:e.amount)})),s=null===e||void 0===e||null===(a=e.heads)||void 0===a||null===(i=a.filter(e=>"head"===(null===e||void 0===e?void 0:e.headType)))||void 0===i?void 0:i.map(e=>({headType:null===e||void 0===e?void 0:e.headType,headId:null===e||void 0===e?void 0:e.subHeadId,description:null===e||void 0===e?void 0:e.description,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:null===e||void 0===e?void 0:e.financialYear,type:null===e||void 0===e?void 0:e.type,monthName:null===e||void 0===e?void 0:e.monthName,monthQuaters:null===e||void 0===e?void 0:e.monthQuaters})),c={companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,directorId:"companyDirector"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.directorId,branchId:"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)||"company"===(null===C||void 0===C?void 0:C.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,expenseType:"client_expense",clientGroupId:null===e||void 0===e?void 0:e.groupName,clientId:null===e||void 0===e?void 0:e.client,employeId:"cash"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e||null===(o=e.employeeId)||void 0===o?void 0:o.value:null,bankAccId:"cash"!==(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.bankId:null,transactionNo:"bank"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.transactionNo:null,paymentMode:null===e||void 0===e?void 0:e.type,totalAmount:null===e||void 0===e?void 0:e.grandTotal,chequeNo:"cheque"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.chequeNo:null,date:null===e||void 0===e?void 0:e.date,naration:null===e||void 0===e?void 0:e.naration,heads:[...n,...s]};D((0,h.Au)(c)).then(e=>{e.error||_("/admin/clientExpence")})}),children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:["admin"===(null===C||void 0===C?void 0:C.userType)&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Company ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(r.Ol," ").concat(f.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===Q||void 0===Q?void 0:Q.map(e=>(0,g.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),f.PDCompanyId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.PDCompanyId.message})]}),("admin"===(null===C||void 0===C?void 0:C.userType)||"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType))&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Branch ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("PDBranchId",{required:"Branch is required"})),{},{className:" ".concat(r.Ol," ").concat(f.PDBranchId?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{className:"",value:"",children:"Select Branch"}),null===P||void 0===P?void 0:P.map(e=>(0,g.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),f.PDBranchId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.PDBranchId.message})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Group Type ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("groupName",{required:"Organization type is required"})),{},{className:" ".concat(r.Ol," ").concat(f.groupName?"border-[1px] ":"border-gray-300"),onFocus:()=>{D((0,y.J_)({companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?A("PDCompanyId"):"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,branchId:"company"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)?A("PDBranchId"):"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}))},onChange:e=>{var d;q("maxAdvance",null===F||void 0===F||null===(d=F.find(d=>(null===d||void 0===d?void 0:d._id)===e.target.value))||void 0===d?void 0:d.advancedBalance),D((0,x.Aq)({companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?A("PDCompanyId"):"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,branchId:"company"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)?A("PDBranchId"):"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,directorId:"",organizationId:"",industryId:"",groupId:e.target.value,text:"",sort:!0,status:!0,isPagination:!1}))},children:[(0,g.jsx)("option",{className:"text-xs",value:"",children:"Select Group Type"}),null===F||void 0===F?void 0:F.map((e,d)=>(0,g.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName,"(",null===e||void 0===e?void 0:e.groupName,")"]}))]})),f.groupName&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.groupName.message})]}),(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Client ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("client",{required:"Client is required"})),{},{className:" ".concat(r.Ol," ").concat(f.client?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{className:"text-xs",value:"",children:"Select Client"}),null===B||void 0===B?void 0:B.map((e,d)=>(0,g.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),f.client&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.client.message})]})]}),(0,g.jsx)("div",{children:w.map((e,d)=>{var i,o,n,s,c,t,u,v,m,h,x,y,b,T,I,_,Q,P,B,S,H,E,F,V,J,Z,U,W,K,X,$,ee,de,le,ae,ie,oe,ne,se,ce,re,te,ue,ve,me,pe,he,xe,ye,Ne,je,be,ge,Te,Ie,Ae,fe,qe,De;return(0,g.jsxs)("div",{className:"border border-gray-300 rounded-md my-2",children:[(0,g.jsx)("div",{className:"flex justify-end bg-header rounded-t-md p-2",children:(0,g.jsx)("button",{className:"text-white",size:20,type:"button",onClick:()=>L(d),children:(0,g.jsx)(j.b6i,{})})}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Head Type"}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("heads[".concat(d,"].headType"),{required:"Head type is required"})),{},{defaultValue:"head",className:" ".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(i=f.heads)&&void 0!==i&&null!==(o=i[d])&&void 0!==o&&o.headType?"border-[1px] ":"border-gray-300"),onChange:e=>{q("heads[".concat(d,"].headType"),e.target.value),q("heads[".concat(d,"].amount"),0),q("heads[".concat(d,"].subHeadId"),""),q("heads[".concat(d,"].invoiceId"),"")},children:[(0,g.jsx)("option",{value:"head",children:"Head"}),(0,g.jsx)("option",{value:"other",children:"Other"})]})),(null===f||void 0===f||null===(n=f.heads)||void 0===n||null===(s=n[d])||void 0===s?void 0:s.headType)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(c=f.heads)||void 0===c||null===(t=c[d])||void 0===t||null===(u=t.headType)||void 0===u?void 0:u.message})]}),"head"===A("heads[".concat(d,"].headType"))&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Expence Head"}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({onFocus:()=>{D((0,p.dV)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?O:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,branchId:"company"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)?A("PDBranchId"):"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId}))}},l("heads[".concat(d,"].subHeadId"),{required:"Expence Head is required"})),{},{defaultValue:e.subHeadId,className:" ".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(v=f.heads)&&void 0!==v&&null!==(m=v[d])&&void 0!==m&&m.subHeadId?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{className:"text-xs",value:"",children:"Select Expence Head"}),null===M||void 0===M?void 0:M.map((e,d)=>(0,g.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))]})),(null===f||void 0===f||null===(h=f.heads)||void 0===h||null===(x=h[d])||void 0===x?void 0:x.subHeadId)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(y=f.heads)||void 0===y||null===(b=y[d])||void 0===b||null===(T=b.subHeadId)||void 0===T?void 0:T.message})]}),(0,g.jsx)("div",{className:"col-span-2 my-2",children:(0,g.jsxs)("div",{className:"grid ".concat("Yearly"===A("heads[".concat(d,"].type"))?"grid-cols-1 md:grid-cols-2":A("heads[".concat(d,"].type"))?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"," space-x-4"),children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Financial Year ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({defaultValue:(0,r.Yz)()},l("heads[".concat(d,"].financialYear"),{required:"Financial year is required"})),{},{className:"".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(I=f.heads)&&void 0!==I&&null!==(_=I[d])&&void 0!==_&&_.financialYear?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Select Financial Year"}),z.map((e,d)=>(0,g.jsx)("option",{value:e,children:e},d))]})),(null===f||void 0===f||null===(Q=f.heads)||void 0===Q||null===(P=Q[d])||void 0===P?void 0:P.financialYear)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(B=f.heads)||void 0===B||null===(S=B[d])||void 0===S?void 0:S.financialYear.message})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Type ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("heads[".concat(d,"].type"),{required:"Type is required"})),{},{className:"".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(H=f.heads)&&void 0!==H&&null!==(E=H[d])&&void 0!==E&&E.type?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Select Type"}),(0,g.jsx)("option",{value:"Quaterly",children:"Quaterly"}),(0,g.jsx)("option",{value:"Monthly",children:"Monthly"}),(0,g.jsx)("option",{value:"Yearly",children:"Yearly"})]})),(null===f||void 0===f||null===(F=f.heads)||void 0===F||null===(V=F[d])||void 0===V?void 0:V.type)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(J=f.heads)||void 0===J||null===(Z=J[d])||void 0===Z?void 0:Z.type.message})]}),"Quaterly"===A("heads[".concat(d,"].type"))&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Quarter ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("heads[".concat(d,"].monthQuaters"),{required:"Reset Month is required"})),{},{className:"".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(U=f.heads)&&void 0!==U&&null!==(W=U[d])&&void 0!==W&&W.monthQuaters?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Select Quarter"}),R.map(e=>(0,g.jsx)("option",{value:e,children:e},e))]})),(null===f||void 0===f||null===(K=f.heads)||void 0===K||null===(X=K[d])||void 0===X?void 0:X.monthQuaters)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===($=f.heads)||void 0===$||null===(ee=$[d])||void 0===ee?void 0:ee.monthQuaters.message})]}),"Monthly"===A("heads[".concat(d,"].type"))&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Month ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("heads[".concat(d,"].monthName"),{required:"Month is required"})),{},{className:"".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(de=f.heads)&&void 0!==de&&null!==(le=de[d])&&void 0!==le&&le.monthName?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Select Month"}),G.map(e=>(0,g.jsx)("option",{value:e,children:e},e))]})),(null===f||void 0===f||null===(ae=f.heads)||void 0===ae||null===(ie=ae[d])||void 0===ie?void 0:ie.monthName)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(oe=f.heads)||void 0===oe||null===(ne=oe[d])||void 0===ne?void 0:ne.monthName.message})]})]})})]}),"invoice"===A("heads[".concat(d,"].headType"))&&(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Invoice ID"}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("heads[".concat(d,"].invoiceId"),{required:"Invoice ID is required"})),{},{onFocus:()=>{(()=>{const e={directorId:"",companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?O:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,branchId:"company"===(null===C||void 0===C?void 0:C.userType)||"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)?k:"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,clientId:A("client"),text:"",sort:!0,status:"Paid",isPagination:!0};D((0,N.W2)(e))})()},onChange:e=>{if("invoice"===A("heads[".concat(d,"].headType"))){var l;q("heads[".concat(d,"].amount"),null===Y||void 0===Y||null===(l=Y.find(d=>(null===d||void 0===d?void 0:d._id)===e.target.value))||void 0===l?void 0:l.grandTotal);const a=w.reduce((e,d,l)=>e+(parseFloat(A("heads[".concat(l,"].amount")))||0),0);q("totalAmount",a)}},className:" ".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(se=f.heads)&&void 0!==se&&null!==(ce=se[d])&&void 0!==ce&&ce.invoiceId?"border-[1px] ":"border-gray-300"),children:[(0,g.jsx)("option",{className:"text-xs",value:"",children:"Select Client"}),null===Y||void 0===Y?void 0:Y.map((e,d)=>(0,g.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.clientName,"(",null===e||void 0===e?void 0:e.invoiceNumber,")"]}))]})),(null===f||void 0===f||null===(re=f.heads)||void 0===re||null===(te=re[d])||void 0===te?void 0:te.invoiceId)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(ue=f.heads)||void 0===ue||null===(ve=ue[d])||void 0===ve||null===(me=ve.invoiceId)||void 0===me?void 0:me.message})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Description"}),(0,g.jsx)("input",(0,a.A)((0,a.A)({},l("heads[".concat(d,"].description"),{required:"Description is required"})),{},{defaultValue:e.description,className:" ".concat(r.Ol," ").concat(null!==f&&void 0!==f&&null!==(pe=f.heads)&&void 0!==pe&&null!==(he=pe[d])&&void 0!==he&&he.description?"border-[1px] ":"border-gray-300")})),(null===f||void 0===f||null===(xe=f.heads)||void 0===xe||null===(ye=xe[d])||void 0===ye?void 0:ye.description)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(Ne=f.heads)||void 0===Ne||null===(je=Ne[d])||void 0===je||null===(be=je.description)||void 0===be?void 0:be.message})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Amount"}),(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01",disabled:"invoice"===A("heads[".concat(d,"].headType"))},l("heads[".concat(d,"].amount"),{required:"Amount is required"})),{},{onChange:e=>{const l=parseFloat(e.target.value)||0;q("heads[".concat(d,"].amount"),l);const a=w.reduce((e,d,l)=>e+(parseFloat(A("heads[".concat(l,"].amount")))||0),0);q("totalAmount",a)},className:" ".concat("invoice"===A("heads[".concat(d,"].headType"))?r.id:r.Ol," ").concat(null!==f&&void 0!==f&&null!==(ge=f.heads)&&void 0!==ge&&null!==(Te=ge[d])&&void 0!==Te&&Te.amount?"border-[1px] ":"border-gray-300")})),(null===f||void 0===f||null===(Ie=f.heads)||void 0===Ie||null===(Ae=Ie[d])||void 0===Ae?void 0:Ae.amount)&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:null===f||void 0===f||null===(fe=f.heads)||void 0===fe||null===(qe=fe[d])||void 0===qe||null===(De=qe.amount)||void 0===De?void 0:De.message})]})]})]},e.id)})}),(0,g.jsx)("button",{type:"button",onClick:()=>V({headType:"head"}),className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Add more"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-8 md:my-1 px-3 md:mt-4",children:[A("grandTotal")>0&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("div",{className:" flex items-center gap-4",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:[(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"radio",value:"cash"},l("type",{required:"Type is required"})),{},{className:"mr-2"})),"Cash"]}),(0,g.jsxs)("label",{className:"".concat(r.Q0),children:[(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"radio",value:"cheque"},l("type",{required:"Type is required"})),{},{className:"mr-2"})),"Cheque"]}),(0,g.jsxs)("label",{className:"".concat(r.Q0),children:[(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"radio",value:"bank"},l("type",{required:"Type is required"})),{},{className:"mr-2"})),"Bank"]})]}),f.type&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.type.message})]}),A("grandTotal")>0&&"cash"!==A("type")&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Sender Bank",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsxs)("select",(0,a.A)((0,a.A)({},l("bankId")),{},{className:"".concat(r.Ol,"  ").concat(f.bankId?"border-[1px] ":"border-gray-300"," "),children:[(0,g.jsx)("option",{value:"",children:"select bank"}),(null===H||void 0===H||null===(e=H.data)||void 0===e?void 0:e.bankData)&&(null===H||void 0===H||null===(d=H.data)||void 0===d?void 0:d.bankData.length)>0&&H.data.bankData.map(e=>(0,g.jsx)("option",{value:e._id,children:"".concat(e.bankName," (").concat(e.branchName,")")},e._id))]})),f.bankId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.bankId.message})]}),A("grandTotal")>0&&"cash"===A("type")&&(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Employee"}),(0,g.jsx)(i.xI,{name:"employeeId",control:I,rules:{required:"Employee is required"},render:e=>{let{field:d}=e;return(0,g.jsx)(v.Ay,(0,a.A)((0,a.A)({},d),{},{options:null===E||void 0===E?void 0:E.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(r.Ph," ").concat(f.employeeId?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),f.employeeId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.employeeId.message})]}),A("grandTotal")>0&&"cheque"===A("type")&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Cheque No",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"text"},l("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(r.Ol," ").concat(f.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),f.chequeNo&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.chequeNo.message})]}),A("grandTotal")>0&&"bank"===A("type")&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Transaction No",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"text"},l("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(r.Ol," ").concat(f.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),f.transactionNo&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.transactionNo.message})]}),(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Naration",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)("textarea",(0,a.A)((0,a.A)({},l("naration",{required:"Naration is required"})),{},{className:" ".concat(r.Ol," ").concat(f.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),f.naration&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.naration.message})]}),(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(r.Q0),children:["Date",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)(i.xI,{name:"date",control:I,render:e=>{let{field:d}=e;return(0,g.jsx)(b.A,{field:d,errors:f})}}),f.date&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:f.date.message})]})]}),(0,g.jsx)("div",{className:"w-full flex flex-row items-end justify-end",children:(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)("label",{className:"".concat(r.Q0),children:"Grand Total"}),(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"text"},l("grandTotal",{})),{},{className:"".concat(r.Ol),placeholder:"grandTotal",disabled:!0}))]})})}),(0,g.jsx)("div",{className:"flex justify-end",children:(0,g.jsx)("button",{type:"submit",className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Submit"})})]})})})}}}]);
//# sourceMappingURL=78.7b455fe7.chunk.js.map