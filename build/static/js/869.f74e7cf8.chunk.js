"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[869],{10869:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(89379),s=a(73216),r=a(39160),o=a(83003),d=a(65043),l=a(30064),c=a.n(l),i=a(31174),p=a(23156),u=(a(65337),a(60184)),x=a(47196),h=a(36999),m=a(78227),v=a(65512),b=a(96651),j=a(4938),w=a(55971),f=a(24858),g=a(60446),y=a.n(g),N=a(15187),A=a(78729),D=a(31744),C=a(70579);const S=function(){var e,t,a;const{register:l,setValue:g,control:S,formState:{errors:L}}=(0,f.mN)(),k=JSON.parse(localStorage.getItem("user_info_".concat(N.AU))),I=(0,s.Zp)(),P=(0,o.wA)(),{companyList:_}=(0,o.d4)(e=>e.company),{branchList:z}=(0,o.d4)(e=>e.branch),{pageListData:B,totalpageListCount:E,loading:O}=(0,o.d4)(e=>e.page),[F,T]=(0,d.useState)(""),[V,Y]=(0,d.useState)(1),q=(0,f.FH)({control:S,name:"PDCompanyId",defaultValue:""}),H=(0,f.FH)({control:S,name:"PDBranchId",defaultValue:""}),R=(0,f.FH)({control:S,name:"status",defaultValue:""}),J=[q,H,R,F].join("-"),[M,U]=(0,d.useState)(!1);(0,d.useEffect)(()=>{M?1===V?G():Y(1):U(e=>!0)},[J]),(0,d.useEffect)(()=>{G()},[V]);const G=()=>{const e={pageSize:20,currentPage:1,data:{text:F,status:"true"===R||"false"!==R&&""}};P((0,h.N6)(e))};(0,d.useEffect)(()=>{(q||"company"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType))&&P((0,D.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?q:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId}))},[q]),(0,d.useEffect)(()=>{"admin"===(null===k||void 0===k?void 0:k.userType)&&P((0,A.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:W,canRead:Z,canUpdate:K,canDelete:Q}=(0,j.A)();return(0,C.jsx)(r.A,{onChange:e=>{T(e)},children:(0,C.jsxs)("section",{children:[(0,C.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,C.jsx)("div",{className:"grid lg:grid-cols-3 sm:grid-cols-3 grid-cols-1 flex-wrap md:gap-3 gap-1",children:(0,C.jsx)(f.xI,{control:S,name:"status",rules:{required:"Status is required"},render:e=>{let{field:t}=e;return(0,C.jsxs)(v.A,(0,n.A)((0,n.A)({},t),{},{defaultValue:"",className:"".concat(N.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(v.A.Option,{value:"",children:"Select status"}),(0,C.jsx)(v.A.Option,{value:"true",children:"Active"}),(0,C.jsx)(v.A.Option,{value:"false",children:"Inactive"})]}))}})}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{g("PDBranchId",""),g("PDCompanyId",""),g("status","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),W&&(0,C.jsx)(b.A,{placement:"topLeft",title:"Add Page",children:(0,C.jsxs)("button",{onClick:()=>{I("/admin/company-page/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,C.jsx)(p.OiG,{}),(0,C.jsx)("span",{className:"text-[12px] whitespace-nowrap",children:"Add Page"})]})})]})]}),(0,C.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:Z&&(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"slug"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"createdAt"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"createdBy"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"title"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(K||Q||Z)&&(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),O?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(w.A,{})})}):(0,C.jsx)("tbody",{children:B&&null!==B&&void 0!==B&&B.docs&&(null===B||void 0===B||null===(e=B.docs)||void 0===e?void 0:e.length)>0?null===B||void 0===B||null===(t=B.docs)||void 0===t?void 0:t.map((e,t)=>{var a,n;return(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:t+1}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:null!==(a="".concat(null===e||void 0===e?void 0:e.slug))&&void 0!==a?a:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"".concat(y()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"".concat(null===e||void 0===e?void 0:e.createdBy)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:"".concat(null===e||void 0===e?void 0:e.title)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(n="Inactive")?n:"-"})}),(K||Q||Z)&&(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[Z&&(0,C.jsx)(b.A,{placement:"topLeft",title:"View Details",children:(0,C.jsx)("button",{onClick:()=>I("/admin/view-page/".concat((0,i.w)(null===e||void 0===e?void 0:e._id))),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(u.Ny1,{className:"hover:text-[#28a745] text-[#3c8dbc]",size:16})})}),K&&(0,C.jsx)(b.A,{placement:"topLeft",title:"Edit",children:(0,C.jsx)("button",{onClick:()=>{I("/admin/company-page/edit/".concat((0,i.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(p.Jcp,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),Q&&(0,C.jsx)(b.A,{placement:"topLeft",title:"Delete",children:(0,C.jsx)("button",{onClick:()=>(e=>{let t={_id:e};c().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&P((0,h.SO)(t)).then(e=>{G()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(x.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]},null===e||void 0===e?void 0:e._id)}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:7,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===B||void 0===B||null===(a=B.docs)||void 0===a?void 0:a.length)>0&&(0,C.jsx)(m.A,{totalCount:E,pageSize:10,currentPage:V,onChange:e=>{Y(e)}})]})})}},65337:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(91686),s=a(70579);const r=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,s.jsx)(n.A,{size:"large"})})}}}]);
//# sourceMappingURL=869.f74e7cf8.chunk.js.map