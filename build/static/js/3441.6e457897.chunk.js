"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3441],{33441:(e,a,t)=>{t.r(a),t.d(a,{default:()=>B});var l=t(89379),s=t(65043),d=t(73216),n=t(83003),i=t(23156),c=t(47196),r=t(30064),o=t.n(r),u=t(39160),x=t(31174),m=t(15187),v=t(64510),h=t(78227),p=t(65512),j=t(96651),f=t(30326),y=t(60446),b=t.n(y),N=t(24858),g=t(4938),D=t(31744),A=t(78729),C=t(55971),w=t(83002),S=t(78973),I=t(89427),k=t(70579);const B=function(){const e=(0,d.Zp)(),a=(0,n.wA)(),{eventCalanderData:t,totaleventCalanderCount:r,loading:y}=(0,n.d4)(e=>e.eventCalander),B=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),{control:T,register:P,setValue:_,formState:{errors:O}}=(0,N.mN)(),H=(0,N.FH)({control:T,name:"status",defaultValue:""}),Y=(0,N.FH)({control:T,name:"PDCompanyId",defaultValue:""}),E=(0,N.FH)({control:T,name:"PDBranchId",defaultValue:""}),[L,V]=(0,s.useState)(1),{companyList:q}=(0,n.d4)(e=>e.company),{branchList:z,branchListloading:F}=(0,n.d4)(e=>e.branch),[M,R]=(0,s.useState)(""),J=[E,M,H].join("-"),[U,W]=(0,s.useState)(!1);(0,s.useEffect)(()=>{U?1===L?G():V(1):W(e=>!0)},[J]),(0,s.useEffect)(()=>{G()},[L]);const G=()=>{const e={currentPage:L,pageSize:10,reqData:{companyId:"admin"===(null===B||void 0===B?void 0:B.userType)?Y:"company"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.companyId,branchId:"company"===(null===B||void 0===B?void 0:B.userType)||"admin"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType)?E:"companyBranch"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.branchId,text:M,status:"true"===H||"false"!==H&&"",sort:!0,isPagination:!0}};a((0,v.h9)(e))},[Z,K]=(0,s.useState)([]);(0,s.useEffect)(()=>{(Y||"company"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType))&&a((0,D.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===B||void 0===B?void 0:B.userType)?Y:"company"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.companyId}))},[Y]),(0,s.useEffect)(()=>{"admin"===(null===B||void 0===B?void 0:B.userType)&&a((0,A.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,s.useEffect)(()=>{t&&Q()},[t]);const Q=(e,a)=>{const l=(0,m.Hc)(e,a,t);K(l)},{canCreate:X,canRead:$,canUpdate:ee,canDelete:ae}=(0,g.A)();return(0,k.jsx)(u.A,{onChange:e=>{R(e)},children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"",children:(0,k.jsxs)("div",{className:"md:flex grid grid-cols-1 justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,k.jsxs)("div",{className:"grid md:grid-cols-3 grid-cols-1 gap-3",children:["admin"===(null===B||void 0===B?void 0:B.userType)&&(0,k.jsxs)("div",{className:"",children:[(0,k.jsx)(N.xI,{control:T,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,k.jsxs)(p.A,(0,l.A)((0,l.A)({},a),{},{defaultValue:"",disabled:y,className:"".concat(m.Lp," "),children:[(0,k.jsx)(p.A.Option,{value:"",children:"Select Company"}),null===q||void 0===q?void 0:q.map(e=>(0,k.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),O.PDCompanyId&&(0,k.jsx)("p",{className:"text-red-500 text-sm",children:O.PDCompanyId.message})]}),("admin"===(null===B||void 0===B?void 0:B.userType)||"company"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType))&&(0,k.jsxs)("div",{className:"",children:[(0,k.jsx)(N.xI,{control:T,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,k.jsxs)(p.A,(0,l.A)((0,l.A)({},a),{},{defaultValue:"",disabled:y,showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(m.Lp," "),children:[(0,k.jsx)(p.A.Option,{value:"",children:"Select Branch"}),F?(0,k.jsx)(p.A.Option,{disabled:!0,children:(0,k.jsx)(I.A,{})}):null===z||void 0===z?void 0:z.map(e=>(0,k.jsx)(p.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),O.PDBranchId&&(0,k.jsx)("p",{className:"text-red-500 text-sm",children:O.PDBranchId.message})]}),(0,k.jsx)(N.xI,{name:"status",control:T,rules:{},render:e=>{let{field:a}=e;return(0,k.jsxs)(p.A,(0,l.A)((0,l.A)({},a),{},{className:"w-32  ".concat(m.Lp),disabled:y,placeholder:"Select Status",defaultValue:"",showSearch:!0,children:[(0,k.jsx)(p.A.Option,{value:"",children:"Select Status"}),(0,k.jsx)(p.A.Option,{value:"true",children:" Active "}),(0,k.jsx)(p.A.Option,{value:"false",children:" InActive "})]}))}}),(0,k.jsx)("button",{onClick:()=>{_("PDBranchId",""),_("PdCompanyId",""),_("status","")},className:"bg-header  py-1 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,k.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),X&&(0,k.jsx)(j.A,{placement:"topLeft",title:"Add Events",children:(0,k.jsxs)("button",{onClick:()=>{e("/admin/event-calander/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,k.jsx)(i.OiG,{}),(0,k.jsx)("span",{className:"text-[12px]",children:"Add Event Calander"})]})})]})}),(0,k.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:(0,k.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,k.jsx)("thead",{className:"",children:(0,k.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,k.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,k.jsx)("th",{className:"tableHead",children:(0,k.jsxs)("div",{className:"flex gap-1",children:["Name",(0,k.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,k.jsx)(i.Odn,{onClick:()=>Q("title","asc")}),(0,k.jsx)(i.BNo,{onClick:()=>Q("title","desc")})]})]})}),(0,k.jsx)("th",{className:"tableHead",children:(0,k.jsxs)("div",{className:"flex gap-1",children:["Start Date",(0,k.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,k.jsx)(i.Odn,{onClick:()=>Q("startDate","asc")}),(0,k.jsx)(i.BNo,{onClick:()=>Q("startDate","desc")})]})]})}),(0,k.jsx)("th",{className:"tableHead",children:(0,k.jsx)("div",{className:"flex gap-1",children:"End Date"})}),(0,k.jsx)("th",{className:"tableHead",children:(0,k.jsx)("div",{className:"flex gap-1",children:"Created At"})}),(0,k.jsx)("th",{className:"tableHead",children:(0,k.jsxs)("div",{className:"flex gap-1",children:["Created By",(0,k.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,k.jsx)(i.Odn,{onClick:()=>Q("createdBy","asc")}),(0,k.jsx)(i.BNo,{onClick:()=>Q("createdBy","desc")})]})]})}),(0,k.jsx)("th",{className:"tableHead",children:"status"}),(ae||ee)&&(0,k.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),y?(0,k.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,k.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,k.jsx)(C.A,{})})}):(0,k.jsx)("tbody",{children:Z&&(null===Z||void 0===Z?void 0:Z.length)>0?null===Z||void 0===Z?void 0:Z.map((l,s)=>{var d;return(0,k.jsxs)("tr",{className:"text-black ".concat(s%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,k.jsxs)("td",{className:"tableData",children:["  ",s+1+10*(L-1)]}),(0,k.jsx)("td",{className:"tableData",children:null===l||void 0===l?void 0:l.title}),(0,k.jsx)("td",{className:"tableData",children:b()(null===l||void 0===l?void 0:l.startDate).format("DD-MM-YYYY hh:mm A")}),(0,k.jsx)("td",{className:"tableData",children:b()(null===l||void 0===l?void 0:l.endDate).format("DD-MM-YYYY hh:mm A")}),(0,k.jsx)("td",{className:"tableData",children:b()(null===l||void 0===l?void 0:l.createdAt).format("DD-MM-YYYY hh:mm A")}),(0,k.jsx)("td",{className:"tableData",children:null===l||void 0===l?void 0:l.createdBy}),(0,k.jsx)("td",{className:"tableData",children:(0,k.jsx)(j.A,{placement:"topLeft",title:"Status - ".concat(null!==l&&void 0!==l&&l.status?"Active":"InActive"),children:(0,k.jsx)("span",{className:"".concat(null!==l&&void 0!==l&&l.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==l&&void 0!==l&&l.status?"Active":null!==(d="Inactive")?d:"-"})})}),(ae||ee)&&(0,k.jsx)("td",{className:"tableData",children:(0,k.jsx)(f.A,{menu:{items:[...ee?[{key:"edit-event",label:(0,k.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>e("/admin/event-calander/edit/".concat((0,x.w)(null===l||void 0===l?void 0:l._id))),children:[(0,k.jsx)(i.Jcp,{className:"mr-2 text-[#3c8dbc] hover:text-[#337ab7]",size:16}),"Edit"]})}]:[],...ae?[{key:"delete-event",label:(0,k.jsxs)("span",{className:"flex justify-start items-center text-red-500",onClick:()=>(e=>{let l={_id:e};o().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&a((0,v.sT)(l)).then(e=>{L>1&&1==(null===t||void 0===t?void 0:t.length)?V(Number(L-1)):G()})})})(null===l||void 0===l?void 0:l._id),children:[(0,k.jsx)(c.tqC,{className:"mr-2 text-red-600 hover:text-red-500",size:16}),"Delete"]})}]:[],{key:"view-comment",label:(0,k.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>(0,m.v2)((null===l||void 0===l?void 0:l.description)||"Data not available"),children:[(0,k.jsx)(S.qSe,{className:"mr-2 text-blue-800",size:18}),"View Description"]})}]},trigger:["click"],children:(0,k.jsx)(j.A,{placement:"topLeft",title:"More Actions",children:(0,k.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,k.jsx)(w.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})]},null===l||void 0===l?void 0:l._id)}):(0,k.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,k.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===t||void 0===t?void 0:t.length)>0&&(0,k.jsx)(h.A,{totalCount:r,pageSize:10,currentPage:L,onChange:e=>{V(e)}})]})})}}}]);
//# sourceMappingURL=3441.6e457897.chunk.js.map