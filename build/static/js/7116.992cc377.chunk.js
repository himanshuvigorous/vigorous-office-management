"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7116],{27116:(e,a,l)=>{l.r(a),l.d(a,{default:()=>b});var s=l(89379),n=l(24858),c=l(39160),i=l(83003),d=l(73216),t=l(31174),r=l(65043),o=l(15187),m=(l(31744),l(78729),l(88967)),u=l(15063),h=l(30064),x=l.n(h),p=l(17995),v=l(89427),N=l(65512),j=l(70579);const b=()=>{const{loading:e}=(0,i.d4)(e=>e.bankAccount),{register:a,handleSubmit:l,control:h,setValue:b,watch:f,formState:{errors:g}}=(0,n.mN)(),y=(0,i.wA)(),A=(0,d.Zp)(),{bankAccountIdEnc:C}=(0,d.g)(),I=JSON.parse(localStorage.getItem("user_info_".concat(o.AU))),S=(0,t.Yc)(C),{companyList:w,companyListLoading:k}=(0,i.d4)(e=>e.company),{branchList:B,branchListloading:O}=(0,i.d4)(e=>e.branch),{bankAccountDetails:q}=(0,i.d4)(e=>e.bankAccount);(0,r.useEffect)(()=>{let e={_id:S};y((0,u.YI)(e))},[]);(0,n.FH)({control:h,name:"PDCompanyId",defaultValue:""});(0,r.useEffect)(()=>{q&&(b("holderName",null===q||void 0===q?void 0:q.bankholderName),b("accountNumber",null===q||void 0===q?void 0:q.accountNumber),b("ifscCode",null===q||void 0===q?void 0:q.ifscCode),b("bankName",null===q||void 0===q?void 0:q.bankName),b("branchName",null===q||void 0===q?void 0:q.branchName),b("accountType",null===q||void 0===q?void 0:q.accountType),b("fileUplaod",null===q||void 0===q?void 0:q.filePath[0]),b("fileUpload",null===q||void 0===q?void 0:q.filePath[0]),b("PDBranchId",null===q||void 0===q?void 0:q.branchId),b("status",null!==q&&void 0!==q&&q.status?"true":"false"))},[q]);return(0,j.jsx)(c.A,{children:(0,j.jsx)("div",{className:"mt-2",children:(0,j.jsxs)("form",{autoComplete:"off",onSubmit:l(e=>{const a={_id:S,companyId:null===q||void 0===q?void 0:q.companyId,directorId:null===q||void 0===q?void 0:q.directorId,branchId:null===q||void 0===q?void 0:q.branchId,bankholderName:null===e||void 0===e?void 0:e.holderName,bankName:null===e||void 0===e?void 0:e.bankName,accountNumber:null===e||void 0===e?void 0:e.accountNumber,ifscCode:null===e||void 0===e?void 0:e.ifscCode,accountType:null===e||void 0===e?void 0:e.accountType,branchName:null===e||void 0===e?void 0:e.branchName,status:"true"===(null===e||void 0===e?void 0:e.status),filePath:[null===e||void 0===e?void 0:e.fileUplaod]};y((0,u.Tl)(a)).then(e=>{e.error||A(-1)})}),children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 gap-2",children:["admin"===(null===I||void 0===I?void 0:I.userType)&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Company ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(n.xI,{control:h,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(N.A,(0,s.A)((0,s.A)({},a),{},{defaultValue:"",className:"".concat(o.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(N.A.Option,{value:"",children:"Select Company"}),k?(0,j.jsx)(N.A.Option,{disabled:!0,children:(0,j.jsx)(v.A,{})}):null===w||void 0===w?void 0:w.map(e=>(0,j.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),g.PDCompanyId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:g.PDCompanyId.message})]}),("admin"===(null===I||void 0===I?void 0:I.userType)||"company"===(null===I||void 0===I?void 0:I.userType)||"companyDirector"===(null===I||void 0===I?void 0:I.userType))&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Branch ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(n.xI,{name:"PDBranchId",control:h,rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(N.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(o.Hy," ").concat(g.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(N.A.Option,{value:"",children:"Select Branch"}),O?(0,j.jsx)(N.A.Option,{disabled:!0,children:(0,j.jsx)(v.A,{})}):null===B||void 0===B?void 0:B.map(e=>(0,j.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),g.PDBranchId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:g.PDBranchId.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Bank Holder Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)({className:"".concat(o.Ol),placeholder:"Enter Bank Holder Name",name:"holderName"},a("holderName",{required:" Bank Holder Name is required"}))),g.holderName&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.holderName.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Bank Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)({className:"".concat(o.Ol),placeholder:"Enter Bank  Name",name:"bankName"},a("bankName",{required:" Bank  Name is required"}))),g.bankName&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.bankName.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Branch Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)({className:"".concat(o.Ol),placeholder:"Enter Branch  Name",name:"branchName"},a("branchName",{required:" Branch  Name is required"}))),g.branchName&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.branchName.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Account Number ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)({className:"".concat(o.Ol),placeholder:"Enter Account  Number",name:"accountNumber",type:"number"},a("accountNumber",{required:" Account Number is required",minLength:{value:6,message:"Account number must be at least 6 characters long"},maxLength:{value:18,message:"Account number must not exceed 18 characters"}}))),g.accountNumber&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.accountNumber.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["IFSC Code ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)({className:"".concat(o.Ol),placeholder:"Enter IFSC Code",name:"ifscCode"},a("ifscCode",{required:"IFSC Code is required",pattern:{value:/^[A-Z]{4}0[A-Z0-9]{6}$/,message:"Invalid IFSC code. Example: SBIN0001234"}}))),g.ifscCode&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.ifscCode.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Account Type ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsxs)("select",(0,s.A)((0,s.A)({className:"".concat(o.Ol," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase())},a("accountType",{required:" Account Type is required"})),{},{children:[(0,j.jsx)("option",{value:"",children:"Select Account Type"}),(0,j.jsx)("option",{className:"",value:"saving",children:"Saving"}),(0,j.jsx)("option",{className:"",value:"current",children:"Current"}),(0,j.jsx)("option",{className:"",value:"Salary",children:"Salary"}),(0,j.jsx)("option",{className:"",value:"Joint",children:"Joint"})]})),g.accountType&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.accountType.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Status ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(n.xI,{name:"status",control:h,render:e=>{let{field:a}=e;return(0,j.jsxs)(N.A,(0,s.A)((0,s.A)({},a),{},{className:"".concat(o.Hy," ").concat(g.status?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Status",children:[(0,j.jsx)(N.A.Option,{value:"true",children:"Active"}),(0,j.jsx)(N.A.Option,{value:"false",children:"In Active"})]}))}}),g.status&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:g.status.message})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(o.Q0),children:["Upload ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(n.xI,{name:"fileUpload",control:h,rules:{required:"File upload is required"},render:e=>{let{field:a}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:e=>{var l;a.onChange(e),(e=>{var a;if(!e)return;const l="application/pdf"===(null===e||void 0===e?void 0:e.type),s=null===(a=URL)||void 0===a?void 0:a.createObjectURL(e);x().fire({title:"Preview your file",html:'\n            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">\n                <p style="margin-bottom: 20px;">Do you want to upload this file?</p>\n                '.concat(l?'<p style="font-size: 16px; color: #074173;">'.concat(null===e||void 0===e?void 0:e.name,"</p>"):'<img src="'.concat(s,'" alt="File Preview" style="max-width: 100%; max-height: 300px; width: auto; height: auto;">'),"\n                <br>\n            </div>\n        "),showCancelButton:!0,confirmButtonText:"Confirm!",cancelButtonText:"Cancel"}).then(a=>{a.isConfirmed&&y((0,m.Sg)({filePath:e,isVideo:!1,isMultiple:!1})).then(e=>{var a;e.error||(b("fileUplaod",null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.data),x().fire({icon:"success",title:"Uploaded!",text:"Your file has been successfully uploaded.",timer:2e3,showConfirmButton:!1}))})})})(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.files[0])}}),(0,j.jsx)("br",{}),(0,j.jsx)("label",{htmlFor:"file-upload",className:"bg-header text-white mt-2 py-1.5 px-3 text-nowrap text-sm rounded cursor-pointer",children:"Upload"}),g.fileUpload&&(0,j.jsx)("p",{className:"text-red-600 text-sm mt-1",children:g.fileUpload.message})]})}})]}),f("fileUplaod")?(0,j.jsx)("img",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(f("fileUplaod")),alt:"Uploaded",className:"w-20 h-20 shadow rounded-sm"}):null]})]}),(0,j.jsx)("div",{className:"flex justify-end items-center",children:(0,j.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 mt-4 ml-4 px-4 rounded"),children:e?(0,j.jsx)(p.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=7116.992cc377.chunk.js.map