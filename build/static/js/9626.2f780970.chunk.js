"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9626],{49626:(e,l,d)=>{d.r(l),d.d(l,{default:()=>A});var a=d(89379),n=d(24858),i=d(39160),o=d(83003),s=d(73216),r=d(77396),t=d(42837),c=d(65043),m=d(15187),u=d(31744),p=d(78729),v=d(97230),y=d(94084),x=d(60446),h=d.n(x),j=d(65512),N=d(17995),f=d(89427),g=d(70579);const A=function(){const{register:e,control:l,watch:d,setValue:x,handleSubmit:A,formState:{errors:b}}=(0,n.mN)(),I=e=>e&&e.isAfter(h()().endOf("day")),{companyList:T,companyListLoading:C}=(0,o.d4)(e=>e.company),{branchList:S,branchListloading:D}=(0,o.d4)(e=>e.branch),{employeList:_,loading:O}=(0,o.d4)(e=>e.employe),P=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),{penaltyListData:w,totapenaltyTypeCount:q,loading:L}=(0,o.d4)(e=>e.penalty),{employeePenaltyListData:E,totaemployeePenaltyCount:B,loading:H}=(0,o.d4)(e=>e.employeePenalty),Q=(0,n.FH)({control:l,name:"PDCompanyId",defaultValue:""}),V=(0,n.FH)({control:l,name:"PDBranchId",defaultValue:""}),k=(0,n.FH)({control:l,name:"penaltyName",defaultValue:""});(0,c.useEffect)(()=>{const e=null===w||void 0===w?void 0:w.find(e=>(null===e||void 0===e?void 0:e._id)==k);x("amount",null===e||void 0===e?void 0:e.amount)},[k]),(0,c.useEffect)(()=>{Y()},[V,Q]);const Y=()=>{const e={currentPage:"",pageSize:"",reqData:{directorId:"",companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?Q:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?V:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,text:"",sort:!0,status:"",isPagination:!0}};F((0,v.cr)(e))};(0,c.useEffect)(()=>{(Q||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&F((0,u.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?Q:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId}))},[Q]),(0,c.useEffect)(()=>{"admin"===(null===P||void 0===P?void 0:P.userType)&&F((0,p.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const F=(0,o.wA)(),M=(0,s.Zp)();(0,c.useEffect)(()=>{R()},[]);const R=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:null===P||void 0===P?void 0:P.companyId,branchId:null===P||void 0===P?void 0:P.branchId};F((0,t.qV)(e))};return(0,g.jsx)(i.A,{children:(0,g.jsx)("div",{className:"gap-4",children:(0,g.jsxs)("form",{autoComplete:"off",className:"mt-5 md:px-1",onSubmit:A(e=>{const l={companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?Q:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,branchId:"company"===(null===P||void 0===P?void 0:P.userType)||"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)?V:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,directorId:"",employeId:null===e||void 0===e?void 0:e.employee,penaltyId:null===e||void 0===e?void 0:e.penaltyName,amount:Number(null===e||void 0===e?void 0:e.amount),reason:null===e||void 0===e?void 0:e.reason,issueDate:h()(null===e||void 0===e?void 0:e.date).format("YYYY-MM-DD")};F((0,r.sU)(l)).then(e=>{(null===e||void 0===e||!e.error)&&M(-1)})}),children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr] gap-2 md:my-2",children:["admin"===(null===P||void 0===P?void 0:P.userType)&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)(n.xI,{name:"PDCompanyId",control:l,rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,g.jsxs)(j.A,(0,a.A)((0,a.A)({},l),{},{className:" ".concat(m.Hy),placeholder:"Select Company",filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(j.A.Option,{value:"",children:"Select Company "}),C?(0,g.jsx)(j.A.Option,{disabled:!0,children:(0,g.jsx)(f.A,{})}):null===T||void 0===T?void 0:T.map((e,l)=>(0,g.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),b.PDCompanyId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:b.PDCompanyId.message})]}),("admin"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(m.Q0),children:["Branch Name ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)(n.xI,{name:"PDBranchId",rules:{required:"Branch is required"},control:l,render:e=>{var l;let{field:d}=e;return(0,g.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{onChange:e=>{x("employee",""),x("penaltyName",""),d.onChange(e)},className:" ".concat(m.Hy),placeholder:"Select Branch  ",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(j.A.Option,{value:"",children:"Select Branch "}),D?(0,g.jsx)(j.A.Option,{disabled:!0,children:(0,g.jsx)(f.A,{})}):null===(l=(0,m._o)(S,"fullName"))||void 0===l?void 0:l.map((e,l)=>(0,g.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),b.PDBranchId&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:b.PDBranchId.message})]}),(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(m.Q0),children:["Penalty Name ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)(n.xI,{name:"penaltyName",control:l,rules:{required:"Penaulty Name is required"},render:e=>{var l;let{field:d}=e;return(0,g.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{className:" ".concat(m.Hy),placeholder:"Select penalty Name ",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(j.A.Option,{value:"",children:"Select Penalty Name "}),L?(0,g.jsx)(j.A.Option,{disabled:!0,children:(0,g.jsx)(f.A,{})}):null===(l=(0,m._o)(w))||void 0===l?void 0:l.map((e,l)=>(0,g.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},l))]}))}}),b.penaltyName&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:b.penaltyName.message})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr] gap-2 md:my-2",children:[(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("label",{className:"".concat(m.Q0),children:["Employee Name ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)(n.xI,{name:"employee",control:l,rules:{required:"Employee Name is required"},render:e=>{var l;let{field:d}=e;return(0,g.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{className:" ".concat(m.Hy),placeholder:"Select Employee ",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,g.jsx)(j.A.Option,{value:"",children:"Select Employee "}),O?(0,g.jsx)(j.A.Option,{disabled:!0,children:(0,g.jsx)(f.A,{})}):null===(l=(0,m._o)(_,"fullName"))||void 0===l?void 0:l.map((e,l)=>(0,g.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),b.employee&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:b.employee.message})]}),(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsxs)("label",{className:"".concat(m.Q0),children:["Amount ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"number",disabled:!0},e("amount",{required:"amount is required"})),{},{className:" ".concat(b.amount?"border-[1px] ":"border-gray-300").concat(m.id),placeholder:"Enter amount"})),b.amount&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:b.amount.message})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr] gap-2 md:my-2",children:[(0,g.jsxs)("div",{className:"w-full sm:mt-0 mt-2",children:[(0,g.jsxs)("label",{className:"".concat(m.Q0),children:["Reason ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("reason",{required:"reason is required"})),{},{className:" ".concat(b.reason?"border-[1px] ":"border-gray-300").concat(m.Ol),placeholder:"Enter reason"})),b.reason&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:b.reason.message})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"".concat(m.Q0),children:["Date ",(0,g.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,g.jsx)(n.xI,{name:"date",control:l,rules:{required:"Date is required"},render:e=>{let{field:l}=e;return(0,g.jsx)(y.A,{field:l,errors:b,disabledDate:I})}}),b.date&&(0,g.jsx)("p",{className:"text-red-500 text-sm",children:"date is required"})]})]}),(0,g.jsx)("div",{className:"flex justify-end",children:(0,g.jsx)("button",{type:"submit",disabled:H,className:"".concat(H?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:H?(0,g.jsx)(N.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=9626.2f780970.chunk.js.map