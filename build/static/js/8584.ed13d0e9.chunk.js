"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8584],{48584:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var s=a(65043),l=a(39160),d=a(73216),n=a(35475),i=a(83003),o=a(23156),c=a(47196),r=a(30064),x=a.n(r),m=a(31174),h=a(78227),u=a(15187),p=a(31744),v=a(78729),b=a(27810),j=a(30326),g=a(53913),N=a(65512),f=a(96651),y=a(4938),w=a(55971),A=a(60446),k=a.n(A),D=a(60184),C=a(45394),P=a(3825),S=a(83002),z=a(78973),_=a(89427),L=a(70579);const Y=function(){var e,t,a,r,A;const{cashbookDetails:Y,loading:T}=(0,i.d4)(e=>e.cashbook),[B,I]=(0,s.useState)({isOpen:!1,data:{},cashbook:{}}),O=(0,d.Zp)(),H=(0,i.wA)(),{employeeCashbookListData:E,totalemployeeCashbookListCount:M,employeeCashbookLoading:R}=(0,i.d4)(e=>e.cashbook),[F,U]=(0,s.useState)(!1),J=JSON.parse(localStorage.getItem("user_info_".concat(u.AU))),[W,q]=(0,n.ok)(),V=parseInt(W.get("page"))||1,G=W.get("status")||"",[Q,Z]=(0,s.useState)(V),[K,X]=(0,s.useState)(10),[$,ee]=(0,s.useState)(G),[te,ae]=(0,s.useState)("");(0,s.useEffect)(()=>{const e=new URLSearchParams;Q>1&&e.set("page",Q),$&&e.set("status",$),q(e)},[Q,K,$,te]),(0,s.useEffect)(()=>{"employee"===(null===J||void 0===J?void 0:J.userType)&&null!==J&&void 0!==J&&J._id&&se()},[Q,K,$,te]);const se=()=>{const e={currentPage:Q,pageSize:K,reqData:{directorId:"",companyId:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId,branchId:"companyBranch"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.branchId,employeId:null===J||void 0===J?void 0:J._id,text:te,sort:!0,status:$,isPagination:!0}};H((0,b.pS)(e))};(0,s.useEffect)(()=>{"company"!==(null===J||void 0===J?void 0:J.userType)&&"companyDirector"!==(null===J||void 0===J?void 0:J.userType)||H((0,p.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===J||void 0===J?void 0:J.userType)?null===J||void 0===J?void 0:J._id:null===J||void 0===J?void 0:J.companyId}))},[]),(0,s.useEffect)(()=>{"admin"===(null===J||void 0===J?void 0:J.userType)&&H((0,v.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:le,canRead:de,canUpdate:ne,canDelete:ie}=(0,y.A)();if("employee"!==(null===J||void 0===J?void 0:J.userType))return(0,L.jsx)(l.A,{children:(0,L.jsx)("div",{className:"bg-red-100 text-red-800 p-4 rounded-md mt-2",children:(0,L.jsx)("p",{className:"text-center font-semibold",children:"You are not an employee. This page is viewable for employees only."})})});const oe=e=>e.toLowerCase().endsWith(".pdf"),ce=e=>[".jpg",".jpeg",".png",".gif",".webp",".bmp",".tiff"].some(t=>e.toLowerCase().endsWith(t));return(0,L.jsx)(l.A,{onChange:e=>{ae(e)},children:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(g.A,{className:"antmodalclassName",title:"Attached Docs\tFor ".concat(null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.employeName),width:1e3,footer:!1,open:B.isOpen,onOk:()=>I({open:!1,data:{}}),onCancel:()=>I({open:!1,data:{}}),children:(0,L.jsxs)("table",{className:"w-full max-w-full rounded-xl",children:[(0,L.jsx)("thead",{}),(0,L.jsx)("tbody",{children:(0,L.jsx)("tr",{children:(0,L.jsx)("td",{className:"whitespace-nowrap text-center p-2",children:(0,L.jsx)("div",{className:"flex flex-col space-y-4",children:null!==B&&void 0!==B&&null!==(t=B.data)&&void 0!==t&&t.attachment&&Array.isArray(null===B||void 0===B||null===(a=B.data)||void 0===a?void 0:a.attachment)?B.data.attachment.map((e,t)=>{const a="".concat("https://vigapi.vigorousit.com","/public").concat(e),s=oe(e)?(0,L.jsx)(D.kl1,{className:"text-red-600 hover:text-red-700",size:20}):ce(e)?(0,L.jsx)(C.jbB,{className:"text-header hover:text-blue-700",size:20}):(0,L.jsx)(C.jbB,{className:"text-gray-600",size:20});return s?(0,L.jsx)(f.A,{placement:"topLeft",title:"Attachment ".concat(t+1),children:(0,L.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[(0,L.jsxs)("p",{className:"font-[500] text-[12px] text-black",children:["(",t+1,")"]}),(0,L.jsx)("button",{onClick:()=>window.open(a,"_blank"),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted hover:border-gray-800",type:"button",children:s||(0,L.jsx)(D.J4C,{className:"text-gray-600",size:20})})]})},t):null}):null!==B&&void 0!==B&&null!==(r=B.data)&&void 0!==r&&r.attachment?(()=>{const e=B.data.attachment,t="".concat("https://vigapi.vigorousit.com","/public").concat(e),a=oe(e)?(0,L.jsx)(D.kl1,{className:"text-red-600 hover:text-red-700",size:18}):ce(e)?(0,L.jsx)(D.J4C,{className:"text-blue-600 hover:text-blue-700",size:18}):null;return a?(0,L.jsx)(f.A,{placement:"topLeft",title:"Attachment",children:(0,L.jsx)("button",{onClick:()=>window.open(t,"_blank"),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted hover:border-gray-800",type:"button",children:a})}):null})():(0,L.jsx)("span",{className:"text-gray-600 text-sm text-center",children:"No File Attached"})})})})})]})}),(0,L.jsx)("div",{className:"",children:(0,L.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,L.jsx)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:(0,L.jsxs)(N.A,{value:$,onChange:e=>{ee(e),Z(1)},disabled:T,className:"".concat(u.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,L.jsx)(N.A.Option,{value:"",children:"Select Type"}),(0,L.jsx)(N.A.Option,{value:"Draft",children:"Draft"}),(0,L.jsx)(N.A.Option,{value:"Pending",children:"Pending"}),(0,L.jsx)(N.A.Option,{value:"Paid",children:"Paid"})]})}),(0,L.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,L.jsx)("button",{onClick:()=>{Z(1),ee(""),ae("")},className:"bg-header  py-1.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,L.jsx)("span",{className:"text-[12px]",children:"Reset"})}),le&&(0,L.jsx)(f.A,{placement:"topLeft",title:"Add Cashbook",children:(0,L.jsxs)("button",{onClick:()=>{O("/admin/employee/cashbook/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center whitespace-nowrap space-x-2 text-white",children:[(0,L.jsx)(o.OiG,{}),(0,L.jsx)("span",{className:"text-[12px]",children:"Add Cashbook"})]})})]})]})}),(0,L.jsxs)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:[de&&(0,L.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,L.jsx)("thead",{className:"",children:(0,L.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,L.jsx)("th",{className:"tableHead",children:"Amount"}),(0,L.jsx)("th",{className:"tableHead",children:"Bill Date"}),(0,L.jsx)("th",{className:"tableHead",children:"Remark"}),(0,L.jsx)("th",{className:"tableHead",children:"created At"}),(0,L.jsx)("th",{className:"tableHead",children:"Created By"}),(0,L.jsx)("th",{className:"tableHead",children:"Updated At"}),(0,L.jsx)("th",{className:"tableHead",children:"Updated By"}),(0,L.jsx)("th",{className:"tableHead",children:"Status"}),(ie||ne)&&(0,L.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),R?(0,L.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,L.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,L.jsx)(w.A,{})})}):(0,L.jsx)("tbody",{children:E&&(null===E||void 0===E?void 0:E.length)>0?null===E||void 0===E?void 0:E.map((e,t)=>{var a,s;return(0,L.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,L.jsx)("td",{className:"tableData",children:t+1+(Q-1)*K}),(0,L.jsx)("td",{className:"tableData",children:(0,u.w2)((null===e||void 0===e?void 0:e.amount)||"-")}),(0,L.jsx)("td",{className:"tableData",children:null!==e&&void 0!==e&&e.date?k()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY "):"-"}),(0,L.jsx)("td",{className:"w-[150px]",children:(null===e||void 0===e?void 0:e.remark)||"-"}),(0,L.jsx)("td",{className:"tableData",children:k()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,L.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.createdBy}),(0,L.jsx)("td",{className:"tableData",children:k()(null===e||void 0===e?void 0:e.updatedAt).format("DD-MM-YYYY hh:mm a")}),(0,L.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.updatedBy}),(0,L.jsx)("td",{className:"tableData",children:(0,L.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"bg-cyan-100 border border-cyan-600 text-cyan-800":"Reject"===(null===e||void 0===e?void 0:e.status)||"Rejected"===(null===e||void 0===e?void 0:e.status)?"bg-rose-100 border border-rose-600 text-rose-800":"Paid"===(null===e||void 0===e?void 0:e.status)?"bg-green-100 border border-green-600 text-green-800":"bg-yellow-100 border border-yellow-600 text-yellow-800"),children:null===e||void 0===e?void 0:e.status})}),(ie||ne)&&(0,L.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,L.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[(0,L.jsx)(f.A,{placement:"topLeft",title:"View Details",children:(0,L.jsx)("button",{onClick:()=>{(e=>{H((0,b.ho)({_id:null===e||void 0===e?void 0:e._id})),U(!0)})(e)},className:"px-2 py-2 text-xs rounded-md bg-transparent text-header border border-muted",type:"button",children:(0,L.jsx)(D.Ny1,{className:" hover:text-[#337ab7] text-[#3c8dbc]"})})}),(0,L.jsx)(j.A,{menu:{items:[{key:"view-doc",label:(0,L.jsxs)("span",{onClick:()=>{var t;return(null===e||void 0===e||null===(t=e.attachment)||void 0===t?void 0:t.length)>0&&I({isOpen:!0,data:e,cashbook:{}})},className:"flex items-center",children:[(0,L.jsx)(D.kQE,{className:"mr-2 flex items-center ".concat((null===e||void 0===e||null===(a=e.attachment)||void 0===a?void 0:a.length)>0?"text-rose-700 hover:text-rose-700":"text-gray-400 cursor-not-allowed"),size:16}),"View Document"]}),disabled:!((null===e||void 0===e||null===(s=e.attachment)||void 0===s?void 0:s.length)>0)},{key:"view-comment",label:(0,L.jsxs)("span",{onClick:()=>(0,u.v2)((null===e||void 0===e?void 0:e.naration)||"Data not available"),className:"flex items-center text-blue-800 hover:text-blue-700",children:[(0,L.jsx)(z.qSe,{className:"mr-2",size:16}),"View Comment"]})},ne&&{key:"edit",label:(0,L.jsxs)("span",{onClick:()=>{"Pending"===(null===e||void 0===e?void 0:e.status)&&O("/admin/employee/cashbook/edit/".concat((0,m.w)(null===e||void 0===e?void 0:e._id)))},className:"flex items-center ".concat("Pending"===(null===e||void 0===e?void 0:e.status)?"text-[#3c8dbc] hover:text-[#337ab7]":"text-gray-400 cursor-not-allowed"),children:[(0,L.jsx)(o.Jcp,{className:"mr-2",size:16}),"Pending"===(null===e||void 0===e?void 0:e.status)?"Edit":"No Actions (".concat(null===e||void 0===e?void 0:e.status,")")]}),disabled:"Pending"!==(null===e||void 0===e?void 0:e.status)},ie&&{key:"delete",label:(0,L.jsxs)("span",{onClick:()=>{"Pending"===(null===e||void 0===e?void 0:e.status)&&(e=>{let t={_id:e};x().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&H((0,b.IT)(t)).then(e=>{se()})})})(null===e||void 0===e?void 0:e._id)},className:"flex items-center ".concat("Pending"===(null===e||void 0===e?void 0:e.status)?"text-red-600 hover:text-red-500":"text-gray-400 cursor-not-allowed"),children:[(0,L.jsx)(c.tqC,{className:"mr-2",size:16}),"Pending"===(null===e||void 0===e?void 0:e.status)?"Delete":"No Actions (".concat(null===e||void 0===e?void 0:e.status,")")]}),disabled:"Pending"!==(null===e||void 0===e?void 0:e.status)}].filter(Boolean)},trigger:["click"],children:(0,L.jsx)(f.A,{placement:"topLeft",title:"More Actions",children:(0,L.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted ".concat("Pending"!==(null===e||void 0===e?void 0:e.status)?"opacity-60 cursor-not-allowed":""),type:"button",disabled:"Pending"!==(null===e||void 0===e?void 0:e.status),children:(0,L.jsx)(S.xWf,{className:"".concat("Pending"===(null===e||void 0===e?void 0:e.status)?"text-[#3c8dbc] hover:text-[#337ab7]":"text-gray-400"),size:16})})})})]})})]})}):(0,L.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,L.jsx)("td",{colSpan:12,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,L.jsx)(g.A,{className:"antmodalclassName",visible:F,onCancel:()=>U(!1),footer:null,title:!1,width:1200,height:600,children:(0,L.jsx)("div",{className:"w-full overflow-auto",children:T?(0,L.jsx)(_.A,{}):(0,L.jsxs)("table",{className:"w-full  rounded-lg shadow-md overflow-hidden bg-white",children:[(0,L.jsx)("thead",{children:(0,L.jsx)("tr",{children:(0,L.jsx)("th",{className:"text-header ",children:(0,L.jsx)("div",{className:"mt-2 ml-2",children:"Cashbook Details"})})})}),(0,L.jsxs)("tbody",{className:"text-sm text-gray-700",children:[(0,L.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,L.jsxs)("td",{className:"p-3 text-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(C.sLb,{className:"size-4 text-header text-lg"}),(0,L.jsx)("span",{className:"text-[16px] font-medium",children:"Employee Name"})]}),(0,L.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===Y||void 0===Y||null===(A=Y.employeData)||void 0===A?void 0:A.fullName)||"N/A"})]}),(0,L.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(P.cC2,{className:"size-4 text-header text-lg"}),(0,L.jsx)("span",{className:"text-[16px] font-medium",children:"Expense For"})]}),(0,L.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===Y||void 0===Y?void 0:Y.expenseFor)||"N/A"})]})]}),(0,L.jsxs)("tr",{className:" hover:bg-indigo-50",children:[(0,L.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(o._tP,{className:"size-4 text-header text-lg"}),(0,L.jsx)("span",{className:"text-[16px] font-medium",children:"Naration"})]}),(0,L.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===Y||void 0===Y?void 0:Y.naration)||"N/A"})]}),(0,L.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(D.CLz,{className:"size-4 text-header text-lg"}),(0,L.jsx)("span",{className:"text-[16px] font-medium",children:"Amount"})]}),(0,L.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===Y||void 0===Y?void 0:Y.totalAmount)||"N/A"})]})]}),(0,L.jsx)("tr",{className:" hover:bg-indigo-50",children:(0,L.jsxs)("td",{className:"p-3  text-gray-600",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(D.Y9o,{className:"size-4 text-header text-lg"}),(0,L.jsx)("span",{className:"text-[16px] font-medium",children:"Status"})]}),(0,L.jsx)("span",{className:"block text-[15px] ml-4 font-light mt-1",children:(null===Y||void 0===Y?void 0:Y.status)||"N/A"})]})})]})]})})})]}),(null===E||void 0===E?void 0:E.length)>0&&(0,L.jsx)(h.A,{totalCount:M,pageSize:K,currentPage:Q,onChange:e=>Z(e)})]})})}}}]);
//# sourceMappingURL=8584.ed13d0e9.chunk.js.map