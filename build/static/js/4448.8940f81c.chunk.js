"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4448],{94448:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var n=a(89379),o=a(24858),d=a(83003),i=a(15187),l=a(65043),r=a(31744),s=a(39160),c=a(97326),u=(a(86178),a(60446)),m=a.n(u),p=a(78227),h=a(12106),v=(a(42837),a(94084),a(69223)),y=a(55971),x=a(50822),f=a(6720),g=a(37762),b=a(64857),w=(a(11906),a(33007),a(89427),a(70337),a(40088),a(12208),a(27744),a(17995),a(76932),a(487)),N=a(70579);const{RangePicker:D}=w.A;const j=function(){const{control:e,formState:{errors:t},setValue:a,watch:u}=(0,o.mN)(),{RangePicker:D}=w.A,j=e=>{},[k,S]=(0,l.useState)(10),Y=(0,d.wA)(),{financeAdvanceSummaryReportList:A,financeAdvanceSummaryReportFunc_loading:P,financeAdvanceSummaryReportCount:C}=(0,d.d4)(e=>e.reports),{departmentListData:F,loading:I}=(0,d.d4)(e=>e.department),[M,R]=(0,l.useState)({}),{taskTypeList:T}=(0,d.d4)(e=>e.taskType),{clientGroupList:z}=(0,d.d4)(e=>e.clientGroup),{clientList:E}=(0,d.d4)(e=>e.client),{employeList:L}=(0,d.d4)(e=>e.employe),[V,H]=(0,l.useState)(""),_=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),{industryListData:K,indusSearchloading:O}=(0,d.d4)(e=>e.industry),{orgTypeList:B,orgSearchloading:G}=(0,d.d4)(e=>e.orgType),[U,W]=(0,l.useState)(1),[q,J]=(0,l.useState)(""),{branchList:X}=(0,d.d4)(e=>e.branch),Q=(0,o.FH)({control:e,name:"PDCompanyId",defaultValue:""}),Z=(0,o.FH)({control:e,name:"PDBranchId",defaultValue:""}),$=(0,o.FH)({control:e,name:"status",defaultValue:""}),ee=(0,o.FH)({control:e,name:"PDOrganizationType",defaultValue:""}),te=(0,o.FH)({control:e,name:"PDindustrytype",defaultValue:""}),ae=(0,o.FH)({control:e,name:"department",defaultValue:""}),ne=(0,o.FH)({control:e,name:"groupName",defaultValue:""}),oe=(0,o.FH)({control:e,name:"time",defaultValue:[]});(0,l.useEffect)(()=>{const e=setTimeout(()=>{J(V)},500);return()=>{clearTimeout(e)}},[V]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})();const de=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{currentPage:U,pageSize:k,reqPayload:{text:q,sort:!0,isPagination:e,companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?Q:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId,directorId:"",branchId:"company"===(null===_||void 0===_?void 0:_.userType)||"admin"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType)?Z:"companyBranch"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.branchId,status:"true"==$||"false"!=$&&"",organizationId:ee,organizationIds:[],departmentId:ae,departmentIds:[],industryId:te,industryIds:[],groupId:ne,groupIds:[],startDate:(null===oe||void 0===oe?void 0:oe.length)>0?oe[0]:"",endDate:(null===oe||void 0===oe?void 0:oe.length)>0?oe[1]:"",text:"",sort:!0,isPagination:e}}};(0,l.useEffect)(()=>{ie(q)},[U,q,k]);const ie=()=>{Y((0,h.NX)(de(!0)))},[le,re]=(0,l.useState)(!1);(0,l.useEffect)(()=>{"company"!==(null===_||void 0===_?void 0:_.userType)&&"companyDirector"!==(null===_||void 0===_?void 0:_.userType)||Y((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?Q:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId})),a("startDate",m()().subtract(1,"month")),a("endDate",m()())},[]);const se=async()=>{ie()},ce=[{key:"1",label:(0,N.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,N.jsxs)("div",{className:"bg-[#ececec]",children:[(0,N.jsx)(o.xI,{name:"time",control:e,render:e=>{let{field:t}=e;return(0,N.jsx)(D,(0,n.A)((0,n.A)({},t),{},{value:t.value,onChange:e=>t.onChange(e),format:"YYYY-MM-DD",onOk:j,getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"}))}}),(0,N.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,N.jsx)("button",{onClick:()=>{a("PDCompanyId",""),a("PDBranchId",""),a("status",""),a("PDOrganizationType",""),a("PDindustrytype",""),a("department",""),a("groupName",""),a("time",""),se()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,N.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,N.jsx)("button",{onClick:()=>{se()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,N.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,N.jsx)(s.A,{onChange:e=>{H(e)},children:(0,N.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,N.jsxs)("div",{className:"",children:[(0,N.jsx)(c.A,{className:"custom-collapse",items:ce,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,N.jsx)(f.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,N.jsx)("div",{className:"space-y-1.5 flex justify-end items-center",children:(0,N.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,N.jsx)("button",{onClick:()=>{(async()=>{var e,t;const a=new g.uE({orientation:"landscape",unit:"pt"});a.setFontSize(16);const n=await(null===x.K||void 0===x.K?void 0:x.K.financeAdvanceSummaryReportFunc(de(!1)));if(!A&&!n)return;const o=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var a;return[t+1,m()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-",m()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY hh:mm a")||"-",(null===e||void 0===e?void 0:e.groupName)||"-",null===e||void 0===e?void 0:e.naration,(null===e||void 0===e?void 0:e.amount)||"-","bank"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(a=e.bankData)||void 0===a?void 0:a.bankName:"cash"==(null===e||void 0===e?void 0:e.paymentMode)?"cash":"-"]});(0,b.Ay)(a,{startY:40,head:[["S.No.","Entry Date","Payment Date","Group Name","Description","Amount","Mode of Payment"]],body:o,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),a.save("FinanceReceiptReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,N.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,N.jsx)("button",{onClick:()=>{(async()=>{var e,t;const a=new v.Workbook,n=a.addWorksheet("FinanceReceiptReport");n.columns=[{header:"S.No.",key:"sno",width:10},{header:"Entry Date",key:"entryDate",width:30},{header:"Payment Date",key:"payment",width:30},{header:"Group Name",key:"groupName",width:25},{header:"Description",key:"description",width:25},{header:"Amount",key:"amount",width:30},{header:"Mode of payment",key:"modeOFreceipt",width:20}],n.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const o=await(null===x.K||void 0===x.K?void 0:x.K.financeAdvanceSummaryReportFunc(de(!1)));if(!A&&!o)return;const d=null===o||void 0===o||null===(e=o.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var a;return{sno:t+1,entryDate:m()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-",payment:m()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY hh:mm a")||"-",groupName:(null===e||void 0===e?void 0:e.groupName)||"-",description:null===e||void 0===e?void 0:e.naration,amount:(null===e||void 0===e?void 0:e.amount)||"-",modeOFreceipt:"bank"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(a=e.bankData)||void 0===a?void 0:a.bankName:"cash"==(null===e||void 0===e?void 0:e.paymentMode)?"cash":"-"}});null===d||void 0===d||d.forEach(e=>{n.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),n.autoFilter={from:"A1",to:"I1"},a.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="FinanceReceiptReport.xlsx",a.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,N.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})})]}),(0,N.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,N.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,N.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,N.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Entry Date"}),(0,N.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Payment Date"}),(0,N.jsxs)("th",{className:"border-none p-2 whitespace-nowrap ",children:["Group Name"," "]}),(0,N.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Description"}),(0,N.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Amount"}),(0,N.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mode of Payment"})]})}),P?(0,N.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,N.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,N.jsx)(y.A,{})})}):(0,N.jsx)("tbody",{children:A&&(null===A||void 0===A?void 0:A.length)>0?null===A||void 0===A?void 0:A.map((e,t)=>{var a;return(0,N.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(U-1)*k}),(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:m()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:m()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY hh:mm a")||"-"}),(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.groupName)||"-"}),(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.naration)||"-"}),(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.amount)||"-"}),(0,N.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:("bank"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(a=e.bankData)||void 0===a?void 0:a.bankName:"cash"==(null===e||void 0===e?void 0:e.paymentMode)?"Cash":"")||"-"})]})}):(0,N.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,N.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,N.jsx)(p.A,{totalCount:C,pageSize:k,currentPage:U,onChange:e=>{W(e)}})]})})}}}]);
//# sourceMappingURL=4448.8940f81c.chunk.js.map