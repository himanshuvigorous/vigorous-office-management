"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9272],{19272:(e,a,t)=>{t.r(a),t.d(a,{default:()=>C});var n=t(89379),s=t(65043),d=t(39160),l=t(73216),o=t(83003),r=t(23156),i=t(47196),c=t(30064),p=t.n(c),u=t(31174),h=(t(65337),t(78227)),m=t(15187),x=t(24858),v=t(31744),j=t(78729),y=t(15063),f=t(65512),w=t(96651),b=t(4938),N=t(55971),g=t(60446),A=t.n(g),D=t(70579);const C=function(){const{register:e,control:a,formState:{errors:t},setValue:c}=(0,x.mN)(),g=(0,l.Zp)(),C=(0,o.wA)(),{bankAccountListData:I,totalbankAccountListCount:S,loading:k}=(0,o.d4)(e=>e.bankAccount),[B,P]=(0,s.useState)(""),T=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),[L,_]=(0,s.useState)(1),{companyList:O}=(0,o.d4)(e=>e.company),{branchList:E}=(0,o.d4)(e=>e.branch),F=(0,x.FH)({control:a,name:"PDCompanyId",defaultValue:""}),q=(0,x.FH)({control:a,name:"PDBranchId",defaultValue:""}),z=(0,x.FH)({control:a,name:"status",defaultValue:""});(0,s.useEffect)(()=>{F&&c("PDBranchId","")},[F]);const H=[F,q,z,B].join("-"),[V,Y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{V?1===L?J():_(1):Y(e=>!0)},[H]),(0,s.useEffect)(()=>{J()},[L]);const J=()=>{const e={currentPage:L,pageSize:10,reqData:{directorId:"",companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?F:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId,branchId:"company"===(null===T||void 0===T?void 0:T.userType)||"admin"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType)?q:"companyBranch"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.branchId,text:B,sort:!0,status:"true"===z||"false"!==z&&"",isPagination:!0}};C((0,y.MH)(e))};(0,s.useEffect)(()=>{(F||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&C((0,v.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===T||void 0===T?void 0:T.userType)?F:"company"===(null===T||void 0===T?void 0:T.userType)?null===T||void 0===T?void 0:T._id:null===T||void 0===T?void 0:T.companyId}))},[F]),(0,s.useEffect)(()=>{"admin"===(null===T||void 0===T?void 0:T.userType)&&C((0,j.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:M,canRead:R,canUpdate:U,canDelete:G}=(0,b.A)();return(0,D.jsx)(d.A,{onChange:e=>{P(e)},children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"",children:(0,D.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,D.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1.5",children:["admin"===(null===T||void 0===T?void 0:T.userType)&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("select",(0,n.A)((0,n.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(m.OJ," ").concat(t.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===O||void 0===O?void 0:O.map(e=>(0,D.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),t.PDCompanyId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:t.PDCompanyId.message})]}),("admin"===(null===T||void 0===T?void 0:T.userType)||"company"===(null===T||void 0===T?void 0:T.userType)||"companyDirector"===(null===T||void 0===T?void 0:T.userType))&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(x.xI,{name:"PDBranchId",control:a,rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,D.jsxs)(f.A,(0,n.A)((0,n.A)({},a),{},{className:"w-full ".concat(m.Lp," ").concat(t.PDBranchId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,D.jsx)(f.A.Option,{value:"",children:"Select Branch"}),null===E||void 0===E?void 0:E.map(e=>(0,D.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),t.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:t.PDBranchId.message})]}),(0,D.jsx)(x.xI,{name:"status",control:a,rules:{},render:e=>{let{field:a}=e;return(0,D.jsxs)(f.A,(0,n.A)((0,n.A)({},a),{},{className:" w-32 ".concat(m.Lp," ").concat(t.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(f.A.Option,{value:"",children:"Select Status"}),(0,D.jsx)(f.A.Option,{value:"true",children:" Active "}),(0,D.jsx)(f.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,D.jsx)("button",{onClick:()=>{c("status",""),c("PDBranchId",""),c("PdDepartmentId",""),c("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Reset"})}),M&&(0,D.jsx)(w.A,{placement:"topLeft",title:"Add Bank Account",children:(0,D.jsxs)("button",{onClick:()=>{g("/admin/bank-account/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,D.jsx)(r.OiG,{}),(0,D.jsx)("span",{className:"text-[12px]",children:"Add Bank Account"})]})})]})]})}),(0,D.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:R&&(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,D.jsx)("thead",{className:"",children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Bank Name"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Bank holder name"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Account Type"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Created At"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Created By"}),(0,D.jsx)("th",{className:"p-2 whitespace-nowrap",children:"status"}),(U||G)&&(0,D.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),k?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,D.jsx)(N.A,{})})}):(0,D.jsx)("tbody",{children:I&&(null===I||void 0===I?void 0:I.length)>0?null===I||void 0===I?void 0:I.map((e,a)=>{var t,n;return(0,D.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:a+1+10*(L-1)}),(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:null===e||void 0===e?void 0:e.bankName}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e?void 0:e.bankholderName}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e?void 0:e.accountType}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(t=A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==t?t:"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e?void 0:e.createdBy}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,D.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(n="Inactive")?n:"-"})}),(G||U)&&(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,D.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[U&&(0,D.jsx)(w.A,{placement:"topLeft",title:"Edit",children:(0,D.jsx)("button",{onClick:()=>{g("/admin/bank-account/edit/".concat((0,u.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(r.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),G&&(0,D.jsx)(w.A,{placement:"topLeft",title:"Delete",children:(0,D.jsx)("button",{onClick:()=>(e=>{let a={_id:e};p().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&C((0,y.DI)(a)).then(e=>{L>1&&1==(null===I||void 0===I?void 0:I.length)?_(Number(L-1)):J()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(i.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,D.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===I||void 0===I?void 0:I.length)>0&&(0,D.jsx)(h.A,{totalCount:S,pageSize:10,currentPage:L,onChange:e=>{_(e)}})]})})}},65337:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(91686),s=t(70579);const d=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,s.jsx)(n.A,{size:"large"})})}}}]);
//# sourceMappingURL=9272.b44e173f.chunk.js.map