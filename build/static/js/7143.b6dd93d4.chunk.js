"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7143],{27143:(e,n,l)=>{l.r(n),l.d(n,{default:()=>T});var t=l(89379),a=l(24858),o=l(83003),i=l(15187),r=l(65043),d=l(31744),s=l(39160),c=l(97326),u=l(53913),p=l(96603),h=l(65512),m=l(96651),v=l(86178),x=l.n(v),w=l(60446),f=l.n(w),y=l(78227),b=(l(42837),l(94084),l(69223)),N=l(55971),g=l(50822),j=l(6720),D=l(37762),S=l(64857),O=(l(11906),l(33007),l(89427),l(12208),l(60184)),A=(l(27744),l(17995),l(76932),l(70337)),B=l(12106),C=l(70579);const T=function(){var e,n;const{control:l,formState:{errors:v},setValue:w,watch:T}=(0,a.mN)(),[I,k]=(0,r.useState)(10),[F,P]=(0,r.useState)("clientBranch"),Y=(0,o.wA)(),{clientList:M,loading:R,totalEmployeCount:z}=(0,o.d4)(e=>e.client),{clientOwnerDetailsReportList:E,clientOwnerDetailsReportFunc_loading:L,clientOwnerDetailsReportCount:_}=(0,o.d4)(e=>e.reports),{departmentListData:V,loading:H}=(0,o.d4)(e=>e.department),[G,K]=(0,r.useState)({}),{taskTypeList:U}=(0,o.d4)(e=>e.taskType),{clientGroupList:W}=(0,o.d4)(e=>e.clientGroup),{employeList:q}=(0,o.d4)(e=>e.employe),[J,Q]=(0,r.useState)(""),X=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),{industryListData:Z,indusSearchloading:$}=(0,o.d4)(e=>e.industry),{orgTypeList:ee,orgSearchloading:ne}=(0,o.d4)(e=>e.orgType),[le,te]=(0,r.useState)(1),[ae,oe]=(0,r.useState)(""),{branchList:ie}=(0,o.d4)(e=>e.branch),re=(0,a.FH)({control:l,name:"PDCompanyId",defaultValue:""}),de=(0,a.FH)({control:l,name:"PDBranchId",defaultValue:""}),se=(0,a.FH)({control:l,name:"status",defaultValue:""});(0,a.FH)({control:l,name:"PDOrganizationType",defaultValue:""}),(0,a.FH)({control:l,name:"PDindustrytype",defaultValue:""}),(0,a.FH)({control:l,name:"department",defaultValue:""}),(0,a.FH)({control:l,name:"groupName",defaultValue:""}),(0,r.useEffect)(()=>{const e=setTimeout(()=>{oe(J)},500);return()=>{clearTimeout(e)}},[J]),(()=>{const e=[];for(let n=2005;n<=2034;n++)e.push("".concat(n,"-").concat(n+1))})();const ce=function(){return{page:le,limit:I,reqPayload:{text:ae,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===X||void 0===X?void 0:X.userType)?re:"company"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.companyId,directorId:"",branchId:"company"===(null===X||void 0===X?void 0:X.userType)||"admin"===(null===X||void 0===X?void 0:X.userType)||"companyDirector"===(null===X||void 0===X?void 0:X.userType)?de:"companyBranch"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.branchId,status:"true"==se||"false"!=se&&"",directorId:""}}};(0,r.useEffect)(()=>{ue()},[le,ae,I]);const ue=()=>{Y((0,A.ai)(ce(!0)))},[pe,he]=(0,r.useState)(!1);(0,r.useEffect)(()=>{"company"!==(null===X||void 0===X?void 0:X.userType)&&"companyDirector"!==(null===X||void 0===X?void 0:X.userType)||Y((0,d.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===X||void 0===X?void 0:X.userType)?re:"company"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.companyId})),w("startDate",f()().subtract(1,"month")),w("endDate",f()())},[]);const me=async()=>{ue()},ve=[{key:"1",label:(0,C.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,C.jsx)("div",{className:"bg-[#ececec]",children:(0,C.jsxs)("div",{className:"sm:flex justify-between items-center grid grid-cols-1  gap-2 sm:flex-wrap text-[14px]",children:[("admin"===(null===X||void 0===X?void 0:X.userType)||"company"===(null===X||void 0===X?void 0:X.userType)||"companyDirector"===(null===X||void 0===X?void 0:X.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(a.xI,{name:"PDBranchId",control:l,render:e=>{let{field:n}=e;return(0,C.jsxs)(h.A,(0,t.A)((0,t.A)({},n),{},{className:"inputAntdSelectClassNameFilterReport ",placeholder:"Select Branch",showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(h.A.Option,{value:"",children:"Select Branch"}),null===ie||void 0===ie?void 0:ie.map(e=>(0,C.jsxs)(h.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[" ",null===e||void 0===e?void 0:e.fullName," "]}))]}))}}),v.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:v.PDBranchId.message})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{w("PDCompanyId",""),w("PDBranchId",""),w("status",""),w("PDOrganizationType",""),w("PDindustrytype",""),w("department",""),w("groupName",""),me()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,C.jsx)("button",{onClick:()=>{me()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})})}];return(0,C.jsx)(s.A,{onChange:e=>{Q(e)},children:(0,C.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(c.A,{className:"custom-collapse",items:ve,defaultActiveKey:[1],expandIcon:e=>{let{isActive:n}=e;return(0,C.jsx)(j.WnU,{size:20,style:{color:"white",transform:n?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,C.jsx)("div",{className:"space-y-1.5 flex justify-between items-center",children:(0,C.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,C.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,C.jsx)(h.A,{id:"pageSize",value:I,onChange:e=>{k(Number(e)),te(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,C.jsx)(h.A.Option,{value:e,children:e},e))})]})})]}),(0,C.jsxs)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:[(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Email"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mobile"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created At"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Created By"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Owner Details"})]})}),R?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,C.jsx)(N.A,{})})}):(0,C.jsx)("tbody",{children:M&&(null===M||void 0===M?void 0:M.length)>0?null===M||void 0===M?void 0:M.map((e,n)=>{var l,t,a;return(0,C.jsxs)("tr",{className:"border-b-[1px] ".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:n+1+(le-1)*I}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,C.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)||"-"," ",(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.number)||"-"]}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:f()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.createdBy}),(0,C.jsx)("td",{className:"tableData ",children:(0,C.jsxs)("div",{className:"flex justify-start items-center gap-1",children:[(0,C.jsx)("span",{children:null===e||void 0===e||null===(a=e.departmentData)||void 0===a?void 0:a.length}),(0,C.jsx)(m.A,{placement:"topLeft",title:"View Details",children:(0,C.jsx)("span",{className:"flex justify-center items-center cursor-pointer",children:(0,C.jsx)(O.Ny1,{onClick:()=>(e=>{const n={_id:null===e||void 0===e?void 0:e._id};he(!0),Y((0,B.JI)(n))})(e),className:" hover:text-[#337ab7] text-[#3c8dbc]",size:14})})})]})||"-"})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]}),(0,C.jsxs)(u.A,{className:"antmodalclassName !w-[60%] !h-[50%]",title:"Owner Details",open:pe,onCancel:()=>{P("clientBranch"),he(!1)},footer:null,children:[(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{(async()=>{var e;const n=new D.uE({orientation:"landscape",unit:"pt"});n.setFontSize(16),n.text("Client Owner Details Report",40,30),await(null===g.K||void 0===g.K?void 0:g.K.clientOwnerDetailsReportFunc(ce(!1)));const l=null===E||void 0===E?void 0:E.branchOwnerData;if(!l||!l.map)return;const t=null===l||void 0===l||null===(e=l.filter(e=>(null===e||void 0===e?void 0:e.userType)==F))||void 0===e?void 0:e.map((e,n)=>{var l,t,a,o,i,r;const d="clientBranch"===(null===e||void 0===e?void 0:e.userType)?"Branch":"clientOwner"===(null===e||void 0===e?void 0:e.userType)?"Owner":"-";return[n+1,(null===e||void 0===e?void 0:e.fullName)||"-",d,(null===e||void 0===e?void 0:e.email)||"-","".concat((null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)||"-"," ").concat((null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.number)||"-"),null!==e&&void 0!==e&&null!==(a=e.generalInfo)&&void 0!==a&&a.dateOfBirth?f()(null===e||void 0===e||null===(o=e.generalInfo)||void 0===o?void 0:o.dateOfBirth).format("DD-MM-YYYY"):"-",(null===e||void 0===e||null===(i=e.generalInfo)||void 0===i?void 0:i.maritalStatus)||"-",(null===e||void 0===e||null===(r=e.generalInfo)||void 0===r?void 0:r.gender)||"-"]});(0,S.Ay)(n,{startY:50,head:[["S.No.","Name","Type","Email","Mobile","Date of Birth","Marital Status","Gender"]],body:t,margin:{horizontal:10},styles:{cellPadding:6,fontSize:9,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),n.save("ClientOwnerDetails.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,C.jsx)("button",{onClick:()=>{(async()=>{var e;const n=new b.Workbook,l=n.addWorksheet("ClientOwnerDetails");l.columns=[{header:"S.No.",key:"sno",width:10},{header:"Name",key:"fullName",width:25},{header:"Type",key:"type",width:15},{header:"Email",key:"email",width:30},{header:"Mobile",key:"mobile",width:20},{header:"Date of Birth",key:"dob",width:20},{header:"Marital Status",key:"maritalStatus",width:20},{header:"Gender",key:"gender",width:15}],l.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const t=null===E||void 0===E?void 0:E.branchOwnerData;if(!t||!t.map)return;(null===t||void 0===t||null===(e=t.filter(e=>(null===e||void 0===e?void 0:e.userType)==F))||void 0===e?void 0:e.map((e,n)=>{var l,t,a,o,i,r;const d="clientBranch"===(null===e||void 0===e?void 0:e.userType)?"Branch":"clientOwner"===(null===e||void 0===e?void 0:e.userType)?"Owner":"-";return{sno:n+1,fullName:(null===e||void 0===e?void 0:e.fullName)||"N/A",type:d,email:(null===e||void 0===e?void 0:e.email)||"N/A",mobile:"".concat((null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)||"-"," ").concat((null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.number)||"N/A"),dob:null!==e&&void 0!==e&&null!==(a=e.generalInfo)&&void 0!==a&&a.dateOfBirth?f()(null===e||void 0===e||null===(o=e.generalInfo)||void 0===o?void 0:o.dateOfBirth).format("DD-MM-YYYY"):"N/A",maritalStatus:(null===e||void 0===e||null===(i=e.generalInfo)||void 0===i?void 0:i.maritalStatus)||"N/A",gender:(null===e||void 0===e||null===(r=e.generalInfo)||void 0===r?void 0:r.gender)||"N/A"}})).forEach(e=>{l.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),l.autoFilter={from:"A1",to:"H1"},n.xlsx.writeBuffer().then(e=>{const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=document.createElement("a");l.href=URL.createObjectURL(n),l.download="ClientOwnerDetails.xlsx",l.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]}),(0,C.jsx)("div",{className:"my-1",children:(0,C.jsxs)(p.Ay.Group,{onChange:e=>P(e.target.value),value:F,children:[(0,C.jsx)(p.Ay.Button,{value:"clientBranch",children:"Branch Owner"}),(0,C.jsx)(p.Ay.Button,{value:"clientOwner",children:"Client Owner"})]})}),(0,C.jsx)("div",{className:" overflow-x-auto",children:(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Name"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Type"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Email"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Mobile"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Date of Birth"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Marital Status "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Gender"})]})}),R?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,C.jsx)(N.A,{})})}):(0,C.jsx)("tbody",{children:null!==E&&void 0!==E&&E.branchOwnerData&&(null===E||void 0===E?void 0:E.branchOwnerData.length)>0?null===E||void 0===E||null===(e=E.branchOwnerData)||void 0===e||null===(n=e.filter(e=>(null===e||void 0===e?void 0:e.userType)==F))||void 0===n?void 0:n.map((e,n)=>{var l,t,a,o,i,r,d,s;return(0,C.jsxs)("tr",{className:"border-b-[1px] ".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:n+1+(le-1)*I}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null===e||void 0===e?void 0:e.fullName}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:"clientBranch"===(null===e||void 0===e?void 0:e.userType)?"Branch":"clientOwner"===(null===e||void 0===e?void 0:e.userType)?"Owner":"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.email)||"-"}),(0,C.jsxs)("td",{className:"whitespace-nowrap  border-none p-2",children:[(null===e||void 0===e||null===(l=e.mobile)||void 0===l?void 0:l.code)||"-"," ",(null===e||void 0===e||null===(t=e.mobile)||void 0===t?void 0:t.number)||"-"]}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null!==e&&void 0!==e&&null!==(a=e.generalInfo)&&void 0!==a&&a.dateOfBirth?x()(null===e||void 0===e||null===(o=e.generalInfo)||void 0===o?void 0:o.dateOfBirth).format("DD-MM-YYYY"):"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null!==(i=null===e||void 0===e||null===(r=e.generalInfo)||void 0===r?void 0:r.maritalStatus)&&void 0!==i?i:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:null!==(d=null===e||void 0===e||null===(s=e.generalInfo)||void 0===s?void 0:s.gender)&&void 0!==d?d:"-"})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})})]})]}),(0,C.jsx)(y.A,{totalCount:z,pageSize:I,currentPage:le,onChange:e=>{te(e)}})]})})}}}]);
//# sourceMappingURL=7143.b6dd93d4.chunk.js.map