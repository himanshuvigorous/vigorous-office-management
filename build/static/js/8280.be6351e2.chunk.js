"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[8280],{38280:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var d=t(89379),a=t(73216),s=t(39160),o=t(83003),l=t(65043),r=t(30064),i=t.n(r),c=t(31174),p=t(23156),u=t(47196),h=t(24858),m=t(15187),x=t(78227),v=t(31744),j=t(78729),b=(t(65337),t(20126)),w=t(65512),y=t(96651),f=t(4938),N=t(55971),g=t(60446),A=t.n(g),C=t(89427),D=t(70579);const I=function(){const{register:e,control:n,setValue:t,formState:{errors:r}}=(0,h.mN)(),g=(0,a.Zp)(),I=(0,o.wA)(),S=JSON.parse(localStorage.getItem("user_info_".concat(m.AU))),{companyList:T}=(0,o.d4)(e=>e.company),{branchList:L,loading:P}=(0,o.d4)(e=>e.branch),{vendorDataList:_,totalVendorCount:B,loading:O}=(0,o.d4)(e=>e.vendor),[k,V]=(0,l.useState)(""),[E,q]=(0,l.useState)(1),F=(0,h.FH)({control:n,name:"PDCompanyId",defaultValue:""}),z=(0,h.FH)({control:n,name:"PDBranchId",defaultValue:""}),M=(0,h.FH)({control:n,name:"status",defaultValue:""}),Y=[F,z,M,k].join("-"),[H,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{H?1===E?J():q(1):R(e=>!0)},[Y]),(0,l.useEffect)(()=>{J()},[E]);const J=()=>{const e={page:E,limit:10,reqPayload:{companyId:"admin"===(null===S||void 0===S?void 0:S.userType)?F:"company"===(null===S||void 0===S?void 0:S.userType)?null===S||void 0===S?void 0:S._id:null===S||void 0===S?void 0:S.companyId,branchId:"company"===(null===S||void 0===S?void 0:S.userType)||"admin"===(null===S||void 0===S?void 0:S.userType)||"companyDirector"===(null===S||void 0===S?void 0:S.userType)?z:"companyBranch"===(null===S||void 0===S?void 0:S.userType)?null===S||void 0===S?void 0:S._id:null===S||void 0===S?void 0:S.branchId,directorId:"",text:k,sort:!0,status:"true"===M||"false"!==M&&"",isPagination:!0}};I((0,b.Ng)(e))};(0,l.useEffect)(()=>{(F||"company"===(null===S||void 0===S?void 0:S.userType)||"companyDirector"===(null===S||void 0===S?void 0:S.userType))&&I((0,v.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===S||void 0===S?void 0:S.userType)?F:"company"===(null===S||void 0===S?void 0:S.userType)?null===S||void 0===S?void 0:S._id:null===S||void 0===S?void 0:S.companyId}))},[F]),(0,l.useEffect)(()=>{"admin"===(null===S||void 0===S?void 0:S.userType)&&I((0,j.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:U,canRead:G,canUpdate:W,canDelete:Z}=(0,f.A)();return(0,D.jsx)(s.A,{onChange:e=>{V(e)},children:(0,D.jsxs)("section",{children:[(0,D.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,D.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===(null===S||void 0===S?void 0:S.userType)&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(h.xI,{control:n,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:n}=e;return(0,D.jsxs)(w.A,(0,d.A)((0,d.A)({},n),{},{defaultValue:"",className:"".concat(m.Lp," "),showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(w.A.Option,{value:"",children:"Select Company"}),null===T||void 0===T?void 0:T.map(e=>(0,D.jsx)(w.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),r.PDCompanyId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:r.PDCompanyId.message})]}),("admin"===(null===S||void 0===S?void 0:S.userType)||"company"===(null===S||void 0===S?void 0:S.userType)||"companyDirector"===(null===S||void 0===S?void 0:S.userType))&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(h.xI,{control:n,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var n;let{field:t}=e;return(0,D.jsxs)(w.A,(0,d.A)((0,d.A)({},t),{},{defaultValue:"",className:"".concat(m.Lp," "),showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(w.A.Option,{value:"",children:"Select Branch"}),P?(0,D.jsx)(w.A.Option,{disabled:!0,children:(0,D.jsx)(C.A,{})}):null===(n=(0,m._o)(L))||void 0===n?void 0:n.map(e=>(0,D.jsx)(w.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),r.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:r.PDBranchId.message})]}),(0,D.jsx)(h.xI,{name:"status",control:n,rules:{},render:e=>{let{field:n}=e;return(0,D.jsxs)(w.A,(0,d.A)((0,d.A)({},n),{},{className:" w-32 ".concat(m.Lp," ").concat(r.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(w.A.Option,{value:"",children:"Select Status"}),(0,D.jsx)(w.A.Option,{value:"true",children:" Active "}),(0,D.jsx)(w.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,D.jsx)("button",{onClick:()=>{t("status",""),t("PDBranchId",""),t("PdCompanyId","")},className:"bg-header   py-[5px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Reset"})}),U&&(0,D.jsx)(y.A,{placement:"topLeft",title:"Add Vendor",children:(0,D.jsxs)("button",{onClick:()=>{g("/admin/vendor/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,D.jsx)(p.OiG,{}),(0,D.jsx)("span",{className:"text-[12px]",children:"Add Vendor"})]})})]})]}),(0,D.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:G&&(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,D.jsx)("thead",{className:"",children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Name"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Email"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Mobile Number"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Address"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(Z||W)&&(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),O?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,D.jsx)(N.A,{})})}):(0,D.jsx)("tbody",{children:_&&(null===_||void 0===_?void 0:_.length)>0?null===_||void 0===_?void 0:_.map((e,n)=>{var t,d,a,s,o,l,r,h;return(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:n+1+10*(E-1)}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(t=null===e||void 0===e?void 0:e.fullName)&&void 0!==t?t:"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(d=null===e||void 0===e?void 0:e.email)&&void 0!==d?d:"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(null===e||void 0===e||null===(a=e.mobile)||void 0===a?void 0:a.code)+(null===e||void 0===e||null===(s=e.mobile)||void 0===s?void 0:s.number)}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,m.M0)(null===e||void 0===e||null===(o=e.addresses)||void 0===o?void 0:o.primary)}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(l=A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a"))&&void 0!==l?l:"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(r=null===e||void 0===e?void 0:e.createdBy)&&void 0!==r?r:"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,D.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(h="Inactive")?h:"-"})}),(Z||W)&&(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,D.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[W&&(0,D.jsx)(y.A,{placement:"topLeft",title:"Edit",children:(0,D.jsx)("button",{onClick:()=>{g("/admin/vendor/edit/".concat((0,c.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(p.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),Z&&(0,D.jsx)(y.A,{placement:"topLeft",title:"Delete",children:(0,D.jsx)("button",{onClick:()=>(e=>{let n={_id:e};i().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&I((0,b.Ii)(n)).then(e=>{E>1&&1==(null===_||void 0===_?void 0:_.length)?q(Number(E-1)):J()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(u.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,D.jsx)(x.A,{totalCount:B,pageSize:10,currentPage:E,onChange:e=>{q(e)}})]})})}},65337:(e,n,t)=>{t.d(n,{A:()=>s});var d=t(91686),a=t(70579);const s=function(){return(0,a.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,a.jsx)(d.A,{size:"large"})})}}}]);
//# sourceMappingURL=8280.be6351e2.chunk.js.map