"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[9514],{69514:(e,l,d)=>{d.r(l),d.d(l,{default:()=>S});var a=d(89379),n=d(24858),i=d(39160),o=d(83003),s=d(73216),r=d(65043),t=d(15187),c=d(31744),u=d(78729),v=d(66015),m=d(42837),p=d(72211),h=d(70337),x=d(12208),y=d(8928),j=d(65512),N=d(47989),A=d(33007),b=d(6720),g=d(94084),T=d(17995),I=d(89427),f=d(8873),D=d(70579);const S=()=>{const{register:e,handleSubmit:l,control:d,watch:S,formState:{errors:O},setValue:q,getValues:C}=(0,n.mN)({defaultValues:{heads:[{headType:"invoice",financialYear:(0,t.Yz)()}]}}),w=(0,o.wA)(),L=(0,s.Zp)(),{companyList:_,companyListLoading:Q}=(0,o.d4)(e=>e.company),{branchList:F,branchListloading:P}=(0,o.d4)(e=>e.branch),k=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),B=(0,n.FH)({control:d,name:"PDCompanyId",defaultValue:""}),H=((0,n.FH)({control:d,name:"groupName",defaultValue:""}),(0,n.FH)({control:d,name:"grandTotal",defaultValue:""})),{loading:V}=(0,o.d4)(e=>e.receipt),Y=(0,n.FH)({control:d,name:"PDBranchId",defaultValue:""}),{branchDetailsData:E}=(0,o.d4)(e=>e.branch),{employeList:M}=(0,o.d4)(e=>e.employe),{clientList:G,loading:J}=(0,o.d4)(e=>e.client),{clientGroupList:z,groupSearchLoading:U}=(0,o.d4)(e=>e.clientGroup),{invoiceListData:Z,loading:R}=(0,o.d4)(e=>e.invoice),{departmentListData:W,loading:X}=(0,o.d4)(e=>e.department),{officeAddressListData:K,loading:$}=(0,o.d4)(e=>e.officeAddress),{fields:ee,append:le,remove:de}=(0,n.jz)({control:d,name:"heads"});(0,r.useEffect)(()=>{(B||"company"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType))&&w((0,c.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?B:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId}))},[B]),(0,r.useEffect)(()=>{"admin"===(null===k||void 0===k?void 0:k.userType)&&w((0,u.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const ae=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d=>{let a=parseFloat(d.target.value)||0;a<0&&(a=0),null!==l&&a>l&&(a=l),q(e,a,{shouldValidate:!0})}};(0,r.useEffect)(()=>{(Y||"company"!==(null===k||void 0===k?void 0:k.userType)&&"companyDirector"!==(null===k||void 0===k?void 0:k.userType)&&"admin"!==(null===k||void 0===k?void 0:k.userType))&&w((0,c.ZN)({_id:"company"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)?Y:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId}))},[Y]),(0,r.useEffect)(()=>{!B&&"admin"===(null===k||void 0===k?void 0:k.userType)||!Y&&"companBranch"===(null===k||void 0===k?void 0:k.userType)&&"employee"!==(null===k||void 0===k?void 0:k.userType)||ne()},[B,Y]);const ne=()=>{const e={text:"",status:!0,sort:!0,isTL:"",isHR:"",isPagination:!1,departmentId:"",designationId:"",companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?B:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?Y:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId};w((0,m.qV)(e))},ie=(()=>{const e=[];for(let l=2005;l<=2034;l++)e.push("".concat(l,"-").concat(l+1));return e})(),oe=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Jan-Mar","Apr-Jun","Jul-Sept","Oct-Dec"],re=S("totalAmount")||0,te=S("discount")||0,ce=S("tds")||0,ue=S("advance")||0,ve=S("isDiscountApplicable"),me=S("isTDS"),pe=S("isAdvance"),he=S("maxAdvance")||0;return(0,r.useEffect)(()=>{let e=re;ve&&(e-=te),me&&(e-=ce),q("totalBeforeGrand",e),pe&&(e-=ue),q("grandTotal",e)},[re,te,ce,ue,ve,me,pe,he,q]),(0,D.jsx)(i.A,{children:(0,D.jsx)("div",{className:"gap-4",children:(0,D.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:l(e=>{var l,d,a,n,i;const o=null===e||void 0===e||null===(l=e.heads)||void 0===l||null===(d=l.filter(e=>"invoice"===(null===e||void 0===e?void 0:e.headType)))||void 0===d?void 0:d.map(e=>({headType:"invoice",invoiceId:null===e||void 0===e?void 0:e.invoiceId,subHeadId:null,description:null===e||void 0===e?void 0:e.description,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:"-",type:"",monthName:"",monthQuaters:""})),s=null===e||void 0===e||null===(a=e.heads)||void 0===a||null===(n=a.filter(e=>"client"===(null===e||void 0===e?void 0:e.headType)))||void 0===n?void 0:n.map(e=>({headType:null===e||void 0===e?void 0:e.headType,invoiceId:null,subHeadId:null===e||void 0===e?void 0:e.subHeadId,description:null===e||void 0===e?void 0:e.description,amount:+(null===e||void 0===e?void 0:e.amount),financialYear:null===e||void 0===e?void 0:e.financialYear,type:null===e||void 0===e?void 0:e.type,monthName:null===e||void 0===e?void 0:e.monthName,monthQuaters:null===e||void 0===e?void 0:e.monthQuaters})),r={companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,directorId:"companyDirector"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.directorId,branchId:"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)||"company"===(null===k||void 0===k?void 0:k.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,receiptLayoutId:null===e||void 0===e?void 0:e.invoiceLayout,clientId:null===e||void 0===e?void 0:e.client,groupId:null===e||void 0===e?void 0:e.groupName,employeId:H>0&&"cash"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e||null===(i=e.employeeId)||void 0===i?void 0:i.value:"",bankAccId:H>0&&"cash"!==(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.bankId:"",naration:null===e||void 0===e?void 0:e.naration,advancedAvailableId:"",heads:[...o,...s],date:(0,t.Tk)(null===e||void 0===e?void 0:e.date),subTotalAmount:null===e||void 0===e?void 0:e.totalAmount,isTDS:!(null===e||void 0===e||!e.isTDS)&&(null===e||void 0===e?void 0:e.isTDS),TDSAmount:null!==e&&void 0!==e&&e.isTDS?+(null===e||void 0===e?void 0:e.tds):0,isDiscount:null===e||void 0===e?void 0:e.isDiscountApplicable,discountAmount:null!==e&&void 0!==e&&e.isDiscountApplicable?+(null===e||void 0===e?void 0:e.discount):0,advancedAvailable:null===e||void 0===e?void 0:e.maxAdvance,isAdvanced:!(null===e||void 0===e||!e.isAdvance)&&(null===e||void 0===e?void 0:e.isAdvance),advancedAdjust:+(null===e||void 0===e?void 0:e.advance),totalAmount:null===e||void 0===e?void 0:e.totalBeforeGrand,grandTotalAmount:null===e||void 0===e?void 0:e.grandTotal,paymentmode:H>0?null===e||void 0===e?void 0:e.type:"",chequeNumber:H>0&&"cheque"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.chequeNo:"",transectionNumber:H>0&&"bank"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.transactionNo:""};w((0,p.hp)(r)).then(e=>{e.error||L(-1)})}),children:[(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:["admin"===(null===k||void 0===k?void 0:k.userType)&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Company ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{var l;let{field:d}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{defaultValue:"",className:"".concat(t.Hy," "),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Company"}),Q?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(l=(0,t._o)(_,"fullName"))||void 0===l?void 0:l.map(e=>(0,D.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),O.PDCompanyId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.PDCompanyId.message})]}),("admin"===(null===k||void 0===k?void 0:k.userType)||"company"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType))&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Branch ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{var l;let{field:d}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Branch"}),P?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(l=(0,t._o)(F,"fullName"))||void 0===l?void 0:l.map(e=>(0,D.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),O.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.PDBranchId.message})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Group Type ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"groupName",rules:{required:"Group Name is required"},render:e=>{var l;let{field:d}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:" ".concat(t.Hy," ").concat(O.groupName?"border-[1px] ":"border-gray-300"),onFocus:()=>{w((0,x.J_)({companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?S("PDCompanyId"):"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?S("PDBranchId"):"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,isPagination:!1,text:"",sort:!0,status:!0,groupId:""}))},onChange:e=>{var l;q("maxAdvance",null===z||void 0===z||null===(l=z.find(l=>(null===l||void 0===l?void 0:l._id)===e))||void 0===l?void 0:l.advancedBalance),w((0,h.Aq)({companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?S("PDCompanyId"):"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?S("PDBranchId"):"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,directorId:"",organizationId:"",industryId:"",groupId:e,text:"",sort:!0,status:!0,isPagination:!1})),null===d||void 0===d||d.onChange(e)},children:[(0,D.jsx)(j.A.Option,{className:"text-xs",value:"",children:"Select Group Type"}),U?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(l=(0,t._o)(z,"fullName"))||void 0===l?void 0:l.map((e,l)=>(0,D.jsxs)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName,"(",null===e||void 0===e?void 0:e.groupName,")"]}))]}))}}),O.groupName&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.groupName.message})]}),(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Client ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"client",rules:{required:"client is required"},render:e=>{var l;let{field:d}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select client"}),J?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(l=(0,t._o)(G,"fullName"))||void 0===l?void 0:l.map(e=>(0,D.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),O.client&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.client.message})]}),(0,D.jsxs)("div",{className:"col-span-2",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Firm Layout Name",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"invoiceLayout",rules:{required:"Layout Name is required"},render:e=>{var l;let{field:d}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},d),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:" ".concat(t.Hy," ").concat(O.invoiceLayout?"border-[1px] ":"border-gray-300"),onFocus:()=>{w((0,y.XY)({companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?S("PDCompanyId"):"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?S("PDBranchId"):"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,directorId:"",text:"",sort:!0,status:!0,type:"invoice",isPagination:!1,bankAccountId:"",isGSTEnabled:""}))},children:[(0,D.jsx)(j.A.Option,{className:"",value:"",children:"Select Layout"}),$?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(l=(0,t._o)(K,"firmName"))||void 0===l?void 0:l.map(e=>(0,D.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.firmName}))]}))}}),O.invoiceLayout&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.invoiceLayout.message})]})]}),(0,D.jsx)("div",{children:ee.map((l,i)=>{var o,s,r,c,u,v,m,p,h,x,y,g,T,f,C,L,_,Q,F,P,H,V,E,M,G,J,z,U,K,$,le,ae,ne,re,te,ce,ue,ve,me,pe,he,xe,ye,je,Ne;return(0,D.jsxs)("div",{className:"border border-gray-300 rounded-md my-2",children:[(0,D.jsx)("div",{className:"flex justify-end bg-header rounded-t-md p-4",children:(0,D.jsx)("button",{className:"text-white",size:20,type:"button",onClick:()=>de(i),children:(0,D.jsx)(b.b6i,{})})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"".concat(t.Q0),children:"Head Type"}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].headType"),rules:{required:"Head type is required"},render:e=>{var l,d;let{field:n}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:" ".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.headType?"border-[1px] ":"border-gray-300"),onChange:e=>{q("heads[".concat(i,"].headType"),e),q("heads[".concat(i,"].amount"),0),q("heads[".concat(i,"].subHeadId"),""),q("heads[".concat(i,"].invoiceId"),"")},children:[(0,D.jsx)(j.A.Option,{value:"invoice",children:"Invoice"}),(0,D.jsx)(j.A.Option,{value:"client",children:"Client Expense"})]}))}}),(null===O||void 0===O||null===(o=O.heads)||void 0===o||null===(s=o[i])||void 0===s?void 0:s.headType)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(r=O.heads)||void 0===r||null===(c=r[i])||void 0===c||null===(u=c.headType)||void 0===u?void 0:u.message})]}),"client"===S("heads[".concat(i,"].headType"))&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"".concat(t.Q0),children:"Department"}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].subHeadId"),rules:{required:"Department is required"},render:e=>{var l,d,n;let{field:o}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},o),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:" ".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.subHeadId?"border-[1px] ":"border-gray-300"),onFocus:()=>{w((0,A.UU)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?B:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?S("PDBranchId"):"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId}))},children:[(0,D.jsx)(j.A.Option,{className:"",value:"",children:"Select Department"}),X?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(n=(0,t._o)(W))||void 0===n?void 0:n.map((e,l)=>(0,D.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))," "]}))}}),(null===O||void 0===O||null===(v=O.heads)||void 0===v||null===(m=v[i])||void 0===m?void 0:m.subHeadId)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(p=O.heads)||void 0===p||null===(h=p[i])||void 0===h||null===(x=h.subHeadId)||void 0===x?void 0:x.message})]}),(0,D.jsx)("div",{className:"col-span-2 my-2",children:(0,D.jsxs)("div",{className:"grid ".concat("Yearly"===S("heads[".concat(i,"].type"))?"grid-cols-1 md:grid-cols-2":S("heads[".concat(i,"].type"))?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"," space-x-4"),children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Financial Year"," ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].financialYear"),rules:{required:"Financial year is required"},render:e=>{var l,d;let{field:n}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.financialYear?"border-[1px] ":"border-gray-300"),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Financial Year"}),ie.map((e,l)=>(0,D.jsx)(j.A.Option,{value:e,children:e},l))]}))}}),(null===O||void 0===O||null===(y=O.heads)||void 0===y||null===(g=y[i])||void 0===g?void 0:g.financialYear)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(T=O.heads)||void 0===T||null===(f=T[i])||void 0===f?void 0:f.financialYear.message})]}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Type ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].type"),rules:{required:"Type is required"},render:e=>{var l,d;let{field:n}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.financialYear?"border-[1px] ":"border-gray-300"),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Type"}),(0,D.jsx)(j.A.Option,{value:"Quaterly",children:"Quaterly"}),(0,D.jsx)(j.A.Option,{value:"Monthly",children:"Monthly"}),(0,D.jsx)(j.A.Option,{value:"Yearly",children:"Yearly"})]}))}}),(null===O||void 0===O||null===(C=O.heads)||void 0===C||null===(L=C[i])||void 0===L?void 0:L.type)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(_=O.heads)||void 0===_||null===(Q=_[i])||void 0===Q?void 0:Q.type.message})]}),"Quaterly"===S("heads[".concat(i,"].type"))&&(0,D.jsxs)("div",{children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Quarter ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].monthQuaters"),rules:{required:"Quarter Month is required"},render:e=>{var l,d;let{field:n}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.monthQuaters?"border-[1px] ":"border-gray-300"),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Quarter"}),se.map(e=>(0,D.jsx)(j.A.Option,{value:e,children:e},e))]}))}}),(null===O||void 0===O||null===(F=O.heads)||void 0===F||null===(P=F[i])||void 0===P?void 0:P.monthQuaters)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(H=O.heads)||void 0===H||null===(V=H[i])||void 0===V?void 0:V.monthQuaters.message})]}),"Monthly"===S("heads[".concat(i,"].type"))&&(0,D.jsxs)("div",{children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Month ",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].monthName"),rules:{required:" Month is required"},render:e=>{var l,d;let{field:n}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.monthName?"border-[1px] ":"border-gray-300"),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Month"}),oe.map(e=>(0,D.jsx)(j.A.Option,{value:e,children:e},e))]}))}}),(null===O||void 0===O||null===(E=O.heads)||void 0===E||null===(M=E[i])||void 0===M?void 0:M.monthName)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(G=O.heads)||void 0===G||null===(J=G[i])||void 0===J?void 0:J.monthName.message})]})]})})]}),"invoice"===S("heads[".concat(i,"].headType"))&&(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"".concat(t.Q0),children:"Invoice ID"}),(0,D.jsx)(n.xI,{control:d,name:"heads[".concat(i,"].invoiceId"),rules:{required:" Invoice Id is required"},render:e=>{var l,d,n;let{field:o}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},o),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:" ".concat(t.Hy," ").concat(null!==O&&void 0!==O&&null!==(l=O.heads)&&void 0!==l&&null!==(d=l[i])&&void 0!==d&&d.invoiceId?"border-[1px] ":"border-gray-300"),onChange:e=>{if("invoice"===S("heads[".concat(i,"].headType"))){var l;q("heads[".concat(i,"].amount"),null===Z||void 0===Z||null===(l=Z.find(l=>(null===l||void 0===l?void 0:l._id)===e))||void 0===l?void 0:l.grandTotal);const d=ee.reduce((e,l,d)=>e+(parseFloat(S("heads[".concat(d,"].amount")))||0),0);q("totalAmount",d)}o.onChange(e)},onFocus:()=>{(()=>{const e={directorId:"",companyId:"admin"===(null===k||void 0===k?void 0:k.userType)?B:"company"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.companyId,branchId:"company"===(null===k||void 0===k?void 0:k.userType)||"admin"===(null===k||void 0===k?void 0:k.userType)||"companyDirector"===(null===k||void 0===k?void 0:k.userType)?Y:"companyBranch"===(null===k||void 0===k?void 0:k.userType)?null===k||void 0===k?void 0:k._id:null===k||void 0===k?void 0:k.branchId,clientId:S("client"),text:"",sort:!0,status:"PendingPayment",isPagination:!0};w((0,N.W2)(e))})()},children:[(0,D.jsx)(j.A.Option,{className:"",value:"",children:"Select Invoice"}),R?(0,D.jsx)(j.A.Option,{disabled:!0,children:(0,D.jsx)(I.A,{})}):null===(n=(0,t._o)(Z,"invoiceNumber"))||void 0===n?void 0:n.map((e,l)=>(0,D.jsxs)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.clientName,"(",null===e||void 0===e?void 0:e.invoiceNumber,")"]}))]}))}}),(null===O||void 0===O||null===(z=O.heads)||void 0===z||null===(U=z[i])||void 0===U?void 0:U.invoiceId)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(K=O.heads)||void 0===K||null===($=K[i])||void 0===$||null===(le=$.invoiceId)||void 0===le?void 0:le.message})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-8 md:my-1 px-3 md:mt-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"".concat(t.Q0),children:"Description"}),(0,D.jsx)("input",(0,a.A)((0,a.A)({},e("heads[".concat(i,"].description"),{required:"Description is required"})),{},{defaultValue:l.description,className:" ".concat(t.Ol," ").concat(null!==O&&void 0!==O&&null!==(ae=O.heads)&&void 0!==ae&&null!==(ne=ae[i])&&void 0!==ne&&ne.description?"border-[1px] ":"border-gray-300")})),(null===O||void 0===O||null===(re=O.heads)||void 0===re||null===(te=re[i])||void 0===te?void 0:te.description)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(ce=O.heads)||void 0===ce||null===(ue=ce[i])||void 0===ue||null===(ve=ue.description)||void 0===ve?void 0:ve.message})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"".concat(t.Q0),children:"Amount"}),(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01",disabled:"invoice"===S("heads[".concat(i,"].headType"))},e("heads[".concat(i,"].amount"),{required:"Amount is required"})),{},{onChange:e=>{const l=parseFloat(e.target.value)||0;q("heads[".concat(i,"].amount"),l);const d=ee.reduce((e,l,d)=>e+(parseFloat(S("heads[".concat(d,"].amount")))||0),0);q("totalAmount",d)},className:" ".concat("invoice"===S("heads[".concat(i,"].headType"))?t.id:t.Ol," ").concat(null!==O&&void 0!==O&&null!==(me=O.heads)&&void 0!==me&&null!==(pe=me[i])&&void 0!==pe&&pe.amount?"border-[1px] ":"border-gray-300")})),(null===O||void 0===O||null===(he=O.heads)||void 0===he||null===(xe=he[i])||void 0===xe?void 0:xe.amount)&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:null===O||void 0===O||null===(ye=O.heads)||void 0===ye||null===(je=ye[i])||void 0===je||null===(Ne=je.amount)||void 0===Ne?void 0:Ne.message})]})]})]},l.id)})}),(0,D.jsx)("button",{type:"button",onClick:()=>le({headType:"invoice",financialYear:(0,t.Yz)()}),className:"bg-header text-white p-2 px-4 rounded mt-4",children:"Add more"}),(0,D.jsxs)("div",{className:"mt-1",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0," flex items-center"),children:[(0,D.jsx)("input",(0,a.A)({type:"checkbox"},e("isDiscountApplicable"))),(0,D.jsx)("span",{className:"mx-2 text-[15px]",children:"Is Discount"})]}),(0,D.jsxs)("label",{className:"".concat(t.Q0," flex items-center"),children:[(0,D.jsx)("input",(0,a.A)({type:"checkbox"},e("isTDS"))),(0,D.jsx)("span",{className:"mx-2 text-[15px]",children:"Is TDS"})]}),(0,D.jsxs)("label",{className:"".concat(t.Q0," flex items-center"),children:[(0,D.jsx)("input",{type:"checkbox",onChange:e=>{he?q("isAdvance",e.target.checked):((0,f.D)({message:"No advance available",type:"success"}),q("isAdvance",!1))},checked:S("isAdvance")||!1}),(0,D.jsx)("span",{className:"mx-2 text-[15px]",children:"Is Advance"})]})]}),(0,D.jsx)("div",{className:"w-full flex flex-row items-end justify-end",children:(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)("label",{className:t.Q0,children:"Sub Total Amount"}),(0,D.jsx)(n.xI,{name:"totalAmount",control:d,rules:{required:"Sub Total Amount is required"},render:e=>{let{field:l}=e;return(0,D.jsx)("input",(0,a.A)((0,a.A)({},l),{},{type:"number",step:"0.01",className:t.Ol,placeholder:"Sub Total Amount",onChange:e=>{const d=parseFloat(e.target.value)||0;l.onChange(d<=0?.01:d)}}))}}),O.totalAmount&&(0,D.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.totalAmount.message})]}),S("isDiscountApplicable")&&(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)("label",{className:t.Q0,children:"Discount"}),(0,D.jsx)(n.xI,{name:"discount",control:d,rules:{validate:e=>{const l=parseFloat(C("totalAmount"))||0,d=parseFloat(e)||0;return d<0?"Discount cannot be negative":!(d>l)||"Discount cannot exceed ".concat(l)}},render:e=>{let{field:l}=e;return(0,D.jsx)("input",(0,a.A)((0,a.A)({},l),{},{type:"number",step:"0.01",min:"0",max:C("totalAmount"),className:t.Ol,placeholder:"Discount",onChange:ae("discount",C("totalAmount"))}))}}),O.discount&&(0,D.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.discount.message})]}),S("isTDS")&&(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)("label",{className:t.Q0,children:"TDS"}),(0,D.jsx)(n.xI,{name:"tds",control:d,rules:{validate:e=>{const l=(parseFloat(C("totalAmount"))||0)-(parseFloat(C("discount"))||0),d=parseFloat(e)||0;return d<0?"TDS cannot be negative":!(d>l)||"TDS cannot exceed ".concat(l)}},render:e=>{let{field:l}=e;return(0,D.jsx)("input",(0,a.A)((0,a.A)({},l),{},{type:"number",step:"0.01",min:"0",max:C("totalAmount")-(C("discount")||0),className:t.Ol,placeholder:"TDS",onChange:ae("tds",C("totalAmount")-(C("discount")||0))}))}}),O.tds&&(0,D.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.tds.message})]}),(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)("label",{className:t.Q0,children:"Total Amount"}),(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01"},e("totalBeforeGrand")),{},{className:t.Ol,placeholder:"Total before grand",disabled:!0}))]}),S("isAdvance")&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)("label",{className:t.Q0,children:"Advance"}),(0,D.jsx)(n.xI,{name:"advance",control:d,rules:{validate:e=>{const l=(parseFloat(C("totalAmount"))||0)-(parseFloat(C("discount"))||0)-(parseFloat(C("tds"))||0),d=parseFloat(e)||0;return l<=0?"No amount available for advance":d<0?"Advance cannot be negative":d>l?"Advance cannot exceed ".concat(l):!(S("maxAdvance")&&d>parseFloat(S("maxAdvance")))||"Advance cannot exceed available ".concat(S("maxAdvance"))}},render:e=>{let{field:l}=e;return(0,D.jsx)("input",(0,a.A)((0,a.A)({},l),{},{type:"number",step:"0.01",min:"0",max:Math.min(C("totalAmount")-(C("discount")||0)-(C("tds")||0),S("maxAdvance")||1/0),className:t.Ol,placeholder:"Advance",onChange:ae("advance",Math.min(C("totalAmount")-(C("discount")||0)-(C("tds")||0),S("maxAdvance")||1/0))}))}}),O.advance&&(0,D.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.advance.message})]}),S("maxAdvance")&&(0,D.jsxs)("div",{className:"text-red-800 mb-4",children:["Max available: ",S("maxAdvance")]})]}),(0,D.jsxs)("div",{className:"mb-4",children:[(0,D.jsx)("label",{className:t.Q0,children:"Grand Total"}),(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"number",step:"0.01"},e("grandTotal")),{},{className:t.Ol,placeholder:"Grand Total",disabled:!0}))]})]})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 md:gap-8 md:my-1 px-3 md:mt-4",children:[S("grandTotal")>0&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("div",{className:" flex items-center gap-4",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:[(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"radio",value:"cash"},e("type",{required:"Type is required"})),{},{className:"mr-2"})),"Cash"]}),(0,D.jsxs)("label",{className:"".concat(t.Q0),children:[(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"radio",value:"bank"},e("type",{required:"Type is required"})),{},{className:"mr-2"})),"Bank"]})]}),O.type&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.type.message})]}),S("grandTotal")>0&&"cash"!==S("type")&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Sender Bank",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{control:d,name:"bankId",rules:{required:"bankId is required"},render:e=>{var l,d;let{field:n}=e;return(0,D.jsxs)(j.A,(0,a.A)((0,a.A)({},n),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)(j.A.Option,{value:"",children:"Select Bank"}),(null===E||void 0===E||null===(l=E.data)||void 0===l?void 0:l.bankData)&&(null===E||void 0===E||null===(d=E.data)||void 0===d?void 0:d.bankData.length)>0&&E.data.bankData.map(e=>(0,D.jsx)(j.A.Option,{value:e._id,children:(0,t.ig)(e)},e._id)),"         "]}))}}),O.bankId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.bankId.message})]}),S("grandTotal")>0&&"cash"===S("type")&&(0,D.jsxs)("div",{className:"w-full",children:[(0,D.jsx)("label",{className:"".concat(t.Q0),children:"Employee"}),(0,D.jsx)(n.xI,{name:"employeeId",control:d,rules:{required:"Employee is required"},render:e=>{let{field:l}=e;return(0,D.jsx)(v.Ay,(0,a.A)((0,a.A)({},l),{},{options:null===M||void 0===M?void 0:M.map(e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.fullName})),classNamePrefix:"react-select",className:"".concat(t.Ph," ").concat(O.employeeId?"border-[1px] ":"border-gray-300"),placeholder:"Select Employee"}))}}),O.employeeId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.employeeId.message})]}),S("grandTotal")>0&&"cheque"===S("type")&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Cheque No",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("chequeNo",{required:"chequeNo is required"})),{},{className:" ".concat(t.Ol," ").concat(O.chequeNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Cheque no"})),O.chequeNo&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.chequeNo.message})]}),S("grandTotal")>0&&"bank"===S("type")&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Transaction No",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)("input",(0,a.A)((0,a.A)({type:"text"},e("transactionNo",{required:"transaction No is required"})),{},{className:" ".concat(t.Ol," ").concat(O.transactionNo?"border-[1px] ":"border-gray-300"),placeholder:"Enter Transaction no"})),O.transactionNo&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.transactionNo.message})]}),(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Naration",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)("textarea",(0,a.A)((0,a.A)({},e("naration",{required:"Naration is required"})),{},{className:" ".concat(t.Ol," ").concat(O.naration?"border-[1px] ":"border-gray-300"),placeholder:"Enter Naration"})),O.naration&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.naration.message})]}),(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("label",{className:"".concat(t.Q0),children:["Date",(0,D.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,D.jsx)(n.xI,{name:"date",control:d,rules:{required:"Date  is required"},render:e=>{let{field:l}=e;return(0,D.jsx)(g.A,{field:l,errors:O})}}),O.date&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:O.date.message})]})]}),(0,D.jsx)("div",{className:"flex justify-end my-4",children:(0,D.jsx)("button",{type:"submit",disabled:V,className:"".concat(V?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded"),children:V?(0,D.jsx)(T.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=9514.f45470f4.chunk.js.map