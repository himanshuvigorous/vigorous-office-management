"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6771],{65337:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(91686),s=a(70579);const l=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,s.jsx)(n.A,{size:"large"})})}},96771:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var n=a(89379),s=a(65043),l=a(39160),d=a(73216),r=a(83003),i=a(23156),o=a(47196),c=a(30064),p=a.n(c),u=a(31174),x=(a(65337),a(78227)),h=a(15187),m=a(24858),v=a(31744),y=a(78729),j=a(65512),f=a(96651),w=a(97230),N=a(4938),b=a(55971),g=a(60446),A=a.n(g),D=a(89427),C=a(70579);const I=function(){const{register:e,handleSubmit:t,control:a,formState:{errors:c},setValue:g}=(0,m.mN)(),I=(0,d.Zp)(),S=(0,r.wA)(),{penaltyListData:P,totapenaltyCount:B,loading:T}=(0,r.d4)(e=>e.penalty),_=JSON.parse(localStorage.getItem("user_info_".concat(h.AU))),[L,O]=(0,s.useState)(1),{companyList:k}=(0,r.d4)(e=>e.company),{branchList:E,loading:F}=(0,r.d4)(e=>e.branch),[q,z]=(0,s.useState)(""),V=(0,m.FH)({control:a,name:"PDCompanyId",defaultValue:""}),Y=(0,m.FH)({control:a,name:"PDBranchId",defaultValue:""}),H=(0,m.FH)({control:a,name:"status",defaultValue:""});(0,s.useEffect)(()=>{V&&g("PDBranchId","")},[V]);const J=[V,Y,H,q].join("-"),[R,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{R?1===L?U():O(1):M(e=>!0)},[J]),(0,s.useEffect)(()=>{U()},[L]);const U=()=>{const e={currentPage:L,pageSize:10,reqData:{directorId:"",companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?V:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId,branchId:"company"===(null===_||void 0===_?void 0:_.userType)||"admin"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType)?Y:"companyBranch"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.branchId,text:q,sort:!0,status:"true"===H||"false"!==H&&"",isPagination:!0}};S((0,w.cr)(e))};(0,s.useEffect)(()=>{(V||"company"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType))&&S((0,v.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===_||void 0===_?void 0:_.userType)?V:"company"===(null===_||void 0===_?void 0:_.userType)?null===_||void 0===_?void 0:_._id:null===_||void 0===_?void 0:_.companyId}))},[V]),(0,s.useEffect)(()=>{"admin"===(null===_||void 0===_?void 0:_.userType)&&S((0,y.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const{canCreate:G,canRead:W,canUpdate:Z,canDelete:K}=(0,N.A)();return(0,C.jsx)(l.A,{onChange:e=>{z(e)},children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"",children:(0,C.jsxs)("div",{className:"md:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,C.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===(null===_||void 0===_?void 0:_.userType)&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(m.xI,{name:"PDCompanyId",control:a,rules:{required:"Company is required"},render:e=>{let{field:t}=e;return(0,C.jsxs)(j.A,(0,n.A)((0,n.A)({},t),{},{className:"w-full ".concat(h.OJ," ").concat(c.PDCompanyId?"border-[1px] ":"border-gray-300"),placeholder:"Select Company",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Company"}),null===k||void 0===k?void 0:k.map(e=>(0,C.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),c.PDCompanyId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:c.PDCompanyId.message})]}),("admin"===(null===_||void 0===_?void 0:_.userType)||"company"===(null===_||void 0===_?void 0:_.userType)||"companyDirector"===(null===_||void 0===_?void 0:_.userType))&&(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(m.xI,{name:"PDBranchId",control:a,rules:{required:"Branch is required"},render:e=>{var t;let{field:a}=e;return(0,C.jsxs)(j.A,(0,n.A)((0,n.A)({},a),{},{className:"w-full ".concat(h.Lp," ").concat(c.PDBranchId?"border-[1px] ":"border-gray-300"),placeholder:"Select Branch",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Branch"}),F?(0,C.jsx)(j.A.Option,{disabled:!0,children:(0,C.jsx)(D.A,{})}):null===(t=(0,h._o)(E))||void 0===t?void 0:t.map(e=>(0,C.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),c.PDBranchId&&(0,C.jsx)("p",{className:"text-red-500 text-sm",children:c.PDBranchId.message})]}),(0,C.jsx)(m.xI,{name:"status",control:a,rules:{},render:e=>{let{field:t}=e;return(0,C.jsxs)(j.A,(0,n.A)((0,n.A)({},t),{},{className:" w-32 ".concat(h.Lp," ").concat(c.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(j.A.Option,{value:"true",children:" Active "}),(0,C.jsx)(j.A.Option,{value:"false",children:" InActive "})]}))}})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,C.jsx)("button",{onClick:()=>{g("status",""),g("PDBranchId",""),g("PdDepartmentId",""),g("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),G&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Add Penalty",children:(0,C.jsxs)("button",{onClick:()=>{I("/admin/penalty/create")},className:"bg-[#074173] px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,C.jsx)(i.OiG,{}),(0,C.jsx)("span",{className:"text-[12px]",children:"Add Penalty"})]})})]})]})}),(0,C.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:W&&(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-[#074173] capitalize text-[12px] text-[#ffff] font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,C.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Penalty Name"}),(0,C.jsx)("th",{className:"p-2 whitespace-nowrap",children:"Amount"}),(0,C.jsx)("th",{className:"p-2 whitespace-nowrap",children:"created At"}),(0,C.jsx)("th",{className:"p-2 whitespace-nowrap",children:"created By"}),(0,C.jsx)("th",{className:"p-2 whitespace-nowrap",children:"status"}),(K||Z)&&(0,C.jsx)("th",{className:"p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),T?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(b.A,{})})}):(0,C.jsx)("tbody",{children:P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,t)=>{var a;return(0,C.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[14px] border-b-[1px] border-[#DDDDDD]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap p-2",children:t+1+10*(L-1)}),(0,C.jsx)("td",{className:"whitespace-nowrap p-2",children:(null===e||void 0===e?void 0:e.name)||"N/A"}),(0,C.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,h.w2)(null===e||void 0===e?void 0:e.amount)||"N/A"}),(0,C.jsx)("td",{className:"whitespace-nowrap p-2",children:A()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,C.jsx)("td",{className:"whitespace-nowrap p-2",children:(null===e||void 0===e?void 0:e.createdBy)||"N/A"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,C.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(a="Inactive")?a:"-"})}),(Z||K)&&(0,C.jsx)("td",{className:"whitespace-nowrap p-2",children:(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[Z&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Edit",children:(0,C.jsx)("button",{onClick:()=>{I("/admin/penalty/edit/".concat((0,u.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(i.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),K&&(0,C.jsx)(f.A,{placement:"topLeft",title:"Delete",children:(0,C.jsx)("button",{onClick:()=>(e=>{let t={_id:e};p().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&S((0,w.f0)(t)).then(e=>{L>1&&1==(null===P||void 0===P?void 0:P.length)?O(Number(L-1)):U()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(o.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:7,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,C.jsx)(x.A,{totalCount:B,pageSize:10,currentPage:L,onChange:e=>{O(e)}})]})})}}}]);
//# sourceMappingURL=6771.18bdeee5.chunk.js.map