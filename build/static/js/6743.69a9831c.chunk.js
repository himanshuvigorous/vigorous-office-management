"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6743],{36743:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var s=n(89379),a=n(73216),r=n(39160),l=n(83003),d=n(65043),o=n(30064),c=n.n(o),i=n(31174),p=n(23156),u=n(47196),x=n(24858),h=n(36105),m=n(30575),v=(n(65337),n(78227)),j=n(65512),w=n(96651),b=n(15187),f=n(4938),N=n(55971),g=n(60446),y=n.n(g),A=n(89427),C=n(70579);const S=function(){const{register:e,setValue:t,control:n,formState:{errors:o}}=(0,x.mN)(),g=(0,a.Zp)(),S=(0,l.wA)(),{stateListData:D,totalStateCount:L,loading:k}=(0,l.d4)(e=>e.states),{countryListData:I,loading:O}=(0,l.d4)(e=>e.country),[_,P]=(0,d.useState)(""),[F,z]=(0,d.useState)(1),B=(0,x.FH)({control:n,name:"PDCountryId",defaultValue:""}),E=(0,x.FH)({control:n,name:"status",defaultValue:""}),q=[B,E,_].join("-"),[R,Y]=(0,d.useState)(!1);(0,d.useEffect)(()=>{R?1===F?V():z(1):Y(e=>!0)},[q]),(0,d.useEffect)(()=>{V()},[F]);const V=()=>{const e={page:F,limit:10,reqPayload:{text:_,sort:!0,status:E,isPagination:!0,countryId:B}};S((0,m.C_)(e))},H=()=>{var e;null!==I&&void 0!==I&&null!==(e=I.docs)&&void 0!==e&&e.length||S((0,h.dw)({isPagination:!1,text:"",sort:!0,status:!0}))},{canCreate:M,canRead:G,canUpdate:J,canDelete:T}=(0,f.A)();return(0,C.jsxs)(r.A,{onChange:e=>{P(e)},children:[(0,C.jsx)("div",{className:"w-full",children:(0,C.jsxs)("div",{className:"xl:flex justify-between items-center lg:space-y-0 space-y-2 py-1",children:[(0,C.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 md:flex md:gap-3 gap-1.5",children:[(0,C.jsx)("div",{className:"",children:(0,C.jsx)(x.xI,{name:"PDCountryId",control:n,rules:{required:"Country is required"},render:e=>{var t;let{field:n}=e;return(0,C.jsxs)(j.A,(0,s.A)((0,s.A)({},n),{},{className:" ".concat(b.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Country Name",onFocus:H,children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Country"}),O?(0,C.jsx)(j.A.Option,{disabled:!0,children:(0,C.jsx)(A.A,{})}):null===(t=(0,b._o)(null===I||void 0===I?void 0:I.docs))||void 0===t?void 0:t.map(e=>(0,C.jsx)(j.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]}))}})}),(0,C.jsx)("div",{className:"",children:(0,C.jsx)(x.xI,{name:"status",control:n,rules:{},render:e=>{let{field:t}=e;return(0,C.jsxs)(j.A,(0,s.A)((0,s.A)({},t),{},{className:" w-32 ".concat(b.Lp," ").concat(o.status?"border-[1px] ":"border-gray-300"),placeholder:"Select Status",showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(j.A.Option,{value:"",children:"Select Status"}),(0,C.jsx)(j.A.Option,{value:!0,children:" Active "}),(0,C.jsx)(j.A.Option,{value:!1,children:" InActive "})]}))}})}),(0,C.jsx)("button",{onClick:()=>{t("PDCountryId",""),t("status","")},className:"bg-header  py-1 w-24 mt-1 rounded-md md:flex hidden justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{t("PDCountryId",""),t("status","")},className:"bg-header  py-1.5 rounded-md md:hidden flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),M&&G&&(0,C.jsx)(w.A,{placement:"topLeft",title:"Add State",children:(0,C.jsxs)("button",{onClick:()=>{g("/admin/state/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,C.jsx)(p.OiG,{}),(0,C.jsx)("span",{className:"text-[12px]",children:"Add State"})]})})]})]})}),(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:G&&(0,C.jsxs)("table",{className:"w-full max-w-full  overflow-x-auto ",children:[(0,C.jsx)("thead",{className:"",children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-[#074173] text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"  S.no. "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Country "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"State"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"State Code "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"createdAt "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"createdBy "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(T||J)&&(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:" Action"})]})}),k?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,C.jsx)(N.A,{})})}):(0,C.jsx)("tbody",{children:D&&null!==D&&void 0!==D&&D.docs&&(null===D||void 0===D?void 0:D.docs.length)>0?null===D||void 0===D?void 0:D.docs.map((e,t)=>{var n,s,a,r,l,d;return(0,C.jsxs)("tr",{className:"".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white","  border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(F-1)}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.countryName)&&void 0!==n?n:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s="".concat(null===e||void 0===e?void 0:e.name," "))&&void 0!==s?s:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a="".concat(null===e||void 0===e?void 0:e.stateCode," "))&&void 0!==a?a:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(r="".concat(y()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")," "))&&void 0!==r?r:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(l="".concat(null===e||void 0===e?void 0:e.createdBy," "))&&void 0!==l?l:"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,C.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500 "," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(d="Inactive")?d:"-"})}),(T||J)&&(0,C.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,C.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[J&&(0,C.jsx)(w.A,{placement:"topLeft",title:"Edit",children:(0,C.jsx)("button",{onClick:()=>{g("/admin/state/edit/".concat((0,i.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(p.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})})}),T&&(0,C.jsx)(w.A,{placement:"topLeft",title:"Delete",children:(0,C.jsx)("button",{onClick:()=>(e=>{let t={_id:e};c().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&S((0,m.Ll)(t)).then(e=>{var t;null!==e&&void 0!==e&&e.error||(F>1&&1==(null===D||void 0===D||null===(t=D.docs)||void 0===t?void 0:t.length)?z(Number(F-1)):V())})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,C.jsx)(u.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})]})})]},t)}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:8,className:"px-6 py-2.5 whitespace-nowrap text-center font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),L>10&&(0,C.jsx)(v.A,{totalCount:L,pageSize:10,currentPage:F,onChange:e=>{z(e)}})]})]})}},65337:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(91686),a=n(70579);const r=function(){return(0,a.jsx)("div",{className:"flex justify-center items-center h-[80vh]",children:(0,a.jsx)(s.A,{size:"large"})})}}}]);
//# sourceMappingURL=6743.69a9831c.chunk.js.map