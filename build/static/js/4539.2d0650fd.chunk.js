"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4539],{54539:(e,l,d)=>{d.r(l),d.d(l,{default:()=>N});var a=d(89379),i=d(24858),n=d(39160),o=d(83003),s=d(73216),r=d(65043),t=(d(42837),d(15187)),c=d(31744),m=d(78729),u=d(92823),p=d.n(u),v=d(46817),h=d(65512),x=d(17995),y=d(89427),j=d(70579);const N=()=>{const{loading:e}=(0,o.d4)(e=>e.emailTemplate),{register:l,handleSubmit:d,control:u,formState:{errors:N},setValue:b}=(0,i.mN)(),g=(0,o.wA)(),f=(0,s.Zp)(),{companyList:A,companyListLoading:I}=(0,o.d4)(e=>e.company),{branchList:T,branchListloading:C}=(0,o.d4)(e=>e.branch),[D,S]=(0,r.useState)(""),P=JSON.parse(localStorage.getItem("user_info_".concat(t.AU))),_=(0,i.FH)({control:u,name:"PDCompanyId",defaultValue:""});(0,r.useEffect)(()=>{(_||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&g((0,c.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?_:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId}))},[_]),(0,r.useEffect)(()=>{"admin"===(null===P||void 0===P?void 0:P.userType)&&g((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);return(0,j.jsx)(n.A,{children:(0,j.jsx)("div",{className:"gap-4",children:(0,j.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:d(e=>{const l={companyId:"admin"===(null===P||void 0===P?void 0:P.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.companyId,directorId:"",branchId:"admin"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===P||void 0===P?void 0:P.userType)?null===P||void 0===P?void 0:P._id:null===P||void 0===P?void 0:P.branchId,title:null===e||void 0===e?void 0:e.templateName,slug:"",content:D};g((0,v.sh)(l)).then(e=>{e.error||f(-1)})}),children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===P||void 0===P?void 0:P.userType)&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(t.Q0),children:["Company ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(i.xI,{control:u,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(h.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(t.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,j.jsx)(h.A.Option,{value:"",children:"Select Company"}),I?(0,j.jsx)(h.A.Option,{disabled:!0,children:(0,j.jsx)(y.A,{})}):null===A||void 0===A?void 0:A.map(e=>(0,j.jsx)(h.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),N.PDCompanyId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.PDCompanyId.message})]}),("admin"===(null===P||void 0===P?void 0:P.userType)||"company"===(null===P||void 0===P?void 0:P.userType)||"companyDirector"===(null===P||void 0===P?void 0:P.userType))&&(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(t.Q0),children:["Branch ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(i.xI,{name:"PDBranchId",control:u,rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(h.A,(0,a.A)((0,a.A)({},l),{},{className:"".concat(t.Hy," ").concat(N.PDBranchId?"border-[1px] ":"border-gray-300"),filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,j.jsx)(h.A.Option,{value:"",children:"Select Branch"}),C?(0,j.jsx)(h.A.Option,{disabled:!0,children:(0,j.jsx)(y.A,{})}):null===T||void 0===T?void 0:T.map(e=>(0,j.jsx)(h.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),N.PDBranchId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.PDBranchId.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(t.Q0),children:["Template Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,a.A)((0,a.A)({type:"text"},l("templateName",{required:"Template Name is required"})),{},{className:"".concat(t.Ol," ").concat(N.templateName?"border-[1px] ":"border-gray-300"),placeholder:"Enter Template Name"})),N.templateName&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:N.templateName.message})]}),(0,j.jsxs)("div",{className:"mt-4 md:col-span-2",children:[(0,j.jsxs)("label",{className:"".concat(t.Q0),children:["Content ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(p(),{value:D,onChange:e=>{S(e)},placeholder:"Write the email body here",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike"],[{align:[]}],["link","image","video"],["blockquote","code-block"],["clean"]]},formats:["header","font","list","bold","italic","underline","link","align","clean"]})]})]}),(0,j.jsx)("div",{className:"flex justify-end",children:(0,j.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:e?(0,j.jsx)(x.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=4539.2d0650fd.chunk.js.map