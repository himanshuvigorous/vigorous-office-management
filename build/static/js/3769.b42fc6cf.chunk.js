"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3769],{13769:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(89379),s=n(73216),r=n(83003),o=n(65043),i=n(30064),l=n.n(i),c=n(24858),d=n(79304),p=n(78729),x=n(15187),u=n(60184),h=n(39160),m=n(47196),j=(n(31174),n(78227)),f=n(735),b=n(96651),w=n(70579);const v=function(){const{register:e,setValue:t,formState:{errors:n},control:i}=(0,c.mN)(),{userCompanyId:v,userDirectorId:y,userBranchId:N,userEmployeId:g,userDepartmentId:D,userDesignationId:C,userType:I}=(0,f.A)(),{companyList:A}=(0,r.d4)(e=>e.company),{notificationList:P,totalNotificationCount:T}=(0,r.d4)(e=>e.notification),S=(0,s.Zp)(),k=(0,r.wA)(),q=(0,c.FH)({control:i,name:"PDCompanyId",defaultValue:v}),F=(0,c.FH)({control:i,name:"PDBranchId",defaultValue:N});(0,c.FH)({control:i,name:"notificationType",defaultValue:N}),(0,o.useEffect)(()=>{"admin"===I&&k((0,p.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);const[B,E]=(0,o.useState)(1);(0,o.useEffect)(()=>{_()},[B]);const _=()=>{const e={page:B,limit:10,reqPayload:{companyId:q,branchId:F,directorId:"",text:"",sort:!0,status:"",isPagination:!0}};k((0,d.Mx)(e))};return(0,w.jsxs)(h.A,{children:[(0,w.jsx)("div",{className:"",children:(0,w.jsxs)("div",{className:"flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,w.jsxs)("div",{className:"flex justify-start",children:[(0,w.jsxs)("div",{className:"w-fit",children:[(0,w.jsxs)("label",{className:"".concat(x.Q0),children:["Type",(0,w.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,w.jsxs)("select",(0,a.A)((0,a.A)({},e("notificationType",{required:"Type is required"})),{},{className:" ".concat(x.Ol," ").concat(n.notificationType?"border-[1px] ":"border-gray-300"),onChange:async e=>{const n=e.target.value;if(t("notificationType",n),n.trim().length>0){const e={page:B,limit:10,reqPayload:{companyId:q,branchId:F,directorId:"",text:"",sort:!0,status:"",isPagination:!1,notificationType:n}};k((0,d.Mx)(e))}},children:[(0,w.jsx)("option",{className:"",value:"",children:"Select Type"}),(0,w.jsx)("option",{value:"group",children:"Client Group"}),(0,w.jsx)("option",{value:"client",children:"Client Wise"}),(0,w.jsx)("option",{value:"department",children:"Department Wise"}),(0,w.jsx)("option",{value:"other",children:"other"})]}))]}),"admin"===I&&(0,w.jsxs)("div",{className:"",children:[(0,w.jsxs)("select",(0,a.A)((0,a.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(x.OJ," ").concat(n.PDCompanyId?"border-[1px] ":"border-gray-300"),children:[(0,w.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===A||void 0===A?void 0:A.map(e=>(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),n.PDCompanyId&&(0,w.jsx)("p",{className:"text-red-500 text-sm",children:n.PDCompanyId.message})]})]}),(0,w.jsxs)("button",{onClick:()=>{S("/admin/notification/create")},className:"bg-header p-2 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,w.jsx)(u.OiG,{}),(0,w.jsx)("span",{className:"text-[12px] tracking-wide",children:"Add Notification"})]})]})}),(0,w.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,w.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,w.jsx)("thead",{className:"",children:(0,w.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"SNo."}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Type"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Subject"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[30%]",children:"Message"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Status"}),(0,w.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[15%]",children:"Action"})]})}),(0,w.jsx)("tbody",{children:P&&(null===P||void 0===P?void 0:P.length)>0?null===P||void 0===P?void 0:P.map((e,t)=>{var n,a,s,r;return(0,w.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," text-[#374151] text-[14px]"),children:[(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:t+1+10*(B-1)}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n=null===e||void 0===e?void 0:e.notificationType)&&void 0!==n?n:"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(a=null===e||void 0===e?void 0:e.subject)&&void 0!==a?a:"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(s=null===e||void 0===e?void 0:e.message)&&void 0!==s?s:"-"}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:(0,w.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(r="Inactive")?r:"-"})}),(0,w.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,w.jsx)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:(0,w.jsx)(b.A,{placement:"topLeft",title:"Delete",children:(0,w.jsx)("button",{onClick:()=>(e=>{let t={_id:e};l().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&k((0,d.fP)(t)).then(e=>{!e.error&&(0,d.Mx)()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,w.jsx)(m.tqC,{className:"text-red-600 hover:text-red-500",size:16})})})})})]},t)}):(0,w.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,w.jsx)("td",{colSpan:4,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===P||void 0===P?void 0:P.length)>0&&(0,w.jsx)(j.A,{totalCount:T,pageSize:10,currentPage:B,onChange:e=>{E(e)}})]})}}}]);
//# sourceMappingURL=3769.b42fc6cf.chunk.js.map