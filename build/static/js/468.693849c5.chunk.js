"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[468],{40468:(e,a,l)=>{l.r(a),l.d(a,{default:()=>f});var n=l(89379),s=l(65043),i=l(15187),d=l(24858),c=l(39160),r=l(83003),o=l(88967),t=l(31744),m=l(78729),u=l(73216),p=l(15063),h=l(30064),x=l.n(h),v=l(17995),N=l(65512),j=l(89427),y=l(70579);const f=()=>{const{loading:e}=(0,r.d4)(e=>e.bankAccount),a=(0,s.useRef)([]),{register:l,handleSubmit:h,watch:f,setValue:b,control:g,formState:{errors:A}}=(0,d.mN)(),C=(0,r.wA)(),I=(0,u.Zp)(),{companyList:T,companyListLoading:w}=(0,r.d4)(e=>e.company),{branchList:S,branchListloading:B}=(0,r.d4)(e=>e.branch),O=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),q=(0,d.FH)({control:g,name:"PDCompanyId",defaultValue:""}),k=f("fileUpload");(0,s.useEffect)(()=>{(q||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&C((0,t.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?q:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId}))},[q]),(0,s.useEffect)(()=>{"admin"===(null===O||void 0===O?void 0:O.userType)&&C((0,m.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]);return(0,y.jsx)(c.A,{children:(0,y.jsx)("div",{className:"mt-2",children:(0,y.jsxs)("form",{autoComplete:"off",onSubmit:h(e=>{const a={companyId:"admin"===(null===O||void 0===O?void 0:O.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.companyId,directorId:"companyDirector"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.directorId,branchId:"admin"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===O||void 0===O?void 0:O.userType)?null===O||void 0===O?void 0:O._id:null===O||void 0===O?void 0:O.branchId,bankholderName:null===e||void 0===e?void 0:e.holderName,bankName:null===e||void 0===e?void 0:e.bankName,accountNumber:null===e||void 0===e?void 0:e.accountNumber,ifscCode:null===e||void 0===e?void 0:e.ifscCode,accountType:null===e||void 0===e?void 0:e.accountType,branchName:null===e||void 0===e?void 0:e.branchName,filePath:[null===e||void 0===e?void 0:e.fileUplaod]};C((0,p.yj)(a)).then(e=>{e.error||I(-1)})}),children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 gap-2",children:["admin"===(null===O||void 0===O?void 0:O.userType)&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Company ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(d.xI,{control:g,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,y.jsxs)(N.A,(0,n.A)((0,n.A)({},a),{},{defaultValue:"",className:"".concat(i.Hy),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(N.A.Option,{value:"",children:"Select Company"}),w?(0,y.jsx)(N.A.Option,{disabled:!0,children:(0,y.jsx)(j.A,{})}):null===T||void 0===T?void 0:T.map(e=>(0,y.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.PDCompanyId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:A.PDCompanyId.message})]}),("admin"===(null===O||void 0===O?void 0:O.userType)||"company"===(null===O||void 0===O?void 0:O.userType)||"companyDirector"===(null===O||void 0===O?void 0:O.userType))&&(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Branch ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(d.xI,{name:"PDBranchId",control:g,rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,y.jsxs)(N.A,(0,n.A)((0,n.A)({},a),{},{className:"".concat(i.Hy," ").concat(A.PDBranchId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,y.jsx)(N.A.Option,{value:"",children:"Select Branch"}),B?(0,y.jsx)(N.A.Option,{disabled:!0,children:(0,y.jsx)(j.A,{})}):null===S||void 0===S?void 0:S.map(e=>(0,y.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),A.PDBranchId&&(0,y.jsx)("p",{className:"text-red-500 text-sm",children:A.PDBranchId.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Account Holder Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,n.A)({className:"".concat(i.Ol),placeholder:"Enter Bank Holder Name",name:"holderName"},l("holderName",{required:" Bank Holder Name is required"}))),A.holderName&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.holderName.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Bank Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,n.A)({className:"".concat(i.Ol),placeholder:"Enter Bank  Name",name:"bankName"},l("bankName",{required:" Bank  Name is required"}))),A.bankName&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.bankName.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Branch Name ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,n.A)({className:"".concat(i.Ol),placeholder:"Enter Branch  Name",name:"branchName"},l("branchName",{required:" Branch  Name is required"}))),A.branchName&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.branchName.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Account Number ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,n.A)({className:"".concat(i.Ol),placeholder:"Enter Account  Number",type:"number",name:"accountNumber"},l("accountNumber",{required:" Account Number is required",minLength:{value:6,message:"Account number must be at least 6 characters long"},maxLength:{value:18,message:"Account number must not exceed 18 characters"}}))),A.accountNumber&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.accountNumber.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["IFSC Code ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)("input",(0,n.A)({className:"".concat(i.Ol),placeholder:"Enter IFSC Code",name:"ifscCode"},l("ifscCode",{required:"IFSC Code is required",pattern:{value:/^[A-Z]{4}0[A-Z0-9]{6}$/,message:"Invalid IFSC code. Example: SBIN0001234"}}))),A.ifscCode&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.ifscCode.message})]}),(0,y.jsxs)("div",{className:"",children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Account Type ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(d.xI,{control:g,name:"accountType",rules:{required:"accountType is required"},render:e=>{let{field:a}=e;return(0,y.jsxs)(N.A,(0,n.A)((0,n.A)({},a),{},{defaultValue:"",className:"".concat(i.Hy," "),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,y.jsx)(N.A.Option,{value:"",children:"Select accountType"}),(0,y.jsx)(N.A.Option,{className:"",value:"saving",children:"Saving"}),(0,y.jsx)(N.A.Option,{className:"",value:"current",children:"Current"}),(0,y.jsx)(N.A.Option,{className:"",value:"Salary",children:"Salary"}),(0,y.jsx)(N.A.Option,{className:"",value:"Joint",children:"Joint"})]}))}}),A.accountType&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.accountType.message})]}),(0,y.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,y.jsxs)("div",{children:[(0,y.jsxs)("label",{className:"".concat(i.Q0),children:["Upload ",(0,y.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,y.jsx)(d.xI,{name:"fileUpload",control:g,rules:{required:"File upload is required"},render:e=>{let{field:l}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("input",{type:"file",id:"file-upload",accept:".pdf,image/*",className:"hidden",ref:a,onChange:e=>{l.onChange(e),(e=>{if(!e)return;const a="application/pdf"===e.type,l=URL.createObjectURL(e);x().fire({title:"Preview your file",html:'\n            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">\n                <p style="margin-bottom: 20px;">Do you want to upload this file?</p>\n                '.concat(a?'<p style="font-size: 16px; color: #074173;">'.concat(e.name,"</p>"):'<img src="'.concat(l,'" alt="File Preview" style="max-width: 100%; max-height: 300px; width: auto; height: auto;">'),"\n                <br>\n            </div>\n        "),showCancelButton:!0,confirmButtonText:"Confirm!",cancelButtonText:"Cancel"}).then(a=>{a.isConfirmed&&C((0,o.Sg)({filePath:e,isVideo:!1,isMultiple:!1})).then(e=>{var a;e.error||(b("fileUplaod",null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.data),x().fire({icon:"success",title:"Uploaded!",text:"Your file has been successfully uploaded.",timer:2e3,showConfirmButton:!1}))})})})(e.target.files[0])}}),(0,y.jsx)("br",{}),(0,y.jsx)("label",{htmlFor:"file-upload",className:"bg-header text-white mt-2 py-1.5 px-3 text-nowrap text-sm rounded cursor-pointer",children:"Upload"}),A.fileUpload&&(0,y.jsx)("p",{className:"text-red-600 text-sm mt-1",children:A.fileUpload.message})]})}})]}),k?(0,y.jsx)("img",{src:"".concat("https://vigapi.vigorousit.com","/public/").concat(f("fileUplaod")),alt:"Uploaded",className:"w-20 h-20 shadow rounded-sm"}):null]})]}),(0,y.jsx)("div",{className:"flex justify-end items-center ",children:(0,y.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white mt-4 p-2 px-4 rounded"),children:e?(0,y.jsx)(v.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=468.693849c5.chunk.js.map