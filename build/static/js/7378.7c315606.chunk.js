"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[7378],{47378:(e,l,d)=>{d.r(l),d.d(l,{default:()=>y});var a=d(89379),i=d(24858),n=d(83003),o=d(73216),s=d(65043),r=d(15187),c=d(31744),t=d(78729),u=d(39160),m=d(16998),v=d(65512),p=d(17995),h=d(89427),x=d(70579);const y=()=>{const{loading:e}=(0,n.d4)(e=>e.allowance),{register:l,handleSubmit:d,control:y,formState:{errors:j},setValue:N}=(0,i.mN)(),f=(0,n.wA)(),g=(0,o.Zp)(),{companyList:A,companyListLoading:b}=(0,n.d4)(e=>e.company),{branchList:I,branchListloading:w}=(0,n.d4)(e=>e.branch),C=JSON.parse(localStorage.getItem("user_info_".concat(r.AU))),T=(0,i.FH)({control:y,name:"PDCompanyId",defaultValue:""});(0,i.FH)({control:y,name:"isPercentage",defaultValue:""});return(0,s.useEffect)(()=>{(T||"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType))&&f((0,c.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?T:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId}))},[T]),(0,s.useEffect)(()=>{"admin"===(null===C||void 0===C?void 0:C.userType)&&f((0,t.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,x.jsx)(u.A,{children:(0,x.jsx)("div",{className:"gap-4",children:(0,x.jsxs)("form",{autoComplete:"off",className:"mt-2 md:px-1",onSubmit:d(e=>{const l={companyId:"admin"===(null===C||void 0===C?void 0:C.userType)?null===e||void 0===e?void 0:e.PDCompanyId:"company"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.companyId,directorId:"",branchId:"admin"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType)||"company"===(null===C||void 0===C?void 0:C.userType)?null===e||void 0===e?void 0:e.PDBranchId:"companyBranch"===(null===C||void 0===C?void 0:C.userType)?null===C||void 0===C?void 0:C._id:null===C||void 0===C?void 0:C.branchId,name:null===e||void 0===e?void 0:e.allowanceName,description:"",isPercentage:!1,amount:0};f((0,m.LJ)(l)).then(e=>{e.error||g(-1)})}),children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:["admin"===(null===C||void 0===C?void 0:C.userType)&&(0,x.jsxs)("div",{className:"",children:[(0,x.jsxs)("label",{className:"".concat(r.Q0),children:["Company ",(0,x.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,x.jsx)(i.xI,{control:y,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:l}=e;return(0,x.jsxs)(v.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(r.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,x.jsx)(v.A.Option,{value:"",children:"Select Company"}),b?(0,x.jsx)(v.A.Option,{disabled:!0,children:(0,x.jsx)(h.A,{})}):null===A||void 0===A?void 0:A.map(e=>(0,x.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.PDCompanyId&&(0,x.jsx)("p",{className:"text-red-500 text-sm",children:j.PDCompanyId.message})]}),("admin"===(null===C||void 0===C?void 0:C.userType)||"company"===(null===C||void 0===C?void 0:C.userType)||"companyDirector"===(null===C||void 0===C?void 0:C.userType))&&(0,x.jsxs)("div",{className:"",children:[(0,x.jsxs)("label",{className:"".concat(r.Q0),children:["Branch ",(0,x.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,x.jsx)(i.xI,{control:y,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:l}=e;return(0,x.jsxs)(v.A,(0,a.A)((0,a.A)({},l),{},{defaultValue:"",className:"".concat(r.Hy," "),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),children:[(0,x.jsx)(v.A.Option,{value:"",children:"Select Branch"}),w?(0,x.jsx)(v.A.Option,{disabled:!0,children:(0,x.jsx)(h.A,{})}):null===I||void 0===I?void 0:I.map(e=>(0,x.jsx)(v.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),j.PDBranchId&&(0,x.jsx)("p",{className:"text-red-500 text-sm",children:j.PDBranchId.message})]}),(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("label",{className:"".concat(r.Q0),children:"Name"}),(0,x.jsx)("input",(0,a.A)((0,a.A)({type:"text"},l("allowanceName",{required:"Allowance  is required"})),{},{className:"".concat(r.Ol," ").concat(j.allowanceName?"border-[1px] ":"border-gray-300"),placeholder:"Enter Allowance  Name"})),j.allowanceName&&(0,x.jsx)("p",{className:"text-red-500 text-sm",children:j.allowanceName.message})]})]}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 px-4 rounded mt-3"),children:e?(0,x.jsx)(p.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=7378.7c315606.chunk.js.map