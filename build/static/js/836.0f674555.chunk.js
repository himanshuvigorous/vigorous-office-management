"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[836],{10836:(e,l,a)=>{a.r(l),a.d(l,{default:()=>N});var s=a(89379),d=a(24858),i=a(83003),o=a(73216),n=a(15187),t=a(65043),r=a(65512),c=a(39160),m=a(17995),u=a(89427),v=(a(31744),a(56659)),x=a(42837),h=(a(94084),a(10405)),g=a(27759),p=(a(86178),a(31174)),j=(a(60446),a(70579));const{Option:b}=r.A;const N=function(){const{loading:e,LeadmanagementFeatureByIdData:l}=(0,i.d4)(e=>e.LeadmanagementFeature),{LeadCategoryListData:a}=(0,i.d4)(e=>e.leadCategory),{register:N,handleSubmit:y,control:C,setValue:I,formState:{errors:A}}=(0,d.mN)(),S=(0,i.wA)(),f=(0,o.Zp)(),{loading:L,employeList:w}=(JSON.parse(localStorage.getItem("user_info_".concat(n.AU))),(0,i.d4)(e=>e.employe)),{branchList:D,branchListloading:O}=(0,i.d4)(e=>e.branch),P=((0,d.FH)({control:C,name:"PDBranchId",defaultValue:""}),(0,d.FH)({control:C,name:"CategoryId",defaultValue:""})),{leadIdEnc:k}=(0,o.g)(),q=(0,p.Yc)(k);return(0,t.useEffect)(()=>{let e={_id:q};S((0,g.qU)(e))},[]),(0,t.useEffect)(()=>{var e,a;l&&(I("leadName",null===l||void 0===l?void 0:l.name),I("email",null===l||void 0===l?void 0:l.email),I("location",null===l||void 0===l?void 0:l.location),I("remarks",null===l||void 0===l?void 0:l.remark),I("interstedin",null===l||void 0===l?void 0:l.intrested),I("source",null===l||void 0===l?void 0:l.source),I("mobile",null===l||void 0===l?void 0:l.mobile),I("PDmobileCode",null===l||void 0===l||null===(e=l.mobile)||void 0===e?void 0:e.code),I("PDmobileno",null===l||void 0===l||null===(a=l.mobile)||void 0===a?void 0:a.number),S((0,x.qV)({text:"",status:!0,sort:!0,isTL:"",isHR:"",isManager:"",isPagination:!1,departmentId:"",designationId:"",branchId:null===l||void 0===l?void 0:l.branchId,isBranch:!0,isDirector:!0})).then(e=>{null!==e&&void 0!==e&&e.error||I("employee",null===l||void 0===l?void 0:l.assignedToId)}),S((0,h.jN)({text:"",sort:!0,isPagination:!1,status:"",companyId:null===l||void 0===l?void 0:l.companyId,branchId:null===l||void 0===l?void 0:l.branchId})).then(e=>{null!==e&&void 0!==e&&e.error||(I("CategoryId",null===l||void 0===l?void 0:l.leadCategoryId),I("subcategory",null===l||void 0===l?void 0:l.leadSubCategoryId))}))},[l]),(0,j.jsx)(c.A,{children:(0,j.jsx)("div",{className:"gap-4",children:(0,j.jsxs)("form",{autoComplete:"off",className:"mt-5 md:px-1",onSubmit:y(e=>{const a={_id:q,companyId:null===l||void 0===l?void 0:l.companyId,directorId:null===l||void 0===l?void 0:l.directorId,branchId:null===l||void 0===l?void 0:l.branchId,mobile:{code:null===e||void 0===e?void 0:e.PDmobileCode,number:+(null===e||void 0===e?void 0:e.PDmobileno)},assignedToId:null===e||void 0===e?void 0:e.employee,leadCategoryId:null===e||void 0===e?void 0:e.CategoryId,leadSubCategoryId:null===e||void 0===e?void 0:e.subcategory,name:null===e||void 0===e?void 0:e.leadName,email:null===e||void 0===e?void 0:e.email,location:null===e||void 0===e?void 0:e.location,remark:null===e||void 0===e?void 0:e.remarks,intrested:null===e||void 0===e?void 0:e.interstedin,source:null===e||void 0===e?void 0:e.source,leadValue:0};S((0,g.tL)(a)).then(e=>{null!==e&&void 0!==e&&e.error||f(-1)})}),children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:my-2",children:[(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Lead Name ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"text"},N("leadName",{required:"Lead Name is required"})),{},{className:" ".concat(n.Ol," ").concat(A.leadName?" ":""," "),placeholder:"Enter Lead Name"})),A.leadName&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.leadName.message})]}),(0,j.jsxs)("div",{className:"flex gap-3 mt-1",children:[(0,j.jsxs)("div",{className:"w-[150px]",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Code"}),(0,j.jsx)(d.xI,{control:C,name:"PDmobileCode",render:e=>{let{field:l}=e;return(0,j.jsx)(v.A,{field:l,errors:A})}}),A.PDmobileCode&&(0,j.jsx)("p",{className:"".concat(n.ci),children:A.PDmobileCode.message})]}),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Mobile No"}),(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"number"},N("PDmobileno",{minLength:{value:10,message:"Must be exactly 10 digits"},maxLength:{value:10,message:"Must be exactly 10 digits"}})),{},{className:" ".concat(n.Ol," ").concat(A.PDmobileno?" ":""),placeholder:"Enter Mobile No",maxLength:10,onInput:e=>{e.target.value.length>10&&(e.target.value=e.target.value.slice(0,10))}})),A.PDmobileno&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.PDmobileno.message})]})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Email"}),(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"text"},N("email",{pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"}})),{},{className:" ".concat(n.Ol," ").concat(A.email?" ":""),placeholder:"Enter Email"})),A.email&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.email.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Category ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(d.xI,{name:"CategoryId",control:C,rules:{required:"Category is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(r.A,(0,s.A)((0,s.A)({},l),{},{className:"mt-0 ".concat(n.Hy," ").concat((A.CategoryId,"")),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Category",children:[(0,j.jsx)(b,{value:"",children:"Select Category"}),a&&a.length>0&&a.map((e,l)=>(0,j.jsx)(b,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},l))]}))}}),A.CategoryId&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.CategoryId.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Sub Category"}),(0,j.jsx)(d.xI,{name:"subcategory",control:C,render:e=>{var l,d,i;let{field:o}=e;return(0,j.jsxs)(r.A,(0,s.A)((0,s.A)({},o),{},{className:"mt-0 ".concat(n.Hy," ").concat((A.subcategory,"")),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Sub Category",children:[(0,j.jsx)(b,{value:"",children:"Select Sub Category"}),((null===a||void 0===a||null===(l=a.find(e=>(null===e||void 0===e?void 0:e._id)==P))||void 0===l?void 0:l.leadSubCategoryData)||[])&&((null===a||void 0===a||null===(d=a.find(e=>(null===e||void 0===e?void 0:e._id)==P))||void 0===d?void 0:d.leadSubCategoryData)||[]).length>0&&((null===a||void 0===a||null===(i=a.find(e=>(null===e||void 0===e?void 0:e._id)==P))||void 0===i?void 0:i.leadSubCategoryData)||[]).map((e,l)=>(0,j.jsx)(b,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},l))]}))}}),A.subcategory&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.subcategory.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Location ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"text"},N("location",{required:"location  is required"})),{},{className:" ".concat(n.Ol," ").concat(A.location?" ":""," "),placeholder:"Enter Location"})),A.location&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.location.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Intersted In ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)("input",(0,s.A)((0,s.A)({type:"text"},N("interstedin",{required:"Intersted In is required"})),{},{className:" ".concat(n.Ol," ").concat(A.interstedin?" ":""," "),placeholder:"Enter Intersted In"})),A.interstedin&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.interstedin.message})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Source ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(d.xI,{name:"source",control:C,rules:{required:"Source is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(r.A,(0,s.A)((0,s.A)({},l),{},{className:"mt-0 ".concat(n.Hy," ").concat((A.source,"")),showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select source",children:[(0,j.jsx)(b,{value:"",children:"Select Source"}),(0,j.jsx)(b,{value:"Call",children:"Call"}),(0,j.jsx)(b,{value:"Organic",children:"Organic"}),(0,j.jsx)(b,{value:"Social Media",children:"Social Media"}),(0,j.jsx)(b,{value:"Compaign",children:"Compaign"})]}))}}),A.source&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.source.message})]}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsxs)("label",{className:"".concat(n.Q0),children:["Select employee ",(0,j.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,j.jsx)(d.xI,{control:C,name:"employee",rules:{required:"employee is required"},render:e=>{let{field:l}=e;return(0,j.jsxs)(r.A,(0,s.A)((0,s.A)({},l),{},{defaultValue:"",showSearch:!0,filterOption:(e,l)=>String(null===l||void 0===l?void 0:l.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(n.Hy," mt-2"),children:[(0,j.jsxs)(r.A.Option,{value:"",selected:!0,children:[" ","Select Employee"]}),L?(0,j.jsx)(r.A.Option,{disabled:!0,children:(0,j.jsx)(u.A,{})}):null===w||void 0===w?void 0:w.map((e,l)=>(0,j.jsx)(r.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},l))]}))}}),A.employee&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.employee.message})]}),(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"".concat(n.Q0),children:"Remark"}),(0,j.jsx)("textarea",(0,s.A)((0,s.A)({rows:4},N("remarks")),{},{className:"".concat(n.Ol," ").concat(A.remarks?"border-red-500":""),placeholder:"Enter Remarks"})),A.remarks&&(0,j.jsx)("p",{className:"text-red-500 text-sm",children:A.remarks.message})]})]}),(0,j.jsx)("div",{className:"flex justify-end ",children:(0,j.jsx)("button",{type:"submit",disabled:e,className:"".concat(e?"bg-gray-400":"bg-header"," text-white p-2 mt-3 px-4 rounded"),children:e?(0,j.jsx)(m.A,{}):"Submit"})})]})})})}}}]);
//# sourceMappingURL=836.0f674555.chunk.js.map