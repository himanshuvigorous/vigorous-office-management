"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[6362],{6362:(e,a,s)=>{s.r(a),s.d(a,{default:()=>T});var l=s(89379),t=s(65043),d=s(73216),n=s(83003),i=s(23156),c=s(47196),r=s(30064),o=s.n(r),u=s(39160),x=s(31174),m=s(44798),h=s(15187),p=s(86178),v=s.n(p),j=s(78227),y=s(30326),f=s(65512),N=s(96651),b=s(60446),g=s.n(b),D=s(24858),C=s(4938),A=s(31744),w=s(78729),k=s(55971),I=s(83002),S=s(78973),B=s(89427),P=s(70579);const T=function(){const{canCreate:e,canRead:a,canUpdate:s,canDelete:r}=(0,C.A)(),p=(0,d.Zp)(),b=(0,n.wA)(),[T,O]=(0,t.useState)(g()()),{holidayCalanderData:_,totalholidayCalanderCount:H,loading:Y}=(0,n.d4)(e=>e.holidayCalander),[L,E]=(0,t.useState)(1),{control:V,register:q,setValue:z,formState:{errors:F}}=(0,D.mN)(),[M,R]=(0,t.useState)([]),{companyList:J}=(0,n.d4)(e=>e.company),{branchList:U,branchListloading:W}=(0,n.d4)(e=>e.branch);(0,t.useEffect)(()=>{_&&Z()},[_]);const G=JSON.parse(localStorage.getItem("user_info_".concat(h.AU))),Z=(e,a)=>{const s=(0,h.Hc)(e,a,_);R(s)},$=(0,D.FH)({control:V,name:"PDCompanyId",defaultValue:""}),K=(0,D.FH)({control:V,name:"PDBranchId",defaultValue:""}),Q=(0,D.FH)({control:V,name:"status",defaultValue:""}),[X,ee]=(0,t.useState)(""),ae=[T,K,X,Q].join("-"),[se,le]=(0,t.useState)(!1);(0,t.useEffect)(()=>{se?1===L?te(T):E(1):le(e=>!0)},[ae]),(0,t.useEffect)(()=>{te(T)},[L]);const te=e=>{var a;const s={currentPage:L,pageSize:10,reqData:{companyId:"admin"===(null===G||void 0===G?void 0:G.userType)?$:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId,branchId:"company"===(null===G||void 0===G?void 0:G.userType)||"admin"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType)?K:"companyBranch"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.branchId,text:X,status:"true"===Q||"false"!==Q&&"",sort:!0,isPagination:!0,year:null===(a=g()(T))||void 0===a?void 0:a.format("YYYY")}};b((0,m.$0)(s))};return(0,t.useEffect)(()=>{($||"company"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType))&&b((0,A.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===G||void 0===G?void 0:G.userType)?$:"company"===(null===G||void 0===G?void 0:G.userType)?null===G||void 0===G?void 0:G._id:null===G||void 0===G?void 0:G.companyId}))},[$]),(0,t.useEffect)(()=>{"admin"===(null===G||void 0===G?void 0:G.userType)&&b((0,w.Ar)({text:"",sort:!0,status:!0,isPagination:!1}))},[]),(0,P.jsx)(u.A,{onChange:e=>{ee(e)},children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"",children:(0,P.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,P.jsx)("div",{className:"",children:(0,P.jsx)("div",{className:"md:flex justify-between grid-cols-1 grid items-center md:space-y-0 space-y-2 py-1",children:(0,P.jsxs)("div",{className:"grid md:grid-cols-3 grid-cols-1 gap-3",children:["admin"===(null===G||void 0===G?void 0:G.userType)&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)(D.xI,{control:V,name:"PDCompanyId",rules:{required:"Company is required"},render:e=>{let{field:a}=e;return(0,P.jsxs)(f.A,(0,l.A)((0,l.A)({},a),{},{disabled:Y,defaultValue:"",className:"".concat(h.Lp," "),children:[(0,P.jsx)(f.A.Option,{value:"",children:"Select Company"}),null===J||void 0===J?void 0:J.map(e=>(0,P.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),F.PDCompanyId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:F.PDCompanyId.message})]}),("admin"===(null===G||void 0===G?void 0:G.userType)||"company"===(null===G||void 0===G?void 0:G.userType)||"companyDirector"===(null===G||void 0===G?void 0:G.userType))&&(0,P.jsxs)("div",{className:"",children:[(0,P.jsx)(D.xI,{control:V,name:"PDBranchId",rules:{required:"Branch is required"},render:e=>{let{field:a}=e;return(0,P.jsxs)(f.A,(0,l.A)((0,l.A)({},a),{},{defaultValue:"",disabled:Y,showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),className:"".concat(h.Lp," "),children:[(0,P.jsx)(f.A.Option,{value:"",children:"Select Branch"}),W?(0,P.jsx)(f.A.Option,{disabled:!0,children:(0,P.jsx)(B.A,{})}):null===U||void 0===U?void 0:U.map(e=>(0,P.jsx)(f.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),F.PDBranchId&&(0,P.jsx)("p",{className:"text-red-500 text-sm",children:F.PDBranchId.message})]}),(0,P.jsx)("div",{className:"",children:(0,P.jsx)(D.xI,{name:"status",control:V,rules:{},render:e=>{let{field:a}=e;return(0,P.jsxs)(f.A,(0,l.A)((0,l.A)({},a),{},{className:"w-32  ".concat(h.Lp),placeholder:"Select Status",defaultValue:"",disabled:Y,showSearch:!0,children:[(0,P.jsx)(f.A.Option,{value:"",children:"Select Status"}),(0,P.jsx)(f.A.Option,{value:"true",children:" Active "}),(0,P.jsx)(f.A.Option,{value:"false",children:" InActive "})]}))}})}),(0,P.jsx)("button",{onClick:()=>{z("PDBranchId",""),z("PdCompanyId",""),z("status","")},className:"bg-header py-1 rounded-md md:flex hidden px-10 justify-center items-center  text-white",children:(0,P.jsx)("span",{className:"text-[12px]",children:"Reset"})})]})})}),a&&e&&(0,P.jsxs)("div",{className:"flex justify-end items-center sm:!mt-3 gap-2",children:[(0,P.jsx)("button",{onClick:()=>{z("PDBranchId",""),z("PdCompanyId",""),z("status","")},className:"bg-header py-1.5 rounded-md md:hidden flex px-10 justify-center items-center  text-white",children:(0,P.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,P.jsx)(N.A,{placement:"topLeft",title:"Create Holiday Calander",children:(0,P.jsxs)("button",{onClick:()=>{p("/admin/holiday-calander/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,P.jsx)(i.OiG,{}),(0,P.jsx)("span",{className:"text-[12px]",children:"Add Holiday Calander"})]})})]})]})}),(0,P.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:a&&(0,P.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,P.jsx)("thead",{className:"",children:(0,P.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,P.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,P.jsx)("th",{className:"tableHead",children:(0,P.jsxs)("div",{className:"flex gap-1",children:["Name",(0,P.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,P.jsx)(i.Odn,{onClick:()=>Z("name","asc")}),(0,P.jsx)(i.BNo,{onClick:()=>Z("name","desc")})]})]})}),(0,P.jsx)("th",{className:"tableHead",children:(0,P.jsxs)("div",{className:"flex gap-1",children:["Date",(0,P.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,P.jsx)(i.Odn,{onClick:()=>Z("date","asc")}),(0,P.jsx)(i.BNo,{onClick:()=>Z("date","desc")})]})]})}),(0,P.jsx)("th",{className:"tableHead",children:(0,P.jsxs)("div",{className:"flex gap-1",children:["Created At",(0,P.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,P.jsx)(i.Odn,{onClick:()=>Z("createdAt","asc")}),(0,P.jsx)(i.BNo,{onClick:()=>Z("createdAt","desc")})]})]})}),(0,P.jsx)("th",{className:"tableHead",children:(0,P.jsxs)("div",{className:"flex gap-1",children:["Created By",(0,P.jsxs)("div",{className:"flex flex-col -space-y-1.5 cursor-pointer",children:[(0,P.jsx)(i.Odn,{onClick:()=>Z("createdBy","asc")}),(0,P.jsx)(i.BNo,{onClick:()=>Z("createdBy","desc")})]})]})}),(0,P.jsx)("th",{className:"tableHead",children:"status"}),(s||r)&&(0,P.jsx)("th",{className:"tableHead w-[10%]",children:"Action"})]})}),Y?(0,P.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,P.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,P.jsx)(k.A,{})})}):(0,P.jsx)("tbody",{children:M&&(null===M||void 0===M?void 0:M.length)>0?null===M||void 0===M?void 0:M.map((e,a)=>{var l;return(0,P.jsxs)("tr",{className:"text-black ".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,P.jsxs)("td",{className:"tableData",children:["  ",a+1+10*(L-1)]}),(0,P.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.name}),(0,P.jsx)("td",{className:"tableData",children:v()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY")}),(0,P.jsx)("td",{className:"tableData",children:v()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,P.jsx)("td",{className:"tableData",children:(null===e||void 0===e?void 0:e.createdBy)||"N/A"}),(0,P.jsx)("td",{className:"tableData",children:(0,P.jsx)("span",{className:"".concat(null!==e&&void 0!==e&&e.status?"bg-[#E0FFBE] border-green-500":"bg-red-200 border-red-500"," border-[1px] px-2 py-1.5 rounded-lg text-black text-[12px]"),children:null!==e&&void 0!==e&&e.status?"Active":null!==(l="Inactive")?l:"-"})}),(s||r)&&(0,P.jsx)("td",{className:"tableData",children:(0,P.jsx)(y.A,{menu:{items:[...s?[{key:"edit-holiday",label:(0,P.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>p("/admin/holiday-calander/edit/".concat((0,x.w)(null===e||void 0===e?void 0:e._id))),children:[(0,P.jsx)(i.Jcp,{className:"mr-2 text-[#3c8dbc] hover:text-[#337ab7]",size:16}),"Edit"]})}]:[],...r?[{key:"delete-holiday",label:(0,P.jsxs)("span",{className:"flex justify-start items-center text-red-500",onClick:()=>(e=>{let a={_id:e};o().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&b((0,m.M7)(a)).then(e=>{L>1&&1==(null===_||void 0===_?void 0:_.length)?E(Number(L-1)):te()})})})(null===e||void 0===e?void 0:e._id),children:[(0,P.jsx)(c.tqC,{className:"mr-2 text-red-600 hover:text-red-500",size:16}),"Delete"]})}]:[],{key:"view-comment",label:(0,P.jsxs)("span",{className:"flex justify-start items-center",onClick:()=>(0,h.v2)((null===e||void 0===e?void 0:e.description)||"Data not available"),children:[(0,P.jsx)(S.qSe,{className:"mr-2 text-blue-800",size:18}),"View Description"]})}]},trigger:["click"],children:(0,P.jsx)(N.A,{placement:"topLeft",title:"More Actions",children:(0,P.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,P.jsx)(I.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})})]})}):(0,P.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,P.jsx)("td",{colSpan:8,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===_||void 0===_?void 0:_.length)>0&&(0,P.jsx)(j.A,{totalCount:H,pageSize:10,currentPage:L,onChange:e=>{E(e)}})]})})}}}]);
//# sourceMappingURL=6362.35c0c8be.chunk.js.map