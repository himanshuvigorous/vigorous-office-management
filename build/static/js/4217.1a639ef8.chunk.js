"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[4217],{34217:(e,a,n)=>{n.r(a),n.d(a,{default:()=>C});var t=n(89379),s=n(73216),d=n(83003),r=n(65043),o=n(30064),l=n.n(o),i=n(23156),c=n(47196),p=n(24858),u=n(39160),h=n(31174),m=n(71985),x=n(15187),v=n(78227),y=n(4938),j=n(55971),b=n(60446),w=n.n(b),g=n(65512),f=n(96651),N=n(89427),D=n(70579);const C=function(){const{register:e,setValue:a,control:n,formState:{errors:o}}=(0,p.mN)(),b=(0,s.Zp)(),C=(0,d.wA)(),{gstTypeList:A,totalGstTypeCount:I,loading:S}=(0,d.d4)(e=>e.gstType),[T,P]=(0,r.useState)(""),B=JSON.parse(localStorage.getItem("user_info_".concat(x.AU))),[_,L]=(0,r.useState)(1),{companyList:k}=(0,d.d4)(e=>e.company),{branchList:O,loading:q}=(0,d.d4)(e=>e.branch),z=(0,p.FH)({control:n,name:"PDCompanyId",defaultValue:""}),F=(0,p.FH)({control:n,name:"PDBranchId",defaultValue:""}),G=(0,p.FH)({control:n,name:"status",defaultValue:""}),V=[z,F,G,T].join("-"),[Y,H]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Y?1===_?J():L(1):H(e=>!0)},[V]),(0,r.useEffect)(()=>{J()},[_]);const J=()=>{const e={page:_,limit:10,reqPayload:{directorId:"",companyId:"admin"===(null===B||void 0===B?void 0:B.userType)?z:"company"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.companyId,branchId:"company"===(null===B||void 0===B?void 0:B.userType)||"admin"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType)?F:"companyBranch"===(null===B||void 0===B?void 0:B.userType)?null===B||void 0===B?void 0:B._id:null===B||void 0===B?void 0:B.branchId,text:T,sort:!0,status:"true"===G||"false"!==G&&"",isPagination:!0}};C((0,m.$N)(e))},{canCreate:R,canRead:E,canUpdate:M,canDelete:U}=(0,y.A)();return(0,D.jsxs)(u.A,{onChange:e=>{P(e)},children:[(0,D.jsx)("div",{className:"",children:(0,D.jsxs)("div",{className:"sm:flex justify-between items-center md:space-y-0 space-y-2 py-1",children:[(0,D.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 lg:grid-cols-2 sm:gap-3 gap-1",children:["admin"===(null===B||void 0===B?void 0:B.userType)&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)("select",(0,t.A)((0,t.A)({},e("PDCompanyId",{required:"company is required"})),{},{className:" ".concat(x.OJ," ").concat(o.PDCompanyId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),children:[(0,D.jsx)("option",{className:"",value:"",children:"Select Comapany"}),null===k||void 0===k?void 0:k.map(e=>(0,D.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName}))]})),o.PDCompanyId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:o.PDCompanyId.message})]}),("admin"===(null===B||void 0===B?void 0:B.userType)||"company"===(null===B||void 0===B?void 0:B.userType)||"companyDirector"===(null===B||void 0===B?void 0:B.userType))&&(0,D.jsxs)("div",{className:"",children:[(0,D.jsx)(p.xI,{name:"PDBranchId",control:n,rules:{required:"Branch is required"},render:e=>{var a;let{field:n}=e;return(0,D.jsxs)(g.A,(0,t.A)((0,t.A)({},n),{},{className:"w-full ".concat(x.Lp," ").concat(o.PDBranchId?"border-[1px] ":"border-gray-300"),showSearch:!0,filterOption:(e,a)=>String(null===a||void 0===a?void 0:a.children).toLowerCase().includes(e.toLowerCase()),placeholder:"Select Branch",children:[(0,D.jsx)(g.A.Option,{value:"",children:"Select Branch"}),q?(0,D.jsx)(g.A.Option,{disabled:!0,children:(0,D.jsx)(N.A,{})}):null===(a=(0,x._o)(O))||void 0===a?void 0:a.map(e=>(0,D.jsx)(g.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]}))}}),o.PDBranchId&&(0,D.jsx)("p",{className:"text-red-500 text-sm",children:o.PDBranchId.message})]})]}),(0,D.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,D.jsx)("button",{onClick:()=>{a("status",""),a("PDBranchId",""),a("PdDepartmentId",""),a("PdCompanyId","")},className:"bg-header   py-[6px]  rounded-md  flex px-5 justify-center items-center  text-white",children:(0,D.jsx)("span",{className:"text-[12px]",children:"Reset"})}),R&&(0,D.jsx)(f.A,{placement:"topLeft",title:"Add GST Type",children:(0,D.jsxs)("button",{onClick:()=>{b("/admin/gst-type/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,D.jsx)(i.OiG,{}),(0,D.jsx)("span",{className:"text-[12px]",children:"Add GST Types"})]})})]})]})}),(0,D.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:E&&(0,D.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,D.jsx)("thead",{className:"",children:(0,D.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"S.No."}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"percentage"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created At"}),(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap",children:"Created By"}),(M||U)&&(0,D.jsx)("th",{className:"border-none p-2 whitespace-nowrap w-[10%]",children:"Action"})]})}),S?(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,D.jsx)(j.A,{})})}):(0,D.jsx)("tbody",{children:A&&(null===A||void 0===A?void 0:A.length)>0?null===A||void 0===A?void 0:A.map((e,a)=>{var n;return(0,D.jsxs)("tr",{className:"".concat(a%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,D.jsxs)("td",{className:"whitespace-nowrap border-none p-2 ",children:["  ",a+1+10*(_-1)]}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null!==(n="".concat(null===e||void 0===e?void 0:e.percentage,"% "))&&void 0!==n?n:"-"}),(0,D.jsx)("td",{className:"whitespace-nowrap p-2",children:w()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")}),(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2 ",children:null===e||void 0===e?void 0:e.createdBy}),(M||U)&&(0,D.jsx)("td",{className:"whitespace-nowrap border-none p-2",children:(0,D.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2",children:[M&&(0,D.jsx)("button",{onClick:()=>{b("/admin/gst-type/edit/".concat((0,h.w)(null===e||void 0===e?void 0:e._id)))},className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(i.Jcp,{className:" hover:text-[#337ab7] text-[#3c8dbc]",size:16})}),U&&(0,D.jsx)("button",{onClick:()=>(e=>{let a={_id:e};l().fire({title:"Warning",text:"Are you sure you want to delete!",icon:"warning",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&C((0,m.WZ)(a)).then(e=>{_>1&&1==(null===A||void 0===A?void 0:A.length)?L(Number(_-1)):J()})})})(null===e||void 0===e?void 0:e._id),className:"px-2 py-1.5 rounded-md bg-transparent border border-muted",type:"button",children:(0,D.jsx)(c.tqC,{className:"text-red-600 hover:text-red-500",size:16})})]})})]})}):(0,D.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,D.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-center text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===A||void 0===A?void 0:A.length)>0&&(0,D.jsx)(v.A,{totalCount:I,pageSize:10,currentPage:_,onChange:e=>{L(e)}})]})}}}]);
//# sourceMappingURL=4217.1a639ef8.chunk.js.map