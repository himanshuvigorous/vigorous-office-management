"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3119],{63119:(e,n,o)=>{o.r(n),o.d(n,{default:()=>S});var t=o(89379),a=o(24858),l=o(83003),i=o(15187),d=o(65043),r=o(31744),s=o(39160),c=o(97326),u=o(65512),p=(o(86178),o(60446)),m=o.n(p),v=o(78227),h=o(12106),y=(o(42837),o(94084),o(69223)),x=o(55971),f=o(50822),g=o(6720),b=o(37762),N=o(64857),w=(o(11906),o(33007),o(89427)),j=o(70337),D=(o(40088),o(12208)),k=(o(27744),o(17995),o(76932),o(487)),A=o(35475),C=o(70579);const{RangePicker:I}=k.A;const S=function(){const{control:e,formState:{errors:n},setValue:o,watch:p}=(0,a.mN)(),{RangePicker:I}=k.A,S=e=>{},[Y,P]=(0,d.useState)(10),T=(0,l.wA)(),{financePaymentReportList:F,financePaymentReportFunc_loading:M,financePaymentCount:R}=(0,l.d4)(e=>e.reports),{departmentListData:O,loading:E}=(0,l.d4)(e=>e.department),[_,z]=(0,d.useState)({}),{taskTypeList:L}=(0,l.d4)(e=>e.taskType),{clientGroupList:H,groupSearchLoading:V}=(0,l.d4)(e=>e.clientGroup),[B,K]=(0,A.ok)(),G=B.get("date"),{clientList:U,loading:q}=(0,l.d4)(e=>e.client),{employeList:W}=(0,l.d4)(e=>e.employe),[J,Q]=(0,d.useState)(""),X=JSON.parse(localStorage.getItem("user_info_".concat(i.AU))),{industryListData:Z,indusSearchloading:$}=(0,l.d4)(e=>e.industry),{orgTypeList:ee,orgSearchloading:ne}=(0,l.d4)(e=>e.orgType),[oe,te]=(0,d.useState)(1),[ae,le]=(0,d.useState)(""),{branchList:ie}=(0,l.d4)(e=>e.branch),de=(0,a.FH)({control:e,name:"PDCompanyId",defaultValue:""}),re=(0,a.FH)({control:e,name:"PDBranchId",defaultValue:""}),se=(0,a.FH)({control:e,name:"status",defaultValue:""}),ce=(0,a.FH)({control:e,name:"client",defaultValue:""}),ue=(0,a.FH)({control:e,name:"PDOrganizationType",defaultValue:""}),pe=(0,a.FH)({control:e,name:"PDindustrytype",defaultValue:""}),me=(0,a.FH)({control:e,name:"department",defaultValue:""}),ve=(0,a.FH)({control:e,name:"groupName",defaultValue:""}),he=(0,a.FH)({control:e,name:"amountTo",defaultValue:""}),ye=(0,a.FH)({control:e,name:"amountFrom",defaultValue:""}),xe=(0,a.FH)({control:e,name:"time",defaultValue:G?[m()(),m()()]:[]});(0,d.useEffect)(()=>{if("today"==G){const e=m()(),n=m()();o("time",[e,n])}},[G]),(0,d.useEffect)(()=>{const e=setTimeout(()=>{le(J)},500);return()=>{clearTimeout(e)}},[J]),(()=>{const e=[];for(let n=2005;n<=2034;n++)e.push("".concat(n,"-").concat(n+1))})();const fe=function(){return{currentPage:oe,pageSize:Y,reqPayload:{text:ae,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===X||void 0===X?void 0:X.userType)?de:"company"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.companyId,directorId:"",branchId:"company"===(null===X||void 0===X?void 0:X.userType)||"admin"===(null===X||void 0===X?void 0:X.userType)||"companyDirector"===(null===X||void 0===X?void 0:X.userType)?re:"companyBranch"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.branchId,status:"true"==se||"false"!=se&&"",organizationId:ue,organizationIds:[],departmentId:me,departmentIds:[],amountFrom:ye?Number(ye):"",amountTo:he?Number(he):"",industryId:pe,industryIds:[],groupIds:ve?[ve]:[],startDate:(null===xe||void 0===xe?void 0:xe.length)>0?m()(xe[0]).format("YYYY-MM-DD"):"",endDate:(null===xe||void 0===xe?void 0:xe.length)>0?m()(xe[1]).format("YYYY-MM-DD"):"",clientIds:ce?[ce]:[]}}};(0,d.useEffect)(()=>{ge(ae)},[oe,ae,Y]);const ge=()=>{T((0,h.t6)(fe(!0)))},[be,Ne]=(0,d.useState)(!1);(0,d.useEffect)(()=>{"company"!==(null===X||void 0===X?void 0:X.userType)&&"companyDirector"!==(null===X||void 0===X?void 0:X.userType)||T((0,r.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===X||void 0===X?void 0:X.userType)?de:"company"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.companyId})),o("startDate",m()().subtract(1,"month")),o("endDate",m()())},[]);const we=async()=>{ge()},je=[{key:"1",label:(0,C.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,C.jsxs)("div",{className:"bg-[#ececec] gap-2 sm:space-y-0 space-y-1 2xl:flex justify-between items-center",children:[(0,C.jsxs)("div",{className:"sm:flex grid grid-cols-1 gap-2 sm:flex-wrap text-[14px]",children:[(0,C.jsx)("div",{className:"",children:(0,C.jsx)(a.xI,{name:"groupName",control:e,render:e=>{var n;let{field:o}=e;return(0,C.jsxs)(u.A,(0,t.A)((0,t.A)({},o),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,placeholder:"Select Group",onFocus:()=>{T((0,D.J_)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===X||void 0===X?void 0:X.userType)?de:"company"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.companyId,branchId:["admin","company","companyDirector"].includes(null===X||void 0===X?void 0:X.userType)?re:"companyBranch"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.branchId,groupId:""}))},onChange:e=>o.onChange(e),filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),children:[(0,C.jsx)(u.A.Option,{value:"",children:"Select Group"}),V?(0,C.jsx)(u.A.Option,{disabled:!0,children:(0,C.jsx)(w.A,{})}):null===(n=(0,i._o)(H))||void 0===n?void 0:n.map(e=>(0,C.jsxs)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e?void 0:e.fullName," (",null===e||void 0===e?void 0:e.groupName,")"]},null===e||void 0===e?void 0:e._id))]}))}})}),(0,C.jsx)("div",{children:(0,C.jsx)(a.xI,{name:"client",control:e,render:e=>{var n;let{field:o}=e;return(0,C.jsx)(u.A,(0,t.A)((0,t.A)({},o),{},{className:"inputAntdSelectClassNameFilterReport",showSearch:!0,filterOption:(e,n)=>String(null===n||void 0===n?void 0:n.children).toLowerCase().includes(e.toLowerCase()),onFocus:()=>{T((0,j.Aq)({companyId:"company"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.companyId,branchId:"company"===(null===X||void 0===X?void 0:X.userType)||"admin"===(null===X||void 0===X?void 0:X.userType)||"companyDirector"===(null===X||void 0===X?void 0:X.userType)?p("PDBranchId"):"companyBranch"===(null===X||void 0===X?void 0:X.userType)?null===X||void 0===X?void 0:X._id:null===X||void 0===X?void 0:X.branchId,groupId:ve,directorId:"",organizationId:"",industryId:"",text:"",sort:!0,status:!0,isPagination:!1}))},onChange:e=>{o.onChange(e)},placeholder:"Select client",children:q?(0,C.jsx)(u.A.Option,{disabled:!0,children:(0,C.jsx)(w.A,{})}):null===(n=(0,i._o)(U))||void 0===n?void 0:n.map((e,n)=>(0,C.jsx)(u.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))}))}})}),(0,C.jsx)("div",{children:(0,C.jsx)(a.xI,{name:"amountFrom",control:e,render:e=>{let{field:n}=e;return(0,C.jsx)("input",{type:"number",value:null===n||void 0===n?void 0:n.value,onChange:e=>n.onChange(e),className:"inputAntdMultiSelectClassNameFilterReport",placeholder:"Enter amountFrom "})}})}),(0,C.jsx)("div",{children:(0,C.jsx)(a.xI,{name:"amountTo",control:e,render:e=>{let{field:n}=e;return(0,C.jsx)("input",{type:"number",value:null===n||void 0===n?void 0:n.value,onChange:e=>n.onChange(e),className:"inputAntdMultiSelectClassNameFilterReport",placeholder:"Enter amountTo "})}})}),(0,C.jsx)("div",{children:(0,C.jsx)(a.xI,{name:"time",control:e,render:e=>{let{field:n}=e;return(0,C.jsx)(I,(0,t.A)((0,t.A)({},n),{},{value:n.value,onChange:e=>n.onChange(e),format:"YYYY-MM-DD",onOk:S,getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"}))}})})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{o("PDCompanyId",""),o("PDBranchId",""),o("status",""),o("PDOrganizationType",""),o("PDindustrytype",""),o("department",""),o("groupName",""),o("time",""),o("client",""),o("amountFrom",""),o("amountTo",""),we()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,C.jsx)("button",{onClick:()=>{we()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,C.jsx)(s.A,{onChange:e=>{Q(e)},children:(0,C.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(c.A,{className:"custom-collapse",items:je,defaultActiveKey:[1],expandIcon:e=>{let{isActive:n}=e;return(0,C.jsx)(g.WnU,{size:20,style:{color:"white",transform:n?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,C.jsxs)("div",{className:"space-y-1.5 sm:flex grid grid-cols-1 justify-between items-center",children:[(0,C.jsxs)("div",{className:"flex py-1 items-center gap-2",children:[(0,C.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,C.jsx)(u.A,{id:"pageSize",value:Y,onChange:e=>{P(Number(e)),te(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:i.qc.map(e=>(0,C.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,C.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,C.jsx)("button",{onClick:()=>{(async()=>{var e,n;const o=new b.uE({orientation:"landscape",unit:"pt"});o.setFontSize(16);const t=await(null===f.K||void 0===f.K?void 0:f.K.financePaymentReportFunc(fe(!1)));if(!F&&!t)return;const a=null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.map((e,n)=>{var o;return[n+1,m()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-",m()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY hh:mm a")||"-",(null===e||void 0===e?void 0:e.groupName)||"-",(null===e||void 0===e?void 0:e.clientName)||"-",(null===e||void 0===e?void 0:e.amount)||"-",(null===e||void 0===e?void 0:e.paymentMode)||"-",("bank"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(o=e.bankData)||void 0===o?void 0:o.bankName:"cash"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.employeName:"")||"-"]});(0,N.Ay)(o,{startY:40,head:[["S.No.","Entry Date","Payment Date","Group Name","Client Name","Amount","Mode of Receipt","Payment Recipient"]],body:a,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),o.save("paymentReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,C.jsx)("button",{onClick:()=>{(async()=>{var e,n;const o=new y.Workbook,t=o.addWorksheet("paymentReport");t.columns=[{header:"S.No.",key:"sno",width:10},{header:"Entry Date",key:"entryDate",width:30},{header:"Payment Date",key:"payment",width:30},{header:"Group Name",key:"groupName",width:25},{header:"Client Name",key:"clientName",width:30},{header:"Amount",key:"amount",width:30},{header:"Mode of Receipt",key:"modeOFreceipt",width:20},{header:"Payment Recipient",key:"bankName",width:20}],t.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const a=await(null===f.K||void 0===f.K?void 0:f.K.financePaymentReportFunc(fe(!1)));if(!F&&!a)return;const l=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.map((e,n)=>{var o;return{sno:n+1,entryDate:m()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-",payment:m()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY hh:mm a")||"-",groupName:(null===e||void 0===e?void 0:e.groupName)||"-",clientName:(null===e||void 0===e?void 0:e.clientName)||"-",amount:(null===e||void 0===e?void 0:e.amount)||"-",modeOFreceipt:(null===e||void 0===e?void 0:e.paymentMode)||"-",bankName:("bank"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e||null===(o=e.bankData)||void 0===o?void 0:o.bankName:"cash"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.employeName:"")||"-"}});null===l||void 0===l||l.forEach(e=>{t.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),t.autoFilter={from:"A1",to:"I1"},o.xlsx.writeBuffer().then(e=>{const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download="paymentReport.xlsx",o.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,C.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,C.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,C.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Entry Date"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Payment Date"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Payment Type "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Nature of Payment "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Amount "}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Payment Mode"}),(0,C.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Payment By"})]})}),M?(0,C.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,C.jsx)(x.A,{})})}):(0,C.jsx)("tbody",{children:F&&(null===F||void 0===F?void 0:F.length)>0?null===F||void 0===F?void 0:F.map((e,n)=>{var o,t,a;return(0,C.jsxs)("tr",{className:"border-b-[1px] ".concat(n%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:n+1+(oe-1)*Y}),(0,C.jsx)("td",{className:"whitespace-nowrap   border-none p-2",children:m()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:m()(null===e||void 0===e?void 0:e.date).format("DD-MM-YYYY")||"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap capitalize  border-none p-2",children:null!==e&&void 0!==e&&e.type?"purchase"===(null===e||void 0===e?void 0:e.type)?"Other"===(null===e||void 0===e||null===(o=e.purchaseData)||void 0===o?void 0:o.purchaseType)?"Expense":null===e||void 0===e||null===(t=e.purchaseData)||void 0===t?void 0:t.purchaseType:null===e||void 0===e?void 0:e.type:(null===e||void 0===e?void 0:e.typeOf)||"-"}),(0,C.jsxs)("td",{className:"whitespace-nowrap capitalize border-none p-2",children:["purchase"===(null===e||void 0===e?void 0:e.type)?(null===e||void 0===e||null===(a=e.purchaseData)||void 0===a?void 0:a.expenseHeadName)||"-":"","purchase"!==(null===e||void 0===e?void 0:e.type)&&"advance"===(null===e||void 0===e?void 0:e.typeOf)?"Advance Payment To ".concat(null===e||void 0===e?void 0:e.advanceEmployeName)||0:"","cashbook"!==(null===e||void 0===e?void 0:e.type)&&"payment"===(null===e||void 0===e?void 0:e.typeOf)&&"purchase"!==(null===e||void 0===e?void 0:e.type)?"Cashbook Settlement of ".concat(null===e||void 0===e?void 0:e.advanceEmployeName)||0:"","cashbook"!==(null===e||void 0===e?void 0:e.type)&&"payment"!==(null===e||void 0===e?void 0:e.typeOf)&&"purchase"!==(null===e||void 0===e?void 0:e.type)&&"clientExpanse"===(null===e||void 0===e?void 0:e.typeOf)?"Client Expense for ".concat(null===e||void 0===e?void 0:e.clientName)||0:""]}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(0,i.w2)(null===e||void 0===e?void 0:e.amount)||"-"}),(0,C.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:(null===e||void 0===e?void 0:e.paymentMode)||(null!==e&&void 0!==e&&e.bankData?"bank":"-")}),(0,C.jsx)("td",{className:" max-w-[250px] min-w-[250px]  border-none p-2",children:("bank"==(null===e||void 0===e?void 0:e.paymentMode)?(0,i.ig)(null===e||void 0===e?void 0:e.bankData):"cash"==(null===e||void 0===e?void 0:e.paymentMode)?null===e||void 0===e?void 0:e.employeName:"")||(0,i.ig)(null===e||void 0===e?void 0:e.bankData)||"-"})]})}):(0,C.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,C.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,C.jsx)(v.A,{totalCount:R,pageSize:Y,currentPage:oe,onChange:e=>{te(e)}})]})})}}}]);
//# sourceMappingURL=3119.ed59267d.chunk.js.map