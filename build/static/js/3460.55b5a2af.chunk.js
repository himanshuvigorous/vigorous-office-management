(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3460],{41981:function(e,t,n){e.exports=function(e,t){"use strict";const n=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],o=()=>{};function a(a){function i(t){const o={},a={},i=n.map(e=>e.key);return Object.entries(t).forEach(t=>{let[n,l]=t;i.includes(n)&&e.isValidElement(l)?(o[n]=l,a[n]=" "):a[n]=l}),[o,a]}function l(e,o){Object.entries(o).forEach(o=>{let[i,l]=o;const s=n.find(e=>e.key===i).getter(a),d=t.createRoot(s);d.render(l),e.__roots.push(d)})}function s(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends a{static argsToParams(t){if(e.isValidElement(t[0])||e.isValidElement(t[1])){const e={};return["title","html","icon"].forEach((n,o)=>{void 0!==t[o]&&(e[n]=t[o])}),e}return a.argsToParams(t)}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);const[n,a]=i(this.__params),d=a.willOpen||o,r=a.didOpen||o,c=a.didDestroy||o;return super._main(Object.assign({},a,{willOpen:e=>{l(this,n),d(e)},didOpen:e=>{setTimeout(()=>{r(e)})},didDestroy:e=>{c(e),s(this)}}))}update(e){Object.assign(this.__params,e),s(this);const[t,n]=i(this.__params);super.update(n),l(this,t)}}}return a}(n(65043),n(84391))},43460:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var o=n(65043),a=n(39160),i=n(73216),l=n(35475),s=n(83003),d=n(23156),r=n(47196),c=n(30064),u=n.n(c),v=n(31174),m=n(78227),p=n(15187),h=n(31744),x=n(47989),y=n(69223),g=n(60184),f=n(96603),b=n(65512),j=n(96651),N=n(30326),w=n(4938),D=n(55971),C=n(60446),k=n.n(C),I=n(83002),A=n(89427),_=n(60397),P=n(8928),T=n(33007),S=n(6720),O=n(59e3),L=n(41981),B=n.n(L),E=n(70579);const F=e=>{let{data:t,status:n,isOpen:a,onToggle:i}=e;const[l,d]=(0,o.useState)(""),r=(0,s.wA)(),{invoiceCopmmentListData:c}=(0,s.d4)(e=>null===e||void 0===e?void 0:e.invoice),[u,v]=(0,o.useState)(null),m=(0,o.useRef)(null),h=(0,o.useRef)(null),y=()=>{r((0,x.yB)({_id:null===t||void 0===t?void 0:t._id}))};(0,o.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user_info_".concat(p.AU)));v(null===e||void 0===e?void 0:e._id)},[]),(0,o.useEffect)(()=>{a&&y()},[a]),(0,o.useEffect)(()=>{var e;a&&(null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[c,a]),(0,o.useEffect)(()=>{const e=e=>{a&&m.current&&!m.current.contains(e.target)&&i()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a,i]);const g=()=>{var e;l.trim()&&(e={text:l},r((0,x.wQ)({_id:null===t||void 0===t?void 0:t._id,message:e.text||"",attachment:e.attachment||""})).then(()=>{y()}),d(""))},f=(null===c||void 0===c?void 0:c.data)||[];return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{className:"fixed bottom-4 right-4 z-50 transition-all duration-300 transform ".concat(a?"opacity-100 translate-y-0":"opacity-0 translate-y-10 pointer-events-none"),children:(0,E.jsxs)("div",{ref:m,className:"w-[350px] max-h-[500px] bg-white shadow-xl rounded-lg flex flex-col border border-gray-300",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 bg-[#074173] text-white font-semibold rounded-t-lg",children:[(0,E.jsx)("span",{children:"Comments"}),(0,E.jsx)("button",{onClick:i,className:"text-white hover:text-gray-200 text-sm",title:"Close comment box",children:"\u2715"})]}),(0,E.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-4 bg-white",children:[0===f.length?(0,E.jsx)("div",{className:"text-center text-gray-400 text-sm",children:"No comments yet."}):f.map((e,t)=>{return(0,E.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,E.jsx)("div",{className:"text-sm font-medium text-gray-700",children:e.commentedByName||"Unknown"}),e.message&&(0,E.jsx)("div",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:e.message}),e.attachment&&(0,E.jsx)("a",{href:(o=e.attachment,"".concat("https://vigapi.vigorousit.com","/public/").concat(o)),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs mt-1 block underline break-words",children:"\ud83d\udcce Attachment"}),(0,E.jsx)("div",{className:"text-[11px] text-gray-500 mt-1",children:e.date?(n=e.date,new Date(n).toLocaleString("en-IN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})):""})]},t);var n,o}),(0,E.jsx)("div",{ref:h})]}),"PendingPayment"===n&&(0,E.jsx)("div",{className:"p-2 border-t border-gray-200 bg-white",children:(0,E.jsxs)("div",{className:"flex space-x-2",children:[(0,E.jsx)("input",{type:"text",className:"flex-1 px-3 py-1 border rounded text-sm outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Write a comment...",value:l,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&g()}),(0,E.jsx)("button",{onClick:g,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Send"})]})})]})})})};var R=n(13444);B()(u());const z=function(){var e,t;const n=(0,i.Zp)(),c=(0,s.wA)(),{invoiceListData:C,totalinvoiceListCount:L,loading:B}=(0,s.d4)(e=>e.invoice),{officeAddressListData:z,loading:H}=(0,s.d4)(e=>e.officeAddress),{branchList:Y,branchListloading:M}=(0,s.d4)(e=>e.branch),{departmentListData:U,loading:V}=(0,s.d4)(e=>e.department),W=JSON.parse(localStorage.getItem("user_info_".concat(p.AU))),[J,q]=(0,o.useState)({isOpen:!1,data:null}),[G,Q]=(0,l.ok)(),X=parseInt(G.get("page"))||1,K=G.get("branchId")||"",Z=G.get("status")||"",$=G.get("isDeleted")||"false",ee=G.get("layoutId")||"",te=G.get("departmentId")||"",[ne,oe]=(0,o.useState)(X),[ae,ie]=(0,o.useState)(10),[le,se]=(0,o.useState)(Z),[de,re]=(0,o.useState)($),[ce,ue]=(0,o.useState)(ee),[ve,me]=(0,o.useState)(""),[pe,he]=(0,o.useState)(K),[xe,ye]=(0,o.useState)(te);(0,o.useEffect)(()=>{const e=new URLSearchParams;ne>1&&e.set("page",ne),pe&&e.set("branchId",pe),le&&e.set("status",le),ce&&e.set("layoutId",ce),xe&&e.set("departmentId",xe),de&&e.set("isDeleted",de),Q(e)},[ne,ae,pe,le,ce,ve,xe,de]),(0,o.useEffect)(()=>{ge()},[ne,ae,pe,le,ce,ve,xe,de]);const ge=()=>{const e={currentPage:ne,pageSize:ae,reqData:{directorId:"",companyId:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId,branchId:"company"===(null===W||void 0===W?void 0:W.userType)||"admin"===(null===W||void 0===W?void 0:W.userType)||"companyDirector"===(null===W||void 0===W?void 0:W.userType)?pe:"companyBranch"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.branchId,invoiceLayoutId:ce,departmentId:xe,text:ve,sort:!0,status:le,isPagination:!0,isDeleted:!0===de||"true"===de}};c((0,x.uB)(e))},{canCreate:fe,canRead:be,canUpdate:je,canDelete:Ne}=(0,w.A)();(0,o.useEffect)(()=>{"company"!==(null===W||void 0===W?void 0:W.userType)&&"companyDirector"!==(null===W||void 0===W?void 0:W.userType)||c((0,h.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId}))},[]),(0,o.useEffect)(()=>{we()},[pe]);const we=()=>{c((0,P.XY)({companyId:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId,branchId:"company"===(null===W||void 0===W?void 0:W.userType)||"admin"===(null===W||void 0===W?void 0:W.userType)||"companyDirector"===(null===W||void 0===W?void 0:W.userType)?pe:"companyBranch"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.branchId,directorId:"",text:"",sort:!0,status:!0,type:"invoice",isPagination:!1,bankAccountId:"",isGSTEnabled:""}))};return(0,o.useEffect)(()=>{"company"!==(null===W||void 0===W?void 0:W.userType)&&"companyDirector"!==(null===W||void 0===W?void 0:W.userType)&&"companyBranch"!==(null===W||void 0===W?void 0:W.userType)&&"employee"!==(null===W||void 0===W?void 0:W.userType)||c((0,T.UU)({text:"",sort:!0,status:"",isPagination:!1,companyId:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId,branchId:"company"===(null===W||void 0===W?void 0:W.userType)||"admin"===(null===W||void 0===W?void 0:W.userType)||"companyDirector"===(null===W||void 0===W?void 0:W.userType)?pe:"companyBranch"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.branchId}))},[pe]),(0,E.jsx)(a.A,{onChange:e=>{me(e)},children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"",children:[(0,E.jsxs)(f.Ay.Group,{onChange:e=>{re((null===e||void 0===e?void 0:e.target.value)||e),oe(1)},value:de||"",disabled:B,optionType:"button",buttonStyle:"solid",style:{width:"100%"},children:[(0,E.jsx)(f.Ay.Button,{value:"false",style:{flex:1,textAlign:"center",fontWeight:"500"},children:"Active Records"}),(0,E.jsx)(f.Ay.Button,{value:"true",style:{flex:1,textAlign:"center",fontWeight:"500"},children:"Deleted Records"})]}),(0,E.jsxs)("div",{class:"sm:flex justify-between items-center py-1 lg:space-y-0 space-y-2 overflow-y-auto",children:[(0,E.jsxs)("div",{className:"grid md:flex sm:grid-cols-3 grid-cols-1 flex-wrap md:gap-3 gap-1.5",children:[("company"==(null===W||void 0===W?void 0:W.userType)||"companyDirector"==(null===W||void 0===W?void 0:W.userType))&&(0,E.jsx)("div",{children:(0,E.jsxs)(b.A,{value:pe,onChange:e=>{he(e),oe(1)},defaultValue:"",disabled:B,className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,E.jsx)(b.A.Option,{value:"",children:"Select Branch"}),M?(0,E.jsx)(b.A.Option,{disabled:!0,children:(0,E.jsx)(A.A,{})}):null===Y||void 0===Y?void 0:Y.map(e=>(0,E.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.fullName},null===e||void 0===e?void 0:e._id))]})}),(0,E.jsx)("div",{className:"",children:(0,E.jsxs)(b.A,{value:ce,onChange:e=>{ue(e),oe(1)},disabled:B,showSearch:!0,filterOption:(e,t)=>{var n;return null===t||void 0===t||null===(n=t.label)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase())},className:"".concat(p.Lp," "),placeholder:"Select Layout",onFocus:()=>{},children:[(0,E.jsx)(b.A.Option,{className:"",value:"",children:"Select Layout"}),H?(0,E.jsx)(b.A.Option,{disabled:!0,children:(0,E.jsx)(A.A,{})}):null===(e=(0,p._o)(z,"firmName"))||void 0===e?void 0:e.map(e=>(0,E.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.firmName}))]})}),(0,E.jsx)("div",{children:(0,E.jsxs)(b.A,{value:le,onChange:e=>{se(e),oe(1)},disabled:B,className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,E.jsx)(b.A.Option,{value:"",children:"Select status"}),(0,E.jsx)(b.A.Option,{value:"PendingPayment",children:"Pending Payment"}),(0,E.jsx)(b.A.Option,{value:"Paid",children:"Paid"})]})}),(0,E.jsx)("div",{className:"",children:(0,E.jsxs)(b.A,{value:xe,onChange:e=>{ye(e),oe(1)},defaultValue:"",disabled:B,className:"".concat(p.Lp," "),showSearch:!0,filterOption:(e,t)=>String(null===t||void 0===t?void 0:t.children).toLowerCase().includes(e.toLowerCase()),children:[(0,E.jsx)(b.A.Option,{value:"",children:"Select Department"}),V?(0,E.jsx)(b.A.Option,{disabled:!0,children:(0,E.jsx)(A.A,{})}):null===U||void 0===U?void 0:U.map(e=>(0,E.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]})})]}),(0,E.jsxs)("div",{className:"flex justify-end items-center gap-2 ",children:[(0,E.jsx)(j.A,{placement:"topLeft",title:"Export Comment Excel",children:(0,E.jsxs)("button",{onClick:()=>{(async()=>{var e,t;const n=new y.Workbook,o=n.addWorksheet("Client Report");o.addRow(["S.No.","Date","Invoice number","Department","Client Name","Invoice Amount","Latest Comment"]);const a=await(null===R.y||void 0===R.y?void 0:R.y.invoiceSearch({directorId:"",companyId:"company"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.companyId,branchId:"company"===(null===W||void 0===W?void 0:W.userType)||"admin"===(null===W||void 0===W?void 0:W.userType)||"companyDirector"===(null===W||void 0===W?void 0:W.userType)?pe:"companyBranch"===(null===W||void 0===W?void 0:W.userType)?null===W||void 0===W?void 0:W._id:null===W||void 0===W?void 0:W.branchId,invoiceLayoutId:ce,departmentId:xe,text:ve,sort:!0,status:le,isPagination:!1,isDeleted:!0===de||"true"===de}));(a||a)&&(null===a||void 0===a||null===(e=a.data)||void 0===e||e.docs.forEach((e,t)=>{var n;const a=[t+1,k()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-",null===e||void 0===e?void 0:e.invoiceNumber,(null===e||void 0===e?void 0:e.departmentName)||"-",null===e||void 0===e?void 0:e.clientName,(0,p.w2)((null===e||void 0===e?void 0:e.grandTotal)||0),(null===e||void 0===e||null===(n=e.latestCommment)||void 0===n?void 0:n.message)||"-"];o.addRow(a)}),o.getRow(1).eachCell(e=>{e.font={bold:!0},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD3D3D3"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),o.eachRow((e,t)=>{e.eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),o.autoFilter={from:"A1",to:"J".concat((null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.docs.length)+1)},o.columns.forEach(e=>{let t=0;e.eachCell({includeEmpty:!0},e=>{const n=e.value?e.value.toString().length:10;n>t&&(t=n)}),e.width=t<10?10:t+2}),n.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="Report.xlsx",n.click()}))})()},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,E.jsx)(g.Ru,{}),(0,E.jsx)("span",{className:"text-[12px] whitespace-nowrap",children:"Export Excel"})]})}),(0,E.jsx)("button",{onClick:()=>{oe(1),he(""),se(""),ue(""),me("")},className:"bg-header py-[6px] rounded-md flex px-5 justify-center items-center text-white",children:(0,E.jsx)("span",{className:"whitespace-nowrap text-[12px]",children:"Reset"})}),fe&&(0,E.jsx)(j.A,{placement:"topLeft",title:"Add Invoice",children:(0,E.jsxs)("button",{onClick:()=>{n("/admin/invoice/create")},className:"bg-header px-2 py-1.5 rounded-md flex justify-center items-center space-x-2 text-white",children:[(0,E.jsx)(d.OiG,{}),(0,E.jsx)("span",{className:"text-[12px] whitespace-nowrap",children:"Add Invoice"})]})})]})]})]}),(0,E.jsx)("div",{className:"bg-[#ffffff] w-full overflow-x-auto mt-1 rounded-xl",children:be&&(0,E.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto ",children:[(0,E.jsx)("thead",{className:"",children:(0,E.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] bg-header capitalize text-[#ffff] font-[500] h-[40px]",children:[(0,E.jsx)("th",{className:"tableHead w-[10%]",children:"S.No."}),(0,E.jsx)("th",{className:"tableHead",children:"Date"}),(0,E.jsx)("th",{className:"tableHead",children:"Invoice number"}),je&&"false"==de&&(0,E.jsx)("th",{className:"tableHead",children:"Department"}),(0,E.jsx)("th",{className:"tableHead",children:"Client Name"}),(0,E.jsx)("th",{className:"tableHead text-right",children:"Invoice Amount"}),je&&"false"==de&&(0,E.jsx)("th",{className:"tableHead",children:"Latest Comment"}),je&&"false"==de&&(0,E.jsx)("th",{className:"tableHead",children:"Status"}),(je||Ne||be)&&"false"==de&&(0,E.jsx)("th",{className:"tableHead w-[10%]",children:"Action"}),"true"==de&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("th",{className:"tableHead ",children:"Remark"}),(0,E.jsx)("th",{className:"tableHead",children:"Deleted By"}),(0,E.jsx)("th",{className:"tableHead",children:"Deleted At"})]})]})}),B?(0,E.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,E.jsx)("td",{colSpan:10,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:(0,E.jsx)(D.A,{})})}):(0,E.jsx)("tbody",{children:C&&(null===C||void 0===C?void 0:C.length)>0?null===C||void 0===C?void 0:C.map((e,t)=>{var o;return(0,E.jsxs)("tr",{className:"text-black ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-b-[1px] border-[#DDDDDD]"),children:[(0,E.jsx)("td",{className:"tableData",children:t+1+(ne-1)*ae}),(0,E.jsx)("td",{className:"tableData",children:k()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,E.jsx)("td",{className:"tableData text-left",children:null===e||void 0===e?void 0:e.invoiceNumber}),je&&"false"==de&&(0,E.jsx)("td",{className:"whitespace-nowrap text-left border-none p-2",children:(0,E.jsx)("div",{children:(0,E.jsxs)(b.A,{size:"small",className:"w-[250px] text-[12px]",value:(null===e||void 0===e?void 0:e.departmentId)||"",placeholder:"No department",onChange:t=>((e,t,n)=>{c((0,x.gx)({type:"department",departmentId:e,status:n,_id:t})).then(e=>{null!==e&&void 0!==e&&e.error||ge()})})(t,null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.status),children:[(0,E.jsx)(b.A.Option,{value:"",children:"No department"}),null===U||void 0===U?void 0:U.map(e=>(0,E.jsx)(b.A.Option,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))]})})}),(0,E.jsx)("td",{className:"tableData",children:null===e||void 0===e?void 0:e.clientName}),(0,E.jsx)("td",{className:"tableData text-right",children:(0,p.w2)((null===e||void 0===e?void 0:e.grandTotal)||0)}),je&&"false"==de&&(0,E.jsx)("td",{className:"tableData",children:(null===e||void 0===e||null===(o=e.latestCommment)||void 0===o?void 0:o.message)||"-"}),je&&"false"==de&&(0,E.jsx)("td",{className:"tableData",children:(0,E.jsx)("span",{className:"px-2 py-1 whitespace-nowrap rounded text-xs font-[500] ".concat("PendingPayment"===(null===e||void 0===e?void 0:e.status)?"bg-rose-100 border-[1px] border-rose-400 text-rose-700":"bg-green-100 border-[1px] border-green-400 text-green-700"),children:"PendingPayment"===(null===e||void 0===e?void 0:e.status)?"Payment Pending":null===e||void 0===e?void 0:e.status})}),(je||Ne||be)&&"false"==de&&(0,E.jsx)("td",{className:"tableData",children:(0,E.jsxs)("span",{className:"py-1.5 flex justify-start items-center space-x-2.5",children:[(0,E.jsx)(j.A,{placement:"topLeft",title:"Download Invoice",children:be&&(0,E.jsx)("button",{onClick:()=>n("/admin/viewInvoice?invoiceId=".concat((0,v.w)(null===e||void 0===e?void 0:e._id),"&type=invoice&downloadPdfPath=").concat(null!==e&&void 0!==e&&e.invoicePDFPath?(0,v.w)(null===e||void 0===e?void 0:e.invoicePDFPath):"")),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,E.jsx)(g.Ny1,{className:"hover:text-header text-header",size:15})})}),(0,E.jsx)(j.A,{placement:"topLeft",title:"Comment",children:be&&(0,E.jsx)("button",{onClick:()=>q({isOpen:!0,data:e}),className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,E.jsx)(g.j1Q,{className:"hover:text-header text-header",size:15})})}),(0,E.jsx)(j.A,{placement:"topLeft",title:"More Actions",children:(0,E.jsx)(N.A,{menu:{items:[je&&{key:"edit",label:"PendingPayment"===(null===e||void 0===e?void 0:e.status)&&je?(0,E.jsxs)("span",{onClick:()=>{window.location.href="/admin/invoice/edit/".concat((0,v.w)(null===e||void 0===e?void 0:e._id))},className:"flex items-center text-[#3c8dbc] hover:text-[#337ab7]",children:[(0,E.jsx)(d.Jcp,{className:"mr-2",size:16}),"Edit"]}):(0,E.jsxs)("span",{className:"flex items-center text-gray-500 cursor-not-allowed",children:[(0,E.jsx)(d.Jcp,{className:"mr-2",size:16}),"Paid (No Actions)"]})},Ne&&{key:"delete",label:"Paid"!==(null===e||void 0===e?void 0:e.status)&&Ne?(0,E.jsxs)("span",{onClick:()=>(e=>{let t={_id:e};u().fire({title:"Select Reason for Deletion",html:'\n    <select id="remark-select"\n      class="swal2-select"\n      style="\n        width: 250px;\n        height: 40px;\n        font-size: 14px;\n        background-color: #f5f5f5;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        box-sizing: border-box;\n        margin-top: 10px;\n        outline: none;\n      "\n    >\n      <option value="">-- Please Select --</option>\n      <option value="Invoice wrongly created">Invoice wrongly created</option>\n      <option value="Invoice double created">Invoice double created</option>\n      <option value="Fee overdue more than 30 days">Fee overdue more than 30 days</option>\n    </select>\n  ',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"No",preConfirm:()=>document.getElementById("remark-select").value||(u().showValidationMessage("Please select a reason"),!1)}).then(e=>{if(e.isConfirmed){const n=e.value;t.remark=n,c((0,x.n1)(t)).then(()=>{ge()})}})})(null===e||void 0===e?void 0:e._id),className:"flex items-center text-red-600 hover:text-red-500",children:[(0,E.jsx)(r.tqC,{className:"mr-2",size:16}),"Delete"]}):(0,E.jsxs)("span",{className:"flex items-center text-gray-500 cursor-not-allowed",children:[(0,E.jsx)(r.tqC,{className:"mr-2",size:16}),"Paid (No Actions)"]})},{key:"created-by",label:(0,E.jsxs)("span",{onClick:()=>(0,p.v2)((null===e||void 0===e?void 0:e.createdBy)||"Data not available"),className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,E.jsx)(_.cCX,{className:"mr-2",size:16}),"Created By"]})},{key:"send-email",label:(0,E.jsxs)("span",{onClick:()=>(e=>{var t,n;const o='\n<div style="font-family: Arial, sans-serif; color: #333;">\n<h2>Invoice #'.concat(null===e||void 0===e?void 0:e.invoiceNumber,"</h2>\n<p>Dear ").concat(null===e||void 0===e||null===(t=e.clientData)||void 0===t?void 0:t.fullName,',</p>\n<p>Please find your invoice attached.</p>\n\n\x3c!-- Optional: iframe preview (note: most email clients block this) --\x3e\n<p><strong>Invoice Preview:</strong></p>\n<a href="').concat(null===e||void 0===e?void 0:e.invoicePDFurl,'" target="_blank" style="color: #1a73e8;">View Invoice</a>\n\n\x3c!-- Download Button (styled as link because buttons aren\'t reliable in email) --\x3e\n<p>\n<a href="').concat(null===e||void 0===e?void 0:e.invoicePDFurl,'" download style="\ndisplay: inline-block;\npadding: 10px 15px;\nbackground-color: #4CAF50;\ncolor: white;\ntext-decoration: none;\nborder-radius: 5px;\n">\nDownload Invoice PDF\n</a>\n</p>\n\n<hr>\n<p>Thank you<br></p>\n</div>\n');c((0,O.MD)({content:o,to:null===e||void 0===e||null===(n=e.clientData)||void 0===n?void 0:n.email,cc:[],subject:"Invoice ".concat(null===e||void 0===e?void 0:e.invoiceNumber),attachments:[]})).then(e=>{e.error||u().fire({icon:"success",title:"Email Sent",html:"<p>Invoice sent to Client</p>",confirmButtonColor:"#3085d6"})})})(e),className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,E.jsx)(S.mm2,{className:"mr-2",size:16}),"send Invoice Mail"]})},{key:"View Invoice",label:(0,E.jsxs)("span",{onClick:()=>{if(null!==e&&void 0!==e&&e.invoicePDFPath){const t="".concat("https://vigapi.vigorousit.com","/public").concat(null===e||void 0===e?void 0:e.invoicePDFPath),n=document.createElement("a");n.href=t,n.target="_blank",n.rel="noopener noreferrer",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},className:"flex items-center text-sky-800 hover:text-sky-700",children:[(0,E.jsx)(g.WCW,{className:"mr-2",size:16}),"Downlaod Invoice"]})}]},trigger:["click"],children:(0,E.jsx)("button",{className:"px-2 py-1.5 text-xs rounded-md bg-transparent border border-muted",type:"button",children:(0,E.jsx)(I.xWf,{className:"hover:text-[#337ab7] text-[#3c8dbc]",size:16})})})})]})}),"true"==de&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("td",{className:"tableData",children:null!==e&&void 0!==e&&e.remark?null===e||void 0===e?void 0:e.remark:"-"}),(0,E.jsx)("td",{className:"tableData",children:null!==e&&void 0!==e&&e.updatedBy?null===e||void 0===e?void 0:e.updatedBy:"-"}),(0,E.jsx)("td",{className:"tableData",children:null!==e&&void 0!==e&&e.updatedAt?k()(null===e||void 0===e?void 0:e.updatedAt).format("DD-MM-YYYY hh:mm a"):"-"})]})]})}):(0,E.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,E.jsx)("td",{colSpan:5,className:"px-6 py-2 whitespace-nowrap font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(null===C||void 0===C?void 0:C.length)>0&&(0,E.jsx)(m.A,{totalCount:L,pageSize:ae,currentPage:ne,onChange:e=>oe(e)}),(0,E.jsx)(F,{data:null===J||void 0===J?void 0:J.data,isOpen:null===J||void 0===J?void 0:J.isOpen,status:null===J||void 0===J||null===(t=J.data)||void 0===t?void 0:t.status,onToggle:()=>q({isOpen:!1,data:null})})]})})}}}]);
//# sourceMappingURL=3460.55b5a2af.chunk.js.map