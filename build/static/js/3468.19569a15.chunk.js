"use strict";(self.webpackChunkca_admin=self.webpackChunkca_admin||[]).push([[3468],{3468:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var i=n(89379),l=n(24858),o=n(83003),a=n(15187),s=n(65043),d=n(31744),r=n(39160),c=n(97326),u=n(65512),h=n(96651),p=(n(86178),n(60446)),v=n.n(p),m=n(78227),x=n(12106),w=(n(42837),n(94084),n(69223)),N=n(55971),f=n(50822),y=n(6720),g=n(37762),j=n(64857),S=(n(11906),n(33007),n(89427),n(70337),n(40088),n(12208),n(27744),n(17995),n(76932),n(487)),b=n(70579);const{RangePicker:T}=S.A;const D=function(){const{control:e,formState:{errors:t},setValue:n,watch:p}=(0,l.mN)(),{RangePicker:T}=S.A,D=e=>{},[G,I]=(0,s.useState)(10),A=(0,o.wA)(),{invoiceGstReturnSalesReportList:k,invoiceGstReturnSalesReportFunc_loading:C,invoiceGstReturnSalesReportCount:R}=(0,o.d4)(e=>e.reports),{departmentListData:F,loading:P}=(0,o.d4)(e=>e.department),[H,Y]=(0,s.useState)({}),[z,E]=(0,s.useState)(""),L=JSON.parse(localStorage.getItem("user_info_".concat(a.AU))),{industryListData:O,indusSearchloading:V}=(0,o.d4)(e=>e.industry),{orgTypeList:M,orgSearchloading:_}=(0,o.d4)(e=>e.orgType),[K,B]=(0,s.useState)(1),[U,W]=(0,s.useState)(""),{branchList:q}=(0,o.d4)(e=>e.branch),J=(0,l.FH)({control:e,name:"PDCompanyId",defaultValue:""}),Q=(0,l.FH)({control:e,name:"PDBranchId",defaultValue:""}),X=(0,l.FH)({control:e,name:"status",defaultValue:""}),Z=(0,l.FH)({control:e,name:"PDOrganizationType",defaultValue:""}),$=(0,l.FH)({control:e,name:"PDindustrytype",defaultValue:""}),ee=(0,l.FH)({control:e,name:"department",defaultValue:""}),te=(0,l.FH)({control:e,name:"groupName",defaultValue:""}),ne=(0,l.FH)({control:e,name:"time",defaultValue:[]});(0,s.useEffect)(()=>{const e=setTimeout(()=>{W(z)},500);return()=>{clearTimeout(e)}},[z]),(()=>{const e=[];for(let t=2005;t<=2034;t++)e.push("".concat(t,"-").concat(t+1))})();const ie=function(){return{currentPage:K,pageSize:G,reqPayload:{text:U,sort:!0,isPagination:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?J:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId,directorId:"",branchId:"company"===(null===L||void 0===L?void 0:L.userType)||"admin"===(null===L||void 0===L?void 0:L.userType)||"companyDirector"===(null===L||void 0===L?void 0:L.userType)?Q:"companyBranch"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.branchId,status:"true"==X||"false"!=X&&"",organizationId:Z,organizationIds:[],departmentId:ee,departmentIds:[],industryId:$,industryIds:[],groupId:te,groupIds:[],startDate:(null===ne||void 0===ne?void 0:ne.length)>0&&ne[0]?v()(ne[0]).format("YYYY-MM-DD"):"",endDate:(null===ne||void 0===ne?void 0:ne.length)>1&&ne[1]?v()(ne[1]).format("YYYY-MM-DD"):""}}};(0,s.useEffect)(()=>{le(U)},[K,U,G]);const le=()=>{A((0,x.Up)(ie(!0)))},[oe,ae]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"company"!==(null===L||void 0===L?void 0:L.userType)&&"companyDirector"!==(null===L||void 0===L?void 0:L.userType)||A((0,d.d0)({text:"",sort:!0,status:!0,isPagination:!1,companyId:"admin"===(null===L||void 0===L?void 0:L.userType)?J:"company"===(null===L||void 0===L?void 0:L.userType)?null===L||void 0===L?void 0:L._id:null===L||void 0===L?void 0:L.companyId})),n("startDate",v()().subtract(1,"month")),n("endDate",v()())},[]);const se=async()=>{le()},de=[{key:"1",label:(0,b.jsx)("span",{className:"text-white",children:"Advance Filters"}),children:(0,b.jsxs)("div",{className:"bg-[#ececec] space-y-1 sm:flex justify-between items-center ",children:[(0,b.jsx)("div",{children:(0,b.jsx)(l.xI,{name:"time",control:e,render:e=>{let{field:t}=e;return(0,b.jsx)(T,(0,i.A)((0,i.A)({},t),{},{value:t.value,onChange:e=>t.onChange(e),format:"YYYY-MM-DD",onOk:D,getPopupContainer:()=>document.body,popupClassName:"vertical-range-calendar",className:"custom-range-picker"}))}})}),(0,b.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{n("PDCompanyId",""),n("PDBranchId",""),n("status",""),n("PDOrganizationType",""),n("PDindustrytype",""),n("department",""),n("groupName",""),n("time",""),se()},className:"bg-header py-2 my-0.5 rounded-md flex px-10 justify-center items-center text-white",children:(0,b.jsx)("span",{className:"text-[12px]",children:"Reset"})}),(0,b.jsx)("button",{onClick:()=>{se()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,b.jsx)("span",{className:"text-[12px]",children:"Submit"})})]})]})}];return(0,b.jsx)(r.A,{onChange:e=>{E(e)},children:(0,b.jsxs)("div",{className:"bg-grey-100 w-full p-1",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)(c.A,{className:"custom-collapse",items:de,defaultActiveKey:[1],expandIcon:e=>{let{isActive:t}=e;return(0,b.jsx)(y.WnU,{size:20,style:{color:"white",transform:t?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})}}),(0,b.jsxs)("div",{className:"space-y-1.5 sm:flex grid grid-cols-1 justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex py-1 items-center gap-2",children:[(0,b.jsx)("span",{htmlFor:"pageSize",className:"text-sm font-light text-gray-500",children:"Rows per page:"}),(0,b.jsx)(u.A,{id:"pageSize",value:G,onChange:e=>{I(Number(e)),B(Number(1))},className:"text-sm font-light text-gray-700 bg-white border border-gray-200 rounded-md px-3 py-1.5 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300 transition",children:a.qc.map(e=>(0,b.jsx)(u.A.Option,{value:e,children:e},e))})]}),(0,b.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{(async()=>{var e,t;const n=new g.uE({orientation:"landscape",unit:"pt"});n.setFontSize(16);const i=await(null===f.K||void 0===f.K?void 0:f.K.invoiceGstReturnSalesReportFunc(ie(!1)));if(!k&&!i)return;const l=null===i||void 0===i||null===(e=i.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var n,i,l,o;return[t+1,(null===e||void 0===e||null===(n=e.invoiceLayoutData)||void 0===n?void 0:n.firmName)||"-",(null===e||void 0===e?void 0:e.invoiceNumber)||"-",(null===e||void 0===e?void 0:e.clientName)||"-",(null===e||void 0===e||null===(i=e.task)||void 0===i?void 0:i.taskName)||"-",(null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.HSNCode)||"-",(null===e||void 0===e?void 0:e.grandTotal)||"-",(null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.GSTRate)||"-",(null===e||void 0===e?void 0:e.IGST)||"-",(null===e||void 0===e?void 0:e.CGST)||"-",(null===e||void 0===e?void 0:e.SGST)||"-",(null===e||void 0===e?void 0:e.totalAmount)||"-"]});(0,j.Ay)(n,{startY:40,head:[["S.No.","Layout Name","Invoice Number","Client Name","Description","HSNCODE","After Discount Amount","Rate of Gst","IGST","CGST","SGST","Total/Invoice Amount"]],body:l,margin:{horizontal:10},styles:{cellPadding:8,fontSize:10,valign:"middle",halign:"left"},headStyles:{fillColor:[211,211,211],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]}}),n.save("FinanceInvoiceGstReturnSalesReport.pdf")})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,b.jsx)("span",{className:"text-[12px]",children:"Export PDF"})}),(0,b.jsx)("button",{onClick:()=>{(async()=>{var e,t;const n=new w.Workbook,i=n.addWorksheet("FinanceInvoiceGstReturnSalesReport");i.columns=[{header:"S.No.",key:"sno",width:10},{header:"Layout Name",key:"layoutName",width:30},{header:"Invoice Number",key:"invoiceNumber",width:30},{header:"Client Name",key:"clientName",width:25},{header:"Description",key:"description",width:30},{header:"HSNCODE",key:"HSNCode",width:30},{header:"After Discount Amount",key:"afterDiscountAmount",width:20},{header:"Rate of Gst",key:"rateOfGst",width:20},{header:"IGST",key:"igst",width:20},{header:"CGST",key:"cgst",width:15},{header:"SGST",key:"sgst",width:15},{header:"Total/Invoice Amount",key:"totalInvoiceAmount",width:15}],i.getRow(1).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFB6D7A8"}},e.font={bold:!0},e.alignment={vertical:"middle",horizontal:"center"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const l=await(null===f.K||void 0===f.K?void 0:f.K.invoiceGstReturnSalesReportFunc(ie(!1)));if(!k&&!l)return;const o=null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.map((e,t)=>{var n,i,l,o;return{sno:t+1,layoutName:(null===e||void 0===e||null===(n=e.invoiceLayoutData)||void 0===n?void 0:n.firmName)||"-",invoiceNumber:(null===e||void 0===e?void 0:e.invoiceNumber)||"-",clientName:(null===e||void 0===e?void 0:e.clientName)||"-",description:(null===e||void 0===e||null===(i=e.task)||void 0===i?void 0:i.taskName)||"-",HSNCode:(null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.HSNCode)||"-",afterDiscountAmount:(null===e||void 0===e?void 0:e.grandTotal)||"-",rateOfGst:(null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.GSTRate)||"-",igst:(null===e||void 0===e?void 0:e.IGST)||"-",cgst:(null===e||void 0===e?void 0:e.CGST)||"-",sgst:(null===e||void 0===e?void 0:e.SGST)||"-",totalInvoiceAmount:(null===e||void 0===e?void 0:e.totalAmount)||"-"}});null===o||void 0===o||o.forEach(e=>{i.addRow(e).eachCell(e=>{e.alignment={vertical:"middle",horizontal:"left"},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),i.autoFilter={from:"A1",to:"I1"},n.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="FinanceInvoiceGstReturnSalesReport.xlsx",n.click()})})()},className:"bg-header  py-2 my-0.5 rounded-md flex px-10 justify-center items-center  text-white",children:(0,b.jsx)("span",{className:"text-[12px]",children:"Export Excel"})})]})]})]}),(0,b.jsx)("div",{className:"bg-[#ffffff]  w-full overflow-x-auto mt-1 rounded-xl",children:(0,b.jsxs)("table",{className:"w-full max-w-full rounded-xl overflow-x-auto",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b-[1px] border-[#DDDDDD] capitalize text-[12px] bg-header text-white font-[500] h-[40px]",children:[(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap  w-[5%]",children:"S.No."}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Entry Date"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Layout Name"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Invoice Number"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Client Name "}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"Description "}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap ",children:"HSN CODE "}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"After Discount Amount"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"Rate of GST"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"IGST"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"CGST"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"SGST"}),(0,b.jsx)("th",{className:"border-none p-2 whitespace-nowrap text-right",children:"Total/Invoice Amount"})]})}),C?(0,b.jsx)("tr",{className:"bg-white bg-opacity-5 ",children:(0,b.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:(0,b.jsx)(N.A,{})})}):(0,b.jsx)("tbody",{children:k&&(null===k||void 0===k?void 0:k.length)>0?null===k||void 0===k?void 0:k.map((e,t)=>{var n,i,l,o,s,d,r;return(0,b.jsxs)("tr",{className:"border-b-[1px] ".concat(t%2===0?"bg-[#e9ecef]/80":"bg-white"," border-[#DDDDDD] text-[#374151] text-[14px]"),children:[(0,b.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:t+1+(K-1)*G}),(0,b.jsx)("td",{className:"whitespace-nowrap  border-none p-2",children:v()(null===e||void 0===e?void 0:e.createdAt).format("DD-MM-YYYY hh:mm a")||"-"}),(0,b.jsx)("td",{className:"whitespace-nowrap   border-none p-2",children:(null===e||void 0===e||null===(n=e.invoiceLayoutData)||void 0===n?void 0:n.firmName)||"-"}),(0,b.jsx)("td",{className:"border-none p-2",children:(0,b.jsx)("div",{className:"max-w-[150px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:(null===e||void 0===e?void 0:e.invoiceNumber)||"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:(null===e||void 0===e?void 0:e.invoiceNumber)||"-"})})})}),(0,b.jsx)("td",{className:"border-none p-2",children:(0,b.jsx)("div",{className:"max-w-[150px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:(null===e||void 0===e?void 0:e.clientName)||"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap capitalize",children:(null===e||void 0===e?void 0:e.clientName)||"-"})})})}),(0,b.jsx)("td",{className:"border-none p-2",children:(0,b.jsx)("div",{className:"max-w-[200px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:(null===e||void 0===e||null===(i=e.task)||void 0===i?void 0:i.taskName)||"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:(null===e||void 0===e||null===(l=e.task)||void 0===l?void 0:l.taskName)||"-"})})})}),(0,b.jsx)("td",{className:"border-none p-2",children:(0,b.jsx)("div",{className:"max-w-[100px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:(null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.HSNCode)||"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:(null===e||void 0===e||null===(s=e.task)||void 0===s?void 0:s.HSNCode)||"-"})})})}),(0,b.jsx)("td",{className:"border-none p-2 text-right",children:(0,b.jsx)("div",{className:"max-w-[120px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:(0,a.w2)(null===e||void 0===e?void 0:e.grandTotal)||"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:(0,a.w2)(null===e||void 0===e?void 0:e.grandTotal)||"-"})})})}),(0,b.jsx)("td",{className:"border-none p-2 text-right",children:(0,b.jsx)("div",{className:"max-w-[80px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:"".concat(null===e||void 0===e||null===(d=e.task)||void 0===d?void 0:d.GSTRate," %")||0,children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:"".concat(null===e||void 0===e||null===(r=e.task)||void 0===r?void 0:r.GSTRate," %")||0})})})}),(0,b.jsx)("td",{className:"border-none p-2 text-right",children:(0,b.jsx)("div",{className:"max-w-[100px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:null!==e&&void 0!==e&&e.isIGST&&(0,a.w2)(null===e||void 0===e?void 0:e.IGST)?(0,a.w2)(null===e||void 0===e?void 0:e.IGST):"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:null!==e&&void 0!==e&&e.isIGST&&(0,a.w2)(null===e||void 0===e?void 0:e.IGST)?(0,a.w2)(null===e||void 0===e?void 0:e.IGST):"-"})})})}),(0,b.jsx)("td",{className:"border-none p-2 text-right",children:(0,b.jsx)("div",{className:"max-w-[100px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:null!==e&&void 0!==e&&e.isIGST||null===e||void 0===e||!e.CGST?"-":(0,a.w2)(null===e||void 0===e?void 0:e.CGST),children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:null!==e&&void 0!==e&&e.isIGST||null===e||void 0===e||!e.CGST?"-":(0,a.w2)(null===e||void 0===e?void 0:e.CGST)})})})}),(0,b.jsx)("td",{className:"border-none p-2 text-right",children:(0,b.jsx)("div",{className:"max-w-[100px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:null!==e&&void 0!==e&&e.isIGST||null===e||void 0===e||!e.SGST?"-":(0,a.w2)(null===e||void 0===e?void 0:e.SGST),children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:null!==e&&void 0!==e&&e.isIGST||null===e||void 0===e||!e.SGST?"-":(0,a.w2)(null===e||void 0===e?void 0:e.SGST)})})})}),(0,b.jsx)("td",{className:"border-none p-2 text-right",children:(0,b.jsx)("div",{className:"max-w-[120px] overflow-hidden text-ellipsis",children:(0,b.jsx)(h.A,{title:(0,a.w2)(null===e||void 0===e?void 0:e.totalAmount)||"-",children:(0,b.jsx)("span",{className:"whitespace-nowrap",children:(0,a.w2)(null===e||void 0===e?void 0:e.totalAmount)||"-"})})})})]})}):(0,b.jsx)("tr",{className:"bg-white bg-opacity-5",children:(0,b.jsx)("td",{colSpan:15,className:"px-6 py-2 whitespace-nowrap  font-[600] text-sm text-gray-500",children:"Record Not Found"})})})]})}),(0,b.jsx)(m.A,{totalCount:R,pageSize:G,currentPage:K,onChange:e=>{B(e)}})]})})}}}]);
//# sourceMappingURL=3468.19569a15.chunk.js.map